// node_modules/@pqina/pintura/pintura.js
var e = [{ value: 65504, name: "jfif" }, { value: 65498, name: "sos" }, { value: 65505, subvalue: 17784, name: "exif" }, { value: 65505, subvalue: 26740, name: "xmp" }, { value: 65506, subvalue: 19792, name: "mpf" }];
var t = (t2) => {
  if (65496 !== t2.getUint16(0))
    return;
  const o2 = t2.byteLength;
  let i2, n2 = 2, r2 = void 0;
  for (; n2 < o2 && 255 === t2.getUint8(n2); ) {
    i2 = t2.getUint16(n2);
    const o3 = e.find((e2) => e2.value === i2 && (!e2.subvalue || e2.subvalue === t2.getUint16(n2 + 2 + 2)));
    if (o3) {
      const { name: e2 } = o3;
      r2 || (r2 = {}), r2[e2] || (r2[e2] = { offset: n2, size: t2.getUint16(n2 + 2) });
    }
    if (65498 === i2)
      break;
    n2 += 2 + t2.getUint16(n2 + 2);
  }
  return r2;
};
var o = (e2, o2, i2) => {
  if (!e2)
    return;
  const n2 = new DataView(e2), r2 = t(n2);
  if (!r2 || !r2.exif)
    return;
  const a2 = ((e3, t2) => {
    if (65505 !== e3.getUint16(t2))
      return;
    const o3 = e3.getUint16(t2 + 2);
    if (t2 += 4, 1165519206 !== e3.getUint32(t2))
      return;
    t2 += 6;
    const i3 = e3.getUint16(t2);
    if (18761 !== i3 && 19789 !== i3)
      return;
    const n3 = 18761 === i3;
    if (t2 += 2, 42 !== e3.getUint16(t2, n3))
      return;
    t2 += e3.getUint32(t2 + 2, n3);
    const r3 = (i4) => {
      const r4 = [];
      let a3 = t2;
      const s2 = Math.min(e3.byteLength, t2 + o3 - 16);
      for (; a3 < s2; a3 += 12) {
        const t3 = a3;
        e3.getUint16(t3, n3) === i4 && r4.push(t3);
      }
      return r4;
    };
    return { read: (t3) => {
      const o4 = r3(t3);
      if (o4.length)
        return e3.getUint16(o4[0] + 8, n3);
    }, write: (t3, o4) => {
      const i4 = r3(t3);
      return !!i4.length && (i4.forEach((t4) => e3.setUint16(t4 + 8, o4, n3)), true);
    } };
  })(n2, r2.exif.offset);
  return a2 ? void 0 === i2 ? a2.read(o2) : a2.write(o2, i2) : void 0;
};
var i = (e2) => window.__pqina_webapi__ ? window.__pqina_webapi__[e2] : window[e2];
var n = (...e2) => {
};
var r = { ArrayBuffer: "readAsArrayBuffer" };
var a = async (e2, t2 = [0, e2.size], o2) => await ((e3, t3 = n, o3 = {}) => new Promise((n2, a2) => {
  const { dataFormat: s2 = r.ArrayBuffer } = o3, l2 = new (i("FileReader"))();
  l2.onload = () => n2(l2.result), l2.onerror = () => a2(l2.error), l2.onprogress = t3, l2[s2](e3);
}))(e2.slice(...t2), o2);
var s = async (e2, t2) => {
  const i2 = await a(e2, [0, 262144], t2);
  return o(i2, 274) || 1;
};
var l = null;
var c = () => (null === l && (l = "undefined" != typeof window && void 0 !== window.document), l);
var d = null;
var u = () => new Promise((e2) => {
  if (null === d) {
    const t2 = "data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEASABIAAD/4QA6RXhpZgAATU0AKgAAAAgAAwESAAMAAAABAAYAAAEoAAMAAAABAAIAAAITAAMAAAABAAEAAAAAAAD/2wBDAP//////////////////////////////////////////////////////////////////////////////////////wAALCAABAAIBASIA/8QAJgABAAAAAAAAAAAAAAAAAAAAAxABAAAAAAAAAAAAAAAAAAAAAP/aAAgBAQAAPwBH/9k=";
    let o2 = c() ? new Image() : {};
    return o2.onload = () => {
      d = 1 === o2.naturalWidth, o2 = void 0, e2(d);
    }, void (o2.src = t2);
  }
  return e2(d);
});
var h = (e2) => e2.getContext("2d").getImageData(0, 0, e2.width, e2.height);
var p = (e2, t2, o2 = []) => {
  const i2 = document.createElement(e2), n2 = Object.getOwnPropertyDescriptors(i2.__proto__);
  for (const e3 in t2)
    "style" === e3 ? i2.style.cssText = t2[e3] : n2[e3] && n2[e3].set || /textContent|innerHTML/.test(e3) || "function" == typeof t2[e3] ? i2[e3] = t2[e3] : i2.setAttribute(e3, t2[e3]);
  return o2.forEach((e3) => i2.appendChild(e3)), i2;
};
var m = { 1: () => [1, 0, 0, 1, 0, 0], 2: (e2) => [-1, 0, 0, 1, e2, 0], 3: (e2, t2) => [-1, 0, 0, -1, e2, t2], 4: (e2, t2) => [1, 0, 0, -1, 0, t2], 5: () => [0, 1, 1, 0, 0, 0], 6: (e2, t2) => [0, 1, -1, 0, t2, 0], 7: (e2, t2) => [0, -1, -1, 0, t2, e2], 8: (e2) => [0, -1, 1, 0, 0, e2] };
var g = (e2) => {
  e2.width = 1, e2.height = 1;
  const t2 = e2.getContext("2d");
  t2 && t2.clearRect(0, 0, 1, 1);
};
var $ = (e2) => "data" in e2;
var f = (e2) => c() ? RegExp(e2).test(window.navigator.userAgent) : void 0;
var y = null;
var b = () => (null === y && (y = f(/Android/)), y);
var x = (e2, t2) => {
  const o2 = p("canvas", { width: e2.width, height: e2.height });
  return o2.getContext("2d", t2).drawImage(e2, 0, 0), o2;
};
var v = async (e2, t2 = 1) => {
  const o2 = await u(), [i2, n2] = o2 || t2 < 5 ? [e2.width, e2.height] : [e2.height, e2.width], r2 = p("canvas", { width: i2, height: n2 }), a2 = r2.getContext("2d", { willReadFrequently: true });
  if ($(e2) && !o2 && t2 > 1) {
    const t3 = p("canvas", { width: e2.width, height: e2.height });
    t3.getContext("2d", { willReadFrequently: true }).putImageData(e2, 0, 0), e2 = t3;
  }
  if (!o2 && t2 > 1 && a2.transform.apply(a2, ((e3, t3, o3 = -1) => (-1 === o3 && (o3 = 1), m[o3](e3, t3)))(e2.width, e2.height, t2)), $(e2)) {
    if (a2.putImageData(e2, 0, 0), b())
      return x(r2);
  } else
    a2.drawImage(e2, 0, 0);
  return e2 instanceof HTMLCanvasElement && g(e2), r2;
};
var w = async (e2, t2 = 1) => 1 === t2 || await u() ? e2 : h(await v(e2, t2));
var S = (e2) => "object" == typeof e2;
var k = (e2) => e2 instanceof HTMLElement ? e2 : S(e2) ? C(e2) : e2;
var C = (e2) => {
  let t2;
  return Array.isArray(e2) ? (t2 = [], e2.forEach((e3, o2) => {
    t2[o2] = k(e3);
  })) : (t2 = {}, Object.keys(e2).forEach((o2) => {
    const i2 = e2[o2];
    t2[o2] = k(i2);
  })), t2;
};
var M = (e2) => "string" == typeof e2;
var T = (e2) => "function" == typeof e2;
var P = (e2, t2) => new Promise((o2, i2) => {
  const n2 = () => o2(((e3, { width: t3, height: o3, canvasMemoryLimit: i3, contextOptions: n3 }) => {
    let r2 = t3 || e3.naturalWidth, a2 = o3 || e3.naturalHeight;
    r2 || a2 || (r2 = 300, a2 = 150);
    const s2 = r2 * a2;
    if (i3 && s2 > i3) {
      const e4 = Math.sqrt(i3) / Math.sqrt(s2);
      r2 = Math.floor(r2 * e4), a2 = Math.floor(a2 * e4);
    }
    const l2 = p("canvas");
    return l2.width = r2, l2.height = a2, l2.getContext("2d", n3).drawImage(e3, 0, 0, r2, a2), l2;
  })(e2, t2));
  e2.complete && e2.width ? n2() : (e2.onload = n2, e2.onerror = () => i2(new Error("Failed to load image")));
});
var R = () => "createImageBitmap" in window;
var I = (e2) => /svg/.test(e2.type);
var A = () => Math.random().toString(36).substr(2, 9);
var E = /* @__PURE__ */ new Map();
var L = (e2, t2, o2) => new Promise((i2, n2) => {
  const r2 = e2.toString();
  let a2 = E.get(r2);
  if (!a2) {
    const t3 = ((e3) => `function () {self.onmessage = function (message) {(${e3.toString()}).apply(null, message.data.content.concat([function (err, response) {
    response = response || {};
    const transfer = 'data' in response ? [response.data.buffer] : 'width' in response ? [response] : [];
    return self.postMessage({ id: message.data.id, content: response, error: err }, transfer);
}]))}}`)(e2), o3 = URL.createObjectURL(((e3) => new Blob(["(", "function" == typeof e3 ? e3.toString() : e3, ")()"], { type: "application/javascript" }))(t3)), i3 = /* @__PURE__ */ new Map(), n3 = new Worker(o3);
    a2 = { url: o3, worker: n3, messages: i3, terminationTimeout: void 0, terminate: () => {
      clearTimeout(a2.terminationTimeout), a2.worker.terminate(), URL.revokeObjectURL(o3), E.delete(r2);
    } }, n3.onmessage = function(e3) {
      const { id: t4, content: o4, error: n4 } = e3.data;
      if (clearTimeout(a2.terminationTimeout), a2.terminationTimeout = setTimeout(() => {
        i3.size > 0 || a2.terminate();
      }, 500), !i3.has(t4))
        return;
      const r3 = i3.get(t4);
      i3.delete(t4), null != n4 ? r3.reject(n4) : r3.resolve(o4);
    }, E.set(r2, a2);
  }
  const s2 = A();
  a2.messages.set(s2, { resolve: i2, reject: n2 }), a2.worker.postMessage({ id: s2, content: t2 }, o2);
});
var F = async (e2, t2) => {
  const o2 = async () => {
    const o3 = await (async (e3, t3) => {
      const o4 = p("img", { src: URL.createObjectURL(e3) }), i4 = await P(o4, t3);
      return URL.revokeObjectURL(o4.src), i4;
    })(e2, { canvasMemoryLimit: t2, contextOptions: { willReadFrequently: true } }), i3 = h(o3);
    return g(o3), i3;
  };
  if (b())
    return await o2();
  let i2;
  if (R() && !I(e2) && "OffscreenCanvas" in window)
    try {
      i2 = await L((e3, t3, o3) => {
        createImageBitmap(e3).then((e4) => {
          let i3 = e4.width, n2 = e4.height;
          const r2 = i3 * n2;
          if (t3 && r2 > t3) {
            const e5 = Math.sqrt(t3) / Math.sqrt(r2);
            i3 = Math.floor(i3 * e5), n2 = Math.floor(n2 * e5);
          }
          const a2 = new OffscreenCanvas(i3, n2), s2 = a2.getContext("2d", { willReadFrequently: true });
          s2.drawImage(e4, 0, 0, i3, n2);
          const l2 = s2.getImageData(0, 0, a2.width, a2.height);
          o3(null, l2);
        }).catch((e4) => {
          o3(e4);
        });
      }, [e2, t2]);
    } catch (e3) {
    }
  return i2 && i2.width ? i2 : await o2();
};
var z = (e2, t2, o2) => new Promise((i2, n2) => {
  try {
    e2.toBlob((e3) => {
      if (!e3)
        return n2(new Error("Failed to create blob"));
      i2(e3);
    }, t2, o2);
  } catch (e3) {
    n2(e3);
  }
});
var B = async (e2, t2, o2) => {
  const i2 = await v(e2), n2 = await z(i2, t2, o2);
  return g(i2), n2;
};
var O = { matroska: "mkv" };
var D = (e2) => {
  const t2 = (e2.match(/\/([a-z0-9]+)/) || [])[1];
  if (/^x/.test(t2)) {
    const [, t3 = ""] = e2.split("/x-");
    return O[t3];
  }
  return t2;
};
var W = (e2) => e2.substr(0, e2.lastIndexOf(".")) || e2;
var _ = /avif|bmp|gif|jpg|jpeg|jpe|jif|jfif|png|svg|tiff|webp/;
var V = (e2) => {
  return e2 && (t2 = (o2 = e2, o2.split(".").pop()).toLowerCase(), _.test(t2) ? "image/" + (/jfif|jif|jpe|jpg/.test(t2) ? "jpeg" : "svg" === t2 ? "svg+xml" : t2) : "");
  var t2, o2;
};
var N = (e2, t2, o2) => {
  const n2 = (/* @__PURE__ */ new Date()).getTime(), r2 = e2.type.length && !/null|text/.test(e2.type), a2 = r2 ? e2.type : o2, s2 = ((e3, t3) => {
    const o3 = V(e3);
    if (o3 === t3)
      return e3;
    const i2 = D(t3) || o3;
    return `${W(e3)}.${i2}`;
  })(t2, a2);
  try {
    return new (i("File"))([e2], s2, { lastModified: n2, type: r2 ? e2.type : a2 });
  } catch (t3) {
    const o3 = r2 ? e2.slice() : e2.slice(0, e2.size, a2);
    return o3.lastModified = n2, o3.name = s2, o3;
  }
};
var H = (e2, t2) => e2 / t2;
var j = (e2) => e2;
var U = Math.PI;
var Z = Math.PI / 2;
var X = Z / 2;
var G = (e2) => {
  const t2 = Math.abs(e2) % Math.PI;
  return t2 > X && t2 < Math.PI - X;
};
var Y = { Top: "t", Right: "r", Bottom: "b", Left: "l", TopLeft: "tl", TopRight: "tr", BottomRight: "br", BottomLeft: "bl" };
var { Top: q, Right: K, Bottom: J, Left: Q, TopLeft: ee, TopRight: te, BottomRight: oe, BottomLeft: ie } = Y;
var ne = { [q]: [0.5, 0], [K]: [1, 0.5], [J]: [0.5, 1], [Q]: [0, 0.5], [ee]: [0, 0], [te]: [1, 0], [oe]: [1, 1], [ie]: [0, 1] };
var re = (e2, t2 = 12) => parseFloat(e2.toFixed(t2));
var ae = (e2, t2, o2) => o2 + (e2 - o2) * t2;
var se = (e2) => ({ x: e2.x + 0.5 * e2.width, y: e2.y + 0.5 * e2.height, rx: 0.5 * e2.width, ry: 0.5 * e2.height });
var le = () => ce(0, 0);
var ce = (e2, t2) => ({ x: e2, y: t2 });
var de = (e2) => ce(e2.pageX, e2.pageY);
var ue = (e2) => ce(e2.x, e2.y);
var he = (e2) => (e2.x = -e2.x, e2.y = -e2.y, e2);
var pe = (e2, t2, o2 = le()) => {
  const i2 = Math.cos(t2), n2 = Math.sin(t2), r2 = e2.x - o2.x, a2 = e2.y - o2.y;
  return e2.x = o2.x + i2 * r2 - n2 * a2, e2.y = o2.y + n2 * r2 + i2 * a2, e2;
};
var me = (e2) => Math.sqrt(e2.x * e2.x + e2.y * e2.y);
var ge = (e2) => {
  const t2 = Math.sqrt(e2.x * e2.x + e2.y * e2.y);
  return 0 === t2 ? le() : (e2.x /= t2, e2.y /= t2, e2);
};
var $e = (e2, t2) => Math.atan2(t2.y - e2.y, t2.x - e2.x);
var fe = (e2, t2) => e2.x === t2.x && e2.y === t2.y;
var ye = (e2, t2) => (e2.x = t2(e2.x), e2.y = t2(e2.y), e2);
var be = (e2, t2) => (e2.x += t2.x, e2.y += t2.y, e2);
var xe = (e2, t2) => (e2.x -= t2.x, e2.y -= t2.y, e2);
var ve = (e2, t2) => (e2.x /= t2, e2.y /= t2, e2);
var we = (e2, t2) => (e2.x *= t2, e2.y *= t2, e2);
var Se = (e2, t2) => e2.x * t2.x + e2.y * t2.y;
var ke = (e2, t2) => e2.x * t2.y - e2.y * t2.x;
var Ce = (e2, t2 = le()) => {
  const o2 = e2.x - t2.x, i2 = e2.y - t2.y;
  return o2 * o2 + i2 * i2;
};
var Me = (e2, t2 = le()) => Math.sqrt(Ce(e2, t2));
var Te = (e2, t2, o2) => (e2.x = ae(e2.x, t2, o2.x), e2.y = ae(e2.y, t2, o2.y), e2);
var Pe = (e2) => {
  let t2 = 0, o2 = 0;
  return e2.forEach((e3) => {
    t2 += e3.x, o2 += e3.y;
  }), ce(t2 / e2.length, o2 / e2.length);
};
var Re = (e2, t2, o2, i2, n2) => (e2.forEach((e3) => {
  e3.x = t2 ? i2 - (e3.x - i2) : e3.x, e3.y = o2 ? n2 - (e3.y - n2) : e3.y;
}), e2);
var Ie = (e2, t2, o2, i2) => {
  const n2 = Math.sin(t2), r2 = Math.cos(t2);
  return e2.forEach((e3) => {
    e3.x -= o2, e3.y -= i2;
    const t3 = e3.x * r2 - e3.y * n2, a2 = e3.x * n2 + e3.y * r2;
    e3.x = o2 + t3, e3.y = i2 + a2;
  }), e2;
};
var Ae = (e2, t2) => ({ width: e2, height: t2 });
var Ee = (e2) => Ae(e2.width, e2.height);
var Le = (e2) => Ae(e2.width, e2.height);
var Fe = (e2) => Ae(e2.width, e2.height);
var ze = (e2) => Ae(e2[0], e2[1]);
var Be = (e2) => {
  return /img/i.test(e2.nodeName) ? Ae((t2 = e2).naturalWidth, t2.naturalHeight) : Le(e2);
  var t2;
};
var Oe = (e2, t2) => Ae(e2, t2);
var De = (e2, t2, o2 = j) => o2(e2.width) === o2(t2.width) && o2(e2.height) === o2(t2.height);
var We = (e2, t2) => (e2.width *= t2, e2.height *= t2, e2);
var _e = (e2) => ce(0.5 * e2.width, 0.5 * e2.height);
var Ve = (e2, t2) => {
  const o2 = Math.abs(t2), i2 = Math.cos(o2), n2 = Math.sin(o2), r2 = i2 * e2.width + n2 * e2.height, a2 = n2 * e2.width + i2 * e2.height;
  return e2.width = r2, e2.height = a2, e2;
};
var Ne = (e2, t2) => e2.width >= t2.width && e2.height >= t2.height;
var He = (e2, t2) => (e2.width = t2(e2.width), e2.height = t2(e2.height), e2);
var je = (e2, t2) => ({ start: e2, end: t2 });
var Ue = (e2) => je(ue(e2.start), ue(e2.end));
var Ze = (e2, t2) => {
  if (0 === t2)
    return e2;
  const o2 = ce(e2.start.x - e2.end.x, e2.start.y - e2.end.y), i2 = ge(o2), n2 = we(i2, t2);
  return e2.start.x += n2.x, e2.start.y += n2.y, e2.end.x -= n2.x, e2.end.y -= n2.y, e2;
};
var Xe = [ce(-1, -1), ce(-1, 1), ce(1, 1), ce(1, -1)];
var Ge = (e2, t2, o2, i2) => ({ x: e2, y: t2, width: o2, height: i2 });
var Ye = (e2) => Ge(e2.x, e2.y, e2.width, e2.height);
var qe = () => Ge(0, 0, 0, 0);
var Ke = (e2) => Ge(0, 0, e2.width, e2.height);
var Je = (e2) => Ge(e2.x || 0, e2.y || 0, e2.width || 0, e2.height || 0);
var Qe = (e2) => {
  let t2 = e2[0].x, o2 = e2[0].x, i2 = e2[0].y, n2 = e2[0].y;
  return e2.forEach((e3) => {
    t2 = Math.min(t2, e3.x), o2 = Math.max(o2, e3.x), i2 = Math.min(i2, e3.y), n2 = Math.max(n2, e3.y);
  }), Ge(t2, i2, o2 - t2, n2 - i2);
};
var et = (e2) => ot(e2.x - e2.rx, e2.y - e2.ry, 2 * e2.rx, 2 * e2.ry);
var tt = (e2, t2) => Ge(e2.x - 0.5 * t2.width, e2.y - 0.5 * t2.height, t2.width, t2.height);
var ot = (e2, t2, o2, i2) => Ge(e2, t2, o2, i2);
var it = (e2) => ce(e2.x + 0.5 * e2.width, e2.y + 0.5 * e2.height);
var nt = (e2, t2) => (e2.x += t2.x, e2.y += t2.y, e2);
var rt = (e2, t2, o2) => (o2 = o2 || it(e2), e2.x = t2 * (e2.x - o2.x) + o2.x, e2.y = t2 * (e2.y - o2.y) + o2.y, e2.width = t2 * e2.width, e2.height = t2 * e2.height, e2);
var at = (e2, t2, o2, i2) => {
  const n2 = (i2.x - e2.x) / e2.width, r2 = (i2.y - e2.y) / e2.height;
  let a2 = Math.max(t2.width, e2.width), s2 = Math.max(t2.height, e2.height);
  return a2 = Math.min(o2.width, a2), s2 = Math.min(o2.height, s2), e2.x = i2.x - n2 * a2, e2.y = i2.y - r2 * s2, e2.width = a2, e2.height = s2, e2;
};
var st = (e2, t2) => {
  const [o2, i2] = ne[t2], n2 = o2 * e2.width, r2 = i2 * e2.height;
  return ce(e2.x + n2, e2.y + r2);
};
var lt = (e2, t2) => (e2.x *= t2, e2.y *= t2, e2.width *= t2, e2.height *= t2, e2);
var ct = (e2, t2, o2 = j) => o2(e2.x) === o2(t2.x) && o2(e2.y) === o2(t2.y) && o2(e2.width) === o2(t2.width) && o2(e2.height) === o2(t2.height);
var dt = (e2) => H(e2.width, e2.height);
var ut = (e2, t2, o2, i2, n2) => (e2.x = t2, e2.y = o2, e2.width = i2, e2.height = n2, e2);
var ht = (e2, t2) => (e2.x = t2.x, e2.y = t2.y, e2.width = t2.width, e2.height = t2.height, e2);
var pt = (e2, t2, o2) => (o2 || (o2 = it(e2)), bt(e2).map((e3) => pe(e3, t2, o2)));
var mt = (e2, t2) => Ge(0.5 * e2.width - 0.5 * t2.width, 0.5 * e2.height - 0.5 * t2.height, t2.width, t2.height);
var gt = (e2, t2) => !(t2.x < e2.x) && (!(t2.y < e2.y) && (!(t2.x > e2.x + e2.width) && !(t2.y > e2.y + e2.height)));
var $t = (e2, t2, o2 = le()) => {
  if (0 === e2.width || 0 === e2.height)
    return qe();
  const i2 = dt(e2);
  t2 || (t2 = i2);
  let n2 = e2.width, r2 = e2.height;
  return t2 > i2 ? n2 = r2 * t2 : r2 = n2 / t2, Ge(o2.x + 0.5 * (e2.width - n2), o2.y + 0.5 * (e2.height - r2), n2, r2);
};
var ft = (e2, t2 = dt(e2), o2 = le()) => {
  if (0 === e2.width || 0 === e2.height)
    return qe();
  let i2 = e2.width, n2 = i2 / t2;
  return n2 > e2.height && (n2 = e2.height, i2 = n2 * t2), Ge(o2.x + 0.5 * (e2.width - i2), o2.y + 0.5 * (e2.height - n2), i2, n2);
};
var yt = (e2) => [Math.min(e2.y, e2.y + e2.height), Math.max(e2.x, e2.x + e2.width), Math.max(e2.y, e2.y + e2.height), Math.min(e2.x, e2.x + e2.width)];
var bt = (e2) => [ce(e2.x, e2.y), ce(e2.x + e2.width, e2.y), ce(e2.x + e2.width, e2.y + e2.height), ce(e2.x, e2.y + e2.height)];
var xt = (e2, t2) => {
  if (e2)
    return e2.x = t2(e2.x), e2.y = t2(e2.y), e2.width = t2(e2.width), e2.height = t2(e2.height), e2;
};
var vt = (e2, t2, o2 = it(e2)) => bt(e2).map((e3, i2) => {
  const n2 = Xe[i2];
  return ce(ae(e3.x, 1 + n2.x * t2.x, o2.x), ae(e3.y, 1 + n2.y * t2.y, o2.y));
});
var wt = (e2) => (e2.x = 0, e2.y = 0, e2);
var St = (e2) => {
  const t2 = e2[0], o2 = e2[e2.length - 1];
  e2 = fe(t2, o2) ? e2 : [...e2, t2];
  const i2 = t2.x, n2 = t2.y;
  let r2, a2, s2, l2 = 0, c2 = 0, d2 = 0, u2 = 0;
  const h2 = e2.length;
  for (; c2 < h2; c2++)
    r2 = e2[c2], a2 = e2[c2 + 1 > h2 - 1 ? 0 : c2 + 1], s2 = (r2.y - n2) * (a2.x - i2) - (a2.y - n2) * (r2.x - i2), l2 += s2, d2 += (r2.x + a2.x - 2 * i2) * s2, u2 += (r2.y + a2.y - 2 * n2) * s2;
  return s2 = 3 * l2, ce(i2 + d2 / s2, n2 + u2 / s2);
};
var kt = (e2, t2) => Ct(e2.start, e2.end, t2.start, t2.end);
var Ct = (e2, t2, o2, i2) => {
  const n2 = (i2.y - o2.y) * (t2.x - e2.x) - (i2.x - o2.x) * (t2.y - e2.y);
  if (0 === n2)
    return;
  const r2 = ((i2.x - o2.x) * (e2.y - o2.y) - (i2.y - o2.y) * (e2.x - o2.x)) / n2, a2 = ((t2.x - e2.x) * (e2.y - o2.y) - (t2.y - e2.y) * (e2.x - o2.x)) / n2;
  return r2 < 0 || r2 > 1 || a2 < 0 || a2 > 1 ? void 0 : ce(e2.x + r2 * (t2.x - e2.x), e2.y + r2 * (t2.y - e2.y));
};
var Mt = (e2, t2, { ignoreIdenticalLines: o2 = false, breakOnIntersection: i2 = false } = {}) => {
  const n2 = t2.length, r2 = [];
  for (let a2 = 0; a2 < n2 - 1; a2++) {
    if (o2 && (fe(e2.start, t2[a2]) || fe(e2.start, t2[a2 + 1]) || fe(e2.end, t2[a2]) || fe(e2.end, t2[a2 + 1])))
      continue;
    const n3 = Ct(e2.start, e2.end, t2[a2], t2[a2 + 1]);
    if (n3) {
      if (i2)
        return [n3];
      r2.push(n3);
    }
  }
  return r2.length ? r2 : void 0;
};
var Tt = (e2, t2) => {
  let o2 = 0, i2 = 0, n2 = false;
  const r2 = t2.length;
  for (o2 = 0, i2 = r2 - 1; o2 < r2; i2 = o2++)
    t2[o2].y > e2.y != t2[i2].y > e2.y && e2.x < (t2[i2].x - t2[o2].x) * (e2.y - t2[o2].y) / (t2[i2].y - t2[o2].y) + t2[o2].x && (n2 = !n2);
  return n2;
};
var Pt = (e2) => {
  const t2 = [];
  for (let o2 = 0; o2 < e2.length; o2++) {
    let i2 = o2 + 1;
    i2 === e2.length && (i2 = 0), t2.push(je(ue(e2[o2]), ue(e2[i2])));
  }
  return t2;
};
var Rt = (e2, t2 = 0) => Pt(e2).map((e3) => Ze(e3, t2));
var It = (e2, t2, o2, i2 = 0, n2 = false, r2 = false, a2 = 12) => {
  const s2 = [];
  for (let i3 = 0; i3 < a2; i3++)
    s2.push(ce(e2.x + t2 * Math.cos(i3 * (2 * Math.PI) / a2), e2.y + o2 * Math.sin(i3 * (2 * Math.PI) / a2)));
  return (n2 || r2) && Re(s2, n2, r2, e2.x, e2.y), i2 && Ie(s2, i2, e2.x, e2.y), s2;
};
var At = (e2, t2) => {
  const o2 = Ke(e2), i2 = it(o2), n2 = pt(o2, t2, i2);
  return wt(Qe(n2));
};
var Et = (e2, t2) => e2 instanceof HTMLElement && (!t2 || new RegExp(`^${t2}$`, "i").test(e2.nodeName));
var Lt = (e2) => e2 instanceof File;
var Ft = async (e2, t2, o2) => {
  const i2 = await z(e2, t2, o2);
  return N(i2, "canvas");
};
var zt = (e2) => e2.split("/").pop().split(/\?|\#/).shift();
var Bt = c() && !!Node.prototype.replaceChildren ? (e2, t2) => e2.replaceChildren(t2) : (e2, t2) => {
  for (; e2.lastChild; )
    e2.removeChild(e2.lastChild);
  void 0 !== t2 && e2.append(t2);
};
var Ot = c() && p("div", { class: "PinturaMeasure", style: "position:absolute;left:0;top:0;width:99999px;height:0;pointer-events:none;contain:strict;margin:0;padding:0;" });
var Dt;
var Wt = (e2) => (Bt(Ot, e2), Ot.parentNode || document.body.append(Ot), clearTimeout(Dt), Dt = setTimeout(() => {
  Ot.remove();
}, 500), e2);
var _t = null;
var Vt = () => (null === _t && (_t = c() && /^((?!chrome|android).)*(safari|iphone|ipad)/i.test(navigator.userAgent)), _t);
var Nt = (e2) => new Promise((t2, o2) => {
  let i2 = false;
  !e2.parentNode && Vt() && (i2 = true, e2.style.cssText = "position:absolute;visibility:hidden;pointer-events:none;left:0;top:0;width:0;height:0;", Wt(e2));
  const n2 = () => {
    const o3 = e2.naturalWidth, n3 = e2.naturalHeight;
    o3 && n3 && (i2 && e2.remove(), clearInterval(r2), t2({ width: o3, height: n3 }));
  };
  e2.onerror = (e3) => {
    clearInterval(r2), o2(e3);
  };
  const r2 = setInterval(n2, 1);
  n2();
});
var Ht = (e2) => new Promise((t2, o2) => {
  const i2 = () => {
    t2({ width: e2.videoWidth, height: e2.videoHeight });
  };
  if (e2.readyState >= 1)
    return i2();
  e2.onloadedmetadata = i2, e2.onerror = () => o2(e2.error);
});
var jt = (e2) => /^image/.test(e2.type);
var Ut = (e2) => new Promise((t2) => {
  const o2 = M(e2) ? e2 : URL.createObjectURL(e2), i2 = () => {
    const e3 = new Image();
    e3.src = o2, t2(e3);
  };
  if (e2 instanceof Blob && jt(e2))
    return i2();
  const n2 = document.createElement("video");
  n2.preload = "metadata", n2.onloadedmetadata = () => t2(n2), n2.onerror = i2, n2.src = o2;
});
var Zt = (e2) => "VIDEO" === e2.nodeName;
var Xt = async (e2) => {
  let t2, o2;
  t2 = e2.src ? e2 : await Ut(e2);
  try {
    o2 = Zt(t2) ? await Ht(t2) : await Nt(t2);
  } finally {
    Lt(e2) && URL.revokeObjectURL(t2.src);
  }
  return o2;
};
var Gt = async (e2) => {
  const t2 = await Xt(e2), o2 = await ((e3) => new Promise((t3, o3) => {
    if (e3.complete)
      return t3(e3);
    e3.onload = () => t3(e3), e3.onerror = () => o3(new Error("Failed to load image"));
  }))(e2), i2 = p("canvas", t2);
  i2.getContext("2d", { willReadFrequently: true }).drawImage(o2, 0, 0);
  const n2 = await z(i2);
  return N(n2, zt(o2.src));
};
var Yt = (e2 = 0, t2 = true) => new (i("ProgressEvent"))("progress", { loaded: 100 * e2, total: 100, lengthComputable: t2 });
var qt = (e2, t2, o2 = (e3) => e3) => e2.getAllResponseHeaders().indexOf(t2) >= 0 ? o2(e2.getResponseHeader(t2)) : void 0;
var Kt = (e2) => {
  if (!e2)
    return null;
  const t2 = e2.split(/filename=|filename\*=.+''/).splice(1).map((e3) => e3.trim().replace(/^["']|[;"']{0,2}$/g, "")).filter((e3) => e3.length);
  return t2.length ? decodeURI(t2[t2.length - 1]) : null;
};
var Jt = "URL_REQUEST";
var Qt = class extends Error {
  constructor(e2, t2, o2) {
    super(e2), this.name = "EditorError", this.code = t2, this.metadata = o2;
  }
};
var eo = (e2, t2) => {
  const { headers: o2 = {}, credentials: i2 } = t2 || {};
  Object.entries(o2).forEach(([t3, o3]) => e2.setRequestHeader(t3, o3)), i2 && (e2.withCredentials = "omit" !== i2);
};
var to = (e2, t2, o2) => /^data:/.test(e2) ? (async (e3, t3 = "data-uri", o3 = n) => {
  o3(Yt(0));
  const i2 = await fetch(e3);
  o3(Yt(0.33));
  const r2 = await i2.blob();
  let a2;
  jt(r2) || (a2 = "image/" + (e3.includes(",/9j/") ? "jpeg" : "png")), o3(Yt(0.66));
  const s2 = N(r2, t3, a2);
  return o3(Yt(1)), s2;
})(e2, void 0, t2) : ((e3, t3, o3) => new Promise((i2, n2) => {
  const r2 = () => n2(new Qt("Error fetching image", Jt, a2)), a2 = new XMLHttpRequest();
  a2.onprogress = t3, a2.onerror = r2, a2.onload = () => {
    if (!a2.response || a2.status >= 300 || a2.status < 200)
      return r2();
    const t4 = qt(a2, "Content-Type"), o4 = qt(a2, "Content-Disposition", Kt) || zt(e3);
    i2(N(a2.response, o4, t4 || V(o4)));
  };
  const { willRequest: s2 } = o3;
  Promise.resolve(s2 && s2(e3, { resourceType: "image" })).then((t4) => {
    if (false === t4)
      return n2("Image load rejected");
    a2.open("GET", e3), eo(a2, t4), a2.responseType = "blob", a2.send();
  }).catch(console.error);
}))(e2, t2, o2);
var oo = (e2) => e2 instanceof Blob && !(e2 instanceof File);
var io = (e2) => "close" in e2;
var no = async (e2, t2, o2) => {
  if (Lt(e2) || oo(e2))
    return e2;
  if (M(e2))
    return await to(e2, t2, o2);
  if (Et(e2, "canvas"))
    return await Ft(e2);
  if (Et(e2, "img"))
    return await Gt(e2);
  if ($(e2) || io(e2))
    return await Ft(await v(e2));
  throw new Qt("Invalid image source", "invalid-image-source");
};
var ro = null;
var ao = () => (null === ro && (ro = c() && /^mac/i.test(navigator.platform)), ro);
var so = null;
var lo = () => (null === so && (so = c() && (f(/iPhone|iPad|iPod/) || ao() && navigator.maxTouchPoints >= 1)), so);
var co = async (e2, t2 = 1) => await u() || lo() || t2 < 5 ? e2 : Oe(e2.height, e2.width);
var uo = (e2) => /jpeg/.test(e2.type);
var ho = (e2) => {
  return "object" != typeof (t2 = e2) || t2.constructor != Object ? e2 : JSON.stringify(e2);
  var t2;
};
var po = (e2, t2 = 0, o2) => (0 === t2 || (e2.translate(o2.x, o2.y), e2.rotate(t2), e2.translate(-o2.x, -o2.y)), e2);
var mo = async (e2, t2 = {}) => {
  const { flipX: o2, flipY: i2, rotation: n2, crop: r2 } = t2, a2 = Le(e2), s2 = o2 || i2, l2 = !!n2, c2 = r2 && (r2.x || r2.y || r2.width || r2.height), d2 = c2 && ct(r2, Ke(a2)), u2 = c2 && !d2;
  if (!s2 && !l2 && !u2)
    return e2;
  let h2, m2 = p("canvas", { width: e2.width, height: e2.height });
  if (m2.getContext("2d", { willReadFrequently: true }).putImageData(e2, 0, 0), s2) {
    const e3 = p("canvas", { width: m2.width, height: m2.height }).getContext("2d", { willReadFrequently: true });
    ((e4, t3, o3) => {
      e4.scale(t3, o3);
    })(e3, o2 ? -1 : 1, i2 ? -1 : 1), e3.drawImage(m2, o2 ? -m2.width : 0, i2 ? -m2.height : 0), e3.restore(), g(m2), m2 = e3.canvas;
  }
  if (l2) {
    const e3 = He(Fe(Qe(pt(Je(m2), n2))), Math.floor), t3 = p("canvas", { width: r2.width, height: r2.height }).getContext("2d", { willReadFrequently: true });
    ((e4, t4, o3) => {
      e4.translate(t4, o3);
    })(t3, -r2.x, -r2.y), po(t3, n2, _e(e3)), t3.drawImage(m2, 0.5 * (e3.width - m2.width), 0.5 * (e3.height - m2.height)), t3.restore(), g(m2), m2 = t3.canvas;
  } else if (u2) {
    return h2 = m2.getContext("2d", { willReadFrequently: true }).getImageData(r2.x, r2.y, r2.width, r2.height), g(m2), h2;
  }
  return h2 = m2.getContext("2d", { willReadFrequently: true }).getImageData(0, 0, m2.width, m2.height), g(m2), h2;
};
var go = (e2, t2) => {
  const { imageData: o2, width: i2, height: n2 } = e2, r2 = o2.width, a2 = o2.height, s2 = Math.round(i2), l2 = Math.round(n2), c2 = o2.data, d2 = new Uint8ClampedArray(s2 * l2 * 4), u2 = r2 / s2, h2 = a2 / l2, p2 = Math.ceil(0.5 * u2), m2 = Math.ceil(0.5 * h2);
  for (let e3 = 0; e3 < l2; e3++)
    for (let t3 = 0; t3 < s2; t3++) {
      const o3 = 4 * (t3 + e3 * s2);
      let i3 = 0, n3 = 0, a3 = 0, l3 = 0, g2 = 0, $2 = 0, f2 = 0;
      const y2 = (e3 + 0.5) * h2;
      for (let o4 = Math.floor(e3 * h2); o4 < (e3 + 1) * h2; o4++) {
        const e4 = Math.abs(y2 - (o4 + 0.5)) / m2, s3 = (t3 + 0.5) * u2, d3 = e4 * e4;
        for (let e5 = Math.floor(t3 * u2); e5 < (t3 + 1) * u2; e5++) {
          let t4 = Math.abs(s3 - (e5 + 0.5)) / p2;
          const u3 = Math.sqrt(d3 + t4 * t4);
          if (u3 < -1 || u3 > 1)
            continue;
          if (i3 = 2 * u3 * u3 * u3 - 3 * u3 * u3 + 1, i3 <= 0)
            continue;
          t4 = 4 * (e5 + o4 * r2);
          const h3 = c2[t4 + 3];
          f2 += i3 * h3, a3 += i3, h3 < 255 && (i3 = i3 * h3 / 250), l3 += i3 * c2[t4], g2 += i3 * c2[t4 + 1], $2 += i3 * c2[t4 + 2], n3 += i3;
        }
      }
      d2[o3] = l3 / n3, d2[o3 + 1] = g2 / n3, d2[o3 + 2] = $2 / n3, d2[o3 + 3] = f2 / a3;
    }
  t2(null, { data: d2, width: s2, height: l2 });
};
var $o = (e2) => {
  if (e2 instanceof ImageData)
    return e2;
  let t2;
  try {
    t2 = new ImageData(e2.width, e2.height);
  } catch (o2) {
    t2 = p("canvas").getContext("2d").createImageData(e2.width, e2.height);
  }
  return t2.data.set(e2.data), t2;
};
var fo = async (e2, t2 = {}, o2) => {
  const { width: i2, height: n2, fit: r2, upscale: a2 } = t2;
  if (!i2 && !n2)
    return e2;
  let s2 = i2, l2 = n2;
  if (i2 ? n2 || (l2 = i2) : s2 = n2, "force" !== r2) {
    const t3 = s2 / e2.width, o3 = l2 / e2.height;
    let i3 = 1;
    if ("cover" === r2 ? i3 = Math.max(t3, o3) : "contain" === r2 && (i3 = Math.min(t3, o3)), i3 > 1 && false === a2)
      return e2;
    s2 = Math.round(e2.width * i3), l2 = Math.round(e2.height * i3);
  }
  return s2 = Math.max(s2, 1), l2 = Math.max(l2, 1), e2.width === s2 && e2.height === l2 ? e2 : o2 ? o2(e2, s2, l2) : (e2 = await L(go, [{ imageData: e2, width: s2, height: l2 }], [e2.data.buffer]), $o(e2));
};
var yo = (e2, t2) => {
  const { imageData: o2, matrix: i2 } = e2;
  if (!i2)
    return t2(null, o2);
  const n2 = new Uint8ClampedArray(o2.width * o2.height * 4), r2 = o2.data, a2 = r2.length, s2 = i2[0], l2 = i2[1], c2 = i2[2], d2 = i2[3], u2 = i2[4], h2 = i2[5], p2 = i2[6], m2 = i2[7], g2 = i2[8], $2 = i2[9], f2 = i2[10], y2 = i2[11], b2 = i2[12], x2 = i2[13], v2 = i2[14], w2 = i2[15], S2 = i2[16], k2 = i2[17], C2 = i2[18], M2 = i2[19];
  let T2 = 0, P2 = 0, R2 = 0, I2 = 0, A2 = 0, E2 = 0, L2 = 0, F2 = 0, z2 = 0, B2 = 0, O2 = 0, D2 = 0;
  for (; T2 < a2; T2 += 4)
    P2 = r2[T2] / 255, R2 = r2[T2 + 1] / 255, I2 = r2[T2 + 2] / 255, A2 = r2[T2 + 3] / 255, E2 = P2 * s2 + R2 * l2 + I2 * c2 + A2 * d2 + u2, L2 = P2 * h2 + R2 * p2 + I2 * m2 + A2 * g2 + $2, F2 = P2 * f2 + R2 * y2 + I2 * b2 + A2 * x2 + v2, z2 = P2 * w2 + R2 * S2 + I2 * k2 + A2 * C2 + M2, B2 = Math.max(0, E2 * z2) + (1 - z2), O2 = Math.max(0, L2 * z2) + (1 - z2), D2 = Math.max(0, F2 * z2) + (1 - z2), n2[T2] = 255 * Math.max(0, Math.min(1, B2)), n2[T2 + 1] = 255 * Math.max(0, Math.min(1, O2)), n2[T2 + 2] = 255 * Math.max(0, Math.min(1, D2)), n2[T2 + 3] = 255 * A2;
  t2(null, { data: n2, width: o2.width, height: o2.height });
};
var bo = (e2, t2) => {
  const { imageData: o2, matrix: i2 } = e2;
  if (!i2)
    return t2(null, o2);
  let n2 = i2.reduce((e3, t3) => e3 + t3);
  n2 = n2 <= 0 ? 1 : n2;
  const r2 = o2.width, a2 = o2.height, s2 = o2.data;
  let l2 = 0, c2 = 0, d2 = 0;
  const u2 = Math.round(Math.sqrt(i2.length)), h2 = Math.floor(u2 / 2);
  let p2 = 0, m2 = 0, g2 = 0, $2 = 0, f2 = 0, y2 = 0, b2 = 0, x2 = 0, v2 = 0, w2 = 0;
  const S2 = new Uint8ClampedArray(r2 * a2 * 4);
  for (d2 = 0; d2 < a2; d2++)
    for (c2 = 0; c2 < r2; c2++) {
      for (p2 = 0, m2 = 0, g2 = 0, $2 = 0, y2 = 0; y2 < u2; y2++)
        for (f2 = 0; f2 < u2; f2++)
          b2 = d2 + y2 - h2, x2 = c2 + f2 - h2, b2 < 0 && (b2 = a2 - 1), b2 >= a2 && (b2 = 0), x2 < 0 && (x2 = r2 - 1), x2 >= r2 && (x2 = 0), v2 = 4 * (b2 * r2 + x2), w2 = i2[y2 * u2 + f2], p2 += s2[v2] * w2, m2 += s2[v2 + 1] * w2, g2 += s2[v2 + 2] * w2, $2 += s2[v2 + 3] * w2;
      S2[l2] = p2 / n2, S2[l2 + 1] = m2 / n2, S2[l2 + 2] = g2 / n2, S2[l2 + 3] = $2 / n2, l2 += 4;
    }
  t2(null, { data: S2, width: r2, height: a2 });
};
var xo = (e2, t2) => {
  let { imageData: o2, strength: i2 } = e2;
  if (!i2)
    return t2(null, o2);
  const n2 = new Uint8ClampedArray(o2.width * o2.height * 4), r2 = o2.width, a2 = o2.height, s2 = o2.data, l2 = (e3, t3) => (c2 = e3 - w2, d2 = t3 - S2, Math.sqrt(c2 * c2 + d2 * d2));
  let c2, d2, u2, h2, p2, m2, g2, $2, f2, y2, b2, x2 = 0, v2 = 0, w2 = 0.5 * r2, S2 = 0.5 * a2, k2 = l2(0, 0);
  for (i2 > 0 ? (u2 = 0, h2 = 0, p2 = 0) : (i2 = Math.abs(i2), u2 = 1, h2 = 1, p2 = 1), v2 = 0; v2 < a2; v2++)
    for (x2 = 0; x2 < r2; x2++)
      C2 = 4 * (x2 + v2 * r2), M2 = s2, T2 = n2, P2 = l2(x2, v2) * i2 / k2, m2 = M2[C2] / 255, g2 = M2[C2 + 1] / 255, $2 = M2[C2 + 2] / 255, f2 = M2[C2 + 3] / 255, y2 = 1 - P2, b2 = y2 * f2 + P2, T2[C2] = (y2 * f2 * m2 + P2 * u2) / b2 * 255, T2[C2 + 1] = (y2 * f2 * g2 + P2 * h2) / b2 * 255, T2[C2 + 2] = (y2 * f2 * $2 + P2 * p2) / b2 * 255, T2[C2 + 3] = 255 * b2;
  var C2, M2, T2, P2;
  t2(null, { data: n2, width: o2.width, height: o2.height });
};
var vo = (e2, t2) => {
  const { imageData: o2, level: i2, monochrome: n2 = false } = e2;
  if (!i2)
    return t2(null, o2);
  const r2 = new Uint8ClampedArray(o2.width * o2.height * 4), a2 = o2.data, s2 = a2.length;
  let l2, c2, d2, u2 = 0;
  const h2 = () => 255 * (2 * Math.random() - 1) * i2, p2 = n2 ? () => {
    const e3 = h2();
    return [e3, e3, e3];
  } : () => [h2(), h2(), h2()];
  for (; u2 < s2; u2 += 4)
    [l2, c2, d2] = p2(), r2[u2] = a2[u2] + l2, r2[u2 + 1] = a2[u2 + 1] + c2, r2[u2 + 2] = a2[u2 + 2] + d2, r2[u2 + 3] = a2[u2 + 3];
  t2(null, { data: r2, width: o2.width, height: o2.height });
};
var wo = (e2, t2) => {
  const { imageData: o2, level: i2 } = e2;
  if (!i2)
    return t2(null, o2);
  const n2 = new Uint8ClampedArray(o2.width * o2.height * 4), r2 = o2.data, a2 = r2.length;
  let s2, l2, c2, d2 = 0;
  for (; d2 < a2; d2 += 4)
    s2 = r2[d2] / 255, l2 = r2[d2 + 1] / 255, c2 = r2[d2 + 2] / 255, n2[d2] = 255 * Math.pow(s2, i2), n2[d2 + 1] = 255 * Math.pow(l2, i2), n2[d2 + 2] = 255 * Math.pow(c2, i2), n2[d2 + 3] = r2[d2 + 3];
  t2(null, { data: n2, width: o2.width, height: o2.height });
};
var So = async (e2, t2 = {}) => {
  const { colorMatrix: o2, convolutionMatrix: i2, gamma: n2, noise: r2, vignette: a2 } = t2, s2 = [];
  if (i2 && s2.push([bo, { matrix: i2.clarity }]), n2 > 0 && s2.push([wo, { level: 1 / n2 }]), o2 && !((e3) => {
    const t3 = e3.length;
    let o3;
    const i3 = t3 >= 20 ? 6 : t3 >= 16 ? 5 : 3;
    for (let n3 = 0; n3 < t3; n3++) {
      if (o3 = e3[n3], 1 === o3 && n3 % i3 != 0)
        return false;
      if (0 !== o3 && 1 !== o3)
        return false;
    }
    return true;
  })(o2) && s2.push([yo, { matrix: o2 }]), (r2 > 0 || r2 < 0) && s2.push([vo, { level: r2 }]), (a2 > 0 || a2 < 0) && s2.push([xo, { strength: a2 }]), !s2.length)
    return e2;
  const l2 = (e3, t3) => `(err, imageData) => {
            (${e3[t3][0].toString()})(Object.assign({ imageData: imageData }, filterInstructions[${t3}]), 
                ${e3[t3 + 1] ? l2(e3, t3 + 1) : "done"})
        }`, c2 = `function (options, done) {
        const filterInstructions = options.filterInstructions;
        const imageData = options.imageData;
        (${l2(s2, 0)})(null, imageData)
    }`;
  return e2 = await L(c2, [{ imageData: e2, filterInstructions: s2.map((e3) => e3[1]) }], [e2.data.buffer]), $o(e2);
};
var ko = (e2) => "number" == typeof e2;
var Co = (e2) => M(e2) && null !== e2.match(/(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\u0023-\u0039]\ufe0f?\u20e3|\u3299|\u3297|\u303d|\u3030|\u24c2|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|\ud83c\udd8e|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|\ud83c[\ude01-\ude02]|\ud83c\ude1a|\ud83c\ude2f|\ud83c[\ude32-\ude3a]|\ud83c[\ude50-\ude51]|\u203c|\u2049|[\u25aa-\u25ab]|\u25b6|\u25c0|[\u25fb-\u25fe]|\u00a9|\u00ae|\u2122|\u2139|\ud83c\udc04|[\u2600-\u26FF]|\u2b05|\u2b06|\u2b07|\u2b1b|\u2b1c|\u2b50|\u2b55|\u231a|\u231b|\u2328|\u23cf|[\u23e9-\u23f3]|[\u23f8-\u23fa]|\ud83c\udccf|\u2934|\u2935|[\u2190-\u21ff])/g);
var Mo = (e2, t2) => e2.hasOwnProperty(t2);
var To = (e2) => Array.isArray(e2);
var Po = 64;
var Ro = 102;
var Io = 112;
var Ao = false;
var Eo = (e2, t2) => (!Ao && c() && (/^win/i.test(navigator.platform) && (Ro = 103), (lo() || ao()) && (Po = 63.5, Ro = 110, Io = 123), Ao = true), `<svg${t2 ? ` aria-label="${t2}"` : ""} width="128" height="128" viewBox="0 0 128 128" preserveAspectRatio="xMinYMin meet" xmlns="http://www.w3.org/2000/svg"><text x="${Po}" y="${Ro}" alignment-baseline="text-top" dominant-baseline="text-top" text-anchor="middle" font-size="${Io}px">${e2}</text></svg>`);
var Lo = (e2) => e2 instanceof Blob;
var Fo = (e2, t2) => e2 / t2 * 100 + "%";
var zo = (e2) => `rgba(${Math.round(255 * e2[0])}, ${Math.round(255 * e2[1])}, ${Math.round(255 * e2[2])}, ${ko(e2[3]) ? e2[3] : 1})`;
var Bo = (e2) => Object.values(e2).join("_");
var Oo = async (e2, t2 = 0) => {
  const o2 = p("canvas", { width: 80, height: 80 }).getContext("2d");
  return await ((e3 = 0) => new Promise((t3) => {
    setTimeout(t3, e3);
  }))(t2), o2.drawImage(e2, 0, 0, 80, 80), !(((e3) => !new Uint32Array(e3.getImageData(0, 0, e3.canvas.width, e3.canvas.height).data.buffer).some((e4) => 0 !== e4))(o2) && t2 <= 256) || await Oo(e2, t2 + 16);
};
var Do = /* @__PURE__ */ new Map();
var Wo = (e2) => new Promise((t2, o2) => {
  const i2 = new FileReader();
  i2.onerror = () => o2(i2.error), i2.onload = () => t2(i2.result), i2.readAsDataURL(e2);
});
var _o = () => {
  let e2 = [];
  return { sub: (t2, o2) => (e2.push({ event: t2, callback: o2 }), () => e2 = e2.filter((e3) => e3.event !== t2 || e3.callback !== o2)), pub: (t2, o2) => {
    e2.filter((e3) => e3.event === t2).forEach((e3) => e3.callback(o2));
  } };
};
var Vo = null;
var No = () => (null === Vo && (Vo = f(/Firefox/)), Vo);
var Ho = 32;
var jo = ({ color: e2 = [0, 0, 0], fontSize: t2 = 16, fontFamily: o2 = "sans-serif", fontVariant: i2 = "normal", fontWeight: n2 = "normal", fontStyle: r2 = "normal", textAlign: a2 = "left", lineHeight: s2 = 20 }, l2 = 1) => `font-size:${t2 * l2}px;font-style:${r2};font-weight:${n2};font-family:${o2};font-variant:${i2};line-height:${s2 * l2}px;text-align:${a2};color:${zo(e2)};`;
var Uo = (e2, t2, o2 = 1) => {
  const { width: i2, height: n2, disableNewline: r2 } = t2, a2 = !i2, s2 = false === r2 ? ((e3 = "") => e3.split("\n").length)(e2) : void 0, l2 = a2 ? "normal" : "break-word", c2 = a2 && !s2 ? "nowrap" : "pre-line";
  return `max-width:none;min-width:auto;width:${a2 ? "auto" : i2 * o2 + "px"};height:${n2 ? n2 * o2 + "px" : "auto"};margin-top:0;margin-bottom:0;padding-top:${(({ fontSize: e3 = 16, lineHeight: t3 = 20 } = {}) => 0.5 * Math.max(0, e3 - t3))(t2) * o2}px;word-break:${l2};word-wrap:normal;white-space:${c2};`;
};
var Zo = /* @__PURE__ */ new Map();
var Xo = (e2) => {
  const t2 = [];
  for (const o2 of Array.from(e2.childNodes))
    o2.nodeType === Node.TEXT_NODE ? t2.push(Yo(o2)) : t2.push(...Xo(o2));
  return t2;
};
var Go = "pointer-events:none;visibility:hidden;position:absolute;left:0;top:0;";
var Yo = (e2) => {
  const t2 = e2.nodeValue;
  if (!t2)
    return [];
  const o2 = t2.length, i2 = document.createRange();
  i2.selectNodeContents(e2);
  const n2 = [];
  for (let r3 = 0; r3 < o2; r3++) {
    i2.setStart(e2, 0), i2.setEnd(e2, r3 + 1);
    const o3 = i2.getClientRects().length - 1, a2 = t2.charAt(r3);
    n2[o3] ? n2[o3] += a2 : n2.push(a2);
  }
  const r2 = i2.getClientRects();
  return n2.map((e3, t3) => ({ rect: r2[t3], text: e3 }));
};
var qo = /* @__PURE__ */ new Map();
var Ko = (e2 = "", t2) => {
  const { width: o2 = 0, height: i2 = 0 } = t2;
  if (o2 && i2)
    return Oe(o2, i2);
  let { fontSize: n2 = 16, fontFamily: r2, lineHeight: a2 = 20, fontWeight: s2, fontStyle: l2, fontVariant: c2 } = t2;
  const d2 = Bo({ text: e2, fontFamily: r2, fontWeight: s2, fontStyle: l2, fontVariant: c2, fontSize: n2, lineHeight: a2, width: o2 });
  let u2 = qo.get(d2);
  if (u2)
    return u2;
  let h2 = 1;
  n2 > 1e3 && No() && (h2 = n2 / 1e3, n2 = 1e3, a2 /= h2);
  const m2 = Wt(p("pre", { contenteditable: "true", spellcheck: "false", style: `${Go}${jo({ ...t2, fontSize: n2, lineHeight: a2 })};${Uo(e2, t2)}"`, innerHTML: e2 })).getBoundingClientRect();
  return u2 = Le(m2), u2.height += Math.max(0, n2 - a2), u2 = He(u2, (e3) => e3 * h2), o2 && (u2.width = o2), qo.set(d2, u2), u2;
};
var Jo = /* @__PURE__ */ new Map();
var Qo = (e2, t2) => new Promise((o2, i2) => {
  let n2 = Jo.get(e2);
  void 0 === n2 && (n2 = ((e3, t3) => {
    const { sub: o3, pub: i3 } = _o();
    let n3, r2;
    return Promise.resolve(t3 && t3(e3, { resourceType: "stylesheet" })).then((t4) => {
      if (false === t4)
        return r2 = "requestPrevented", i3("error", r2);
      const { headers: o4, credentials: a2 } = t4 || {};
      fetch(e3, { headers: o4, credentials: a2 }).then((e4) => e4.text()).then((e4) => {
        n3 = e4, i3("load", n3);
      }).catch((e4) => {
        r2 = e4, i3("error", r2);
      });
    }), { sub: (e4, t4) => "load" === e4 && n3 ? t4(n3) : "error" === e4 && r2 ? t4(r2) : void o3(e4, t4) };
  })(e2, t2), Jo.set(e2, n2)), n2.sub("load", o2), n2.sub("error", i2);
});
var ei = async (e2, t2) => {
  let o2;
  try {
    o2 = await Qo(e2, t2);
  } catch (e3) {
    return [];
  }
  const i2 = p("style", { innerHTML: o2, id: A() });
  document.head.append(i2);
  const n2 = Array.from(document.styleSheets).find((e3) => e3.ownerNode.id === i2.id);
  return i2.remove(), Array.from(n2.cssRules);
};
var ti = /* @__PURE__ */ new Map();
var oi = async (e2, t2) => {
  if (ti.has(e2.href))
    return ti.get(e2.href);
  let o2;
  try {
    o2 = Array.from(e2.cssRules);
    for (const e3 of ((e4) => e4.filter((e5) => e5 instanceof CSSImportRule))(o2)) {
      const i2 = e3.href;
      if (ti.has(i2)) {
        const e4 = ti.get(i2);
        o2 = [...o2, ...e4];
        continue;
      }
      const n2 = await ei(i2, t2);
      ti.set(i2, n2), o2 = [...o2, ...n2];
    }
  } catch (i2) {
    const n2 = e2.href;
    o2 = await ei(n2, t2), ti.set(n2, o2);
  }
  return ((e3) => e3.filter((e4) => e4 instanceof CSSFontFaceRule))(o2);
};
var ii = (e2, t2) => e2.style.getPropertyValue(t2);
var ni = (e2, t2) => {
  if (!e2.style)
    return false;
  return ii(e2, "font-family").replace(/^"|"$/g, "") == t2;
};
var ri = async (e2, t2) => {
  const o2 = ((e3, t3) => {
    const o3 = [];
    for (const i2 of e3)
      ni(i2, t3) && o3.push(i2);
    return o3;
  })(await (async (e3) => {
    const t3 = Array.from(document.styleSheets).map((t4) => oi(t4, e3)), o3 = await Promise.all(t3), i2 = [];
    return o3.forEach((e4) => i2.push(...e4)), i2;
  })(t2), e2);
  return o2.length ? o2.map((e3) => {
    const t3 = e3.parentStyleSheet.href && new URL(e3.parentStyleSheet.href), o3 = t3 ? t3.origin + ((e4) => e4.pathname.split("/").slice(0, -1).join("/"))(t3) + "/" : "", i2 = e3.style.getPropertyValue("src").match(/url\("?(.*?)"?\)/)[1], n2 = Array.from(e3.style).filter((e4) => "src" != e4).reduce((t4, o4) => t4 += o4 + ":" + ii(e3, o4) + ";", "");
    return [/^http/.test(i2) ? i2 : o3 + i2, n2];
  }) : [];
};
var ai = /* @__PURE__ */ new Map();
var si = /* @__PURE__ */ new Map();
var li = async (e2 = "", t2) => {
  if (!e2.length)
    return;
  let { imageWidth: o2 = 300, imageHeight: i2 = 150, paddingLeft: n2 = Ho, paddingRight: r2 = Ho, fontFamily: a2, fontSize: s2, pixelRatio: l2 = 1, willRequest: c2 } = t2, d2 = 1, u2 = "";
  s2 > 1e3 && No() && (d2 = s2 / 1e3, u2 = `transform-origin:0 0;transform:scale(${d2})`);
  const h2 = l2 / d2, p2 = (o2 + n2 + r2) * l2, m2 = i2 * l2, g2 = jo({ ...t2, fontSize: s2 }, h2), $2 = Uo(e2, t2, h2), f2 = await (async (e3, t3) => {
    if (ai.get(e3))
      return;
    let o3 = si.get(e3);
    if (!o3) {
      const n3 = await ri(e3, t3);
      if (!n3.length)
        return void ai.set(e3, true);
      const r3 = [];
      for (const [e4, t4] of n3) {
        const o4 = await fetch(e4).then((e5) => e5.blob()), n4 = !(i3 = o4.type) || /woff2/.test(i3) ? "woff2" : /woff/.test(i3) ? "woff" : /ttf|truetype/.test(i3) ? "truetype" : /otf|opentype/.test(i3) ? "opentype" : /svg/.test(i3) ? "svg" : "woff2", a3 = await Wo(o4);
        r3.push(`@font-face { src:url(${a3}) format('${n4}');${t4};font-display:block; }`);
      }
      o3 = r3.join(""), si.set(e3, o3);
    }
    var i3;
    return o3;
  })(a2, c2);
  return ((e3, { safariCacheKey: t3 = "*" } = {}) => new Promise((o3, i3) => {
    const n3 = new Image();
    n3.onerror = () => i3(new Error("Failed to load SVG")), n3.onload = () => {
      if (!Vt() || !e3.includes("@font-face") || Do.has(t3))
        return o3(n3);
      Oo(n3).then(() => {
        Do.set(t3, true), o3(n3);
      });
    }, n3.src = "data:image/svg+xml," + e3;
  }))(`<svg xmlns="http://www.w3.org/2000/svg" width="${p2}" height="${m2}" viewBox="0 0 ${p2} ${m2}"><foreignObject x="0" y="0" width="${p2}" height="${m2}"><div xmlns="http://www.w3.org/1999/xhtml">${f2 ? `<style>${f2}</style>` : ""}<pre contenteditable="true" spellcheck="false" style="position:absolute;padding-right:${r2 * h2}px;padding-left:${n2 * h2}px;${g2};${$2};${u2}">${e2.replace(/%/g, "%25").replace(/#/g, "%23").replace(/&nbsp;/g, "Â ").replace(/<br>|\n/g, "<br/>")}</pre></div></foreignObject></svg>`, { safariCacheKey: a2 });
};
var ci = (e2) => {
  const t2 = { ...e2 };
  return C(t2);
};
var di = (e2, t2 = {}) => {
  const o2 = dt(e2);
  let i2, n2;
  const r2 = t2.width || t2.rx, a2 = t2.height || t2.ry;
  if (r2 && a2)
    return Ee(t2);
  if (r2 || a2) {
    i2 = parseFloat(r2 || Number.MAX_SAFE_INTEGER), n2 = parseFloat(a2 || Number.MAX_SAFE_INTEGER);
    const e3 = Math.min(i2, n2);
    M(r2) || M(a2) ? (i2 = e3 + "%", n2 = e3 * o2 + "%") : (i2 = e3, n2 = e3);
  } else {
    const e3 = 10;
    i2 = e3 + "%", n2 = e3 * o2 + "%";
  }
  return { [(t2.width ? "width" : t2.rx ? "rx" : void 0) || "width"]: i2, [(t2.width ? "height" : t2.rx ? "ry" : void 0) || "height"]: n2 };
};
var ui = (e2, t2 = {}) => {
  return { width: void 0, height: void 0, ...t2, aspectRatio: 1, backgroundImage: (o2 = Eo(e2), "data:image/svg+xml," + o2.replace("<", "%3C").replace(">", "%3E")) };
  var o2;
};
var hi = (e2, t2 = {}) => ({ backgroundColor: [0, 0, 0, 0], ...xi(t2) ? {} : { width: void 0, height: void 0, aspectRatio: void 0 }, ...t2, backgroundImage: M(e2) ? e2 : Lo(e2) ? URL.createObjectURL(e2) : e2 });
var pi = (e2, t2) => {
  let o2;
  if (M(e2) || Lo(e2)) {
    const i2 = { ...di(t2), backgroundSize: "contain" };
    o2 = Co(e2) ? ui(e2, i2) : hi(e2, i2);
  } else if (e2.src) {
    const i2 = di(t2, e2.shape || e2), n2 = { ...e2.shape, ...i2 };
    if (e2.width && e2.height && !Mo(n2, "aspectRatio")) {
      const e3 = nn(i2, "width", t2), o3 = nn(i2, "height", t2);
      n2.aspectRatio = H(e3, o3);
    }
    n2.backgroundSize || e2.shape || e2.width && e2.height || (n2.backgroundSize = "contain"), o2 = Co(e2.src) ? ui(e2.src, n2) : hi(e2.src, n2);
  } else
    e2.shape && (o2 = ci(e2.shape));
  return Mo(o2, "backgroundImage") && (Mo(o2, "backgroundColor") || (o2.backgroundColor = [0, 0, 0, 0]), Mo(o2, "disableStyle") || (o2.disableStyle = ["cornerRadius", "backgroundColor", "strokeColor", "strokeWidth"])), t2 ? tn(o2, t2) : o2;
};
var mi = (e2) => ce(e2.x1, e2.y1);
var gi = (e2) => ce(e2.x2, e2.y2);
var $i = (e2) => Mo(e2, "text");
var fi = (e2) => $i(e2) && !(Ii(e2) || Mo(e2, "width"));
var yi = (e2) => $i(e2) && (Ii(e2) || Mo(e2, "width"));
var bi = (e2) => !$i(e2) && Ai(e2);
var xi = (e2) => Mo(e2, "rx");
var vi = (e2) => Mo(e2, "x1");
var wi = (e2) => Mo(e2, "points");
var Si = (e2) => $i(e2) && e2.isEditing;
var ki = (e2) => !Mo(e2, "opacity") || e2.opacity > 0;
var Ci = (e2) => e2.isSelected;
var Mi = (e2) => e2.isEditing;
var Ti = (e2) => e2._isDraft;
var Pi = (e2) => Mo(e2, "width") && Mo(e2, "height");
var Ri = (e2) => {
  const t2 = Mo(e2, "right"), o2 = Mo(e2, "bottom");
  return t2 || o2;
};
var Ii = (e2) => (Mo(e2, "x") || Mo(e2, "left")) && Mo(e2, "right") || (Mo(e2, "y") || Mo(e2, "top")) && Mo(e2, "bottom");
var Ai = (e2) => Pi(e2) || Ii(e2);
var Ei = (e2) => (e2._isDraft = true, e2);
var Li = (e2, t2) => true !== e2.disableStyle && (!To(e2.disableStyle) || !t2 || !e2.disableStyle.includes(t2));
var Fi = (e2) => true !== e2.disableSelect;
var zi = (e2) => true !== e2.disableRemove;
var Bi = (e2) => !e2.disableFlip && (!Ti(e2) && !Ri(e2) && ((e3) => Mo(e3, "backgroundImage") || Mo(e3, "text"))(e2));
var Oi = (e2, t2) => !!$i(e2) && (true !== e2.disableInput && (T(e2.disableInput) ? e2.disableInput(null != t2 ? t2 : e2.text) : t2 || true));
var Di = (e2, t2) => true !== e2.disableTextLayout && (!To(e2.disableTextLayout) || !t2 || !e2.disableTextLayout.includes(t2));
var Wi = (e2) => true !== e2.disableManipulate && !Ti(e2) && !Ri(e2);
var _i = (e2) => Wi(e2) && true !== e2.disableMove;
var Vi = (e2) => (delete e2.left, delete e2.right, delete e2.top, delete e2.bottom, e2);
var Ni = (e2) => (delete e2.rotation, e2);
var Hi = (e2) => (e2.strokeWidth = e2.strokeWidth || 1, e2.strokeColor = e2.strokeColor || [0, 0, 0], e2);
var ji = (e2) => (e2.backgroundColor = e2.backgroundColor ? e2.backgroundColor : e2.strokeWidth || e2.backgroundImage ? void 0 : [0, 0, 0], e2);
var Ui = (e2) => {
  let t2 = e2.text;
  t2 = t2.replace(/&(#[0-9]+|[a-z]+);/gi, (e3, t3) => `___${t3}___`), t2 = t2.replace(/&/, "&amp;"), e2.text = t2.replace(/___(#[0-9]+|[a-z]+)___/gi, (e3, t3) => `&${t3};`);
};
var Zi = (e2) => (e2.fontSize = e2.fontSize || "4%", e2.fontFamily = e2.fontFamily || "sans-serif", e2.fontWeight = e2.fontWeight || "normal", e2.fontStyle = e2.fontStyle || "normal", e2.fontVariant = e2.fontVariant || "normal", e2.lineHeight = e2.lineHeight || "120%", e2.color = e2.color || [0, 0, 0], e2.format = "html" === e2.format ? "html" : "text", "html" === e2.format ? Ui(e2) : ((e3) => {
  Ui(e3);
  let t2 = e3.text;
  t2 = t2.replace(/</g, "&gt;"), t2 = t2.replace(/>/g, "&lt;"), e3.text = t2;
})(e2), fi(e2) ? Xi(e2) : Gi(e2));
var Xi = (e2) => (false !== e2.disableNewline && (delete e2.textAlign, e2.text = e2.text.replace(/\n/g, " ")), Vi(e2));
var Gi = (e2) => (e2.textAlign = e2.textAlign || "left", e2);
var Yi = (e2) => (((e3) => {
  M(e3.id) || (e3.id = A()), Mo(e3, "rotation") || (e3.rotation = 0), Mo(e3, "opacity") || (e3.opacity = 1), Mo(e3, "disableErase") || (e3.disableErase = true);
})(e2), $i(e2) ? Zi(e2) : bi(e2) ? ((e3) => {
  e3.cornerRadius = e3.cornerRadius || 0, e3.strokeWidth = e3.strokeWidth || 0, e3.strokeColor = e3.strokeColor || [0, 0, 0], ji(e3);
})(e2) : wi(e2) ? ((e3) => {
  Hi(e3), Ni(e3), Mo(e3, "pathClose") || (e3.disableResize = true, Mo(e3, "disableMove") || (e3.disableMove = true)), Vi(e3);
})(e2) : vi(e2) ? ((e3) => {
  Hi(e3), e3.lineStart = e3.lineStart || void 0, e3.lineEnd = e3.lineEnd || void 0, Ni(e3), Vi(e3);
})(e2) : xi(e2) && ((e3) => {
  e3.strokeWidth = e3.strokeWidth || 0, e3.strokeColor = e3.strokeColor || [0, 0, 0], ji(e3);
})(e2), e2);
var qi = (e2) => $i(e2) ? "text" : bi(e2) ? "rectangle" : wi(e2) ? "path" : vi(e2) ? "line" : xi(e2) ? "ellipse" : void 0;
var Ki = (e2, t2) => parseFloat(e2) / 100 * t2;
var Ji = new RegExp(/^x|left|right|^width|rx|fontSize|cornerRadius|strokeWidth/, "i");
var Qi = new RegExp(/^y|top|bottom|^height|ry/, "i");
var en = (e2, t2) => {
  Object.entries(e2).map(([o3, i2]) => {
    e2[o3] = ((e3, t3, { width: o4, height: i3 }) => {
      if (Array.isArray(t3))
        return t3.map((e4) => (S(e4) && en(e4, { width: o4, height: i3 }), e4));
      if ("string" != typeof t3)
        return t3;
      if (!t3.endsWith("%"))
        return t3;
      const n2 = parseFloat(t3) / 100;
      return Ji.test(e3) ? re(o4 * n2, 6) : Qi.test(e3) ? re(i3 * n2, 6) : t3;
    })(o3, i2, t2);
  });
  const o2 = e2.lineHeight;
  M(o2) && (e2.lineHeight = Math.round(e2.fontSize * (parseFloat(o2) / 100)));
};
var tn = (e2, t2) => (en(e2, t2), cn(e2, t2), e2);
var on = (e2, t2) => {
  let o2;
  return /^x|width|rx|fontSize|strokeWidth|cornerRadius/.test(e2) ? o2 = t2.width : /^y|height|ry/.test(e2) && (o2 = t2.height), o2;
};
var nn = (e2, t2, o2) => Array.isArray(e2[t2]) ? e2[t2].map((e3) => Object.entries(e3).reduce((e4, [t3, i2]) => (e4[t3] = M(i2) ? Ki(i2, on(t3, o2)) : i2, e4), {})) : M(e2[t2]) ? Ki(e2[t2], on(t2, o2)) : e2[t2];
var rn = (e2, t2, o2) => t2.reduce((t3, i2) => {
  const n2 = nn(e2, i2, o2);
  return t3[i2] = n2, t3;
}, {});
var an = (e2, t2, o2) => (Object.keys(t2).forEach((i2) => ((e3, t3, o3, i3) => {
  if (!M(e3[t3]))
    return e3[t3] = o3, e3;
  const n2 = on(t3, i3);
  return e3[t3] = void 0 === n2 ? o3 : Fo(o3, n2), e3;
})(e2, i2, t2[i2], o2)), e2);
var sn = (e2, t2) => {
  const o2 = e2.filter((e3) => e3.x < 0 || e3.y < 0 || e3.x1 < 0 || e3.y1 < 0).reduce((e3, t3) => {
    const [o3, i2, n2, r2] = ((e4) => {
      const t4 = qe(), o4 = e4.strokeWidth || 0;
      if (bi(e4))
        t4.x = e4.x - 0.5 * o4, t4.y = e4.y - 0.5 * o4, t4.width = e4.width + o4, t4.height = e4.height + o4;
      else if (vi(e4)) {
        const { x1: i3, y1: n3, x2: r3, y2: a2 } = e4, s2 = Math.abs(Math.min(i3, r3)), l2 = Math.abs(Math.max(i3, r3)), c2 = Math.abs(Math.min(n3, a2)), d2 = Math.abs(Math.min(n3, a2));
        t4.x = s2 + 0.5 * o4, t4.y = l2 + 0.5 * o4, t4.width = l2 - s2 + o4, t4.height = d2 - c2 + o4;
      } else
        xi(e4) && (t4.x = e4.x - e4.rx + 0.5 * o4, t4.y = e4.y - e4.ry + 0.5 * o4, t4.width = 2 * e4.rx + o4, t4.height = 2 * e4.ry + o4);
      return t4 && Mo(e4, "rotation") && pt(t4, e4.rotation), yt(t4);
    })(t3);
    return e3.top = Math.min(o3, e3.top), e3.left = Math.min(r2, e3.left), e3.bottom = Math.max(n2, e3.bottom), e3.right = Math.max(i2, e3.right), e3;
  }, { top: 0, right: 0, bottom: 0, left: 0 });
  return o2.right > 0 && (o2.right -= t2.width), o2.bottom > 0 && (o2.bottom -= t2.height), o2;
};
var ln = (e2, t2, o2) => {
  const i2 = ci(e2);
  tn(i2, t2);
  const n2 = o2(i2);
  return Array.isArray(n2) ? n2 : [n2];
};
var cn = (e2, t2) => {
  if (Mo(e2, "left") && (e2.x = e2.left), Mo(e2, "right") && !M(e2.right)) {
    const o2 = t2.width - e2.right;
    Mo(e2, "left") ? (e2.x = e2.left, e2.width = Math.max(0, o2 - e2.left)) : Mo(e2, "width") && (e2.x = o2 - e2.width);
  }
  if (Mo(e2, "top") && (e2.y = e2.top), Mo(e2, "bottom") && !M(e2.bottom)) {
    const o2 = t2.height - e2.bottom;
    Mo(e2, "top") ? (e2.y = e2.top, e2.height = Math.max(0, o2 - e2.top)) : Mo(e2, "height") && (e2.y = o2 - e2.height);
  }
  return e2;
};
var dn = (e2, t2) => (wi(e2) && e2.points.filter((e3) => ko(e3.x)).forEach((e3) => {
  e3.x *= t2, e3.y *= t2;
}), vi(e2) && ko(e2.x1) && (e2.x1 *= t2, e2.y1 *= t2, e2.x2 *= t2, e2.y2 *= t2), ko(e2.x) && ko(e2.y) && (e2.x *= t2, e2.y *= t2), ko(e2.width) && ko(e2.height) && (e2.width *= t2, e2.height *= t2), ko(e2.rx) && ko(e2.ry) && (e2.rx *= t2, e2.ry *= t2), ((e3) => ko(e3.strokeWidth) && e3.strokeWidth > 0)(e2) && (e2.strokeWidth *= t2), $i(e2) && (e2._scale = t2, ko(e2.fontSize) && (e2.fontSize *= t2), ko(e2.lineHeight) && (e2.lineHeight *= t2), ko(e2.width) && !ko(e2.height) && (e2.width *= t2)), Mo(e2, "cornerRadius") && ko(e2.cornerRadius) && (e2.cornerRadius *= t2), e2);
var un = (e2) => {
  if (e2.x1)
    return Me(ce(e2.x1, e2.y1), ce(e2.x2, e2.y2));
};
var hn = (e2) => {
  if (bi(e2))
    return ce(e2.x + 0.5 * e2.width, e2.y + 0.5 * e2.height);
  if (xi(e2))
    return ce(e2.x, e2.y);
  if (e2.text) {
    if (yi(e2)) {
      const t3 = e2.height || Ko(e2.text, e2).height;
      return ce(e2.x + 0.5 * e2.width, e2.y + 0.5 * t3);
    }
    const t2 = Ko(e2.text, e2);
    return ce(e2.x + 0.5 * t2.width, e2.y + 0.5 * t2.height);
  }
  return wi(e2) ? Pe(e2.points) : vi(e2) ? Pe([mi(e2), gi(e2)]) : void 0;
};
var pn = (e2, t2) => {
  let o2 = false;
  t2.flipX && e2.flipX ? o2 = true : !t2.flipX && e2.flipX ? o2 = false : t2.flipX && !e2.flipX && (o2 = true);
  let i2 = false;
  t2.flipY && e2.flipY ? i2 = true : !t2.flipY && e2.flipY ? i2 = false : t2.flipY && !e2.flipY && (i2 = true);
  let n2 = -t2.rotation;
  return !o2 && !i2 || o2 && i2 || (n2 = -n2), { flipX: o2, flipY: i2, rotation: n2 };
};
var mn = (e2) => /canvas/i.test(e2.nodeName);
var gn = (e2, t2) => new Promise((o2, i2) => {
  let n2 = e2, r2 = false;
  const a2 = () => {
    r2 || (r2 = true, T(t2) && Promise.resolve().then(() => t2(Oe(n2.naturalWidth, n2.naturalHeight))));
  };
  if (n2.src || (n2 = new Image(), M(e2) && new URL(e2, location.href).origin !== location.origin && (n2.crossOrigin = "anonymous"), n2.src = M(e2) ? e2 : URL.createObjectURL(e2)), n2.complete)
    return a2(), o2(n2);
  T(t2) && Nt(n2).then(a2).catch(i2), n2.onload = () => {
    a2(), o2(n2);
  }, n2.onerror = () => i2(new Error("Failed to load image"));
});
var $n = /* @__PURE__ */ new Map([]);
var fn = (e2, t2 = {}) => new Promise((o2, i2) => {
  const { onMetadata: r2 = n, onLoad: a2 = o2, onError: s2 = i2, onComplete: l2 = n } = t2;
  let c2 = $n.get(e2);
  if (c2 || (c2 = { loading: false, complete: false, error: false, image: void 0, size: void 0, bus: _o() }, $n.set(e2, c2)), c2.bus.sub("meta", r2), c2.bus.sub("load", a2), c2.bus.sub("error", s2), c2.bus.sub("complete", l2), mn(e2)) {
    const t3 = e2, o3 = t3.cloneNode();
    c2.complete = true, c2.image = o3, c2.size = Be(t3);
  }
  if (c2.complete)
    return c2.bus.pub("meta", { size: c2.size }), c2.error ? c2.bus.pub("error", c2.error) : c2.bus.pub("load", c2.image), c2.bus.pub("complete"), void (c2.bus = _o());
  c2.loading || (c2.loading = true, gn(e2, (e3) => {
    c2.size = e3, c2.bus.pub("meta", { size: e3 });
  }).then((e3) => {
    c2.image = e3, c2.bus.pub("load", e3);
  }).catch((e3) => {
    c2.error = e3, c2.bus.pub("error", e3);
  }).finally(() => {
    c2.complete = true, c2.loading = false, c2.bus.pub("complete"), c2.bus = _o();
  }));
});
var yn = (e2, t2, o2, i2) => e2.drawImage(t2, o2.x, o2.x, o2.width, o2.height, i2.x, i2.y, i2.width, i2.height);
var bn = async (e2, t2, o2, i2, n2 = yn) => {
  e2.save(), e2.clip(), await n2(e2, t2, o2, i2), e2.restore();
};
var xn = (e2, t2, o2, i2, n2) => {
  const r2 = Ye(e2);
  if (i2) {
    const e3 = xt(Qe(i2), re);
    return e3.x *= o2.width, e3.width *= o2.width, e3.y *= o2.height, e3.height *= o2.height, { srcRect: e3, destRect: r2 };
  }
  const a2 = ot(0, 0, o2.width, o2.height);
  if ("contain" === t2) {
    const t3 = ft(e2, dt(a2));
    r2.width = t3.width, r2.height = t3.height, n2 ? (r2.x += n2.x, r2.y += n2.y) : (r2.x += t3.x, r2.y += t3.y);
  } else if ("cover" === t2) {
    const e3 = $t(r2, a2.width / a2.height);
    r2.width = e3.width, r2.height = e3.height, n2 ? (r2.x += n2.x, r2.y += n2.y) : (r2.x += e3.x, r2.y += e3.y);
  } else
    t2 ? (r2.width = t2.width, r2.height = t2.height, n2 && (r2.x += n2.x, r2.y += n2.y)) : n2 && (r2.width = o2.width, r2.height = o2.height, r2.x += n2.x, r2.y += n2.y);
  return { srcRect: a2, destRect: r2 };
};
var vn = (e2, t2) => (t2.cornerRadius > 0 ? ((e3, t3, o2, i2, n2, r2) => {
  i2 < 2 * r2 && (r2 = i2 / 2), n2 < 2 * r2 && (r2 = n2 / 2), e3.beginPath(), e3.moveTo(t3 + r2, o2), e3.arcTo(t3 + i2, o2, t3 + i2, o2 + n2, r2), e3.arcTo(t3 + i2, o2 + n2, t3, o2 + n2, r2), e3.arcTo(t3, o2 + n2, t3, o2, r2), e3.arcTo(t3, o2, t3 + i2, o2, r2), e3.closePath();
})(e2, t2.x, t2.y, t2.width, t2.height, t2.cornerRadius) : e2.rect(t2.x, t2.y, t2.width, t2.height), e2);
var wn = (e2, t2) => (t2.backgroundColor && e2.fill(), e2);
var Sn = (e2, t2) => (t2.strokeWidth && e2.stroke(), e2);
var kn = async (e2, t2, o2 = {}) => {
  const { drawImage: i2 } = o2;
  if (e2.lineWidth = t2.strokeWidth ? t2.strokeWidth : 1, e2.strokeStyle = t2.strokeColor ? zo(t2.strokeColor) : "none", e2.fillStyle = t2.backgroundColor ? zo(t2.backgroundColor) : "none", e2.globalAlpha = t2.opacity, t2.backgroundImage) {
    let o3;
    o3 = mn(t2.backgroundImage) ? t2.backgroundImage : await fn(t2.backgroundImage), vn(e2, t2), wn(e2, t2);
    const { srcRect: n2, destRect: r2 } = xn(t2, t2.backgroundSize, Be(o3), t2.backgroundCorners, t2.backgroundPosition);
    return await bn(e2, o3, n2, r2, i2), Sn(e2, t2), [];
  }
  return vn(e2, t2), wn(e2, t2), Sn(e2, t2), [];
};
var Cn = async (e2, t2, o2 = {}) => new Promise(async (i2, n2) => {
  const { drawImage: r2 } = o2;
  if (e2.lineWidth = t2.strokeWidth || 1, e2.strokeStyle = t2.strokeColor ? zo(t2.strokeColor) : "none", e2.fillStyle = t2.backgroundColor ? zo(t2.backgroundColor) : "none", e2.globalAlpha = t2.opacity, e2.ellipse(t2.x, t2.y, t2.rx, t2.ry, 0, 0, 2 * Math.PI), t2.backgroundColor && e2.fill(), t2.backgroundImage) {
    let o3;
    try {
      o3 = await fn(t2.backgroundImage);
    } catch (e3) {
      n2(e3);
    }
    const a2 = ot(t2.x - t2.rx, t2.y - t2.ry, 2 * t2.rx, 2 * t2.ry), { srcRect: s2, destRect: l2 } = xn(a2, t2.backgroundSize, Be(o3), t2.backgroundCorners, t2.backgroundPosition);
    await bn(e2, o3, s2, l2, r2), t2.strokeWidth && e2.stroke(), i2([]);
  } else
    t2.strokeWidth && e2.stroke(), i2([]);
});
var Mn = async (e2, t2, o2) => {
  const i2 = t2.width && t2.height ? Le(t2) : Ko(t2.text, t2), n2 = { x: t2.x, y: t2.y, width: i2.width, height: i2.height };
  if (kn(e2, { ...t2, ...n2, options: o2 }), !t2.text.length)
    return [];
  const { willRequest: r2 } = o2, a2 = await li(t2.text, { ...t2, ...n2, imageWidth: n2.width, imageHeight: n2.height, willRequest: r2 });
  return e2.drawImage(a2, t2.x - Ho, t2.y, a2.width, a2.height), [];
};
var Tn = async (e2, t2) => new Promise(async (o2) => {
  e2.lineWidth = t2.strokeWidth || 1, e2.strokeStyle = t2.strokeColor ? zo(t2.strokeColor) : "none", e2.globalAlpha = t2.opacity;
  let i2 = mi(t2), n2 = gi(t2);
  e2.moveTo(i2.x, i2.y), e2.lineTo(n2.x, n2.y), t2.strokeWidth && e2.stroke(), o2([]);
});
var Pn = async (e2, t2) => new Promise((o2, i2) => {
  e2.lineWidth = t2.strokeWidth || 1, e2.strokeStyle = t2.strokeColor ? zo(t2.strokeColor) : "none", e2.fillStyle = t2.backgroundColor ? zo(t2.backgroundColor) : "none", e2.globalAlpha = t2.opacity;
  const { points: n2 } = t2;
  t2.pathClose && e2.beginPath(), e2.moveTo(n2[0].x, n2[0].y);
  const r2 = n2.length;
  for (let t3 = 1; t3 < r2; t3++)
    e2.lineTo(n2[t3].x, n2[t3].y);
  t2.pathClose && e2.closePath(), t2.strokeWidth && e2.stroke(), t2.backgroundColor && e2.fill(), o2([]);
});
var Rn = async (e2, t2, o2) => {
  const i2 = hn(t2);
  let n2;
  if (po(e2, t2.rotation, i2), ((e3, t3, o3, i3) => {
    (t3 || o3) && (e3.translate(i3.x, i3.y), e3.scale(t3 ? -1 : 1, o3 ? -1 : 1), e3.translate(-i3.x, -i3.y));
  })(e2, t2.flipX, t2.flipY, i2), bi(t2) ? n2 = kn : xi(t2) ? n2 = Cn : vi(t2) ? n2 = Tn : wi(t2) ? n2 = Pn : $i(t2) && (n2 = Mn), n2) {
    const i3 = await n2(e2, t2, o2);
    if (!i3.length)
      return [];
    return [t2, ...await In(e2, i3, o2)];
  }
  return [];
};
var In = async (e2, t2, o2) => {
  let i2 = [];
  for (const n2 of t2)
    e2.save(), e2.beginPath(), i2 = [...i2, ...await Rn(e2, n2, o2)], e2.restore();
  return i2;
};
var An = async (e2, t2 = {}) => {
  const { shapes: o2 = [], contextBounds: i2 = e2, transform: r2 = n, drawImage: a2, willRequest: s2, canvasMemoryLimit: l2, computeShape: c2 = j, preprocessShape: d2 = j } = t2;
  if (!o2.length)
    return e2;
  const u2 = p("canvas");
  u2.width = i2.width, u2.height = i2.height;
  const h2 = u2.getContext("2d", { willReadFrequently: true });
  h2.putImageData(e2, i2.x || 0, i2.y || 0);
  const m2 = o2.map(ci).map(c2).map(d2).flat();
  r2(h2), await In(h2, m2, { drawImage: a2, canvasMemoryLimit: l2, willRequest: s2 });
  const $2 = h2.getImageData(0, 0, u2.width, u2.height);
  return g(u2), $2;
};
var En = async (e2, t2 = {}) => {
  const { backgroundColor: o2, backgroundImage: i2 } = t2, n2 = !(!o2 || o2 && 0 === o2[3]);
  if (!i2 && !n2)
    return e2;
  const r2 = p("canvas");
  r2.width = e2.width, r2.height = e2.height;
  const a2 = r2.getContext("2d", { willReadFrequently: true });
  if (a2.putImageData(e2, 0, 0), a2.globalCompositeOperation = "destination-over", n2 && (a2.fillStyle = zo(o2), a2.fillRect(0, 0, r2.width, r2.height)), i2) {
    let t3;
    t3 = mn(i2) ? i2 : await fn(i2);
    const { srcRect: o3, destRect: n3 } = xn({ x: 0, y: 0, width: e2.width, height: e2.height }, "cover", { width: t3.width, height: t3.height });
    a2.drawImage(t3, o3.x, o3.y, o3.width, o3.height, n3.x, n3.y, n3.width, n3.height);
  }
  const s2 = a2.getImageData(0, 0, r2.width, r2.height);
  return g(r2), s2;
};
var Ln = (e2) => e2.length ? e2.reduce((e3, t2) => ((e4, t3) => {
  const o2 = new Array(20);
  return o2[0] = e4[0] * t3[0] + e4[1] * t3[5] + e4[2] * t3[10] + e4[3] * t3[15], o2[1] = e4[0] * t3[1] + e4[1] * t3[6] + e4[2] * t3[11] + e4[3] * t3[16], o2[2] = e4[0] * t3[2] + e4[1] * t3[7] + e4[2] * t3[12] + e4[3] * t3[17], o2[3] = e4[0] * t3[3] + e4[1] * t3[8] + e4[2] * t3[13] + e4[3] * t3[18], o2[4] = e4[0] * t3[4] + e4[1] * t3[9] + e4[2] * t3[14] + e4[3] * t3[19] + e4[4], o2[5] = e4[5] * t3[0] + e4[6] * t3[5] + e4[7] * t3[10] + e4[8] * t3[15], o2[6] = e4[5] * t3[1] + e4[6] * t3[6] + e4[7] * t3[11] + e4[8] * t3[16], o2[7] = e4[5] * t3[2] + e4[6] * t3[7] + e4[7] * t3[12] + e4[8] * t3[17], o2[8] = e4[5] * t3[3] + e4[6] * t3[8] + e4[7] * t3[13] + e4[8] * t3[18], o2[9] = e4[5] * t3[4] + e4[6] * t3[9] + e4[7] * t3[14] + e4[8] * t3[19] + e4[9], o2[10] = e4[10] * t3[0] + e4[11] * t3[5] + e4[12] * t3[10] + e4[13] * t3[15], o2[11] = e4[10] * t3[1] + e4[11] * t3[6] + e4[12] * t3[11] + e4[13] * t3[16], o2[12] = e4[10] * t3[2] + e4[11] * t3[7] + e4[12] * t3[12] + e4[13] * t3[17], o2[13] = e4[10] * t3[3] + e4[11] * t3[8] + e4[12] * t3[13] + e4[13] * t3[18], o2[14] = e4[10] * t3[4] + e4[11] * t3[9] + e4[12] * t3[14] + e4[13] * t3[19] + e4[14], o2[15] = e4[15] * t3[0] + e4[16] * t3[5] + e4[17] * t3[10] + e4[18] * t3[15], o2[16] = e4[15] * t3[1] + e4[16] * t3[6] + e4[17] * t3[11] + e4[18] * t3[16], o2[17] = e4[15] * t3[2] + e4[16] * t3[7] + e4[17] * t3[12] + e4[18] * t3[17], o2[18] = e4[15] * t3[3] + e4[16] * t3[8] + e4[17] * t3[13] + e4[18] * t3[18], o2[19] = e4[15] * t3[4] + e4[16] * t3[9] + e4[17] * t3[14] + e4[18] * t3[19] + e4[19], o2;
})([...e3], t2), e2.shift()) : [];
var Fn = (e2, t2) => {
  const o2 = e2.width * e2.height, i2 = t2.reduce((e3, t3) => (t3.width > e3.width && t3.height > e3.height && (e3.width = t3.width, e3.height = t3.height), e3), { width: 0, height: 0 }), n2 = i2.width * i2.height;
  return ((e3, t3 = 2) => Math.round(e3 * t3) / t3)(Math.max(0.5, 0.5 + (1 - n2 / o2) / 2), 5);
};
function zn() {
}
var Bn = (e2) => e2;
function On(e2, t2) {
  for (const o2 in t2)
    e2[o2] = t2[o2];
  return e2;
}
function Dn(e2) {
  return e2();
}
function Wn() {
  return /* @__PURE__ */ Object.create(null);
}
function _n(e2) {
  e2.forEach(Dn);
}
function Vn(e2) {
  return "function" == typeof e2;
}
function Nn(e2, t2) {
  return e2 != e2 ? t2 == t2 : e2 !== t2 || e2 && "object" == typeof e2 || "function" == typeof e2;
}
function Hn(e2, ...t2) {
  if (null == e2)
    return zn;
  const o2 = e2.subscribe(...t2);
  return o2.unsubscribe ? () => o2.unsubscribe() : o2;
}
function jn(e2) {
  let t2;
  return Hn(e2, (e3) => t2 = e3)(), t2;
}
function Un(e2, t2, o2) {
  e2.$$.on_destroy.push(Hn(t2, o2));
}
function Zn(e2, t2, o2, i2) {
  if (e2) {
    const n2 = Xn(e2, t2, o2, i2);
    return e2[0](n2);
  }
}
function Xn(e2, t2, o2, i2) {
  return e2[1] && i2 ? On(o2.ctx.slice(), e2[1](i2(t2))) : o2.ctx;
}
function Gn(e2, t2, o2, i2) {
  if (e2[2] && i2) {
    const n2 = e2[2](i2(o2));
    if (void 0 === t2.dirty)
      return n2;
    if ("object" == typeof n2) {
      const e3 = [], o3 = Math.max(t2.dirty.length, n2.length);
      for (let i3 = 0; i3 < o3; i3 += 1)
        e3[i3] = t2.dirty[i3] | n2[i3];
      return e3;
    }
    return t2.dirty | n2;
  }
  return t2.dirty;
}
function Yn(e2, t2, o2, i2, n2, r2) {
  if (n2) {
    const a2 = Xn(t2, o2, i2, r2);
    e2.p(a2, n2);
  }
}
function qn(e2) {
  if (e2.ctx.length > 32) {
    const t2 = [], o2 = e2.ctx.length / 32;
    for (let e3 = 0; e3 < o2; e3++)
      t2[e3] = -1;
    return t2;
  }
  return -1;
}
function Kn(e2) {
  const t2 = {};
  for (const o2 in e2)
    "$" !== o2[0] && (t2[o2] = e2[o2]);
  return t2;
}
function Jn(e2, t2) {
  const o2 = {};
  t2 = new Set(t2);
  for (const i2 in e2)
    t2.has(i2) || "$" === i2[0] || (o2[i2] = e2[i2]);
  return o2;
}
function Qn(e2, t2, o2) {
  return e2.set(o2), t2;
}
function er(e2) {
  return e2 && Vn(e2.destroy) ? e2.destroy : zn;
}
var tr = "undefined" != typeof window;
var or = tr ? () => window.performance.now() : () => Date.now();
var ir = tr ? (e2) => requestAnimationFrame(e2) : zn;
var nr = /* @__PURE__ */ new Set();
function rr(e2) {
  nr.forEach((t2) => {
    t2.c(e2) || (nr.delete(t2), t2.f());
  }), 0 !== nr.size && ir(rr);
}
function ar(e2) {
  let t2;
  return 0 === nr.size && ir(rr), { promise: new Promise((o2) => {
    nr.add(t2 = { c: e2, f: o2 });
  }), abort() {
    nr.delete(t2);
  } };
}
function sr(e2, t2) {
  e2.appendChild(t2);
}
function lr(e2) {
  if (!e2)
    return document;
  const t2 = e2.getRootNode ? e2.getRootNode() : e2.ownerDocument;
  return t2 && t2.host ? t2 : e2.ownerDocument;
}
function cr(e2) {
  const t2 = hr("style");
  return function(e3, t3) {
    sr(e3.head || e3, t3), t3.sheet;
  }(lr(e2), t2), t2.sheet;
}
function dr(e2, t2, o2) {
  e2.insertBefore(t2, o2 || null);
}
function ur(e2) {
  e2.parentNode.removeChild(e2);
}
function hr(e2) {
  return document.createElement(e2);
}
function pr(e2) {
  return document.createElementNS("http://www.w3.org/2000/svg", e2);
}
function mr(e2) {
  return document.createTextNode(e2);
}
function gr() {
  return mr(" ");
}
function $r() {
  return mr("");
}
function fr(e2, t2, o2, i2) {
  return e2.addEventListener(t2, o2, i2), () => e2.removeEventListener(t2, o2, i2);
}
function yr(e2) {
  return function(t2) {
    return t2.preventDefault(), e2.call(this, t2);
  };
}
function br(e2) {
  return function(t2) {
    return t2.stopPropagation(), e2.call(this, t2);
  };
}
function xr(e2, t2, o2) {
  null == o2 ? e2.removeAttribute(t2) : e2.getAttribute(t2) !== o2 && e2.setAttribute(t2, o2);
}
function vr(e2, t2) {
  const o2 = Object.getOwnPropertyDescriptors(e2.__proto__);
  for (const i2 in t2)
    null == t2[i2] ? e2.removeAttribute(i2) : "style" === i2 ? e2.style.cssText = t2[i2] : "__value" === i2 ? e2.value = e2[i2] = t2[i2] : o2[i2] && o2[i2].set ? e2[i2] = t2[i2] : xr(e2, i2, t2[i2]);
}
function wr(e2, t2) {
  t2 = "" + t2, e2.wholeText !== t2 && (e2.data = t2);
}
function Sr(e2, t2) {
  e2.value = null == t2 ? "" : t2;
}
function kr(e2, t2, { bubbles: o2 = false, cancelable: i2 = false } = {}) {
  const n2 = document.createEvent("CustomEvent");
  return n2.initCustomEvent(e2, o2, i2, t2), n2;
}
var Cr = class {
  constructor(e2 = false) {
    this.is_svg = false, this.is_svg = e2, this.e = this.n = null;
  }
  c(e2) {
    this.h(e2);
  }
  m(e2, t2, o2 = null) {
    this.e || (this.is_svg ? this.e = pr(t2.nodeName) : this.e = hr(t2.nodeName), this.t = t2, this.c(e2)), this.i(o2);
  }
  h(e2) {
    this.e.innerHTML = e2, this.n = Array.from(this.e.childNodes);
  }
  i(e2) {
    for (let t2 = 0; t2 < this.n.length; t2 += 1)
      dr(this.t, this.n[t2], e2);
  }
  p(e2) {
    this.d(), this.h(e2), this.i(this.a);
  }
  d() {
    this.n.forEach(ur);
  }
};
function Mr(e2, t2) {
  return new e2(t2);
}
var Tr = /* @__PURE__ */ new Map();
var Pr;
var Rr = 0;
function Ir(e2, t2, o2, i2, n2, r2, a2, s2 = 0) {
  const l2 = 16.666 / i2;
  let c2 = "{\n";
  for (let e3 = 0; e3 <= 1; e3 += l2) {
    const i3 = t2 + (o2 - t2) * r2(e3);
    c2 += 100 * e3 + `%{${a2(i3, 1 - i3)}}
`;
  }
  const d2 = c2 + `100% {${a2(o2, 1 - o2)}}
}`, u2 = `__svelte_${function(e3) {
    let t3 = 5381, o3 = e3.length;
    for (; o3--; )
      t3 = (t3 << 5) - t3 ^ e3.charCodeAt(o3);
    return t3 >>> 0;
  }(d2)}_${s2}`, h2 = lr(e2), { stylesheet: p2, rules: m2 } = Tr.get(h2) || function(e3, t3) {
    const o3 = { stylesheet: cr(t3), rules: {} };
    return Tr.set(e3, o3), o3;
  }(h2, e2);
  m2[u2] || (m2[u2] = true, p2.insertRule(`@keyframes ${u2} ${d2}`, p2.cssRules.length));
  const g2 = e2.style.animation || "";
  return e2.style.animation = `${g2 ? g2 + ", " : ""}${u2} ${i2}ms linear ${n2}ms 1 both`, Rr += 1, u2;
}
function Ar(e2, t2) {
  const o2 = (e2.style.animation || "").split(", "), i2 = o2.filter(t2 ? (e3) => e3.indexOf(t2) < 0 : (e3) => -1 === e3.indexOf("__svelte")), n2 = o2.length - i2.length;
  n2 && (e2.style.animation = i2.join(", "), Rr -= n2, Rr || ir(() => {
    Rr || (Tr.forEach((e3) => {
      const { ownerNode: t3 } = e3.stylesheet;
      t3 && ur(t3);
    }), Tr.clear());
  }));
}
function Er(e2) {
  Pr = e2;
}
function Lr() {
  if (!Pr)
    throw new Error("Function called outside component initialization");
  return Pr;
}
function Fr(e2) {
  Lr().$$.on_mount.push(e2);
}
function zr(e2) {
  Lr().$$.after_update.push(e2);
}
function Br(e2) {
  Lr().$$.on_destroy.push(e2);
}
function Or() {
  const e2 = Lr();
  return (t2, o2, { cancelable: i2 = false } = {}) => {
    const n2 = e2.$$.callbacks[t2];
    if (n2) {
      const r2 = kr(t2, o2, { cancelable: i2 });
      return n2.slice().forEach((t3) => {
        t3.call(e2, r2);
      }), !r2.defaultPrevented;
    }
    return true;
  };
}
function Dr(e2, t2) {
  return Lr().$$.context.set(e2, t2), t2;
}
function Wr(e2) {
  return Lr().$$.context.get(e2);
}
function _r(e2, t2) {
  const o2 = e2.$$.callbacks[t2.type];
  o2 && o2.slice().forEach((e3) => e3.call(this, t2));
}
var Vr = [];
var Nr = [];
var Hr = [];
var jr = [];
var Ur = Promise.resolve();
var Zr = false;
function Xr() {
  Zr || (Zr = true, Ur.then(ea));
}
function Gr() {
  return Xr(), Ur;
}
function Yr(e2) {
  Hr.push(e2);
}
function qr(e2) {
  jr.push(e2);
}
var Kr = /* @__PURE__ */ new Set();
var Jr;
var Qr = 0;
function ea() {
  const e2 = Pr;
  do {
    for (; Qr < Vr.length; ) {
      const e3 = Vr[Qr];
      Qr++, Er(e3), ta(e3.$$);
    }
    for (Er(null), Vr.length = 0, Qr = 0; Nr.length; )
      Nr.pop()();
    for (let e3 = 0; e3 < Hr.length; e3 += 1) {
      const t2 = Hr[e3];
      Kr.has(t2) || (Kr.add(t2), t2());
    }
    Hr.length = 0;
  } while (Vr.length);
  for (; jr.length; )
    jr.pop()();
  Zr = false, Kr.clear(), Er(e2);
}
function ta(e2) {
  if (null !== e2.fragment) {
    e2.update(), _n(e2.before_update);
    const t2 = e2.dirty;
    e2.dirty = [-1], e2.fragment && e2.fragment.p(e2.ctx, t2), e2.after_update.forEach(Yr);
  }
}
function oa(e2, t2, o2) {
  e2.dispatchEvent(kr(`${t2 ? "intro" : "outro"}${o2}`));
}
var ia = /* @__PURE__ */ new Set();
var na;
function ra() {
  na = { r: 0, c: [], p: na };
}
function aa() {
  na.r || _n(na.c), na = na.p;
}
function sa(e2, t2) {
  e2 && e2.i && (ia.delete(e2), e2.i(t2));
}
function la(e2, t2, o2, i2) {
  if (e2 && e2.o) {
    if (ia.has(e2))
      return;
    ia.add(e2), na.c.push(() => {
      ia.delete(e2), i2 && (o2 && e2.d(1), i2());
    }), e2.o(t2);
  } else
    i2 && i2();
}
var ca = { duration: 0 };
function da(e2, t2, o2, i2) {
  let n2 = t2(e2, o2), r2 = i2 ? 0 : 1, a2 = null, s2 = null, l2 = null;
  function c2() {
    l2 && Ar(e2, l2);
  }
  function d2(e3, t3) {
    const o3 = e3.b - r2;
    return t3 *= Math.abs(o3), { a: r2, b: e3.b, d: o3, duration: t3, start: e3.start, end: e3.start + t3, group: e3.group };
  }
  function u2(t3) {
    const { delay: o3 = 0, duration: i3 = 300, easing: u3 = Bn, tick: h2 = zn, css: p2 } = n2 || ca, m2 = { start: or() + o3, b: t3 };
    t3 || (m2.group = na, na.r += 1), a2 || s2 ? s2 = m2 : (p2 && (c2(), l2 = Ir(e2, r2, t3, i3, o3, u3, p2)), t3 && h2(0, 1), a2 = d2(m2, i3), Yr(() => oa(e2, t3, "start")), ar((t4) => {
      if (s2 && t4 > s2.start && (a2 = d2(s2, i3), s2 = null, oa(e2, a2.b, "start"), p2 && (c2(), l2 = Ir(e2, r2, a2.b, a2.duration, 0, u3, n2.css))), a2) {
        if (t4 >= a2.end)
          h2(r2 = a2.b, 1 - r2), oa(e2, a2.b, "end"), s2 || (a2.b ? c2() : --a2.group.r || _n(a2.group.c)), a2 = null;
        else if (t4 >= a2.start) {
          const e3 = t4 - a2.start;
          r2 = a2.a + a2.d * u3(e3 / a2.duration), h2(r2, 1 - r2);
        }
      }
      return !(!a2 && !s2);
    }));
  }
  return { run(e3) {
    Vn(n2) ? (Jr || (Jr = Promise.resolve(), Jr.then(() => {
      Jr = null;
    })), Jr).then(() => {
      n2 = n2(), u2(e3);
    }) : u2(e3);
  }, end() {
    c2(), a2 = s2 = null;
  } };
}
var ua = "undefined" != typeof window ? window : "undefined" != typeof globalThis ? globalThis : global;
function ha(e2, t2) {
  e2.d(1), t2.delete(e2.key);
}
function pa(e2, t2) {
  la(e2, 1, 1, () => {
    t2.delete(e2.key);
  });
}
function ma(e2, t2, o2, i2, n2, r2, a2, s2, l2, c2, d2, u2) {
  let h2 = e2.length, p2 = r2.length, m2 = h2;
  const g2 = {};
  for (; m2--; )
    g2[e2[m2].key] = m2;
  const $2 = [], f2 = /* @__PURE__ */ new Map(), y2 = /* @__PURE__ */ new Map();
  for (m2 = p2; m2--; ) {
    const e3 = u2(n2, r2, m2), s3 = o2(e3);
    let l3 = a2.get(s3);
    l3 ? i2 && l3.p(e3, t2) : (l3 = c2(s3, e3), l3.c()), f2.set(s3, $2[m2] = l3), s3 in g2 && y2.set(s3, Math.abs(m2 - g2[s3]));
  }
  const b2 = /* @__PURE__ */ new Set(), x2 = /* @__PURE__ */ new Set();
  function v2(e3) {
    sa(e3, 1), e3.m(s2, d2), a2.set(e3.key, e3), d2 = e3.first, p2--;
  }
  for (; h2 && p2; ) {
    const t3 = $2[p2 - 1], o3 = e2[h2 - 1], i3 = t3.key, n3 = o3.key;
    t3 === o3 ? (d2 = t3.first, h2--, p2--) : f2.has(n3) ? !a2.has(i3) || b2.has(i3) ? v2(t3) : x2.has(n3) ? h2-- : y2.get(i3) > y2.get(n3) ? (x2.add(i3), v2(t3)) : (b2.add(n3), h2--) : (l2(o3, a2), h2--);
  }
  for (; h2--; ) {
    const t3 = e2[h2];
    f2.has(t3.key) || l2(t3, a2);
  }
  for (; p2; )
    v2($2[p2 - 1]);
  return $2;
}
function ga(e2, t2) {
  const o2 = {}, i2 = {}, n2 = { $$scope: 1 };
  let r2 = e2.length;
  for (; r2--; ) {
    const a2 = e2[r2], s2 = t2[r2];
    if (s2) {
      for (const e3 in a2)
        e3 in s2 || (i2[e3] = 1);
      for (const e3 in s2)
        n2[e3] || (o2[e3] = s2[e3], n2[e3] = 1);
      e2[r2] = s2;
    } else
      for (const e3 in a2)
        n2[e3] = 1;
  }
  for (const e3 in i2)
    e3 in o2 || (o2[e3] = void 0);
  return o2;
}
function $a(e2) {
  return "object" == typeof e2 && null !== e2 ? e2 : {};
}
function fa(e2, t2, o2) {
  const i2 = e2.$$.props[t2];
  void 0 !== i2 && (e2.$$.bound[i2] = o2, o2(e2.$$.ctx[i2]));
}
function ya(e2) {
  e2 && e2.c();
}
function ba(e2, t2, o2, i2) {
  const { fragment: n2, after_update: r2 } = e2.$$;
  n2 && n2.m(t2, o2), i2 || Yr(() => {
    const t3 = e2.$$.on_mount.map(Dn).filter(Vn);
    e2.$$.on_destroy ? e2.$$.on_destroy.push(...t3) : _n(t3), e2.$$.on_mount = [];
  }), r2.forEach(Yr);
}
function xa(e2, t2) {
  const o2 = e2.$$;
  null !== o2.fragment && (_n(o2.on_destroy), o2.fragment && o2.fragment.d(t2), o2.on_destroy = o2.fragment = null, o2.ctx = []);
}
function va(e2, t2, o2, i2, n2, r2, a2, s2 = [-1]) {
  const l2 = Pr;
  Er(e2);
  const c2 = e2.$$ = { fragment: null, ctx: [], props: r2, update: zn, not_equal: n2, bound: Wn(), on_mount: [], on_destroy: [], on_disconnect: [], before_update: [], after_update: [], context: new Map(t2.context || (l2 ? l2.$$.context : [])), callbacks: Wn(), dirty: s2, skip_bound: false, root: t2.target || l2.$$.root };
  a2 && a2(c2.root);
  let d2 = false;
  if (c2.ctx = o2 ? o2(e2, t2.props || {}, (t3, o3, ...i3) => {
    const r3 = i3.length ? i3[0] : o3;
    return c2.ctx && n2(c2.ctx[t3], c2.ctx[t3] = r3) && (!c2.skip_bound && c2.bound[t3] && c2.bound[t3](r3), d2 && function(e3, t4) {
      -1 === e3.$$.dirty[0] && (Vr.push(e3), Xr(), e3.$$.dirty.fill(0)), e3.$$.dirty[t4 / 31 | 0] |= 1 << t4 % 31;
    }(e2, t3)), o3;
  }) : [], c2.update(), d2 = true, _n(c2.before_update), c2.fragment = !!i2 && i2(c2.ctx), t2.target) {
    if (t2.hydrate) {
      const e3 = function(e4) {
        return Array.from(e4.childNodes);
      }(t2.target);
      c2.fragment && c2.fragment.l(e3), e3.forEach(ur);
    } else
      c2.fragment && c2.fragment.c();
    t2.intro && sa(e2.$$.fragment), ba(e2, t2.target, t2.anchor, t2.customElement), ea();
  }
  Er(l2);
}
var wa = class {
  $destroy() {
    xa(this, 1), this.$destroy = zn;
  }
  $on(e2, t2) {
    if (!Vn(t2))
      return zn;
    const o2 = this.$$.callbacks[e2] || (this.$$.callbacks[e2] = []);
    return o2.push(t2), () => {
      const e3 = o2.indexOf(t2);
      -1 !== e3 && o2.splice(e3, 1);
    };
  }
  $set(e2) {
    var t2;
    this.$$set && (t2 = e2, 0 !== Object.keys(t2).length) && (this.$$.skip_bound = true, this.$$set(e2), this.$$.skip_bound = false);
  }
};
var Sa = [];
function ka(e2, t2) {
  return { subscribe: Ca(e2, t2).subscribe };
}
function Ca(e2, t2 = zn) {
  let o2;
  const i2 = /* @__PURE__ */ new Set();
  function n2(t3) {
    if (Nn(e2, t3) && (e2 = t3, o2)) {
      const t4 = !Sa.length;
      for (const t5 of i2)
        t5[1](), Sa.push(t5, e2);
      if (t4) {
        for (let e3 = 0; e3 < Sa.length; e3 += 2)
          Sa[e3][0](Sa[e3 + 1]);
        Sa.length = 0;
      }
    }
  }
  return { set: n2, update: function(t3) {
    n2(t3(e2));
  }, subscribe: function(r2, a2 = zn) {
    const s2 = [r2, a2];
    return i2.add(s2), 1 === i2.size && (o2 = t2(n2) || zn), r2(e2), () => {
      i2.delete(s2), 0 === i2.size && (o2(), o2 = null);
    };
  } };
}
function Ma(e2, t2, o2) {
  const i2 = !Array.isArray(e2), n2 = i2 ? [e2] : e2, r2 = t2.length < 2;
  return ka(o2, (e3) => {
    let o3 = false;
    const a2 = [];
    let s2 = 0, l2 = zn;
    const c2 = () => {
      if (s2)
        return;
      l2();
      const o4 = t2(i2 ? a2[0] : a2, e3);
      r2 ? e3(o4) : l2 = Vn(o4) ? o4 : zn;
    }, d2 = n2.map((e4, t3) => Hn(e4, (e5) => {
      a2[t3] = e5, s2 &= ~(1 << t3), o3 && c2();
    }, () => {
      s2 |= 1 << t3;
    }));
    return o3 = true, c2(), function() {
      _n(d2), l2();
    };
  });
}
var Ta = (e2) => e2.reduce((e3, t2) => Object.assign(e3, t2), {});
var Pa = (e2) => ({ updateValue: e2 });
var Ra = (e2) => ({ defaultValue: e2 });
var Ia = (e2) => ({ store: e2 });
var Aa = (e2) => ({ store: (t2, o2) => Ma(...e2(o2)) });
var Ea = (e2) => ({ store: (t2, o2) => {
  const [i2, n2, r2 = () => false] = e2(o2);
  let a2, s2 = true;
  return Ma(i2, (e3, t3) => {
    n2(e3, (e4) => {
      !s2 && r2(a2, e4) || (a2 = e4, s2 = false, t3(e4));
    });
  });
} });
var La = (e2) => ({ store: (t2, o2) => {
  const [i2, n2 = {}, r2] = e2(o2);
  let a2 = [];
  const s2 = {}, l2 = (e3) => i2(e3, s2), c2 = (e3) => {
    (a2.length || e3.length) && (a2 = e3, d2());
  }, d2 = () => {
    const e3 = a2.map(l2);
    r2 && e3.sort(r2), a2 = [...e3], h2(e3);
  };
  Object.entries(n2).map(([e3, t3]) => t3.subscribe((t4) => {
    s2[e3] = t4, t4 && d2();
  }));
  const { subscribe: u2, set: h2 } = Ca(t2 || []);
  return { set: c2, update: (e3) => c2(e3(a2)), subscribe: u2 };
} });
var Fa = (e2) => {
  const t2 = {}, o2 = {};
  return e2.forEach(([e3, ...i2]) => {
    const r2 = Ta(i2), a2 = t2[e3] = ((e4, t3, o3) => {
      const { store: i3 = (e5) => Ca(e5), defaultValue: r3 = n, updateValue: a3 } = o3, s3 = i3(r3(), t3, e4), { subscribe: l2, update: c2 = n } = s3;
      let d2;
      const u2 = (e5) => {
        let t4 = true;
        d2 && d2(), d2 = l2((o4) => {
          if (t4)
            return t4 = false;
          e5(o4), d2(), d2 = void 0;
        });
      }, h2 = a3 ? a3(e4) : j;
      return s3.set = (e5) => c2((t4) => h2(e5, t4, u2)), s3.defaultValue = r3, s3;
    })(o2, t2, r2), s2 = { get: () => jn(a2), set: a2.set };
    Object.defineProperty(o2, e3, s2);
  }), { stores: t2, accessors: o2 };
};
var za = [["src", Ia(() => {
  let e2;
  const { subscribe: t2, set: o2 } = Ca(), i2 = (t3) => {
    e2 !== t3 && (e2 = t3, o2(e2));
  };
  return { set: i2, subscribe: t2, update: (t3) => i2(t3(e2)) };
})], ["imageReader"], ["imageWriter"], ["imageScrambler"], ["imageRedactionRendering", Ra(() => "pixelated")], ["images", Ra(() => [])], ["shapePreprocessor"], ["willRequestResource"], ["willRequest"]];
var Ba = (e2) => e2.charAt(0).toUpperCase() + e2.slice(1);
var Oa = (e2, t2) => {
  Object.keys(t2).forEach((o2) => {
    const i2 = T(t2[o2]) ? { value: t2[o2], writable: false } : t2[o2];
    Object.defineProperty(e2, o2, i2);
  });
};
var Da = (e2, t2) => {
  let o2, i2, n2, r2, a2, s2, l2, c2, d2, u2;
  const h2 = t2.length;
  for (o2 = 0; o2 < h2; o2++)
    if (i2 = t2[o2], n2 = t2[o2 + 1 > h2 - 1 ? 0 : o2 + 1], r2 = i2.x - e2.x, a2 = i2.y - e2.y, s2 = n2.x - e2.x, l2 = n2.y - e2.y, c2 = r2 - s2, d2 = a2 - l2, u2 = c2 * a2 - d2 * r2, u2 < -1e-5)
      return false;
  return true;
};
var Wa = (e2, t2) => {
  const o2 = Pt(t2), i2 = le();
  bt(e2).forEach((e3) => {
    be(e3, i2), Da(e3, t2) || o2.forEach((t3) => {
      const o3 = Math.atan2(t3.start.y - t3.end.y, t3.start.x - t3.end.x), n3 = 1e4 * Math.sin(Math.PI - o3), r2 = 1e4 * Math.cos(Math.PI - o3), a2 = ce(e3.x + n3, e3.y + r2), s2 = Ze(Ue(t3), 1e4), l2 = kt(je(e3, a2), s2);
      l2 && be(i2, xe(ue(l2), e3));
    });
  });
  const n2 = Ye(e2);
  be(n2, i2);
  return !!bt(n2).every((e3) => Da(e3, t2)) && (ht(e2, n2), true);
};
var _a = (e2, t2) => {
  const o2 = bt(e2), i2 = Rt(t2, 5), n2 = it(e2), r2 = [];
  o2.forEach((e3) => {
    const t3 = ((e4, t4) => {
      if (0 === t4)
        return e4;
      const o4 = ce(e4.start.x - e4.end.x, e4.start.y - e4.end.y), i3 = ge(o4), n3 = we(i3, t4);
      return e4.end.x += n3.x, e4.end.y += n3.y, e4;
    })(je(ue(n2), ue(e3)), 1e6);
    let o3 = false;
    i2.map(Ue).forEach((e4) => {
      const i3 = kt(t3, e4);
      i3 && !o3 && (r2.push(i3), o3 = true);
    });
  });
  const a2 = Me(r2[0], r2[2]) < Me(r2[1], r2[3]) ? [r2[0], r2[2]] : [r2[1], r2[3]], s2 = Qe(a2);
  return s2.width < e2.width && (ht(e2, s2), true);
};
var Va = (e2, t2, o2 = { x: 0, y: 0 }) => {
  const i2 = Ke(e2), n2 = it(i2), r2 = vt(i2, o2, n2).map((e3) => pe(e3, t2, n2)), a2 = Qe(r2);
  return r2.map((e3) => xe(e3, a2));
};
var Na = (e2, t2 = 0, o2 = dt(e2)) => {
  let i2, n2;
  if (0 !== t2) {
    const r2 = Math.atan2(1, o2), a2 = Math.sign(t2) * t2, s2 = a2 % Math.PI, l2 = a2 % Z;
    let c2;
    c2 = s2 > X && s2 < Z + X ? l2 > X ? a2 : Z - l2 : l2 > X ? Z - l2 : a2;
    const d2 = Math.min(Math.abs(e2.height / Math.sin(r2 + c2)), Math.abs(e2.width / Math.cos(r2 - c2)));
    i2 = Math.cos(r2) * d2, n2 = i2 / o2;
  } else
    i2 = e2.width, n2 = i2 / o2, n2 > e2.height && (n2 = e2.height, i2 = n2 * o2);
  return Oe(i2, n2);
};
var Ha = (e2, t2, o2, i2, n2, r2, a2, s2) => {
  const l2 = Ee(a2), c2 = Ee(s2), d2 = re(Math.max(t2.width / c2.width, t2.height / c2.height)), u2 = re(Math.min(t2.width / l2.width, t2.height / l2.height)), h2 = Ye(t2);
  if (u2 < 1 || d2 > 1) {
    const o3 = it(e2), i3 = it(t2), n3 = u2 < 1 ? u2 : d2, r3 = (i3.x + o3.x) / 2, a3 = (i3.y + o3.y) / 2, s3 = h2.width / n3, l3 = h2.height / n3;
    ut(h2, r3 - 0.5 * s3, a3 - 0.5 * l3, s3, l3);
  }
  return r2 ? (((e3, t3, o3 = 0, i3 = le(), n3) => {
    if (ko(o3) && 0 !== o3 || i3.x || i3.y) {
      const n4 = dt(e3), r3 = Va(t3, o3, i3), a3 = Na(t3, o3, n4);
      if (!(e3.width < a3.width && e3.height < a3.height)) {
        const t4 = 0.5 * e3.width - 0.5 * a3.width, o4 = 0.5 * e3.height - 0.5 * a3.height;
        e3.width > a3.width && (e3.width = a3.width, e3.x += t4), e3.height > a3.height && (e3.height = a3.height, e3.y += o4);
      }
      Wa(e3, r3), _a(e3, r3) && Wa(e3, r3);
    } else {
      const o4 = dt(e3);
      e3.width = Math.min(e3.width, t3.width), e3.height = Math.min(e3.height, t3.height), e3.x = Math.max(e3.x, 0), e3.x + e3.width > t3.width && (e3.x -= e3.x + e3.width - t3.width), e3.y = Math.max(e3.y, 0), e3.y + e3.height > t3.height && (e3.y -= e3.y + e3.height - t3.height);
      const i4 = it(e3), r3 = ft(e3, o4);
      r3.width = Math.max(n3.width, r3.width), r3.height = Math.max(n3.height, r3.height), r3.x = i4.x - 0.5 * r3.width, r3.y = i4.y - 0.5 * r3.height, ht(e3, r3);
    }
  })(h2, o2, i2, n2, l2), { crop: h2 }) : { crop: h2 };
};
var ja = (e2, t2, o2) => {
  const i2 = Ke(e2), n2 = it(i2), r2 = pt(i2, o2, n2), a2 = it(wt(Qe(r2))), s2 = it(t2), l2 = pe(s2, -o2, a2), c2 = xe(l2, a2), d2 = ye(be(n2, c2), re);
  return ot(d2.x - 0.5 * t2.width, d2.y - 0.5 * t2.height, t2.width, t2.height);
};
var Ua = (e2, t2, o2) => Math.max(t2, Math.min(e2, o2));
var Za = ["cropLimitToImage", "cropMinSize", "cropMaxSize", "cropAspectRatio", "flipX", "flipY", "rotation", "crop", "colorMatrix", "convolutionMatrix", "gamma", "vignette", "redaction", "annotation", "decoration", "frame", "backgroundColor", "backgroundImage", "targetSize", "metadata", "trim", "volume"];
var Xa = (e2) => To(e2) ? e2.map(Xa) : oo(e2) || Lt(e2) ? e2 : S(e2) ? { ...e2 } : e2;
var Ga = (e2) => e2.map((e3) => Object.entries(e3).reduce((e4, [t2, o2]) => (t2.startsWith("_") || (e4[t2] = o2), e4), {}));
var Ya = (e2, t2) => e2 === t2;
var qa = (e2, t2, o2 = Ya) => {
  if (e2.length !== t2.length)
    return false;
  for (let i2 = 0; i2 < e2.length; i2++)
    if (!o2(e2[i2], t2[i2]))
      return false;
  return true;
};
var Ka = (e2, t2, o2) => {
  const i2 = ye(it(e2), (e3) => re(e3, 8)), n2 = Ke(t2), r2 = it(n2), a2 = pt(n2, o2, r2), s2 = ye(_e(Qe(a2)), (e3) => re(e3, 8)), l2 = Math.abs(s2.x - i2.x), c2 = Math.abs(s2.y - i2.y);
  return l2 < 1 && c2 < 1;
};
var Ja = (e2, t2, o2, i2, n2) => {
  if (!n2)
    return [-1 / 0, 1 / 0];
  const r2 = Math.max(o2.width / i2.width, o2.height / i2.height), a2 = Oe(i2.width * r2, i2.height * r2), s2 = (l2 = a2, Math.sqrt(l2.width * l2.width + l2.height * l2.height));
  var l2;
  if (s2 < Math.min(e2.width, e2.height))
    return [-1 / 0, 1 / 0];
  const c2 = t2 ? e2.height : e2.width, d2 = t2 ? e2.width : e2.height, u2 = Math.acos(a2.height / s2), h2 = u2 - Math.acos(d2 / s2), p2 = Math.asin(c2 / s2) - u2;
  if (Number.isNaN(h2) && Number.isNaN(p2))
    return [-1 / 0, 1 / 0];
  const m2 = Number.isNaN(h2) ? p2 : Number.isNaN(p2) ? h2 : Math.min(h2, p2);
  return [-m2, m2];
};
var Qa = (e2, t2) => {
  const { context: o2, props: i2 } = t2;
  return e2._isFormatted || ((e2 = Yi(e2))._isFormatted = true, Object.assign(e2, i2)), e2._isDraft || !Ii(e2) || e2._context && ct(o2, e2._context) || (cn(e2, o2), e2._context = { ...o2 }), e2;
};
var es = [["file"], ["size"], ["loadState"], ["processState"], ["aspectRatio", Aa(({ size: e2 }) => [e2, (e3) => e3 ? dt(e3) : void 0])], ["perspectiveX", Ra(() => 0)], ["perspectiveY", Ra(() => 0)], ["perspective", Aa(({ perspectiveX: e2, perspectiveY: t2 }) => [[e2, t2], ([e3, t3]) => ({ x: e3, y: t3 })])], ["rotation", Ra(() => 0), Pa((e2) => (t2, o2, i2) => {
  if (t2 === o2)
    return t2;
  const { loadState: n2, size: r2, rotationRange: a2, cropMinSize: s2, cropMaxSize: l2, crop: c2, perspective: d2, cropLimitToImage: u2, cropOrigin: h2 } = e2;
  if (!c2 || !n2 || !n2.beforeComplete)
    return t2;
  const p2 = u2 && ((e3, t3, o3) => {
    const i3 = Na(t3, o3, dt(e3));
    return De(He(i3, Math.round), He(Ee(e3), Math.round));
  })(c2, r2, o2), m2 = u2 && Ka(c2, r2, o2), g2 = ((e3, t3, o3, i3, n3, r3, a3, s3, l3, c3) => {
    const d3 = Ee(l3), u3 = Ee(c3);
    a3 && (u3.width = Math.min(c3.width, n3.width), u3.height = Math.min(c3.height, n3.height));
    let h3 = false;
    const p3 = (t4, o4) => {
      const l4 = ja(n3, i3, t4), c4 = Ke(n3), m4 = it(c4), g4 = vt(c4, r3, m4), $2 = xe(ue(m4), St(g4)), f2 = pe(it(l4), o4, m4), y2 = xe(ue(m4), f2);
      g4.forEach((e4) => pe(e4, o4, m4));
      const b2 = Qe(g4), x2 = St(g4), v2 = be(xe(xe(x2, y2), b2), $2), w2 = ot(v2.x - 0.5 * l4.width, v2.y - 0.5 * l4.height, l4.width, l4.height);
      if (s3 && rt(w2, s3.width / w2.width), a3) {
        const e4 = Va(n3, o4, r3);
        _a(w2, e4);
      }
      const S2 = re(Math.min(w2.width / d3.width, w2.height / d3.height), 8), k2 = re(Math.max(w2.width / u3.width, w2.height / u3.height), 8);
      return (S2 < 1 || k2 > 1) && re(Math.abs(o4 - t4)) === re(Math.PI / 2) && !h3 ? (h3 = true, p3(e3, e3 + Math.sign(o4 - t4) * Math.PI)) : { rotation: o4, crop: xt(w2, (e4) => re(e4, 8)) };
    }, m3 = Math.sign(t3) * Math.round(Math.abs(t3) / Z) * Z, g3 = Ua(t3, m3 + o3[0], m3 + o3[1]);
    return p3(e3, g3);
  })(o2, t2, a2, c2, r2, d2, u2, h2, s2, l2);
  if (p2 && m2) {
    const e3 = Na(r2, t2, dt(g2.crop));
    g2.crop.x += 0.5 * g2.crop.width, g2.crop.y += 0.5 * g2.crop.height, g2.crop.x -= 0.5 * e3.width, g2.crop.y -= 0.5 * e3.height, g2.crop.width = e3.width, g2.crop.height = e3.height;
  }
  return i2(() => {
    e2.crop = xt(g2.crop, (e3) => re(e3, 8));
  }), g2.rotation;
})], ["flipX", Ra(() => false)], ["flipY", Ra(() => false)], ["flip", Aa(({ flipX: e2, flipY: t2 }) => [[e2, t2], ([e3, t3]) => ({ x: e3, y: t3 })])], ["isRotatedSideways", Ea(({ rotation: e2 }) => [[e2], ([e3], t2) => t2(G(e3)), (e3, t2) => e3 !== t2])], ["crop", Pa((e2) => (t2, o2 = t2) => {
  const { loadState: i2, size: n2, cropMinSize: r2, cropMaxSize: a2, cropLimitToImage: s2, cropAspectRatio: l2, rotation: c2, perspective: d2 } = e2;
  if (!t2 && !o2 || !i2 || !i2.beforeComplete)
    return t2;
  t2 || (t2 = Ke(Na(n2, c2, l2 || dt(n2))));
  const u2 = Ha(o2, t2, n2, c2, d2, s2, r2, a2), h2 = xt(u2.crop, (e3) => re(e3, 8));
  return ct(o2, h2) ? o2 : h2;
})], ["cropAspectRatio", Pa((e2) => (t2, o2) => {
  const { loadState: i2, crop: n2, size: r2, rotation: a2, cropLimitToImage: s2 } = e2, l2 = ((e3) => {
    if (e3) {
      if (/:/.test(e3)) {
        const [t3, o3] = e3.split(":");
        return t3 / o3;
      }
      return parseFloat(e3);
    }
  })(t2);
  if (!l2)
    return;
  if (!n2 || !i2 || !i2.beforeComplete)
    return l2;
  const c2 = o2 ? Math.abs(t2 - o2) : 1;
  if (Ka(n2, r2, a2) && s2 && c2 >= 0.1) {
    const o3 = ((e3, t3) => {
      const o4 = e3.width, i3 = e3.height;
      return G(t3) && (e3.width = i3, e3.height = o4), e3;
    })(Ee(r2), a2);
    e2.crop = xt(ft(Ke(o3), t2), re);
  } else {
    const t3 = { width: n2.height * l2, height: n2.height }, o3 = 0.5 * (n2.width - t3.width), i3 = 0.5 * (n2.height - t3.height);
    e2.crop = xt(ot(n2.x + o3, n2.y + i3, t3.width, t3.height), re);
  }
  return l2;
})], ["cropOrigin"], ["cropMinSize", Ra(() => ({ width: 1, height: 1 }))], ["cropMaxSize", Ra(() => ({ width: 32768, height: 32768 }))], ["cropLimitToImage", Ra(() => true), Pa((e2) => (t2, o2, i2) => {
  const { crop: n2 } = e2;
  return n2 ? (!o2 && t2 && i2(() => e2.crop = Ye(e2.crop)), t2) : t2;
})], ["cropSize", Ea(({ crop: e2 }) => [[e2], ([e3], t2) => {
  e3 && t2(Oe(e3.width, e3.height));
}, (e3, t2) => De(e3, t2)])], ["cropRectAspectRatio", Aa(({ cropSize: e2 }) => [[e2], ([e3], t2) => {
  e3 && t2(re(dt(e3), 5));
}])], ["cropRange", Ea(({ size: e2, rotation: t2, cropRectAspectRatio: o2, cropMinSize: i2, cropMaxSize: n2, cropLimitToImage: r2 }) => [[e2, t2, o2, i2, n2, r2], ([e3, t3, o3, i3, n3, r3], a2) => {
  if (!e3)
    return;
  a2(((e4, t4, o4, i4, n4, r4) => {
    const a3 = Ee(i4), s2 = Ee(n4);
    return r4 ? [a3, He(Na(e4, t4, o4), Math.round)] : [a3, s2];
  })(e3, t3, o3, i3, n3, r3));
}, (e3, t3) => qa(e3, t3)])], ["rotationRange", Ea(({ size: e2, isRotatedSideways: t2, cropMinSize: o2, cropSize: i2, cropLimitToImage: n2 }) => [[e2, t2, o2, i2, n2], ([e3, t3, o3, i3, n3], r2) => {
  if (!e3 || !i3)
    return;
  r2(Ja(e3, t3, o3, i3, n3));
}, (e3, t3) => qa(e3, t3)])], ["backgroundColor", Pa(() => (e2) => ((e3 = [0, 0, 0, 0], t2 = 1) => 4 === e3.length ? e3 : [...e3, t2])(e2))], ["backgroundImage"], ["targetSize"], ["colorMatrix"], ["convolutionMatrix"], ["gamma"], ["noise"], ["vignette"], ["duration"], ["trim"], ["volume"], ["redaction", La(({ size: e2 }) => [Qa, { context: e2 }])], ["annotation", La(({ size: e2 }) => [Qa, { context: e2 }])], ["decoration", La(({ crop: e2 }) => [Qa, { context: e2 }])], ["frame", Pa(() => (e2) => {
  if (!e2)
    return;
  const t2 = { frameStyle: void 0, x: 0, y: 0, width: "100%", height: "100%", disableStyle: ["backgroundColor", "strokeColor", "strokeWidth"] };
  return M(e2) ? t2.frameStyle = e2 : Object.assign(t2, e2), t2;
})], ["metadata"], ["state", Ia((e2, t2, o2) => {
  const i2 = Za.map((e3) => t2[e3]);
  let n2 = false;
  const r2 = Ca({}), { subscribe: a2 } = Ma([...i2, r2], (e3, t3) => {
    if (n2)
      return;
    const o3 = Za.reduce((t4, o4, i3) => (t4[o4] = Xa(e3[i3]), t4), {});
    o3.crop && xt(o3.crop, Math.round), o3.redaction = o3.redaction && Ga(o3.redaction), o3.annotation = o3.annotation && Ga(o3.annotation), o3.decoration = o3.decoration && Ga(o3.decoration), t3(o3);
  }), s2 = (e3) => {
    e3 && (n2 = true, o2.cropOrigin = void 0, Za.filter((t3) => Mo(e3, t3)).forEach((t3) => {
      const i3 = e3[t3];
      o2[t3] = null === i3 ? void 0 : Xa(i3);
    }), n2 = false, r2.set({}));
  };
  return { set: s2, update: (e3) => s2(e3(null)), subscribe: a2 };
})]];
var ts = async (e2, t2, o2 = {}, i2) => {
  const { ontaskstart: r2, ontaskprogress: a2, ontaskend: s2, token: l2 } = i2;
  let c2 = false;
  const d2 = { cancel: n };
  l2.cancel = () => {
    c2 = true, d2.cancel();
  };
  for (const [i3, n2] of t2.entries()) {
    if (c2)
      return;
    const [t3, l3] = n2;
    r2(i3, l3);
    try {
      e2 = await t3(e2, { ...o2, taskCancelToken: d2 }, (e3) => a2(i3, l3, e3));
    } catch (e3) {
      throw c2 = true, e3;
    }
    s2(i3, l3);
  }
  return e2;
};
var os = ["loadstart", "loadabort", "loaderror", "loadprogress", "load", "processstart", "processabort", "processerror", "processprogress", "process"];
var is = ["flip", "cropOrigin", "isRotatedSideways", "perspective", "perspectiveX", "perspectiveY", "cropRange"];
var ns = ["images"];
var rs = es.map(([e2]) => e2).filter((e2) => !is.includes(e2));
var as = (e2) => "image" + Ba(e2);
var ss = (e2) => Mo(e2, "crop");
var ls = () => {
  const { stores: e2, accessors: t2 } = Fa(za), { sub: o2, pub: i2 } = _o(), r2 = () => t2.images ? t2.images[0] : {};
  let a2 = {};
  const s2 = {};
  rs.forEach((e3) => {
    Object.defineProperty(t2, as(e3), { get: () => {
      const t3 = r2();
      if (t3)
        return t3.accessors[e3];
    }, set: (t3) => {
      a2[as(e3)] = t3, s2[as(e3)] = t3;
      const o3 = r2();
      o3 && (o3.accessors[e3] = t3);
    } });
  });
  const l2 = () => t2.images && t2.images[0], c2 = e2.src.subscribe((e3) => {
    if (!e3)
      return t2.images = [];
    t2.imageReader && (t2.images.length && (a2 = {}), u2(e3));
  }), d2 = e2.imageReader.subscribe((e3) => {
    e3 && (t2.images.length || t2.src && u2(t2.src));
  }), u2 = (e3) => {
    Promise.resolve().then(() => p2(e3, a2)).catch(() => {
    });
  };
  let h2;
  const p2 = (e3, o3 = {}) => new Promise((r3, c3) => {
    let d3 = l2();
    const u3 = !(false === o3.cropLimitToImage || false === o3.imageCropLimitToImage || false === s2.imageCropLmitedToImage), p3 = o3.cropMinSize || o3.imageCropMinSize || s2.imageCropMinSize, m3 = u3 ? p3 : d3 && d3.accessors.cropMinSize;
    d3 && g2(), d3 = (({ minSize: e4 = { width: 1, height: 1 } } = {}) => {
      const { stores: t3, accessors: o4 } = Fa(es), { pub: i3, sub: r4 } = _o(), a3 = (e5, t4) => {
        const n2 = () => o4[e5] || {}, r5 = (t5) => {
          o4[e5] = { ...n2(), ...t5, timeStamp: Date.now() };
        }, a4 = () => n2().error, s3 = (e6) => {
          a4() || (r5({ error: e6 }), i3(t4 + "error", { ...n2() }));
        };
        return { start() {
          i3(t4 + "start");
        }, onabort() {
          r5({ abort: true }), i3(t4 + "abort", { ...n2() });
        }, ontaskstart(e6, o5) {
          a4() || (r5({ index: e6, task: o5, taskProgress: void 0, taskLengthComputable: void 0 }), i3(t4 + "taskstart", { ...n2() }));
        }, ontaskprogress(e6, o5, s4) {
          a4() || (r5({ index: e6, task: o5, taskProgress: s4.loaded / s4.total, taskLengthComputable: s4.lengthComputable }), i3(t4 + "taskprogress", { ...n2() }), i3(t4 + "progress", { ...n2() }));
        }, ontaskend(e6, o5) {
          a4() || (r5({ index: e6, task: o5 }), i3(t4 + "taskend", { ...n2() }));
        }, ontaskerror(e6) {
          s3(e6);
        }, error(e6) {
          s3(e6);
        }, beforeComplete(e6) {
          a4() || (r5({ beforeComplete: true }), i3("before" + t4, e6));
        }, complete(e6) {
          a4() || (r5({ complete: true }), i3(t4, e6));
        } };
      };
      return Oa(o4, { read: (t4, { reader: i4 }, r5 = {}) => {
        if (!i4)
          return;
        Object.assign(o4, { file: void 0, size: void 0, loadState: void 0 });
        let s3 = { cancel: n }, l3 = false;
        const c4 = a3("loadState", "load"), d4 = { token: s3, ...c4 }, u4 = { src: t4, size: void 0, dest: void 0, duration: void 0 };
        return Promise.resolve().then(async () => {
          try {
            if (c4.start(), l3)
              return c4.onabort();
            const t5 = await ts(u4, i4, r5, d4);
            if (l3)
              return c4.onabort();
            const { size: n2, duration: a4, dest: h3 } = t5 || {};
            if (!n2 || !n2.width || !n2.height)
              throw new Qt("Image size missing", "IMAGE_SIZE_MISSING", t5);
            if (n2.width < e4.width || n2.height < e4.height)
              throw new Qt("Image too small", "IMAGE_TOO_SMALL", { ...t5, minWidth: e4.width, minHeight: e4.height });
            Object.assign(o4, { file: h3, size: n2, duration: a4 }), c4.beforeComplete(t5), c4.complete(t5);
          } catch (e5) {
            c4.error(e5);
          } finally {
            s3 = void 0;
          }
        }), () => {
          l3 = true, s3 && s3.cancel(), c4.onabort();
        };
      }, write: (e5, t4) => {
        if (!o4.loadState.complete)
          return;
        o4.processState = void 0;
        const i4 = a3("processState", "process"), r5 = { src: o4.file, imageState: o4.state, dest: void 0 };
        if (T(e5) && (e5 = e5(o4.file, o4.state)), !e5)
          return i4.start(), void i4.complete(r5);
        let s3 = { cancel: n }, l3 = false;
        const c4 = t4, d4 = { token: s3, ...i4 };
        return Promise.resolve().then(async () => {
          try {
            if (i4.start(), l3)
              return i4.onabort();
            const t5 = await ts(r5, e5, c4, d4);
            if (l3)
              return i4.onabort();
            i4.complete(t5);
          } catch (e6) {
            i4.error(e6);
          } finally {
            s3 = void 0;
          }
        }), () => {
          l3 = true, s3 && s3.cancel();
        };
      }, on: r4 }), { accessors: o4, stores: t3 };
    })({ minSize: m3 }), os.map((e4) => {
      return d3.accessors.on(e4, (t3 = e4, (e5) => i2(t3, e5)));
      var t3;
    });
    const $2 = () => {
      a2 = {}, f2.forEach((e4) => e4());
    }, f2 = [];
    f2.push(d3.accessors.on("loaderror", (e4) => {
      $2(), c3(e4);
    })), f2.push(d3.accessors.on("loadabort", () => {
      $2(), c3({ name: "AbortError" });
    })), f2.push(d3.accessors.on("load", (e4) => {
      h2 = void 0, $2(), r3(e4);
    })), f2.push(d3.accessors.on("beforeload", () => ((e4, o4) => {
      if (ss(o4))
        return void (t2.imageState = o4);
      if (!o4.imageCrop) {
        const t3 = e4.accessors.size, i4 = o4.imageRotation || 0, n3 = Ve(Ee(t3), i4), r4 = Ke(n3);
        r4.width = re(Math.abs(r4.width), 6), r4.height = re(Math.abs(r4.height), 6);
        const a3 = o4.imageCropAspectRatio || (o4.imageCropLimitToImage ? dt(t3) : dt(r4));
        let s3;
        o4.imageCropLimitToImage ? s3 = ft(r4, a3) : (s3 = $t(r4, a3), s3.x = (t3.width - s3.width) / 2, s3.y = (t3.height - s3.height) / 2), o4.imageCrop = s3;
      }
      const i3 = ["imageCropLimitToImage", "imageCrop", "imageCropAspectRatio", "imageRotation"];
      i3.filter((e5) => Mo(o4, e5)).forEach((e5) => {
        t2[e5] = o4[e5], delete o4[e5];
      });
      const n2 = Object.keys(o4).filter((e5) => !i3.includes(e5)).reduce((e5, t3) => (e5[t3] = o4[t3], e5), {});
      Object.assign(t2, n2);
    })(d3, o3))), t2.images = [d3], o3.imageReader && (t2.imageReader = o3.imageReader), o3.imageWriter && (t2.imageWriter = o3.imageWriter), h2 = d3.accessors.read(e3, { reader: t2.imageReader }, { willRequest: t2.willRequest });
  });
  let m2;
  const g2 = () => {
    const e3 = l2();
    e3 && (h2 && h2(), e3.accessors.loadState = void 0, t2.images = []);
  };
  return Object.defineProperty(t2, "stores", { get: () => e2 }), Oa(t2, { on: o2, loadImage: p2, abortLoadImage: () => {
    h2 && h2(), t2.images = [];
  }, editImage: (e3, o3) => new Promise((i3, n2) => {
    p2(e3, o3).then(() => {
      const { images: e4 } = t2, o4 = e4[0], r3 = () => {
        a3(), s3();
      }, a3 = o4.accessors.on("processerror", (e5) => {
        r3(), n2(e5);
      }), s3 = o4.accessors.on("process", (e5) => {
        r3(), i3(e5);
      });
    }).catch(n2);
  }), removeImage: g2, processImage: (e3, o3) => new Promise((i3, n2) => {
    try {
      const r3 = [], a3 = () => {
        m2 = void 0, r3.forEach((e4) => e4());
      };
      (async () => {
        if (((e4) => M(e4) || Lo(e4) || Et(e4))(e3))
          try {
            await p2(e3, o3);
          } catch (e4) {
            n2(e4);
          }
        else
          e3 && (ss(e3) ? t2.imageState = e3 : Object.assign(t2, e3));
        const s3 = l2();
        if (!s3)
          return n2("no image");
        r3.push(s3.accessors.on("processerror", (e4) => {
          a3(), n2(e4);
        })), r3.push(s3.accessors.on("processabort", () => {
          a3(), n2({ name: "AbortError" });
        })), r3.push(s3.accessors.on("process", (e4) => {
          a3(), i3(e4);
        })), m2 = s3.accessors.write(t2.imageWriter, { redactionRenderStyle: t2.imageRedactionRendering, shapePreprocessor: t2.shapePreprocessor || j, imageScrambler: t2.imageScrambler, willRequest: t2.willRequest, willRequestResource: t2.willRequestResource });
      })();
    } catch (e4) {
      n2(e4);
    }
  }), abortProcessImage: () => {
    const e3 = l2();
    e3 && (m2 && m2(), e3.accessors.processState = void 0);
  }, destroy: () => {
    c2 && c2(), d2 && d2();
  } }), t2;
};
var cs = (e2, t2) => {
  const { processImage: o2 } = ls();
  return o2(e2, t2);
};
var ds = () => {
  if (!Vt())
    return 1 / 0;
  const e2 = /15_/.test(navigator.userAgent);
  return lo() ? e2 ? 14745600 : 16777216 : e2 ? 16777216 : 1 / 0;
};
var us = (e2, t2) => Object.keys(e2).filter((e3) => !t2.includes(e3)).reduce((t3, o2) => (t3[o2] = e2[o2], t3), {});
var hs = (e2) => new Promise((t2) => {
  if (e2.duration === 1 / 0)
    return e2.ontimeupdate = () => {
      e2.ontimeupdate = void 0, t2(e2);
    }, void (e2.currentTime = Number.MAX_SAFE_INTEGER);
  t2(e2);
});
var ps = ({ imageDataResizer: e2, canvasMemoryLimit: t2 } = {}) => async (o2, i2, n2, r2) => {
  n2.width = Math.max(n2.width, 1), n2.height = Math.max(n2.height, 1), r2.width = Math.max(r2.width, 1), r2.height = Math.max(r2.height, 1);
  const { dest: a2 } = await cs(i2, { imageReader: Ns(), imageWriter: js({ format: "canvas", targetSize: { ...r2, upscale: true }, imageDataResizer: e2, canvasMemoryLimit: t2 }), imageCrop: n2 });
  o2.drawImage(a2, r2.x, r2.y, r2.width, r2.height), g(a2);
};
var ms = (e2, t2 = (...e3) => e3, o2) => async (i2, n2, r2) => {
  r2(Yt(0, false));
  let a2 = false;
  const s2 = await e2(...t2(i2, n2, (e3) => {
    a2 = true, r2(e3);
  }));
  return o2 && o2(i2, s2), a2 || r2(Yt(1, false)), i2;
};
var gs = ({ willRequest: e2, srcProp: t2 = "src", destProp: o2 = "dest" } = {}) => [ms(no, (o3, i2, n2) => [o3[t2], n2, { ...i2, willRequest: e2 }], (e3, t3) => e3[o2] = t3), "any-to-file"];
var $s = ({ srcProp: e2 = "dest", destProp: t2 = "dest" } = {}) => [ms(async (e3) => {
  if (/octet-stream/.test(e3.type)) {
    console.warn(`Pintura: File has unknown mime type "${e3.type}", make sure your server sets the correct Content-Type header.`);
    let t3 = "image";
    const o2 = await Ut(e3);
    /video/i.test(o2.nodeName) && (t3 = "video");
    const i2 = { type: t3 + "/unknown" };
    return Lt(e3) ? new File([e3], e3.name, { ...i2, lastModified: e3.lastModified }) : new Blob([e3], i2);
  }
  return e3;
}, (t3) => [t3[e2]], (e3, o2) => e3[t2] = o2), "any-to-file"];
var fs = ({ srcProp: e2 = "src", destProp: t2 = "size" } = {}) => [ms(Xt, (t3) => [t3[e2]], (e3, o2) => e3[t2] = o2), "read-image-size"];
var ys = async (e2) => {
  const t2 = await Ut(e2);
  if (Zt(t2))
    return await ((e3) => new Promise((t3, o2) => {
      const i2 = () => {
        hs(e3).then(() => {
          t3(e3.duration);
        });
      };
      if (e3.readyState >= 1)
        return i2();
      e3.onloadedmetadata = i2, e3.onerror = () => o2(e3.error);
    }))(t2);
};
var bs = ({ srcProp: e2 = "src", destProp: t2 = "duration" } = {}) => [ms(ys, (t3) => [t3[e2]], (e3, o2) => e3[t2] = o2), "read-media-duration"];
var xs = ({ srcSize: e2 = "size", srcOrientation: t2 = "orientation", destSize: o2 = "size" } = {}) => [ms(co, (o3) => [o3[e2], o3[t2]], (e3, t3) => e3[o2] = t3), "image-size-match-orientation"];
var vs = ({ srcProp: e2 = "src", destProp: t2 = "head" } = {}) => [ms((e3, t3) => uo(e3) ? a(e3, t3) : void 0, (t3) => [t3[e2], [0, 262144], onprogress], (e3, o2) => e3[t2] = o2), "read-image-head"];
var ws = ({ srcProp: e2 = "head", destProp: t2 = "orientation" } = {}) => [ms(o, (t3) => [t3[e2], 274], (e3, o2 = 1) => e3[t2] = o2), "read-exif-orientation-tag"];
var Ss = ({ srcProp: e2 = "head" } = {}) => [ms(o, (t2) => [t2[e2], 274, 1]), "clear-exif-orientation-tag"];
var ks = ({ srcImageSize: e2 = "size", srcCanvasSize: t2 = "imageData", srcImageState: o2 = "imageState", destImageSize: i2 = "size", destScalar: n2 = "scalar" } = {}) => [ms((e3, t3) => [Math.min(t3.width / e3.width, t3.height / e3.height), Le(t3)], (i3) => [i3[e2], i3[t2], i3[o2]], (e3, [t3, o3]) => {
  e3[n2] = t3, e3[i2] = o3;
}), "calculate-canvas-scalar"];
var Cs = ({ srcProp: e2 = "src", destProp: t2 = "imageData", canvasMemoryLimit: o2 } = {}) => [ms(F, (t3) => [t3[e2], o2], (e3, o3) => e3[t2] = o3), "blob-to-image-data"];
var Ms = ({ srcImageData: e2 = "imageData", srcOrientation: t2 = "orientation" } = {}) => [ms(w, (o2) => [o2[e2], o2[t2]], (e3, t3) => e3.imageData = t3), "image-data-match-orientation"];
var Ts = ({ srcImageData: e2 = "imageData", srcImageState: t2 = "imageState" } = {}) => [ms(En, (o2) => [o2[e2], { backgroundColor: o2[t2].backgroundColor, backgroundImage: o2[t2].backgroundImage }], (e3, t3) => e3.imageData = t3), "image-data-fill"];
var Ps = ({ srcImageData: e2 = "imageData", srcImageState: t2 = "imageState", destScalar: o2 = "scalar" } = {}) => [ms(mo, (i2) => {
  const n2 = i2[o2];
  let { crop: r2 } = i2[t2];
  return r2 && 1 !== n2 && (r2 = rt(Ye(r2), n2, le())), [i2[e2], { crop: r2, rotation: i2[t2].rotation, flipX: i2[t2].flipX, flipY: i2[t2].flipY }];
}, (e3, t3) => e3.imageData = t3), "image-data-crop"];
var Rs = ({ targetSize: e2 = { width: void 0, height: void 0, fit: void 0, upscale: void 0 }, imageDataResizer: t2, srcProp: o2 = "imageData", srcImageState: i2 = "imageState", destImageScaledSize: n2 = "imageScaledSize" }) => [ms(fo, (n3) => {
  const r2 = Math.min(e2.width || Number.MAX_SAFE_INTEGER, n3[i2].targetSize && n3[i2].targetSize.width || Number.MAX_SAFE_INTEGER), a2 = Math.min(e2.height || Number.MAX_SAFE_INTEGER, n3[i2].targetSize && n3[i2].targetSize.height || Number.MAX_SAFE_INTEGER);
  return [n3[o2], { width: r2, height: a2, fit: e2.fit || "contain", upscale: (s2 = n3[i2], !!(s2.targetSize && s2.targetSize.width || s2.targetSize && s2.targetSize.height) || (e2.upscale || false)) }, t2];
  var s2;
}, (e3, t3) => {
  De(e3.imageData, t3) || (e3[n2] = Le(t3)), e3.imageData = t3;
}), "image-data-resize"];
var Is = ({ srcImageData: e2 = "imageData", srcImageState: t2 = "imageState", destImageData: o2 = "imageData" } = {}) => [ms(So, (o3) => {
  const { colorMatrix: i2 } = o3[t2], n2 = i2 && Object.keys(i2).map((e3) => i2[e3]).filter(Boolean);
  return [o3[e2], { colorMatrix: n2 && Ln(n2), convolutionMatrix: o3[t2].convolutionMatrix, gamma: o3[t2].gamma, noise: o3[t2].noise, vignette: o3[t2].vignette }];
}, (e3, t3) => e3[o2] = t3), "image-data-filter"];
var As = ({ srcImageData: e2 = "imageData", srcImageState: t2 = "imageState", destImageData: o2 = "imageData", destScalar: i2 = "scalar" } = {}) => [ms(async (e3, t3, o3, i3, n2, r2) => {
  if (!t3)
    return e3;
  let a2;
  try {
    const n3 = { dataSizeScalar: Fn(e3, i3) };
    o3 && o3[3] > 0 && (n3.backgroundColor = [...o3]), a2 = await t3(e3, n3);
  } catch (e4) {
  }
  const s2 = p("canvas");
  s2.width = e3.width, s2.height = e3.height;
  const l2 = s2.getContext("2d", { willReadFrequently: true });
  if (l2.putImageData(e3, 0, 0), "auto" === r2) {
    const t4 = Math.sqrt(e3.width * e3.height);
    l2.filter = `blur(${Math.round(t4 / 100)}px)`;
  }
  const c2 = new Path2D();
  i3.forEach((e4) => {
    const t4 = ot(e4.x, e4.y, e4.width, e4.height);
    lt(t4, n2);
    const o4 = pt(Ye(t4), e4.rotation), i4 = new Path2D();
    o4.forEach((e5, t5) => {
      if (0 === t5)
        return i4.moveTo(e5.x, e5.y);
      i4.lineTo(e5.x, e5.y);
    }), c2.addPath(i4);
  }), l2.clip(c2, "nonzero"), l2.imageSmoothingEnabled = false, l2.drawImage(a2, 0, 0, s2.width, s2.height), g(a2);
  const d2 = l2.getImageData(0, 0, s2.width, s2.height);
  return g(s2), d2;
}, (o3, { imageScrambler: n2, redactionRenderStyle: r2 }) => [o3[e2], n2, o3[t2].backgroundColor, o3[t2].redaction, o3[i2], r2], (e3, t3) => e3[o2] = t3), "image-data-redact"];
var Es = ({ srcImageData: e2 = "imageData", srcSize: t2 = "size", srcImageState: o2 = "imageState", destImageData: i2 = "imageData", destImageScaledSize: n2 = "imageScaledSize", destScalar: r2 = "scalar", imageDataResizer: a2, canvasMemoryLimit: s2 } = {}) => [ms(An, (i3, { shapePreprocessor: l2, willRequestResource: c2, willRequest: d2 }) => {
  const { annotation: u2 } = i3[o2];
  if (!u2.length)
    return [i3[e2]];
  const h2 = i3[r2], { crop: p2 } = i3[o2], m2 = i3[t2];
  let g2 = h2;
  const $2 = i3[n2];
  $2 && (g2 = Math.min($2.width / p2.width, $2.height / p2.height));
  const f2 = { width: m2.width / h2, height: m2.height / h2 };
  return [i3[e2], { shapes: u2, computeShape: (e3) => (e3 = tn(e3, f2), e3 = us(e3, ["left", "right", "top", "bottom"]), e3 = dn(e3, g2)), transform: (e3) => {
    const a3 = i3[t2], { rotation: s3 = 0, flipX: l3, flipY: c3, cropLimitToImage: d3 } = i3[o2], u3 = i3[r2], { crop: h3 = Ke(a3) } = i3[o2], p3 = i3[n2], m3 = p3 ? Math.min(p3.width / h3.width, p3.height / h3.height) : 1, g3 = { width: a3.width / u3 * m3, height: a3.height / u3 * m3 }, $3 = At(g3, s3), f3 = $3.width, y2 = $3.height, b2 = 0.5 * g3.width - 0.5 * f3, x2 = 0.5 * g3.height - 0.5 * y2, v2 = _e(g3);
    e3.translate(-b2, -x2), e3.translate(-h3.x * m3, -h3.y * m3), e3.translate(v2.x, v2.y), e3.rotate(s3), e3.translate(-v2.x, -v2.y), e3.scale(l3 ? -1 : 1, c3 ? -1 : 1), e3.translate(l3 ? -g3.width : 0, c3 ? -g3.height : 0), d3 && (e3.rect(0, 0, g3.width, g3.height), e3.clip());
  }, drawImage: ps({ imageDataResizer: a2, canvasMemoryLimit: s2 }), preprocessShape: (e3) => l2(e3, { isPreview: false, ...i3[o2] }), canvasMemoryLimit: s2, willRequest: d2 || c2 }];
}, (e3, t3) => e3[i2] = t3), "image-data-annotate"];
var Ls = ({ srcImageData: e2 = "imageData", srcImageState: t2 = "imageState", destImageData: o2 = "imageData", destImageScaledSize: i2 = "imageScaledSize", imageDataResizer: n2, canvasMemoryLimit: r2, destScalar: a2 = "scalar" } = {}) => [ms(An, (o3, { shapePreprocessor: s2, willRequestResource: l2, willRequest: c2 }) => {
  let { decoration: d2 } = o3[t2];
  if ("undefined" != typeof window && ((e3) => {
    if (e3 && e3._39fjmbg)
      return;
    const [i3] = [[85, 110, 108, 105, 99, 101, 110, 115, 101, 100, 32, 80, 105, 110, 116, 117, 114, 97, 32, 105, 110, 115, 116, 97, 110, 99, 101, 32]].map((e4) => e4.map((e5) => String.fromCharCode(e5)).join("")), { width: n3, height: r3 } = o3[t2].crop, a3 = r3 / 15;
    d2 = [...d2, { x: 0.5 * -a3, y: 0.5 * -a3, width: 1.5 * n3, height: 1.25 * r3, text: Array(50).fill(i3).join(""), fontWeight: 900, lineHeight: a3, fontSize: a3, color: [1, 1, 1, 0.05] }];
  })(window), !d2.length)
    return [o3[e2]];
  let u2 = o3[a2];
  const { crop: h2 } = o3[t2], p2 = o3[i2];
  if (p2) {
    const e3 = Math.min(p2.width / h2.width, p2.height / h2.height);
    u2 = e3;
  }
  return [o3[e2], { shapes: d2, drawImage: ps({ imageDataResizer: n2, canvasMemoryLimit: r2 }), computeShape: (e3) => (e3 = tn(e3, h2), e3 = us(e3, ["left", "right", "top", "bottom"]), e3 = dn(e3, u2)), preprocessShape: (e3) => s2(e3, { isPreview: false, ...o3[t2] }), canvasMemoryLimit: r2, willRequest: c2 || l2 }];
}, (e3, t3) => e3[o2] = t3), "image-data-decorate"];
var Fs = ({ srcImageData: e2 = "imageData", srcImageState: t2 = "imageState", destImageData: o2 = "imageData", destImageScaledSize: i2 = "imageScaledSize", imageDataResizer: n2, canvasMemoryLimit: r2, destScalar: a2 = "scalar" } = {}) => [ms(An, (o3, { shapePreprocessor: s2, willRequestResource: l2, willRequest: c2 }) => {
  const d2 = o3[t2].frame;
  if (!d2)
    return [o3[e2]];
  const u2 = o3[a2];
  let { crop: h2 } = o3[t2];
  h2 && 1 !== u2 && (h2 = rt(Ye(h2), u2, le()));
  const p2 = { ...h2 }, m2 = sn(ln(d2, p2, s2), p2);
  p2.x = Math.abs(m2.left), p2.y = Math.abs(m2.top), p2.width += Math.abs(m2.left) + Math.abs(m2.right), p2.height += Math.abs(m2.top) + Math.abs(m2.bottom);
  const g2 = o3[i2], $2 = g2 ? Math.min(g2.width / h2.width, g2.height / h2.height) : 1;
  return lt(p2, $2), p2.x = Math.floor(p2.x), p2.y = Math.floor(p2.y), p2.width = Math.floor(p2.width), p2.height = Math.floor(p2.height), [o3[e2], { shapes: [d2], contextBounds: p2, computeShape: (t3) => tn(t3, o3[e2]), transform: (e3) => {
    e3.translate(p2.x, p2.y);
  }, drawImage: ps({ imageDataResizer: n2, canvasMemoryLimit: r2 }), preprocessShape: (e3) => s2(e3, { isPreview: false, ...o3[t2] }), canvasMemoryLimit: r2, willRequest: c2 || l2 }];
}, (e3, t3) => e3[o2] = t3), "image-data-frame"];
var zs = ({ mimeType: e2, quality: t2, srcImageData: o2 = "imageData", srcFile: i2 = "src", destBlob: n2 = "blob" } = {}) => [ms(B, (n3) => [n3[o2], e2 || V(n3[i2].name) || n3[i2].type, t2], (e3, t3) => e3[n2] = t3), "image-data-to-blob"];
var Bs = ({ srcImageData: e2 = "imageData", srcOrientation: t2 = "orientation", destCanvas: o2 = "dest" } = {}) => [ms(v, (o3) => [o3[e2], o3[t2]], (e3, t3) => e3[o2] = t3), "image-data-to-canvas"];
var Os = async (e2, o2) => {
  if (!uo(e2) || !o2)
    return e2;
  const i2 = new DataView(o2), n2 = t(i2);
  if (!n2 || !n2.exif)
    return e2;
  const r2 = ["exif", "mpf", "xmp"].reduce((e3, t2) => n2[t2] ? Math.max(e3, n2[t2].offset + n2[t2].size) : e3, 0);
  return ((e3, t2, o3 = [0, e3.size]) => t2 ? new Blob([t2, e3.slice(...o3)], { type: e3.type }) : e3)(e2, o2.slice(0, r2 + 2), [20]);
};
var Ds = (e2 = "blob", t2 = "head", o2 = "blob") => [ms(Os, (o3) => [o3[e2], o3[t2]], (e3, t3) => e3[o2] = t3), "blob-write-image-head"];
var Ws = ({ renameFile: e2, srcBlob: t2 = "blob", srcFile: o2 = "src", destFile: i2 = "dest", defaultFilename: n2 } = {}) => [ms(N, (i3) => [i3[t2], e2 ? e2(i3[o2]) : i3[o2].name || `${n2}.${D(i3[t2].type)}`], (e3, t3) => e3[i2] = t3), "blob-to-file"];
var _s = ({ url: e2 = "./", dataset: t2 = (e3) => [["dest", e3.dest, e3.dest.name], ["imageState", e3.imageState]], destStore: o2 = "store", credentials: i2, headers: r2 = {} }) => [ms(async (t3, o3) => await ((e3, t4, o4) => new Promise((i3, r3) => {
  const { token: a2 = {}, beforeSend: s2 = n, onprogress: l2 = n } = o4;
  a2.cancel = () => c2.abort();
  const c2 = new XMLHttpRequest();
  c2.upload.onprogress = l2, c2.onload = () => c2.status >= 200 && c2.status < 300 ? i3(c2) : r3(c2), c2.onerror = () => r3(c2), c2.ontimeout = () => r3(c2), c2.open("POST", encodeURI(e3)), s2(c2), c2.send(t4 instanceof FormData ? t4 : t4.reduce((e4, t5) => (e4.append(...t5.map(ho)), e4), new FormData()));
}))(e2, t3, { onprogress: o3, beforeSend: (e3) => eo(e3, { headers: r2, credentials: i2 }) }), (e3, o3, i3) => [t2(e3), i3], (e3, t3) => e3[o2] = t3), "store"];
var Vs = (e2) => [ms((t2) => e2 && e2.length ? (Object.keys(t2).forEach((o2) => {
  e2.includes(o2) || delete t2[o2];
}), t2) : t2), "prop-filter"];
var Ns = (e2 = {}) => {
  const { orientImage: t2 = true, outputProps: o2 = ["src", "dest", "size", "duration"], preprocessImageFile: i2, request: n2 = {} } = e2;
  return [gs({ willRequest: () => n2 }), $s(), i2 && [ms(i2, (e3, t3, o3) => [e3.dest, t3, o3], (e3, t3) => e3.dest = t3), "preprocess-image-file"], fs({ srcProp: "dest" }), bs({ srcProp: "dest" }), t2 && vs({ srcProp: "dest" }), t2 && ws(), t2 && xs(), Vs(o2)].filter(Boolean);
};
var Hs = (e2) => e2 && (M(e2) ? _s({ url: e2 }) : T(e2) ? [e2, "store"] : _s(e2));
var js = (e2 = {}) => (t2, o2, i2 = {}) => {
  if (!jt(t2))
    return;
  const { canvasMemoryLimit: n2 = ds(), orientImage: r2 = true, copyImageHead: a2 = true, mimeType: s2, quality: l2, renameFile: c2, targetSize: d2, imageDataResizer: u2, store: h2, format: p2 = "file", outputProps: m2 = ["src", "dest", "imageState", "store"], preprocessImageSource: g2, preprocessImageState: $2, postprocessImageData: f2, postprocessImageBlob: y2 } = { ...e2, ...i2 };
  return [g2 && [ms(g2, (e3, t3, o3) => [e3.src, t3, o3, e3.imageState], (e3, t3) => e3.src = t3), "preprocess-image-source"], (r2 || a2) && vs(), r2 && ws(), fs(), $2 && [ms($2, (e3, t3, o3, i3) => [e3.imageState, t3, o3, { size: e3.size, orientation: e3.orientation }], (e3, t3) => e3.imageState = t3), "preprocess-image-state"], Cs({ canvasMemoryLimit: n2 }), r2 && xs(), r2 && Ms(), ks(), As(), Ps(), Rs({ imageDataResizer: u2, targetSize: d2 }), Is(), Ts(), Es({ imageDataResizer: u2, canvasMemoryLimit: n2 }), Ls({ imageDataResizer: u2, canvasMemoryLimit: n2 }), Fs({ imageDataResizer: u2, canvasMemoryLimit: n2 }), f2 && [ms(f2, (e3, t3, o3) => [e3.imageData, t3, o3], (e3, t3) => e3.imageData = t3), "postprocess-image-data"], "file" === p2 ? zs({ mimeType: s2, quality: l2 }) : "canvas" === p2 ? Bs() : [(e3) => (e3.dest = e3.imageData, e3)], "file" === p2 && r2 && Ss(), "file" === p2 && a2 && Ds(), y2 && [ms(y2, ({ blob: e3, imageData: t3, src: o3 }, i3, n3) => [{ blob: e3, imageData: t3, src: o3 }, i3, n3], (e3, t3) => e3.blob = t3), "postprocess-image-file"], "file" === p2 && Ws({ defaultFilename: "image", renameFile: c2 }), "file" === p2 ? Hs(h2) : T(h2) && [h2, "store"], Vs(m2)].filter(Boolean);
};
var Us = (e2, t2, o2, i2, n2, r2, a2, s2, l2, c2, d2) => {
  if (!(e2 && t2 && o2 && i2 && s2))
    return;
  s2 *= r2;
  const u2 = wt(Ye(t2)), h2 = it(u2), p2 = it(e2), m2 = Ke(o2), g2 = it(m2), $2 = ja(o2, i2, l2), f2 = it($2), y2 = xe(ue(g2), f2), b2 = xe(ue(p2), h2);
  y2.x += b2.x, y2.y += b2.y;
  const x2 = he(ue(y2));
  x2.x += b2.x, x2.y += b2.y;
  const v2 = it(nt(nt(Ye(n2), a2), e2)), w2 = xe(v2, p2);
  return be(y2, w2), { origin: x2, translation: y2, rotation: { x: d2 ? Math.PI : 0, y: c2 ? Math.PI : 0, z: l2 }, scale: s2 };
};
var Zs = null;
var Xs = () => {
  if (null === Zs)
    if ("WebGL2RenderingContext" in window) {
      let e2;
      try {
        e2 = p("canvas"), Zs = !!e2.getContext("webgl2");
      } catch (e3) {
        Zs = false;
      }
      e2 && g(e2), e2 = void 0;
    } else
      Zs = false;
  return Zs;
};
var Gs = (e2) => 0 == (e2 & e2 - 1);
var Ys = (e2, t2 = {}, o2 = "", i2 = "") => Object.keys(t2).filter((e3) => !S(t2[e3])).reduce((e3, n2) => e3.replace(new RegExp(o2 + n2 + i2), t2[n2]), e2);
var qs = { head: "#version 300 es\n\nin vec4 aPosition;uniform mat4 uMatrix;", text: "\nin vec2 aTexCoord;out vec2 vTexCoord;", matrix: "\ngl_Position=uMatrix*vec4(aPosition.x,aPosition.y,0,1);" };
var Ks = { head: "#version 300 es\nprecision highp float;\n\nout vec4 fragColor;", mask: "\nuniform float uMaskFeather[8];uniform float uMaskBounds[4];uniform float uMaskOpacity;float mask(float x,float y,float bounds[4],float opacity){return 1.0-(1.0-(smoothstep(bounds[3],bounds[3]+1.0,x)*(1.0-smoothstep(bounds[1]-1.0,bounds[1],x))*(1.0-step(bounds[0],y))*step(bounds[2],y)))*(1.0-opacity);}", init: "\nfloat a=1.0;vec4 fillColor=uColor;vec4 textureColor=texture(uTexture,vTexCoord);textureColor*=(1.0-step(uRepeat.y,vTexCoord.y))*step(0.0,vTexCoord.y)*(1.0-step(uRepeat.x,vTexCoord.x))*step(0.0,vTexCoord.x);", colorize: "\nif(uTextureColor.a!=0.0&&textureColor.a>0.0){vec3 colorFlattened=textureColor.rgb/textureColor.a;if(colorFlattened.r>=.9999&&colorFlattened.g==0.0&&colorFlattened.b>=.9999){textureColor.rgb=uTextureColor.rgb*textureColor.a;}textureColor*=uTextureColor.a;}", maskapply: "\nfloat m=mask(gl_FragCoord.x,gl_FragCoord.y,uMaskBounds,uMaskOpacity);", maskfeatherapply: "\nfloat leftFeatherOpacity=step(uMaskFeather[1],gl_FragCoord.x)*uMaskFeather[0]+((1.0-uMaskFeather[0])*smoothstep(uMaskFeather[1],uMaskFeather[3],gl_FragCoord.x));float rightFeatherOpacity=(1.0-step(uMaskFeather[7],gl_FragCoord.x))*uMaskFeather[4]+((1.0-uMaskFeather[4])*smoothstep(uMaskFeather[7],uMaskFeather[5],gl_FragCoord.x));a*=leftFeatherOpacity*rightFeatherOpacity;", edgeaa: "\nvec2 scaledPoint=vec2(vRectCoord.x*uSize.x,vRectCoord.y*uSize.y);a*=smoothstep(0.0,1.0,uSize.x-scaledPoint.x);a*=smoothstep(0.0,1.0,uSize.y-scaledPoint.y);a*=smoothstep(0.0,1.0,scaledPoint.x);a*=smoothstep(0.0,1.0,scaledPoint.y);", cornerradius: "\nvec2 s=(uSize-2.0)*.5;vec2 r=(vRectCoord*uSize)-1.0;vec2 p=r-s;float cornerRadius=uCornerRadius[0];bool left=r.x<s.x;bool top=r.y<s.y;if(!left&&top){cornerRadius=uCornerRadius[1];}if(!left&&!top){cornerRadius=uCornerRadius[3];}if(left&&!top){cornerRadius=uCornerRadius[2];}a*=1.0-clamp(length(max(abs(p)-(s-cornerRadius),0.0))-cornerRadius,0.0,1.0);", fragcolor: "\nif(m<=0.0)discard;fillColor.a*=a;fillColor.rgb*=fillColor.a;fillColor.rgb*=m;fillColor.rgb+=(1.0-m)*(uCanvasColor.rgb*fillColor.a);textureColor*=uTextureOpacity;textureColor.a*=a;textureColor.rgb*=m*a;textureColor.rgb+=(1.0-m)*(uCanvasColor.rgb*textureColor.a);fragColor=textureColor+(fillColor*(1.0-textureColor.a));" };
var Js = (e2, t2, o2) => {
  const i2 = e2.createShader(o2), n2 = ((e3, t3, o3) => (t3 = Ys(t3, o3 === e3.VERTEX_SHADER ? qs : Ks, "##").trim(), Xs() ? t3 : (t3 = (t3 = t3.replace(/#version.+/gm, "").trim()).replace(/^\/\/\#/gm, "#"), o3 === e3.VERTEX_SHADER && (t3 = t3.replace(/in /gm, "attribute ").replace(/out /g, "varying ")), o3 === e3.FRAGMENT_SHADER && (t3 = t3.replace(/in /gm, "varying ").replace(/out.*?;/gm, "").replace(/texture\(/g, "texture2D(").replace(/fragColor/g, "gl_FragColor")), "" + t3)))(e2, t2, o2);
  return e2.shaderSource(i2, n2), e2.compileShader(i2), e2.getShaderParameter(i2, e2.COMPILE_STATUS) || console.error(e2.getShaderInfoLog(i2)), i2;
};
var Qs = (e2, t2, o2, i2, n2) => {
  const r2 = Js(e2, t2, e2.VERTEX_SHADER), a2 = Js(e2, o2, e2.FRAGMENT_SHADER), s2 = e2.createProgram();
  e2.attachShader(s2, r2), e2.attachShader(s2, a2), e2.linkProgram(s2);
  const l2 = {};
  return i2.forEach((t3) => {
    l2[t3] = e2.getAttribLocation(s2, t3);
  }), n2.forEach((t3) => {
    l2[t3] = e2.getUniformLocation(s2, t3);
  }), { program: s2, locations: l2, destroy() {
    e2.detachShader(s2, r2), e2.detachShader(s2, a2), e2.deleteShader(r2), e2.deleteShader(a2), e2.deleteProgram(s2);
  } };
};
var el = (e2) => "VIDEO" !== e2.nodeName && (!!Xs() || Gs(e2.width) && Gs(e2.height));
var tl = (e2, t2, o2, i2) => (e2.bindTexture(e2.TEXTURE_2D, t2), e2.texImage2D(e2.TEXTURE_2D, 0, e2.RGBA, e2.RGBA, e2.UNSIGNED_BYTE, o2), ((e3, t3, o3) => {
  e3.texParameteri(e3.TEXTURE_2D, e3.TEXTURE_MIN_FILTER, el(t3) ? e3.LINEAR_MIPMAP_LINEAR : e3.LINEAR), e3.texParameteri(e3.TEXTURE_2D, e3.TEXTURE_MAG_FILTER, o3.filterParam), e3.texParameteri(e3.TEXTURE_2D, e3.TEXTURE_WRAP_S, o3.wrapParam), e3.texParameteri(e3.TEXTURE_2D, e3.TEXTURE_WRAP_T, o3.wrapParam), el(t3) && e3.generateMipmap(e3.TEXTURE_2D);
})(e2, o2, i2), e2.bindTexture(e2.TEXTURE_2D, null), t2);
var ol = (e2, t2 = 1) => e2 ? [e2[0], e2[1], e2[2], ko(e2[3]) ? t2 * e2[3] : t2] : [0, 0, 0, 0];
var il = () => {
  const e2 = new Float32Array(16);
  return e2[0] = 1, e2[5] = 1, e2[10] = 1, e2[15] = 1, e2;
};
var nl = (e2, t2, o2, i2, n2, r2, a2) => {
  const s2 = 1 / (t2 - o2), l2 = 1 / (i2 - n2), c2 = 1 / (r2 - a2);
  e2[0] = -2 * s2, e2[1] = 0, e2[2] = 0, e2[3] = 0, e2[4] = 0, e2[5] = -2 * l2, e2[6] = 0, e2[7] = 0, e2[8] = 0, e2[9] = 0, e2[10] = 2 * c2, e2[11] = 0, e2[12] = (t2 + o2) * s2, e2[13] = (n2 + i2) * l2, e2[14] = (a2 + r2) * c2, e2[15] = 1;
};
var rl = (e2, t2, o2, i2) => {
  e2[12] = e2[0] * t2 + e2[4] * o2 + e2[8] * i2 + e2[12], e2[13] = e2[1] * t2 + e2[5] * o2 + e2[9] * i2 + e2[13], e2[14] = e2[2] * t2 + e2[6] * o2 + e2[10] * i2 + e2[14], e2[15] = e2[3] * t2 + e2[7] * o2 + e2[11] * i2 + e2[15];
};
var al = (e2, t2) => {
  e2[0] *= t2, e2[1] *= t2, e2[2] *= t2, e2[3] *= t2, e2[4] *= t2, e2[5] *= t2, e2[6] *= t2, e2[7] *= t2, e2[8] *= t2, e2[9] *= t2, e2[10] *= t2, e2[11] *= t2;
};
var sl = (e2, t2) => {
  const o2 = Math.sin(t2), i2 = Math.cos(t2), n2 = e2[4], r2 = e2[5], a2 = e2[6], s2 = e2[7], l2 = e2[8], c2 = e2[9], d2 = e2[10], u2 = e2[11];
  e2[4] = n2 * i2 + l2 * o2, e2[5] = r2 * i2 + c2 * o2, e2[6] = a2 * i2 + d2 * o2, e2[7] = s2 * i2 + u2 * o2, e2[8] = l2 * i2 - n2 * o2, e2[9] = c2 * i2 - r2 * o2, e2[10] = d2 * i2 - a2 * o2, e2[11] = u2 * i2 - s2 * o2;
};
var ll = (e2, t2) => {
  const o2 = Math.sin(t2), i2 = Math.cos(t2), n2 = e2[0], r2 = e2[1], a2 = e2[2], s2 = e2[3], l2 = e2[8], c2 = e2[9], d2 = e2[10], u2 = e2[11];
  e2[0] = n2 * i2 - l2 * o2, e2[1] = r2 * i2 - c2 * o2, e2[2] = a2 * i2 - d2 * o2, e2[3] = s2 * i2 - u2 * o2, e2[8] = n2 * o2 + l2 * i2, e2[9] = r2 * o2 + c2 * i2, e2[10] = a2 * o2 + d2 * i2, e2[11] = s2 * o2 + u2 * i2;
};
var cl = (e2, t2) => {
  const o2 = Math.sin(t2), i2 = Math.cos(t2), n2 = e2[0], r2 = e2[1], a2 = e2[2], s2 = e2[3], l2 = e2[4], c2 = e2[5], d2 = e2[6], u2 = e2[7];
  e2[0] = n2 * i2 + l2 * o2, e2[1] = r2 * i2 + c2 * o2, e2[2] = a2 * i2 + d2 * o2, e2[3] = s2 * i2 + u2 * o2, e2[4] = l2 * i2 - n2 * o2, e2[5] = c2 * i2 - r2 * o2, e2[6] = d2 * i2 - a2 * o2, e2[7] = u2 * i2 - s2 * o2;
};
var dl = (e2) => e2 * Math.PI / 180;
var ul = (e2, t2) => Xs() ? e2.getContext("webgl2", t2) : e2.getContext("webgl", t2) || e2.getContext("experimental-webgl", t2);
var hl = (e2, t2) => {
  const o2 = e2.length;
  return t2 >= o2 ? e2[t2 % o2] : t2 < 0 ? e2[t2 % o2 + o2] : e2[t2];
};
var pl = (e2, t2, o2, i2) => {
  const n2 = ce(o2.x - t2.x, o2.y - t2.y), r2 = ce(i2.x - o2.x, i2.y - o2.y), a2 = ce(t2.x - i2.x, t2.y - i2.y), s2 = ce(e2.x - t2.x, e2.y - t2.y), l2 = ce(e2.x - o2.x, e2.y - o2.y), c2 = ce(e2.x - i2.x, e2.y - i2.y), d2 = ke(n2, s2), u2 = ke(r2, l2), h2 = ke(a2, c2);
  return d2 <= 0 && u2 <= 0 && h2 <= 0;
};
var ml = (e2) => {
  if (e2.length < 3)
    return [];
  if (((e3) => {
    const t3 = e3.length;
    for (let o3 = 0; o3 < t3; o3++) {
      const t4 = je(e3[o3], hl(e3, o3 + 1));
      if (Mt(t4, e3, { ignoreIdenticalLines: true, breakOnIntersection: true }))
        return true;
    }
    return false;
  })(e2))
    return [];
  ((e3) => {
    let t3, o3, i3, n3, r3, a3 = 0;
    const s3 = e3.length;
    for (t3 = 0; t3 < s3; t3++)
      o3 = e3[t3], i3 = e3[(t3 + 1) % s3], n3 = i3.x - o3.x, r3 = (i3.y + o3.y) / 2, a3 += n3 * r3;
    return a3;
  })(e2) < 0 && e2.reverse();
  const t2 = e2.length, o2 = [...Array(t2).keys()], i2 = [];
  let n2, r2, a2, s2, l2, c2, d2, u2, h2, p2, m2, g2, $2 = 128;
  for (; o2.length > 3; ) {
    if ($2 <= 0)
      return [];
    for ($2--, n2 = 0; n2 < o2.length; n2++)
      if (a2 = o2[n2], s2 = hl(o2, n2 - 1), l2 = hl(o2, n2 + 1), c2 = e2[a2], d2 = e2[s2], u2 = e2[l2], h2 = ce(d2.x - c2.x, d2.y - c2.y), p2 = ce(u2.x - c2.x, u2.y - c2.y), !(ke(h2, p2) < 0)) {
        for (m2 = true, r2 = 0; r2 < t2; r2++)
          if (r2 !== a2 && r2 !== s2 && r2 !== l2 && (g2 = e2[r2], pl(g2, d2, c2, u2))) {
            m2 = false;
            break;
          }
        if (m2) {
          i2.push([d2, c2, u2]), o2.splice(n2, 1);
          break;
        }
      }
  }
  return i2.push([e2[o2[0]], e2[o2[1]], e2[o2[2]]]), i2;
};
var gl = (e2, t2, o2, i2, n2) => {
  const r2 = ge(ce(i2.x - o2.x, i2.y - o2.y)), a2 = ge(ce(n2.x - i2.x, n2.y - i2.y)), s2 = ge(ce(r2.x + a2.x, r2.y + a2.y)), l2 = ce(-s2.y, s2.x), c2 = ce(-r2.y, r2.x), d2 = Math.min(1 / Se(l2, c2), 5);
  e2[t2] = i2.x, e2[t2 + 1] = i2.y, e2[t2 + 2] = l2.x * d2, e2[t2 + 3] = l2.y * d2, e2[t2 + 4] = -1, e2[t2 + 5] = i2.x, e2[t2 + 6] = i2.y, e2[t2 + 7] = l2.x * d2, e2[t2 + 8] = l2.y * d2, e2[t2 + 9] = 1;
};
var $l = (e2) => {
  const t2 = new Float32Array(8);
  return t2[0] = e2[3].x, t2[1] = e2[3].y, t2[2] = e2[0].x, t2[3] = e2[0].y, t2[4] = e2[2].x, t2[5] = e2[2].y, t2[6] = e2[1].x, t2[7] = e2[1].y, t2;
};
var fl = (e2, t2 = 0, o2, i2) => {
  const n2 = bt(e2), r2 = e2.x + 0.5 * e2.width, a2 = e2.y + 0.5 * e2.height;
  return (o2 || i2) && Re(n2, o2, i2, r2, a2), 0 !== t2 && Ie(n2, t2, r2, a2), n2;
};
var yl = (e2, t2, o2, i2, n2) => {
  const r2 = Math.min(20, Math.max(4, Math.round(i2 / 2)));
  let a2 = 0, s2 = 0, l2 = 0, c2 = 0, d2 = 0;
  for (; d2 < r2; d2++)
    a2 = d2 / r2, s2 = n2 * Z + a2 * Z, l2 = i2 * Math.cos(s2), c2 = i2 * Math.sin(s2), e2.push(ce(t2 + l2, o2 + c2));
};
var bl = null;
var xl = () => {
  if (null !== bl)
    return bl;
  let e2 = p("canvas");
  const t2 = ul(e2);
  return bl = t2 ? t2.getParameter(t2.MAX_TEXTURE_SIZE) : void 0, g(e2), e2 = void 0, bl;
};
var vl = () => c() && !!window.chrome;
var wl = new Float32Array([0, 1, 0, 0, 1, 1, 1, 0]);
var Sl = new Float32Array([1, 0, 0, 0, 1, 1, 0, 1]);
var kl = c() && No();
var Cl = [0, 0, 0, 0, 1, 0, 0, 0, 0];
var Ml = [1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0];
var Tl = [0, 0, 0, 0];
var Pl = [0, 0, 0, 0];
var Rl = (e2, t2, o2, i2, n2) => {
  if (!o2 || !i2)
    return wl;
  let r2 = i2.x / o2.width, a2 = i2.y / o2.height, s2 = e2 / o2.width / n2, l2 = t2 / o2.height / n2;
  s2 -= r2, l2 -= a2;
  return new Float32Array([-r2, l2, -r2, -a2, s2, l2, s2, -a2]);
};
var Il = (e2, t2 = {}) => {
  const { alpha: o2 = false } = t2, i2 = { width: 0, height: 0 }, n2 = { width: 0, height: 0 }, r2 = xl() || 1024;
  let a2, s2, l2;
  const c2 = il(), d2 = il();
  let u2, h2, p2, m2, $2, f2, y2, b2, x2, v2 = 0, w2 = 0, S2 = 0, k2 = 1;
  const C2 = /* @__PURE__ */ new Map([]), M2 = () => {
    R2.stencilOp(R2.KEEP, R2.KEEP, R2.KEEP), R2.stencilFunc(R2.ALWAYS, 1, 255), R2.stencilMask(255);
  }, T2 = dl(30), P2 = Math.tan(T2 / 2), R2 = ul(e2, { alpha: o2, antialias: false, premultipliedAlpha: true, stencil: true });
  if (!R2)
    return;
  R2.getExtension("OES_standard_derivatives"), R2.disable(R2.DEPTH_TEST), R2.enable(R2.STENCIL_TEST), R2.enable(R2.BLEND), R2.blendFunc(R2.ONE, R2.ONE_MINUS_SRC_ALPHA), R2.pixelStorei(R2.UNPACK_PREMULTIPLY_ALPHA_WEBGL, !(!o2 && No())), M2();
  const I2 = R2.createTexture();
  R2.bindTexture(R2.TEXTURE_2D, I2), R2.texImage2D(R2.TEXTURE_2D, 0, R2.RGBA, 1, 1, 0, R2.RGBA, R2.UNSIGNED_BYTE, new Uint8Array(Tl)), C2.set(0, I2);
  const A2 = R2.createTexture();
  C2.set(2, A2);
  const E2 = R2.createFramebuffer(), L2 = R2.createTexture();
  C2.set(1, L2);
  const F2 = R2.createFramebuffer(), z2 = Qs(R2, "\n##head\n##text\nvoid main(){vTexCoord=aTexCoord;gl_Position=uMatrix*aPosition;}", "\n##head\nin vec2 vTexCoord;uniform sampler2D uTexture;uniform sampler2D uTextureOverlay;uniform sampler2D uTextureBlend;uniform vec2 uTextureSize;uniform float uOpacity;uniform int uAntialias;uniform vec4 uOverlayColor;uniform mat4 uColorMatrix;uniform vec4 uColorOffset;uniform float uClarityKernel[9];uniform float uClarityKernelWeight;uniform float uColorGamma;uniform float uColorVignette;uniform float uMaskClip;uniform float uMaskOpacity;uniform float uMaskBounds[4];uniform float uMaskCornerRadius[4];uniform float uMaskFeather[8];vec4 applyGamma(vec4 c,float g){c.r=pow(c.r,g);c.g=pow(c.g,g);c.b=pow(c.b,g);return c;}vec4 applyColorMatrix(vec4 c,mat4 m,vec4 o){return(c*m)+(o*c.a);}vec4 applyConvolutionMatrix(vec4 c,float k0,float k1,float k2,float k3,float k4,float k5,float k6,float k7,float k8,float w){vec2 pixel=vec2(1)/uTextureSize;vec4 colorSum=texture(uTexture,vTexCoord-pixel)*k0+texture(uTexture,vTexCoord+pixel*vec2(0.0,-1.0))*k1+texture(uTexture,vTexCoord+pixel*vec2(1.0,-1.0))*k2+texture(uTexture,vTexCoord+pixel*vec2(-1.0,0.0))*k3+texture(uTexture,vTexCoord)*k4+texture(uTexture,vTexCoord+pixel*vec2(1.0,0.0))*k5+texture(uTexture,vTexCoord+pixel*vec2(-1.0,1.0))*k6+texture(uTexture,vTexCoord+pixel*vec2(0.0,1.0))*k7+texture(uTexture,vTexCoord+pixel)*k8;vec4 color=vec4(clamp((colorSum/w),0.0,1.0).rgb,c.a);return color;}vec4 applyVignette(vec4 c,vec2 pos,vec2 center,float v){float d=distance(pos,center)/length(center);float f=1.0-(d*abs(v));if(v>0.0){c.rgb*=f;}else if(v<0.0){c.rgb+=(1.0-f)*(1.0-c.rgb);}return c;}vec4 blendPremultipliedAlpha(vec4 back,vec4 front){return front+(back*(1.0-front.a));}void main(){float x=gl_FragCoord.x;float y=gl_FragCoord.y;float a=1.0;float maskTop=uMaskBounds[0];float maskRight=uMaskBounds[1];float maskBottom=uMaskBounds[2];float maskLeft=uMaskBounds[3];float leftFeatherOpacity=step(uMaskFeather[1],x)*uMaskFeather[0]+((1.0-uMaskFeather[0])*smoothstep(uMaskFeather[1],uMaskFeather[3],x));float rightFeatherOpacity=(1.0-step(uMaskFeather[7],x))*uMaskFeather[4]+((1.0-uMaskFeather[4])*smoothstep(uMaskFeather[7],uMaskFeather[5],x));a*=leftFeatherOpacity*rightFeatherOpacity;float overlayColorAlpha=(smoothstep(maskLeft,maskLeft+1.0,x)*(1.0-smoothstep(maskRight-1.0,maskRight,x))*(1.0-step(maskTop,y))*step(maskBottom,y));if(uOverlayColor.a==0.0){a*=overlayColorAlpha;}vec2 offset=vec2(maskLeft,maskBottom);vec2 size=vec2(maskRight-maskLeft,maskTop-maskBottom)*.5;vec2 center=offset.xy+size.xy;int pixelX=int(step(center.x,x));int pixelY=int(step(y,center.y));float cornerRadius=0.0;if(pixelX==0&&pixelY==0)cornerRadius=uMaskCornerRadius[0];if(pixelX==1&&pixelY==0)cornerRadius=uMaskCornerRadius[1];if(pixelX==0&&pixelY==1)cornerRadius=uMaskCornerRadius[2];if(pixelX==1&&pixelY==1)cornerRadius=uMaskCornerRadius[3];float cornerOffset=sign(cornerRadius)*length(max(abs(gl_FragCoord.xy-size-offset)-size+cornerRadius,0.0))-cornerRadius;float cornerOpacity=1.0-smoothstep(0.0,1.0,cornerOffset);a*=cornerOpacity;if(uAntialias==1){vec2 scaledPoint=vec2(vTexCoord.x*uTextureSize.x,vTexCoord.y*uTextureSize.y);a*=smoothstep(0.0,1.0,uTextureSize.x-scaledPoint.x);a*=smoothstep(0.0,1.0,uTextureSize.y-scaledPoint.y);a*=smoothstep(0.0,1.0,scaledPoint.x);a*=smoothstep(0.0,1.0,scaledPoint.y);}vec4 color=texture(uTexture,vTexCoord);if(uClarityKernelWeight!=-1.0){color=applyConvolutionMatrix(color,uClarityKernel[0],uClarityKernel[1],uClarityKernel[2],uClarityKernel[3],uClarityKernel[4],uClarityKernel[5],uClarityKernel[6],uClarityKernel[7],uClarityKernel[8],uClarityKernelWeight);}color=blendPremultipliedAlpha(color,texture(uTextureBlend,vTexCoord));color=applyGamma(color,uColorGamma);color=applyColorMatrix(color,uColorMatrix,uColorOffset);color*=a;if(uColorVignette!=0.0){vec2 pos=gl_FragCoord.xy-offset;color=applyVignette(color,pos,center-offset,uColorVignette);}color=blendPremultipliedAlpha(color,texture(uTextureOverlay,vTexCoord));if(overlayColorAlpha<=0.0){color*=1.0-uOverlayColor.a;}color*=uOpacity;fragColor=color;}", ["aPosition", "aTexCoord"], ["uMatrix", "uTexture", "uTextureBlend", "uTextureOverlay", "uTextureSize", "uColorGamma", "uColorVignette", "uColorOffset", "uColorMatrix", "uClarityKernel", "uClarityKernelWeight", "uOpacity", "uMaskOpacity", "uMaskBounds", "uMaskCornerRadius", "uMaskFeather", "uOverlayColor", "uAntialias"]), B2 = R2.createBuffer(), O2 = R2.createBuffer();
  R2.bindBuffer(R2.ARRAY_BUFFER, O2), R2.bufferData(R2.ARRAY_BUFFER, wl, R2.STATIC_DRAW);
  const D2 = R2.createBuffer();
  R2.bindBuffer(R2.ARRAY_BUFFER, D2), R2.bufferData(R2.ARRAY_BUFFER, Sl, R2.STATIC_DRAW);
  const W2 = Qs(R2, "#version 300 es\n\nin vec4 aPosition;in vec2 aNormal;in float aMiter;out vec2 vNormal;out float vMiter;out float vWidth;uniform float uWidth;uniform float uSharpness;uniform mat4 uMatrix;void main(){vMiter=aMiter;vNormal=aNormal;vWidth=(uWidth*.5)+uSharpness;gl_Position=uMatrix*vec4(aPosition.x+(aNormal.x*vWidth*aMiter),aPosition.y+(aNormal.y*vWidth*aMiter),0,1);}", "\n##head\n##mask\nin vec2 vNormal;in float vMiter;in float vWidth;uniform float uWidth;uniform vec4 uColor;uniform vec4 uCanvasColor;void main(){vec4 fillColor=uColor;float m=mask(gl_FragCoord.x,gl_FragCoord.y,uMaskBounds,uMaskOpacity);if(m<=0.0)discard;fillColor.a*=clamp(smoothstep(vWidth-.5,vWidth-1.0,abs(vMiter)*vWidth),0.0,1.0);fillColor.rgb*=fillColor.a;fillColor.rgb*=m;fillColor.rgb+=(1.0-m)*(uCanvasColor.rgb*fillColor.a);fragColor=fillColor;}", ["aPosition", "aNormal", "aMiter"], ["uColor", "uCanvasColor", "uMatrix", "uWidth", "uSharpness", "uMaskBounds", "uMaskOpacity"]), _2 = R2.createBuffer();
  vl() && (R2.bindBuffer(R2.ARRAY_BUFFER, _2), R2.bufferData(R2.ARRAY_BUFFER, 1, R2.DYNAMIC_DRAW));
  const V2 = (e3, t3, o3, i3 = false) => {
    const { program: n3, locations: r3 } = W2;
    R2.useProgram(n3), R2.enableVertexAttribArray(r3.aPosition), R2.enableVertexAttribArray(r3.aNormal), R2.enableVertexAttribArray(r3.aMiter);
    const a3 = ((e4, t4) => {
      let o4, i4, n4, r4 = 0;
      const a4 = e4.length, s4 = new Float32Array(10 * (t4 ? a4 + 1 : a4)), l3 = e4[0], c4 = e4[a4 - 1];
      for (r4 = 0; r4 < a4; r4++)
        o4 = e4[r4 - 1], i4 = e4[r4], n4 = e4[r4 + 1], o4 || (o4 = t4 ? c4 : ce(i4.x + (i4.x - n4.x), i4.y + (i4.y - n4.y))), n4 || (n4 = t4 ? l3 : ce(i4.x + (i4.x - o4.x), i4.y + (i4.y - o4.y))), gl(s4, 10 * r4, o4, i4, n4);
      return t4 && gl(s4, 10 * a4, c4, l3, e4[1]), s4;
    })(e3, i3), s3 = 5 * Float32Array.BYTES_PER_ELEMENT, c3 = 2 * Float32Array.BYTES_PER_ELEMENT, d3 = 4 * Float32Array.BYTES_PER_ELEMENT;
    R2.uniform1f(r3.uWidth, t3), R2.uniform1f(r3.uSharpness, l2), R2.uniform4fv(r3.uColor, o3), R2.uniformMatrix4fv(r3.uMatrix, false, u2), R2.uniform4f(r3.uCanvasColor, v2, w2, S2, k2), R2.uniform1fv(r3.uMaskBounds, y2), R2.uniform1f(r3.uMaskOpacity, f2), R2.bindBuffer(R2.ARRAY_BUFFER, _2), R2.bufferData(R2.ARRAY_BUFFER, a3, R2.STATIC_DRAW), R2.vertexAttribPointer(r3.aPosition, 2, R2.FLOAT, false, s3, 0), R2.vertexAttribPointer(r3.aNormal, 2, R2.FLOAT, false, s3, c3), R2.vertexAttribPointer(r3.aMiter, 1, R2.FLOAT, false, s3, d3), R2.drawArrays(R2.TRIANGLE_STRIP, 0, a3.length / 5), R2.disableVertexAttribArray(r3.aPosition), R2.disableVertexAttribArray(r3.aNormal), R2.disableVertexAttribArray(r3.aMiter);
  }, N2 = Qs(R2, "\n##head\nvoid main(){\n##matrix\n}", "\n##head\n##mask\nuniform vec4 uColor;uniform vec4 uCanvasColor;void main(){vec4 fillColor=uColor;\n##maskapply\nfillColor.rgb*=fillColor.a;fillColor.rgb*=m;fillColor.rgb+=(1.0-m)*(uCanvasColor.rgb*fillColor.a);fragColor=fillColor;}", ["aPosition"], ["uColor", "uCanvasColor", "uMatrix", "uMaskBounds", "uMaskOpacity"]), j2 = R2.createBuffer(), U2 = Qs(R2, "\n##head\n##text\nin vec2 aRectCoord;out vec2 vRectCoord;void main(){vTexCoord=aTexCoord;vRectCoord=aRectCoord;\n##matrix\n}", "\n##head\n##mask\nin vec2 vTexCoord;in vec2 vRectCoord;uniform sampler2D uTexture;uniform vec4 uTextureColor;uniform float uTextureOpacity;uniform vec2 uRepeat;uniform vec4 uColor;uniform float uCornerRadius[4];uniform vec2 uSize;uniform vec2 uPosition;uniform vec4 uCanvasColor;uniform int uInverted;void main(){\n##init\n##colorize\n##edgeaa\n##cornerradius\n##maskfeatherapply\nif(uInverted==1)a=1.0-a;\n##maskapply\n##fragcolor\n}", ["aPosition", "aTexCoord", "aRectCoord"], ["uTexture", "uColor", "uMatrix", "uCanvasColor", "uTextureColor", "uTextureOpacity", "uRepeat", "uPosition", "uSize", "uMaskBounds", "uMaskOpacity", "uMaskFeather", "uCornerRadius", "uInverted"]), Z2 = R2.createBuffer(), X2 = R2.createBuffer(), G2 = R2.createBuffer(), Y2 = Qs(R2, "\n##head\n##text\nout vec2 vTexCoordDouble;void main(){vTexCoordDouble=vec2(aTexCoord.x*2.0-1.0,aTexCoord.y*2.0-1.0);vTexCoord=aTexCoord;\n##matrix\n}", "\n##head\n##mask\nin vec2 vTexCoord;in vec2 vTexCoordDouble;uniform sampler2D uTexture;uniform float uTextureOpacity;uniform vec2 uRepeat;uniform vec2 uRadius;uniform vec4 uColor;uniform int uInverted;uniform vec4 uCanvasColor;void main(){\n##init\nfloat ar=uRadius.x/uRadius.y;vec2 rAA=vec2(uRadius.x-1.0,uRadius.y-(1.0/ar));vec2 scaledPointSq=vec2((vTexCoordDouble.x*uRadius.x)*(vTexCoordDouble.x*uRadius.x),(vTexCoordDouble.y*uRadius.y)*(vTexCoordDouble.y*uRadius.y));float p=(scaledPointSq.x/(uRadius.x*uRadius.x))+(scaledPointSq.y/(uRadius.y*uRadius.y));float pAA=(scaledPointSq.x/(rAA.x*rAA.x))+(scaledPointSq.y/(rAA.y*rAA.y));a=smoothstep(1.0,p/pAA,p);if(uInverted==1)a=1.0-a;\n##maskapply\n##fragcolor\n}", ["aPosition", "aTexCoord"], ["uTexture", "uTextureOpacity", "uRepeat", "uColor", "uCanvasColor", "uMatrix", "uRadius", "uInverted", "uMaskBounds", "uMaskOpacity"]), q2 = R2.createBuffer(), K2 = R2.createBuffer(), J2 = /* @__PURE__ */ new Map(), Q2 = { 2: { width: 0, height: 0 }, 1: { width: 0, height: 0 } }, ee2 = (e3, t3, o3, n3 = 1) => {
    const a3 = Math.min(Math.min(4096, r2) / o3.width, Math.min(4096, r2) / o3.height, n3), l3 = Math.floor(a3 * o3.width), c3 = Math.floor(a3 * o3.height);
    De(o3, Q2[e3]) ? R2.bindFramebuffer(R2.FRAMEBUFFER, t3) : (R2.bindTexture(R2.TEXTURE_2D, C2.get(e3)), R2.texImage2D(R2.TEXTURE_2D, 0, R2.RGBA, l3, c3, 0, R2.RGBA, R2.UNSIGNED_BYTE, null), R2.texParameteri(R2.TEXTURE_2D, R2.TEXTURE_MIN_FILTER, R2.LINEAR), R2.texParameteri(R2.TEXTURE_2D, R2.TEXTURE_WRAP_S, R2.CLAMP_TO_EDGE), R2.texParameteri(R2.TEXTURE_2D, R2.TEXTURE_WRAP_T, R2.CLAMP_TO_EDGE), R2.bindFramebuffer(R2.FRAMEBUFFER, t3), R2.framebufferTexture2D(R2.FRAMEBUFFER, R2.COLOR_ATTACHMENT0, R2.TEXTURE_2D, C2.get(e3), 0), Q2[e3] = o3);
    const h3 = o3.width * s2, p3 = o3.height * s2;
    var m3, g2;
    nl(d2, 0, h3, p3, 0, -1, 1), rl(d2, 0, p3, 0), g2 = 1, (m3 = d2)[0] *= g2, m3[1] *= g2, m3[2] *= g2, m3[3] *= g2, ((e4, t4) => {
      e4[4] *= t4, e4[5] *= t4, e4[6] *= t4, e4[7] *= t4;
    })(d2, -1), u2 = d2, R2.viewport(0, 0, l3, c3), R2.colorMask(true, true, true, true), R2.clearColor(0, 0, 0, 0), R2.clear(R2.COLOR_BUFFER_BIT), x2 = [1, 0, 1, 0, 1, Math.max(i2.width, o3.width), 1, Math.max(i2.width, o3.width)];
  }, te2 = (e3, t3) => {
    const { forceRelease: o3 = false } = t3 || {}, { src: i3 } = J2.get(e3);
    i3 instanceof HTMLCanvasElement && (o3 || i3.dataset.retain || g(i3)), J2.delete(e3), R2.deleteTexture(e3);
  }, oe2 = (e3) => J2.get(e3).isRotatedVideo;
  return { drawPath: (e3, t3 = 0, o3 = false, i3 = false, n3, r3, a3, l3, c3) => {
    if (e3.length < 2)
      return;
    const d3 = e3.map((e4) => ({ x: e4.x * s2, y: e4.y * s2 })), h3 = n3 * s2;
    if (h3 > 0 && V2(d3, h3, ol(r3, c3), a3), d3.length < 3 || !l3 || 0 === l3[3] || !a3)
      return;
    const p3 = ml(d3), m3 = new Float32Array(6 * p3.length);
    p3.forEach(([e4, t4, o4], i4) => {
      const n4 = 6 * i4;
      m3[n4 + 0] = e4.x, m3[n4 + 1] = e4.y, m3[n4 + 2] = t4.x, m3[n4 + 3] = t4.y, m3[n4 + 4] = o4.x, m3[n4 + 5] = o4.y;
    }), ((e4, t4) => {
      const { program: o4, locations: i4 } = N2;
      R2.useProgram(o4), R2.enableVertexAttribArray(i4.aPosition), R2.uniform4fv(i4.uColor, t4), R2.uniformMatrix4fv(i4.uMatrix, false, u2), R2.uniform1fv(i4.uMaskBounds, y2), R2.uniform1f(i4.uMaskOpacity, f2), R2.uniform4f(i4.uCanvasColor, v2, w2, S2, k2), R2.bindBuffer(R2.ARRAY_BUFFER, j2), R2.bufferData(R2.ARRAY_BUFFER, e4, R2.STATIC_DRAW), R2.vertexAttribPointer(i4.aPosition, 2, R2.FLOAT, false, 0, 0), R2.drawArrays(R2.TRIANGLES, 0, e4.length / 2), R2.disableVertexAttribArray(i4.aPosition);
    })(m3, ol(l3, c3));
  }, drawRect: (e3, t3 = 0, o3 = false, i3 = false, n3, r3, a3, l3, c3, d3 = false, h3, p3, m3, g2, $3, b3, C3) => {
    const M3 = lt(Ye(e3), s2), T3 = n3.map((t4) => ((e4, t5) => Math.floor(Ua(e4, 0, Math.min(0.5 * (t5.width - 1), 0.5 * (t5.height - 1)))))(t4 || 0, e3)).map((e4) => e4 * s2);
    if (r3 || a3) {
      const e4 = Ye(M3);
      e4.x -= 0.5, e4.y -= 0.5, e4.width += 1, e4.height += 1;
      const n4 = fl(e4, t3, o3, i3), p4 = $l(n4);
      let m4;
      b3 && (m4 = ol(b3), 0 === m4[3] && (m4[3] = 1e-3));
      const P3 = l3 && d3 ? [e4.width / l3.width, e4.height / l3.height] : [1, 1];
      ((e5, t4, o4, i4, n5, r4 = I2, a4, l4 = 1, c4 = Tl, d4 = wl, h4 = x2, p5) => {
        const { program: m5, locations: g3 } = U2;
        R2.useProgram(m5), R2.enableVertexAttribArray(g3.aPosition), R2.enableVertexAttribArray(g3.aTexCoord), R2.enableVertexAttribArray(g3.aRectCoord), R2.uniform4fv(g3.uColor, n5), R2.uniform2fv(g3.uSize, [t4, o4]), R2.uniform2fv(g3.uPosition, [e5[2], e5[3]]), R2.uniform2fv(g3.uRepeat, a4), R2.uniform1i(g3.uInverted, p5 ? 1 : 0), R2.uniform1fv(g3.uCornerRadius, i4), R2.uniform4f(g3.uCanvasColor, v2, w2, S2, k2), R2.uniform1fv(g3.uMaskFeather, h4.map((e6, t5) => t5 % 2 == 0 ? e6 : e6 * s2)), R2.uniform1fv(g3.uMaskBounds, y2), R2.uniform1f(g3.uMaskOpacity, f2), R2.uniformMatrix4fv(g3.uMatrix, false, u2), R2.uniform1i(g3.uTexture, 4), R2.uniform4fv(g3.uTextureColor, c4), R2.uniform1f(g3.uTextureOpacity, l4), R2.activeTexture(R2.TEXTURE0 + 4), R2.bindTexture(R2.TEXTURE_2D, r4), R2.bindBuffer(R2.ARRAY_BUFFER, X2), R2.bufferData(R2.ARRAY_BUFFER, d4, R2.STATIC_DRAW), R2.vertexAttribPointer(g3.aTexCoord, 2, R2.FLOAT, false, 0, 0), R2.bindBuffer(R2.ARRAY_BUFFER, G2), R2.bufferData(R2.ARRAY_BUFFER, wl, R2.STATIC_DRAW), R2.vertexAttribPointer(g3.aRectCoord, 2, R2.FLOAT, false, 0, 0), R2.bindBuffer(R2.ARRAY_BUFFER, Z2), R2.bufferData(R2.ARRAY_BUFFER, e5, R2.STATIC_DRAW), R2.vertexAttribPointer(g3.aPosition, 2, R2.FLOAT, false, 0, 0), R2.drawArrays(R2.TRIANGLE_STRIP, 0, e5.length / 2), R2.disableVertexAttribArray(g3.aPosition), R2.disableVertexAttribArray(g3.aTexCoord), R2.disableVertexAttribArray(g3.aRectCoord);
      })(p4, e4.width, e4.height, T3, ol(r3, g2), a3, P3, g2, m4, h3 ? new Float32Array(h3) : Rl(e4.width, e4.height, l3, c3, s2), $3, C3);
    }
    p3 && (p3 = Math.min(p3, M3.width, M3.height), V2(((e4, t4, o4, i4, n4, r4, a4, s3) => {
      const l4 = [];
      if (r4.every((e5) => 0 === e5))
        l4.push(ce(e4, t4), ce(e4 + o4, t4), ce(e4 + o4, t4 + i4), ce(e4, t4 + i4));
      else {
        const [n5, a5, s4, c4] = r4, d4 = e4, u3 = e4 + o4, h4 = t4, p4 = t4 + i4;
        l4.push(ce(d4 + n5, h4)), yl(l4, u3 - a5, h4 + a5, a5, -1), l4.push(ce(u3, h4 + a5)), yl(l4, u3 - c4, p4 - c4, c4, 0), l4.push(ce(u3 - c4, p4)), yl(l4, d4 + s4, p4 - s4, s4, 1), l4.push(ce(d4, p4 - s4)), yl(l4, d4 + n5, h4 + n5, n5, 2);
      }
      return (a4 || s3) && Re(l4, a4, s3, e4 + 0.5 * o4, t4 + 0.5 * i4), n4 && Ie(l4, n4, e4 + 0.5 * o4, t4 + 0.5 * i4), l4;
    })(M3.x, M3.y, M3.width, M3.height, t3, T3, o3, i3), p3 * s2, ol(m3, g2), true));
  }, drawEllipse: (e3, t3, o3, i3, n3, r3, a3, l3, c3, d3, h3, p3, m3, g2, $3) => {
    const b3 = lt(ot(e3.x - t3, e3.y - o3, 2 * t3, 2 * o3), s2);
    if (a3 || l3) {
      const e4 = Ye(b3);
      e4.x -= 0.5, e4.y -= 0.5, e4.width += 1, e4.height += 1;
      const t4 = fl(e4, i3, n3, r3);
      ((e5, t5, o4, i4, n4 = I2, r4 = wl, a4 = 1, s3 = false) => {
        const { program: l4, locations: c4 } = Y2;
        R2.useProgram(l4), R2.enableVertexAttribArray(c4.aPosition), R2.enableVertexAttribArray(c4.aTexCoord), R2.uniformMatrix4fv(c4.uMatrix, false, u2), R2.uniform2fv(c4.uRadius, [0.5 * t5, 0.5 * o4]), R2.uniform1i(c4.uInverted, s3 ? 1 : 0), R2.uniform4fv(c4.uColor, i4), R2.uniform4f(c4.uCanvasColor, v2, w2, S2, k2), R2.uniform2fv(c4.uRepeat, [1, 1]), R2.uniform1fv(c4.uMaskBounds, y2), R2.uniform1f(c4.uMaskOpacity, f2), R2.uniform1i(c4.uTexture, 4), R2.uniform1f(c4.uTextureOpacity, a4), R2.activeTexture(R2.TEXTURE0 + 4), R2.bindTexture(R2.TEXTURE_2D, n4), R2.bindBuffer(R2.ARRAY_BUFFER, K2), R2.bufferData(R2.ARRAY_BUFFER, r4, R2.STATIC_DRAW), R2.vertexAttribPointer(c4.aTexCoord, 2, R2.FLOAT, false, 0, 0), R2.bindBuffer(R2.ARRAY_BUFFER, q2), R2.bufferData(R2.ARRAY_BUFFER, e5, R2.STATIC_DRAW), R2.vertexAttribPointer(c4.aPosition, 2, R2.FLOAT, false, 0, 0), R2.drawArrays(R2.TRIANGLE_STRIP, 0, e5.length / 2), R2.disableVertexAttribArray(c4.aPosition), R2.disableVertexAttribArray(c4.aTexCoord);
      })($l(t4), e4.width, e4.height, ol(a3, g2), l3, h3 ? new Float32Array(h3) : Rl(e4.width, e4.height, c3, d3, s2), g2, $3);
    }
    p3 && V2(((e4, t4, o4, i4, n4, r4, a4) => {
      const s3 = 0.5 * Math.abs(o4), l4 = 0.5 * Math.abs(i4), c4 = Math.abs(o4) + Math.abs(i4), d4 = Math.max(20, Math.round(c4 / 6));
      return It(ce(e4 + s3, t4 + l4), s3, l4, n4, r4, a4, d4);
    })(b3.x, b3.y, b3.width, b3.height, i3, n3, r3), p3 * s2, ol(m3, g2), true);
  }, drawImage: (e3, t3, o3, n3, r3, l3, c3, d3, u3, h3, p3 = Ml, m3 = 1, g2, $3 = 1, x3 = 0, v3 = b2, w3 = Pl, S3 = Tl, k3 = false, M3 = false, I3 = true) => {
    const A3 = t3.width * s2, E3 = t3.height * s2, L3 = -0.5 * A3, F3 = 0.5 * E3, W3 = 0.5 * A3, _3 = -0.5 * E3, V3 = new Float32Array([L3, _3, 0, L3, F3, 0, W3, _3, 0, W3, F3, 0]);
    R2.bindBuffer(R2.ARRAY_BUFFER, B2), R2.bufferData(R2.ARRAY_BUFFER, V3, R2.STATIC_DRAW);
    const N3 = t3.height / 2 / P2 * (i2.height / t3.height) * -1;
    r3 *= s2, l3 *= s2, o3 *= s2, n3 *= s2;
    const { program: H2, locations: j3 } = z2, U3 = il();
    ((e4, t4, o4, i3, n4) => {
      const r4 = 1 / Math.tan(t4 / 2), a3 = 1 / (i3 - n4);
      e4[0] = r4 / o4, e4[1] = 0, e4[2] = 0, e4[3] = 0, e4[4] = 0, e4[5] = r4, e4[6] = 0, e4[7] = 0, e4[8] = 0, e4[9] = 0, e4[10] = (n4 + i3) * a3, e4[11] = -1, e4[12] = 0, e4[13] = 0, e4[14] = 2 * n4 * i3 * a3, e4[15] = 0;
    })(U3, T2, a2, 1, 2 * -N3), rl(U3, r3, -l3, N3), rl(U3, o3, -n3, 0), cl(U3, -u3), al(U3, h3), rl(U3, -o3, n3, 0), ll(U3, d3), sl(U3, c3), R2.useProgram(H2), R2.enableVertexAttribArray(j3.aPosition), R2.enableVertexAttribArray(j3.aTexCoord), R2.uniform1i(j3.uTexture, 3), R2.uniform2f(j3.uTextureSize, t3.width, t3.height), R2.activeTexture(R2.TEXTURE0 + 3), R2.bindTexture(R2.TEXTURE_2D, e3);
    const Z3 = M3 ? 1 : 0, X3 = C2.get(Z3);
    R2.uniform1i(j3.uTextureBlend, Z3), R2.activeTexture(R2.TEXTURE0 + Z3), R2.bindTexture(R2.TEXTURE_2D, X3);
    const G3 = k3 ? 2 : 0, Y3 = C2.get(G3);
    R2.uniform1i(j3.uTextureOverlay, G3), R2.activeTexture(R2.TEXTURE0 + G3), R2.bindTexture(R2.TEXTURE_2D, Y3), R2.bindBuffer(R2.ARRAY_BUFFER, B2), R2.vertexAttribPointer(j3.aPosition, 3, R2.FLOAT, false, 0, 0);
    const q3 = kl && oe2(e3);
    let K3;
    R2.bindBuffer(R2.ARRAY_BUFFER, q3 ? D2 : O2), R2.vertexAttribPointer(j3.aTexCoord, 2, R2.FLOAT, false, 0, 0), R2.uniformMatrix4fv(j3.uMatrix, false, U3), R2.uniform4fv(j3.uOverlayColor, S3), !g2 || qa(g2, Cl) ? (g2 = Cl, K3 = -1) : (K3 = g2.reduce((e4, t4) => e4 + t4, 0), K3 = K3 <= 0 ? 1 : K3), R2.uniform1fv(j3.uClarityKernel, g2), R2.uniform1f(j3.uClarityKernelWeight, K3), R2.uniform1f(j3.uColorGamma, 1 / $3), R2.uniform1f(j3.uColorVignette, x3), R2.uniform1i(j3.uAntialias, I3 ? 1 : 0), R2.uniform4f(j3.uColorOffset, p3[4], p3[9], p3[14], p3[19]), R2.uniformMatrix4fv(j3.uColorMatrix, false, [p3[0], p3[1], p3[2], p3[3], p3[5], p3[6], p3[7], p3[8], p3[10], p3[11], p3[12], p3[13], p3[15], p3[16], p3[17], p3[18]]), R2.uniform1f(j3.uOpacity, m3), R2.uniform1f(j3.uMaskOpacity, f2), R2.uniform1fv(j3.uMaskBounds, y2), R2.uniform1fv(j3.uMaskCornerRadius, w3.map((e4) => e4 * s2)), R2.uniform1fv(j3.uMaskFeather, v3.map((e4, t4) => t4 % 2 == 0 ? e4 : e4 * s2)), R2.drawArrays(R2.TRIANGLE_STRIP, 0, 4), R2.disableVertexAttribArray(j3.aPosition), R2.disableVertexAttribArray(j3.aTexCoord);
  }, textureFilterNearest: R2.NEAREST, textureFilterLinear: R2.LINEAR, textureClamp: R2.CLAMP_TO_EDGE, textureRepeat: R2.REPEAT, textureCreate: () => R2.createTexture(), textureUpdate: (e3, t3, o3) => (J2.set(e3, { src: t3, options: o3, isRotatedVideo: "VIDEO" === t3.nodeName && (t3.dataset && 90 == t3.dataset.rotation || 270 == t3.dataset.rotation) }), tl(R2, e3, t3, o3)), textureGetSize: (e3) => {
    const { src: t3, options: o3 } = J2.get(e3), i3 = Le(t3);
    return o3.scalar ? He(i3, (e4) => e4 / o3.scalar) : i3;
  }, textureDelete: te2, enablePreviewStencil: () => {
    R2.stencilOp(R2.KEEP, R2.KEEP, R2.REPLACE), R2.stencilFunc(R2.ALWAYS, 1, 255), R2.stencilMask(255);
  }, applyPreviewStencil: () => {
    R2.stencilFunc(R2.EQUAL, 1, 255), R2.stencilMask(0);
  }, disablePreviewStencil: M2, setCanvasColor(e3) {
    v2 = e3[0], w2 = e3[1], S2 = e3[2], k2 = o2 ? e3[3] : 1, R2.clear(R2.COLOR_BUFFER_BIT);
  }, resetCanvasMatrix: () => {
    nl(c2, 0, i2.width, i2.height, 0, -1, 1);
  }, updateCanvasMatrix(e3, t3, o3, n3, r3) {
    const a3 = e3.width, l3 = e3.height, d3 = i2.width * (0.5 / s2), u3 = i2.height * (0.5 / s2), h3 = { x: d3 + (o3.x + t3.x), y: u3 + (o3.y + t3.y) }, p3 = { x: h3.x - t3.x, y: h3.y - t3.y }, m3 = 0.5 * a3, g2 = 0.5 * l3;
    pe(p3, r3.z, h3), Te(p3, n3, h3);
    rl(c2, (p3.x - m3) * s2, (p3.y - g2) * s2, 0), rl(c2, m3 * s2, g2 * s2, 0), cl(c2, r3.z);
    const $3 = r3.x > Math.PI / 2;
    sl(c2, $3 ? Math.PI : 0);
    const f3 = r3.y > Math.PI / 2;
    ll(c2, f3 ? Math.PI : 0), al(c2, n3), rl(c2, -m3 * s2, -g2 * s2, 0);
  }, drawToCanvas() {
    R2.bindFramebuffer(R2.FRAMEBUFFER, null), u2 = c2, R2.viewport(0, 0, R2.drawingBufferWidth, R2.drawingBufferHeight), R2.colorMask(true, true, true, true), R2.clearColor(v2, w2, S2, k2), R2.clear(R2.COLOR_BUFFER_BIT), x2 = [1, 0, 1, 0, 1, i2.width, 1, i2.width];
  }, drawToImageBlendBuffer(e3, t3) {
    ee2(1, F2, e3, t3);
  }, drawToImageOverlayBuffer(e3, t3) {
    ee2(2, E2, e3, t3);
  }, enableMask(e3, t3) {
    const o3 = e3.x * s2, n3 = e3.y * s2, r3 = e3.width * s2, a3 = e3.height * s2;
    $2 = o3, p2 = $2 + r3, h2 = i2.height - n3, m2 = i2.height - (n3 + a3), f2 = 1 - t3, y2 = [h2, p2, m2, $2];
  }, disableMask() {
    $2 = 0, p2 = i2.width, h2 = i2.height, m2 = 0, f2 = 1, y2 = [h2, p2, m2, $2];
  }, resize: (t3, o3, r3) => {
    s2 = r3, l2 = 1 === s2 ? 0.75 : 1, n2.width = t3, n2.height = o3, i2.width = t3 * s2, i2.height = o3 * s2, a2 = H(i2.width, i2.height), e2.width = i2.width, e2.height = i2.height, nl(c2, 0, i2.width, i2.height, 0, -1, 1), b2 = [1, 0, 1, 0, 1, n2.width, 1, n2.width];
  }, release() {
    Array.from(J2.keys()).forEach((e3) => te2(e3, { forceRelease: true })), J2.clear(), C2.forEach((e3) => {
      R2.deleteTexture(e3);
    }), C2.clear(), z2.destroy(), W2.destroy(), N2.destroy(), U2.destroy(), Y2.destroy(), e2.width = 1, e2.height = 1, e2 = void 0;
  } };
};
var Al = (e2) => e2 % 2 == 0 ? e2 : e2 + 1;
var El = (e2, t2, o2) => {
  const { targetCanvas: i2, targetSize: n2, disableDraw: r2 = false, shapePreprocessor: a2 } = o2 || {}, s2 = i2 || document.createElement("canvas"), { crop: l2, colorMatrix: c2, convolutionMatrix: d2 } = t2, u2 = Zt(e2), h2 = { width: u2 ? e2.videoWidth : e2.width, height: u2 ? e2.videoHeight : e2.height }, { upscale: m2 = false, fit: g2 = "contain", width: $2, height: f2 } = n2 || {};
  let y2 = 1;
  "contain" === g2 ? y2 = Math.min(($2 || Number.MAX_SAFE_INTEGER) / l2.width, (f2 || Number.MAX_SAFE_INTEGER) / l2.height) : "cover" === g2 && (y2 = Math.max(($2 || l2.width) / l2.width, (f2 || l2.height) / l2.height)), m2 || (y2 = Math.min(y2, 1));
  const b2 = Math.floor(l2.width * y2), x2 = Math.floor(l2.height * y2), v2 = u2 ? Al(b2) : b2, w2 = u2 ? Al(x2) : x2, S2 = Il(s2, { alpha: true });
  S2.resize(v2, w2, 1);
  const k2 = S2.textureCreate();
  let C2;
  S2.setCanvasColor([0, 0, 0, 0]), S2.drawToCanvas(), S2.disableMask(), S2.disablePreviewStencil();
  {
    const e3 = Object.values(c2 || {}).filter(Boolean);
    e3.length && (C2 = Ln(e3));
  }
  const M2 = { x: 0, y: 0, width: v2, height: w2 }, { origin: T2, translation: P2, rotation: R2, scale: I2 } = Us(M2, M2, h2, l2, { x: 0, y: 0, width: v2, height: w2 }, y2, { x: 0, y: 0 }, 1, t2.rotation, t2.flipX, t2.flipY), A2 = [h2, T2.x, T2.y, P2.x, P2.y, R2.x, R2.y, R2.z, I2, C2, 1, d2 && d2.clarity, ko(t2.gamma) ? t2.gamma : 1, t2.vignette || 0, [1, 0, 1, 0, 1, w2, 1, v2], void 0, void 0, void 0, void 0, false];
  let E2 = false;
  const L2 = t2.decoration.length || t2.annotation.length, F2 = L2 && S2.textureCreate(), B2 = () => {
    S2.textureUpdate(k2, e2, { filterParam: S2.textureFilterLinear, wrapParam: S2.textureClamp });
  }, O2 = () => {
    B2(), S2.drawImage(k2, ...A2), L2 && E2 && S2.drawRect(M2, 0, false, false, [0, 0, 0, 0], void 0, F2);
  };
  return B2(), !r2 && O2(), { canvas: s2, prepare: async () => {
    if (!L2)
      return;
    const { dest: e3 } = await cs(p("canvas", h2), { shapePreprocessor: a2, imageReader: [[async (e4, t3, o3) => {
      const { src: i3 } = e4, n3 = parseInt(i3.width, 10), r3 = parseInt(i3.height, 10), a3 = await z(i3);
      return { ...e4, dest: a3, size: { width: n3, height: r3 } };
    }, "read-canvas"]], imageWriter: js({ format: "canvas" }), imageState: { ...t2, redaction: [], frame: void 0, gamma: void 0, convolutionMatrix: void 0, colorMatrix: void 0, backgroundColor: [0, 0, 0, 0], backgroundImage: void 0, trim: void 0, vignette: void 0, volume: void 0 } });
    S2.textureUpdate(F2, e3, { filterParam: S2.textureFilterLinear, wrapParam: S2.textureClamp }), E2 = true, !r2 && O2();
  }, redraw: O2, destroy: () => {
    S2.release();
  } };
};
var Ll = (e2, t2) => {
  const { imageData: o2, amount: i2 = 1 } = e2, n2 = Math.round(2 * Math.max(1, i2)), r2 = Math.round(0.5 * n2), a2 = o2.width, s2 = o2.height, l2 = new Uint8ClampedArray(a2 * s2 * 4), c2 = o2.data;
  let d2, u2, h2, p2, m2, g2 = 0, $2 = 0, f2 = 0;
  const y2 = a2 * s2 * 4 - 4;
  for (h2 = 0; h2 < s2; h2++)
    for (d2 = crypto.getRandomValues(new Uint8ClampedArray(s2)), u2 = 0; u2 < a2; u2++)
      p2 = d2[h2] / 255, $2 = 0, f2 = 0, p2 < 0.5 && ($2 = 4 * (-r2 + Math.round(Math.random() * n2))), p2 > 0.5 && (f2 = (-r2 + Math.round(Math.random() * n2)) * (4 * a2)), m2 = Math.min(Math.max(0, g2 + $2 + f2), y2), l2[g2] = c2[m2], l2[g2 + 1] = c2[m2 + 1], l2[g2 + 2] = c2[m2 + 2], l2[g2 + 3] = c2[m2 + 3], g2 += 4;
  t2(null, { data: l2, width: o2.width, height: o2.height });
};
var Fl = [0.0625, 0.125, 0.0625, 0.125, 0.25, 0.125, 0.0625, 0.125, 0.0625];
function zl(e2) {
  return Math.sqrt(1 - --e2 * e2);
}
function Bl(e2) {
  return "[object Date]" === Object.prototype.toString.call(e2);
}
function Ol(e2, t2) {
  if (e2 === t2 || e2 != e2)
    return () => e2;
  const o2 = typeof e2;
  if (o2 !== typeof t2 || Array.isArray(e2) !== Array.isArray(t2))
    throw new Error("Cannot interpolate values of different type");
  if (Array.isArray(e2)) {
    const o3 = t2.map((t3, o4) => Ol(e2[o4], t3));
    return (e3) => o3.map((t3) => t3(e3));
  }
  if ("object" === o2) {
    if (!e2 || !t2)
      throw new Error("Object cannot be null");
    if (Bl(e2) && Bl(t2)) {
      e2 = e2.getTime();
      const o4 = (t2 = t2.getTime()) - e2;
      return (t3) => new Date(e2 + t3 * o4);
    }
    const o3 = Object.keys(t2), i2 = {};
    return o3.forEach((o4) => {
      i2[o4] = Ol(e2[o4], t2[o4]);
    }), (e3) => {
      const t3 = {};
      return o3.forEach((o4) => {
        t3[o4] = i2[o4](e3);
      }), t3;
    };
  }
  if ("number" === o2) {
    const o3 = t2 - e2;
    return (t3) => e2 + t3 * o3;
  }
  throw new Error(`Cannot interpolate ${o2} values`);
}
function Dl(e2, t2 = {}) {
  const o2 = Ca(e2);
  let i2, n2 = e2;
  function r2(r3, a2) {
    if (null == e2)
      return o2.set(e2 = r3), Promise.resolve();
    n2 = r3;
    let s2 = i2, l2 = false, { delay: c2 = 0, duration: d2 = 400, easing: u2 = Bn, interpolate: h2 = Ol } = On(On({}, t2), a2);
    if (0 === d2)
      return s2 && (s2.abort(), s2 = null), o2.set(e2 = n2), Promise.resolve();
    const p2 = or() + c2;
    let m2;
    return i2 = ar((t3) => {
      if (t3 < p2)
        return true;
      l2 || (m2 = h2(e2, r3), "function" == typeof d2 && (d2 = d2(e2, r3)), l2 = true), s2 && (s2.abort(), s2 = null);
      const i3 = t3 - p2;
      return i3 > d2 ? (o2.set(e2 = r3), false) : (o2.set(e2 = m2(u2(i3 / d2))), true);
    }), i2.promise;
  }
  return { set: r2, update: (t3, o3) => r2(t3(n2, e2), o3), subscribe: o2.subscribe };
}
function Wl(e2, t2, o2, i2) {
  if ("number" == typeof o2) {
    const n2 = i2 - o2, r2 = (o2 - t2) / (e2.dt || 1 / 60), a2 = (r2 + (e2.opts.stiffness * n2 - e2.opts.damping * r2) * e2.inv_mass) * e2.dt;
    return Math.abs(a2) < e2.opts.precision && Math.abs(n2) < e2.opts.precision ? i2 : (e2.settled = false, o2 + a2);
  }
  if (To(o2))
    return o2.map((n2, r2) => Wl(e2, t2[r2], o2[r2], i2[r2]));
  if ("object" == typeof o2) {
    const n2 = {};
    for (const r2 in o2)
      n2[r2] = Wl(e2, t2[r2], o2[r2], i2[r2]);
    return n2;
  }
  throw new Error(`Cannot spring ${typeof o2} values`);
}
function _l(e2, t2 = {}) {
  const o2 = Ca(e2), { stiffness: i2 = 0.15, damping: n2 = 0.8, precision: r2 = 0.01 } = t2;
  let a2, s2, l2, c2 = e2, d2 = e2, u2 = 1, h2 = 0, p2 = false;
  function m2(t3, i3 = {}) {
    d2 = t3;
    const n3 = l2 = {};
    if (null == e2 || i3.hard || g2.stiffness >= 1 && g2.damping >= 1)
      return p2 = true, a2 = null, c2 = t3, o2.set(e2 = d2), Promise.resolve();
    if (i3.soft) {
      const e3 = true === i3.soft ? 0.5 : +i3.soft;
      h2 = 1 / (60 * e3), u2 = 0;
    }
    if (!s2) {
      a2 = null, p2 = false;
      const t4 = { inv_mass: void 0, opts: g2, settled: true, dt: void 0 };
      s2 = ar((i4) => {
        if (null === a2 && (a2 = i4), p2)
          return p2 = false, s2 = null, false;
        u2 = Math.min(u2 + h2, 1), t4.inv_mass = u2, t4.opts = g2, t4.settled = true, t4.dt = 60 * (i4 - a2) / 1e3;
        const n4 = Wl(t4, c2, e2, d2);
        return a2 = i4, c2 = e2, o2.set(e2 = n4), t4.settled && (s2 = null), !t4.settled;
      });
    }
    return new Promise((e3) => {
      s2.promise.then(() => {
        n3 === l2 && e3();
      });
    });
  }
  const g2 = { set: m2, update: (t3, o3) => m2(t3(d2, e2), o3), subscribe: o2.subscribe, stiffness: i2, damping: n2, precision: r2 };
  return g2;
}
var Vl = ka(false, (e2) => {
  const t2 = window.matchMedia("(prefers-reduced-motion:reduce)"), o2 = () => e2(t2.matches);
  return o2(), t2.addListener(o2), () => t2.removeListener(o2);
});
var Nl = () => "ResizeObserver" in window;
var Hl = qe();
var jl = (e2, t2, o2, i2, n2) => {
  e2.rect || (e2.rect = qe());
  const r2 = e2.rect;
  ut(Hl, t2, o2, i2, n2), ct(r2, Hl) || (ht(r2, Hl), e2.dispatchEvent(new CustomEvent("measure", { detail: r2 })));
};
var Ul = Math.round;
var Zl = (e2) => {
  const t2 = e2.getBoundingClientRect();
  Kl && jl(e2, Ul(t2.x), Ul(t2.y), Ul(t2.width), Ul(t2.height));
};
var Xl = (e2) => {
  Kl && jl(e2, e2.offsetLeft, e2.offsetTop, e2.offsetWidth, e2.offsetHeight);
};
var Gl = [];
var Yl;
var ql;
var Kl = void 0;
function Jl() {
  Gl.length ? (Gl.forEach((e2) => e2.measure(e2)), Kl = requestAnimationFrame(Jl)) : Kl = void 0;
}
var Ql = /* @__PURE__ */ new Map([]);
var ec = 0;
var tc = 0;
var oc = (e2, t2 = {}) => {
  const { observePosition: o2 = false, observeViewRect: i2 = false, once: n2 = false, disabled: r2 = false, isMeasureRoot: a2 = false } = t2;
  if (Nl() && a2 && (ql || (ql = new ResizeObserver((e3) => {
    e3.forEach((e4) => {
      Ql.set(e4.target, e4.contentRect);
    });
    const t3 = Array.from(Ql.values()).some(({ width: e4, height: t4 }) => e4 > 0 && t4 > 0);
    t3 ? t3 && false === Kl && Jl() : (Kl && cancelAnimationFrame(Kl), Kl = false);
  })), ql.observe(e2), ec++), !r2)
    return !Nl() || o2 || i2 ? (e2.measure = i2 ? Zl : Xl, Gl.push(e2), void 0 === Kl && (Kl = requestAnimationFrame(Jl)), e2.measure(e2), { destroy() {
      a2 && ql && (Ql.delete(e2), ql.unobserve(e2), ec--, 0 === ec && (ql.disconnect(), ql = void 0));
      const t3 = Gl.indexOf(e2);
      Gl.splice(t3, 1), delete e2.measure;
    } }) : (Yl || (Yl = new ResizeObserver((e3) => {
      e3.forEach((e4) => {
        Kl && Xl(e4.target);
      });
    })), Yl.observe(e2), Xl(e2), n2 ? Yl.unobserve(e2) : tc++, { destroy() {
      a2 && ql && (Ql.delete(e2), ql.unobserve(e2), ec--, 0 === ec && (ql.disconnect(), ql = void 0)), n2 || (Yl.unobserve(e2), tc--, 0 === tc && (Yl.disconnect(), Yl = void 0));
    } });
};
var ic = (e2) => {
  let t2 = false;
  const o2 = { pointerdown: () => {
    t2 = false;
  }, keydown: () => {
    t2 = true;
  }, keyup: () => {
    t2 = false;
  }, focus: (e3) => {
    t2 && (e3.target.dataset.focusVisible = "");
  }, blur: (e3) => {
    delete e3.target.dataset.focusVisible;
  } };
  return Object.keys(o2).forEach((t3) => e2.addEventListener(t3, o2[t3], true)), { destroy() {
    Object.keys(o2).forEach((t3) => e2.removeEventListener(t3, o2[t3], true));
  } };
};
var nc = async (e2) => new Promise((t2) => {
  if ("file" === e2.kind)
    return t2(e2.getAsFile());
  e2.getAsString(t2);
});
var rc = (e2, t2 = {}) => {
  const o2 = (e3) => {
    e3.preventDefault();
  }, i2 = async (o3) => {
    o3.preventDefault(), o3.stopPropagation();
    try {
      const i3 = await ((e3) => new Promise((t3, o4) => {
        const { items: i4 } = e3.dataTransfer;
        if (!i4)
          return t3([]);
        Promise.all(Array.from(i4).map(nc)).then((e4) => {
          t3(e4.filter((e5) => Lo(e5) && jt(e5) || /^http/.test(e5)));
        }).catch(o4);
      }))(o3);
      e2.dispatchEvent(new CustomEvent("dropfiles", { detail: { event: o3, resources: i3 }, ...t2 }));
    } catch (e3) {
    }
  };
  return e2.addEventListener("drop", i2), e2.addEventListener("dragover", o2), { destroy() {
    e2.removeEventListener("drop", i2), e2.removeEventListener("dragover", o2);
  } };
};
var ac = null;
var sc = () => {
  if (null === ac)
    if (c()) {
      const e2 = p("canvas");
      ac = !ul(e2, { failIfMajorPerformanceCaveat: true }), g(e2);
    } else
      ac = false;
  return ac;
};
var lc = (e2) => e2 instanceof WebGLTexture;
function cc(e2) {
  let t2, o2, i2, n2;
  return { c() {
    t2 = hr("div"), o2 = hr("canvas"), xr(t2, "class", "PinturaCanvas");
  }, m(r2, a2) {
    dr(r2, t2, a2), sr(t2, o2), e2[35](o2), i2 || (n2 = [fr(o2, "measure", e2[36]), er(oc.call(null, o2))], i2 = true);
  }, p: zn, i: zn, o: zn, d(o3) {
    o3 && ur(t2), e2[35](null), i2 = false, _n(n2);
  } };
}
function dc(e2, t2, o2) {
  let i2, r2, a2, s2, l2, d2, u2;
  const h2 = [0, 0, 0, 0], m2 = c() && ((e3) => {
    const t3 = 0.5 * e3, o3 = p("canvas", { "data-retain": true, width: e3, height: e3 }), i3 = o3.getContext("2d");
    return i3.fillStyle = "#f0f", i3.fillRect(0, 0, t3, t3), i3.fillRect(t3, t3, t3, t3), o3;
  })(128), g2 = Or();
  let f2, { isAnimated: y2 } = t2, { isTransparent: b2 } = t2, { maskRect: x2 } = t2, { maskOpacity: v2 = 1 } = t2, { maskFrameOpacity: w2 = 0.95 } = t2, { maskMarkupOpacity: S2 = 1 } = t2, { clipAnnotationsToImage: k2 = true } = t2, { pixelRatio: C2 = 1 } = t2, { textPixelRatio: T2 = C2 } = t2, { backgroundColor: P2 } = t2, { willRender: R2 = j } = t2, { didRender: I2 = j } = t2, { willRequest: A2 } = t2, { loadImageData: E2 = j } = t2, { enableGrid: L2 = false } = t2, { gridColors: F2 } = t2, { gridSize: z2 } = t2, { gridOpacity: B2 = 0 } = t2, { images: O2 = [] } = t2, { interfaceImages: D2 = [] } = t2, W2 = null, _2 = null, V2 = null;
  const N2 = (e3, t3) => e3.set(t3, { hard: !y2 }), U2 = { precision: 1e-4 * 0.01 };
  let Z2 = 0;
  const X2 = Dl(void 0, { duration: 0 });
  Un(e2, X2, (e3) => o2(34, u2 = e3));
  const G2 = _l(1, U2);
  Un(e2, G2, (e3) => o2(33, l2 = e3));
  const Y2 = _l(1, U2);
  Un(e2, Y2, (e3) => o2(45, a2 = e3));
  const q2 = Ca();
  Un(e2, q2, (e3) => o2(47, d2 = e3));
  const K2 = Ca();
  Un(e2, K2, (e3) => o2(46, s2 = e3));
  const J2 = () => requestAnimationFrame(() => {
    ue2 = true, be2 = 0, r2();
  }), Q2 = /* @__PURE__ */ new Map([]), ee2 = /* @__PURE__ */ new Map([]), te2 = (e3, t3) => ({ filterParam: "pixelated" === e3 ? W2.textureFilterNearest : W2.textureFilterLinear, wrapParam: "repeat" === t3 ? W2.textureRepeat : W2.textureClamp }), oe2 = (e3, t3, o3) => {
    if (!Q2.has(e3)) {
      Q2.set(e3, e3);
      const n3 = te2(t3, o3);
      if (!M(i3 = e3) && (io(i3) || $(i3) || mn(i3) || Zt(i3))) {
        const t4 = W2.textureCreate();
        W2.textureUpdate(t4, e3, n3), Q2.set(e3, t4);
      } else
        E2(e3).then((t4) => {
          if (!W2 || !t4)
            return;
          const o4 = W2.textureCreate();
          W2.textureUpdate(o4, t4, n3), Q2.set(e3, o4), J2();
        }).catch((e4) => {
          console.error(e4);
        });
    }
    var i3, n2;
    if (Zt(e3) && ((n2 = e3).currentTime > 0 && !n2.paused && !n2.ended && n2.readyState > 2 || "true" === e3.dataset.redraw)) {
      const i4 = Q2.get(e3), n3 = te2(t3, o3);
      return W2.textureUpdate(i4, e3, n3), e3.dataset.redraw = false, i4;
    }
    return Q2.get(e3);
  }, ie2 = (e3) => {
    if (!e3.text.length)
      return void ee2.delete(e3.id);
    let { text: t3, textAlign: o3, fontFamily: i3, fontSize: n2 = 16, fontWeight: r3, fontVariant: a3, fontStyle: s3, lineHeight: l3 = n2, width: c2, height: d3 } = e3;
    c2 = ko(c2) ? Math.floor(c2) : c2, d3 = ko(d3) ? Math.floor(d3) : d3;
    const { textSize: u3, signature: h3 } = ((e4 = "", t4) => {
      let { width: o4 = 0, height: i4 = "auto", fontSize: n3, fontFamily: r4, lineHeight: a4, fontWeight: s4, fontStyle: l4, fontVariant: c3 } = t4;
      const d4 = Bo({ text: e4, fontFamily: r4, fontWeight: s4, fontStyle: l4, fontVariant: c3, fontSize: n3, lineHeight: a4, width: o4, height: i4 });
      let u4 = Zo.get(d4);
      if (u4)
        return u4;
      let h4 = 1;
      n3 > 1e3 && No() && (h4 = n3 / 1e3, n3 = 1e3, a4 *= h4);
      const m4 = Wt(p("pre", { contenteditable: "true", spellcheck: "false", style: `${Go}${jo({ fontFamily: r4, fontWeight: s4, fontStyle: l4, fontVariant: c3, fontSize: n3, lineHeight: a4 })};${Uo(e4, t4)}"`, innerHTML: e4 })), g4 = m4.getBoundingClientRect();
      return u4 = { signature: Xo(m4).flat().map((e5) => e5.text).join("_;_"), textSize: He(Le(g4), (e5) => Math.ceil(e5 * h4)) }, Zo.set(d4, u4), m4.remove(), u4;
    })(t3, { ...e3, width: c2, height: d3 }), m3 = Bo({ text: t3, textAlign: o3, fontFamily: i3, fontSize: n2, fontWeight: r3, fontVariant: a3, fontStyle: s3, lineHeight: l3, signature: h3 });
    if (!Q2.has(m3)) {
      Q2.set(m3, t3);
      const h4 = Math.ceil(u3.width), p2 = Math.ceil(u3.height / l3) * l3;
      if (0 === h4 || 0 === p2)
        return;
      const g4 = xl(), $2 = Math.min(1, (g4 - Ho * T2 * 2) / (h4 * T2), g4 / (p2 * T2));
      li(t3, { fontSize: n2, fontFamily: i3, fontWeight: r3, fontVariant: a3, fontStyle: s3, textAlign: o3, lineHeight: l3, width: c2, height: d3, imageWidth: h4, imageHeight: p2, pixelRatio: T2 * $2, willRequest: A2, color: [1, 0, 1] }).then((t4) => {
        if (!W2)
          return;
        const o4 = W2.textureCreate();
        W2.textureUpdate(o4, t4, { filterParam: W2.textureFilterLinear, wrapParam: W2.textureClamp, scalar: $2 }), Q2.set(m3, o4), ee2.set(e3.id, o4), J2();
      }).catch(console.error);
    }
    const g3 = Q2.get(m3);
    return lc(g3) ? g3 : ee2.get(e3.id);
  }, ne2 = ({ data: e3, size: t3, origin: o3, translation: i3, rotation: n2, scale: r3, colorMatrix: a3, opacity: s3, convolutionMatrix: l3, gamma: c2, vignette: d3, maskFeather: u3, maskCornerRadius: h3, overlayColor: p2, enableOverlay: m3, enableBlend: g3, enableAntialiasing: $2 }) => {
    const f3 = oe2(e3);
    let y3 = 0, b3 = 0;
    if (1 === C2) {
      const e4 = Math.abs(1 - r3) < Number.EPSILON;
      y3 = e4 && _2 % 2 != 0 ? 0.5 : 0, b3 = e4 && V2 % 2 != 0 ? 0.5 : 0;
    }
    return W2.drawImage(f3, t3, o3.x, o3.y, i3.x + y3, i3.y + b3, n2.x, n2.y, n2.z, r3, a3, Ua(s3, 0, 1), l3, c2, d3, u3, h3, p2, m3, g3, $2), f3;
  }, re2 = ([e3, t3, o3, i3]) => [i3.x, i3.y, e3.x, e3.y, o3.x, o3.y, t3.x, t3.y], ae2 = le(), se2 = (e3 = [], t3) => e3.map((e4) => {
    let t4 = !e4._isLoading && ((e5) => {
      let t5;
      if (e5.backgroundImage)
        t5 = oe2(e5.backgroundImage, e5.backgroundImageRendering);
      else if (M(e5.text)) {
        if (e5.width && e5.width < 1 || e5.height && e5.height < 1)
          return;
        t5 = ie2(e5);
      }
      return t5;
    })(e4), o3 = lc(t4) ? t4 : void 0;
    const i3 = e4._scale || 1, n2 = e4._translate || ae2, r3 = e4.strokeWidth && e4.strokeWidth * i3;
    if (To(e4.points)) {
      const t5 = e4.points.map((e5) => ce(e5.x * i3 + n2.x, e5.y * i3 + n2.y));
      W2.drawPath(t5, e4.rotation, e4.flipX, e4.flipY, r3, e4.strokeColor, e4.pathClose, e4.backgroundColor, e4.opacity);
    } else if (ko(e4.rx) && ko(e4.ry)) {
      let t5 = e4.x, a3 = e4.y;
      t5 *= i3, a3 *= i3, t5 += n2.x, a3 += n2.y, W2.drawEllipse(ce(t5, a3), e4.rx * i3, e4.ry * i3, e4.rotation, e4.flipX, e4.flipY, e4.backgroundColor, o3, void 0, void 0, e4.backgroundCorners && re2(e4.backgroundCorners), r3, e4.strokeColor, e4.opacity, e4.inverted);
    } else if (M(e4.text) && o3 || e4.width) {
      const t5 = o3 && W2.textureGetSize(o3);
      let a3, s3, l3, c2 = void 0, d3 = e4.backgroundColor, u3 = e4.strokeColor, h3 = [e4.cornerRadius, e4.cornerRadius, e4.cornerRadius, e4.cornerRadius].map((e5) => e5 * i3);
      if (a3 = e4.width ? Je(e4) : { x: e4.x, y: e4.y, ...t5 }, i3 && n2 && (a3.x *= i3, a3.y *= i3, a3.x += n2.x, a3.y += n2.y, a3.width *= i3, a3.height *= i3), t5) {
        if (e4.backgroundImage && (e4.backgroundSize || e4.backgroundPosition)) {
          const o4 = H(t5.width, t5.height);
          if ("contain" === e4.backgroundSize) {
            const t6 = ft(a3, o4, a3);
            s3 = Fe(t6), l3 = e4.backgroundPosition ? e4.backgroundPosition : ce(0.5 * (a3.width - s3.width), 0.5 * (a3.height - s3.height));
          } else if ("cover" === e4.backgroundSize) {
            const t6 = $t(a3, o4, a3);
            s3 = Fe(t6), e4.backgroundPosition ? l3 = e4.backgroundPosition : (l3 = ce(t6.x, t6.y), l3 = ce(0.5 * (a3.width - s3.width), 0.5 * (a3.height - s3.height)));
          } else
            e4.backgroundSize ? (s3 = e4.backgroundSize, l3 = e4.backgroundPosition) : e4.backgroundPosition && (s3 = { ...t5 }, l3 = e4.backgroundPosition);
        } else if (e4.text) {
          const o4 = { width: t5.width / T2, height: t5.height / T2 };
          let n3 = 1;
          if (e4.fontSize > 1e3 && No() && (n3 = e4.fontSize / 1e3), l3 = ce(0, 0), s3 = { width: o4.width * i3, height: o4.height * i3 }, e4.backgroundColor || e4.strokeColor) {
            d3 = void 0, u3 = void 0;
            let t6 = (e4.width || o4.width - 2 * Ho) * i3, n4 = (e4.height || o4.height) * i3;
            W2.drawRect({ ...a3, width: t6, height: n4 }, e4.rotation, e4.flipX, e4.flipY, h3, e4.backgroundColor, void 0, void 0, void 0, false, void 0, r3, e4.strokeColor, e4.opacity, void 0, void 0, e4.inverted);
          }
          a3.x -= Ho * i3, c2 = e4.color || [0, 0, 0], e4.width ? (a3.height = a3.height || o4.height * i3, a3.width += 2 * Ho * i3 / n3, "center" === e4.textAlign ? l3.x = 0.5 * (a3.width - s3.width / n3) : "right" === e4.textAlign && (l3.x = a3.width - s3.width / n3)) : (a3.width = o4.width * i3, a3.height = o4.height * i3), e4._prerender && (c2[3] = 0);
        }
      }
      W2.drawRect(a3, e4.rotation, e4.flipX, e4.flipY, h3, d3, o3, s3, l3, false, e4.backgroundCorners && re2(e4.backgroundCorners), r3, u3, e4.opacity, void 0, c2, e4.inverted);
    }
    return t4;
  }).filter(Boolean), de2 = (e3, t3, o3, i3, n2, r3) => W2.drawRect(t3, 0, false, false, h2, h2, e3, i3, o3, true, void 0, 0, void 0, r3, void 0, n2);
  let ue2 = false, he2 = true, pe2 = false;
  const me2 = [], ge2 = [], $e2 = [], fe2 = () => {
    $e2.length = 0;
    const e3 = O2[0], { blendShapes: t3, blendShapesDirty: o3, annotationShapes: i3, annotationShapesDirty: n2, interfaceShapes: r3, decorationShapes: c2, frameShapes: p2 } = R2({ opacity: e3.opacity, rotation: e3.rotation, scale: e3.scale, images: O2, size: Oe(_2, V2), backgroundColor: [...u2], selectionRect: d2 }), g3 = [...u2], $2 = d2, f3 = Ua(l2, 0, 1), y3 = s2, v3 = Math.abs(e3.rotation.x / Math.PI * 2 - 1), w3 = Math.abs(e3.rotation.y / Math.PI * 2 - 1), C3 = v3 < 0.99 || w3 < 0.99, M2 = { ...e3.size }, P3 = e3.backgroundColor, A3 = e3.backgroundImage, E3 = t3.length > 0, N3 = i3.length > 0, H2 = P3[3] > 0, j2 = !!k2 && S2 >= 1;
    if (f3 < 1 && H2) {
      const e4 = g3[0], t4 = g3[1], o4 = g3[2], i4 = 1 - f3, n3 = P3[0] * i4, r4 = P3[1] * i4, a3 = P3[2] * i4, s3 = 1 - i4;
      g3[0] = n3 + e4 * s3, g3[1] = r4 + t4 * s3, g3[2] = a3 + o4 * s3, g3[3] = 1;
    }
    W2.setCanvasColor(b2 ? h2 : g3), E3 && o3 ? (W2.disableMask(), W2.drawToImageBlendBuffer(M2), me2.length = 0, me2.push(...se2(t3))) : E3 || (me2.length = 0), $e2.push(...me2), he2 && (W2.drawToImageOverlayBuffer(M2, T2), he2 = false);
    if (C3 ? (N3 && (n2 || ue2) || !pe2 ? (W2.disableMask(), W2.drawToImageOverlayBuffer(M2, T2), ge2.length = 0, ge2.push(...se2(i3))) : N3 || (ge2.length = 0), pe2 = true) : pe2 = false, W2.drawToCanvas(), W2.enableMask($2, f3), L2 && z2 >= 1 && 2 === F2.length && B2 && ((e4, t4, o4, i4, n3) => {
      const r4 = Oe(t4, t4), a3 = oe2(m2, "pixelated", "repeat"), s3 = ce(-e4.x % t4, -e4.y % t4), l3 = ce(s3.x + 0.5 * r4.width, s3.y);
      de2(a3, e4, s3, r4, o4, n3), de2(a3, e4, l3, r4, i4, n3);
    })($2, z2, F2[0], F2[1], B2), H2 && W2.drawRect($2, 0, false, false, h2, P3), A3) {
      W2.enableMask($2, 1);
      const e4 = Math.max(x2.width / A3.width, x2.height / A3.height), t4 = A3.width * e4, o4 = A3.height * e4, i4 = { x: x2.x + 0.5 * x2.width - 0.5 * t4, y: x2.y + 0.5 * x2.height - 0.5 * o4, width: t4, height: o4 };
      W2.drawRect(i4, 0, false, false, h2, h2, oe2(A3, "linear")), W2.enableMask($2, f3);
    }
    if (j2 && W2.enablePreviewStencil(), $e2.push(...[...O2].reverse().map((e4) => ne2({ ...e4, enableOverlay: C3 && N3, enableBlend: E3, enableAntialiasing: true, mask: $2, maskOpacity: f3, overlayColor: y3 }))), W2.enableMask($2, S2), C3 || (j2 && W2.applyPreviewStencil(), W2.resetCanvasMatrix(), W2.updateCanvasMatrix(M2, e3.origin, e3.translation, e3.scale, e3.rotation), ge2.length = 0, ge2.push(...se2(i3)), j2 && W2.disablePreviewStencil()), $e2.push(...ge2), W2.resetCanvasMatrix(), W2.enableMask($2, S2), $e2.push(...se2(c2)), p2.length) {
      W2.enableMask($2, 1);
      const e4 = p2.filter((e5) => !e5.expandsCanvas), t4 = p2.filter((e5) => e5.expandsCanvas);
      e4.length && $e2.push(...se2(e4)), t4.length && (W2.enableMask({ x: $2.x + 0.5, y: $2.y + 0.5, width: $2.width - 1, height: $2.height - 1 }, a2), $e2.push(...se2(t4)));
    }
    W2.disableMask(), $e2.push(...se2(r3)), D2.forEach((e4) => {
      if (W2.enableMask(e4.mask, e4.maskOpacity), e4.backgroundColor) {
        const t5 = A3 && $t({ ...e4.mask }, A3.width / A3.height), o4 = A3 && oe2(A3, "linear");
        W2.drawRect(e4.mask, 0, false, false, e4.maskCornerRadius, e4.backgroundColor, o4, t5, t5, void 0, void 0, void 0, void 0, e4.opacity, e4.maskFeather), o4 && $e2.push(o4);
      }
      const t4 = ne2({ ...e4, enableAntialiasing: false, translation: { x: e4.translation.x + e4.offset.x - 0.5 * _2, y: e4.translation.y + e4.offset.y - 0.5 * V2 } });
      $e2.push(t4);
    }), W2.disableMask(), ((e4) => {
      Q2.forEach((t4, o4) => {
        !e4.find((e5) => e5 === t4) && lc(t4) && (Array.from(ee2.values()).includes(t4) || (Q2.delete(o4), W2.textureDelete(t4)));
      });
    })($e2), I2(), ue2 = false;
  };
  let ye2, be2 = 0;
  const xe2 = () => {
    clearTimeout(ye2);
    const e3 = Date.now();
    e3 - be2 < 48 ? ye2 = setTimeout(xe2, 48) : (be2 = e3, fe2());
  };
  zr(() => r2()), Fr(() => o2(29, W2 = Il(f2, { alpha: b2 }))), Br(() => {
    W2 && (W2.release(), o2(29, W2 = void 0), o2(0, f2 = void 0));
  });
  return e2.$$set = (e3) => {
    "isAnimated" in e3 && o2(9, y2 = e3.isAnimated), "isTransparent" in e3 && o2(10, b2 = e3.isTransparent), "maskRect" in e3 && o2(11, x2 = e3.maskRect), "maskOpacity" in e3 && o2(12, v2 = e3.maskOpacity), "maskFrameOpacity" in e3 && o2(13, w2 = e3.maskFrameOpacity), "maskMarkupOpacity" in e3 && o2(14, S2 = e3.maskMarkupOpacity), "clipAnnotationsToImage" in e3 && o2(15, k2 = e3.clipAnnotationsToImage), "pixelRatio" in e3 && o2(16, C2 = e3.pixelRatio), "textPixelRatio" in e3 && o2(17, T2 = e3.textPixelRatio), "backgroundColor" in e3 && o2(18, P2 = e3.backgroundColor), "willRender" in e3 && o2(19, R2 = e3.willRender), "didRender" in e3 && o2(20, I2 = e3.didRender), "willRequest" in e3 && o2(21, A2 = e3.willRequest), "loadImageData" in e3 && o2(22, E2 = e3.loadImageData), "enableGrid" in e3 && o2(23, L2 = e3.enableGrid), "gridColors" in e3 && o2(24, F2 = e3.gridColors), "gridSize" in e3 && o2(25, z2 = e3.gridSize), "gridOpacity" in e3 && o2(26, B2 = e3.gridOpacity), "images" in e3 && o2(27, O2 = e3.images), "interfaceImages" in e3 && o2(28, D2 = e3.interfaceImages);
  }, e2.$$.update = () => {
    if (1 & e2.$$.dirty[0] && f2) {
      const e3 = getComputedStyle(f2).getPropertyValue("--color-transition-duration");
      o2(30, Z2 = ((e4) => {
        let t3 = parseFloat(e4);
        return /^[0-9]+s$/.test(e4) ? 1e3 * t3 : t3;
      })(e3));
    }
    1074004480 & e2.$$.dirty[0] && P2 && X2.set(P2, { duration: y2 ? Z2 : 0 }), 4096 & e2.$$.dirty[0] && N2(G2, ko(v2) ? v2 : 1), 8192 & e2.$$.dirty[0] && N2(Y2, ko(w2) ? w2 : 1), 2048 & e2.$$.dirty[0] && x2 && q2.set(x2), 12 & e2.$$.dirty[1] && u2 && K2.set([u2[0], u2[1], u2[2], Ua(l2, 0, 1)]), 671088646 & e2.$$.dirty[0] && o2(32, i2 = !!(W2 && _2 && V2 && O2.length)), 536936454 & e2.$$.dirty[0] && _2 && V2 && W2 && (be2 = 0, W2.resize(_2, V2, C2)), 2 & e2.$$.dirty[1] && o2(31, r2 = i2 ? sc() ? xe2 : fe2 : n), 3 & e2.$$.dirty[1] && i2 && r2 && r2();
  }, [f2, _2, V2, g2, X2, G2, Y2, q2, K2, y2, b2, x2, v2, w2, S2, k2, C2, T2, P2, R2, I2, A2, E2, L2, F2, z2, B2, O2, D2, W2, Z2, r2, i2, l2, u2, function(e3) {
    Nr[e3 ? "unshift" : "push"](() => {
      f2 = e3, o2(0, f2);
    });
  }, (e3) => {
    o2(1, _2 = e3.detail.width), o2(2, V2 = e3.detail.height), g2("measure", { width: _2, height: V2 });
  }];
}
var uc = class extends wa {
  constructor(e2) {
    super(), va(this, e2, dc, cc, Nn, { isAnimated: 9, isTransparent: 10, maskRect: 11, maskOpacity: 12, maskFrameOpacity: 13, maskMarkupOpacity: 14, clipAnnotationsToImage: 15, pixelRatio: 16, textPixelRatio: 17, backgroundColor: 18, willRender: 19, didRender: 20, willRequest: 21, loadImageData: 22, enableGrid: 23, gridColors: 24, gridSize: 25, gridOpacity: 26, images: 27, interfaceImages: 28 }, null, [-1, -1, -1]);
  }
};
var hc = (e2, t2 = Boolean, o2 = " ") => e2.filter(t2).join(o2);
function pc(e2, t2, o2) {
  const i2 = e2.slice();
  return i2[17] = t2[o2], i2;
}
var mc = (e2) => ({ tab: 4 & e2 });
var gc = (e2) => ({ tab: e2[17] });
function $c(e2) {
  let t2, o2, i2, n2 = [], r2 = /* @__PURE__ */ new Map(), a2 = e2[2];
  const s2 = (e3) => e3[17].id;
  for (let t3 = 0; t3 < a2.length; t3 += 1) {
    let o3 = pc(e2, a2, t3), i3 = s2(o3);
    r2.set(i3, n2[t3] = fc(i3, o3));
  }
  return { c() {
    t2 = hr("ul");
    for (let e3 = 0; e3 < n2.length; e3 += 1)
      n2[e3].c();
    xr(t2, "class", o2 = hc(["PinturaTabList", e2[0]])), xr(t2, "role", "tablist"), xr(t2, "data-layout", e2[1]);
  }, m(o3, r3) {
    dr(o3, t2, r3);
    for (let e3 = 0; e3 < n2.length; e3 += 1)
      n2[e3].m(t2, null);
    e2[14](t2), i2 = true;
  }, p(e3, l2) {
    1124 & l2 && (a2 = e3[2], ra(), n2 = ma(n2, l2, s2, 1, e3, a2, r2, t2, pa, fc, null, pc), aa()), (!i2 || 1 & l2 && o2 !== (o2 = hc(["PinturaTabList", e3[0]]))) && xr(t2, "class", o2), (!i2 || 2 & l2) && xr(t2, "data-layout", e3[1]);
  }, i(e3) {
    if (!i2) {
      for (let e4 = 0; e4 < a2.length; e4 += 1)
        sa(n2[e4]);
      i2 = true;
    }
  }, o(e3) {
    for (let e4 = 0; e4 < n2.length; e4 += 1)
      la(n2[e4]);
    i2 = false;
  }, d(o3) {
    o3 && ur(t2);
    for (let e3 = 0; e3 < n2.length; e3 += 1)
      n2[e3].d();
    e2[14](null);
  } };
}
function fc(e2, t2) {
  let o2, i2, n2, r2, a2, s2, l2, c2, d2, u2;
  const h2 = t2[11].default, p2 = Zn(h2, t2, t2[10], gc);
  function m2(...e3) {
    return t2[12](t2[17], ...e3);
  }
  function g2(...e3) {
    return t2[13](t2[17], ...e3);
  }
  return { key: e2, first: null, c() {
    o2 = hr("li"), i2 = hr("button"), p2 && p2.c(), r2 = gr(), xr(i2, "type", "button"), i2.disabled = n2 = t2[17].disabled, xr(o2, "role", "tab"), xr(o2, "aria-controls", a2 = t2[17].href.substr(1)), xr(o2, "id", s2 = t2[17].tabId), xr(o2, "aria-selected", l2 = t2[17].selected), this.first = o2;
  }, m(e3, t3) {
    dr(e3, o2, t3), sr(o2, i2), p2 && p2.m(i2, null), sr(o2, r2), c2 = true, d2 || (u2 = [fr(i2, "keydown", m2), fr(i2, "click", g2)], d2 = true);
  }, p(e3, r3) {
    t2 = e3, p2 && p2.p && (!c2 || 1028 & r3) && Yn(p2, h2, t2, t2[10], c2 ? Gn(h2, t2[10], r3, mc) : qn(t2[10]), gc), (!c2 || 4 & r3 && n2 !== (n2 = t2[17].disabled)) && (i2.disabled = n2), (!c2 || 4 & r3 && a2 !== (a2 = t2[17].href.substr(1))) && xr(o2, "aria-controls", a2), (!c2 || 4 & r3 && s2 !== (s2 = t2[17].tabId)) && xr(o2, "id", s2), (!c2 || 4 & r3 && l2 !== (l2 = t2[17].selected)) && xr(o2, "aria-selected", l2);
  }, i(e3) {
    c2 || (sa(p2, e3), c2 = true);
  }, o(e3) {
    la(p2, e3), c2 = false;
  }, d(e3) {
    e3 && ur(o2), p2 && p2.d(e3), d2 = false, _n(u2);
  } };
}
function yc(e2) {
  let t2, o2, i2 = e2[4] && $c(e2);
  return { c() {
    i2 && i2.c(), t2 = $r();
  }, m(e3, n2) {
    i2 && i2.m(e3, n2), dr(e3, t2, n2), o2 = true;
  }, p(e3, [o3]) {
    e3[4] ? i2 ? (i2.p(e3, o3), 16 & o3 && sa(i2, 1)) : (i2 = $c(e3), i2.c(), sa(i2, 1), i2.m(t2.parentNode, t2)) : i2 && (ra(), la(i2, 1, 1, () => {
      i2 = null;
    }), aa());
  }, i(e3) {
    o2 || (sa(i2), o2 = true);
  }, o(e3) {
    la(i2), o2 = false;
  }, d(e3) {
    i2 && i2.d(e3), e3 && ur(t2);
  } };
}
function bc(e2, t2, o2) {
  let i2, n2, r2, { $$slots: a2 = {}, $$scope: s2 } = t2, { class: l2 } = t2, { name: c2 } = t2, { selected: d2 } = t2, { tabs: u2 = [] } = t2, { layout: h2 } = t2;
  const p2 = Or(), m2 = (e3) => {
    const t3 = r2.querySelectorAll('[role="tab"] button')[e3];
    t3 && t3.focus();
  }, g2 = (e3, t3) => {
    e3.preventDefault(), e3.stopPropagation(), p2("select", t3);
  }, $2 = ({ key: e3 }, t3) => {
    if (!/arrow/i.test(e3))
      return;
    const o3 = u2.findIndex((e4) => e4.id === t3);
    return /right|down/i.test(e3) ? m2(o3 < u2.length - 1 ? o3 + 1 : 0) : /left|up/i.test(e3) ? m2(o3 > 0 ? o3 - 1 : u2.length - 1) : void 0;
  };
  return e2.$$set = (e3) => {
    "class" in e3 && o2(0, l2 = e3.class), "name" in e3 && o2(7, c2 = e3.name), "selected" in e3 && o2(8, d2 = e3.selected), "tabs" in e3 && o2(9, u2 = e3.tabs), "layout" in e3 && o2(1, h2 = e3.layout), "$$scope" in e3 && o2(10, s2 = e3.$$scope);
  }, e2.$$.update = () => {
    896 & e2.$$.dirty && o2(2, i2 = u2.map((e3) => {
      const t3 = e3.id === d2;
      return { ...e3, tabId: `tab-${c2}-${e3.id}`, href: `#panel-${c2}-${e3.id}`, selected: t3 };
    })), 4 & e2.$$.dirty && o2(4, n2 = i2.length > 1);
  }, [l2, h2, i2, r2, n2, g2, $2, c2, d2, u2, s2, a2, (e3, t3) => $2(t3, e3.id), (e3, t3) => g2(t3, e3.id), function(e3) {
    Nr[e3 ? "unshift" : "push"](() => {
      r2 = e3, o2(3, r2);
    });
  }];
}
var xc = class extends wa {
  constructor(e2) {
    super(), va(this, e2, bc, yc, Nn, { class: 0, name: 7, selected: 8, tabs: 9, layout: 1 });
  }
};
var vc = (e2) => ({ panel: 16 & e2 });
var wc = (e2) => ({ panel: e2[4][0].id, panelIsActive: true });
function Sc(e2, t2, o2) {
  const i2 = e2.slice();
  return i2[14] = t2[o2].id, i2[15] = t2[o2].shouldDraw, i2[16] = t2[o2].panelId, i2[17] = t2[o2].tabindex, i2[18] = t2[o2].labelledBy, i2[19] = t2[o2].isActive, i2[20] = t2[o2].hidden, i2[3] = t2[o2].visible, i2;
}
var kc = (e2) => ({ panel: 16 & e2, panelIsActive: 16 & e2 });
var Cc = (e2) => ({ panel: e2[14], panelIsActive: e2[19] });
function Mc(e2) {
  let t2, o2, i2, n2, r2, a2;
  const s2 = e2[11].default, l2 = Zn(s2, e2, e2[10], wc);
  return { c() {
    t2 = hr("div"), o2 = hr("div"), l2 && l2.c(), xr(o2, "class", i2 = hc([e2[1]])), xr(t2, "class", e2[0]), xr(t2, "style", e2[2]);
  }, m(i3, s3) {
    dr(i3, t2, s3), sr(t2, o2), l2 && l2.m(o2, null), n2 = true, r2 || (a2 = [fr(t2, "measure", e2[13]), er(oc.call(null, t2))], r2 = true);
  }, p(e3, r3) {
    l2 && l2.p && (!n2 || 1040 & r3) && Yn(l2, s2, e3, e3[10], n2 ? Gn(s2, e3[10], r3, vc) : qn(e3[10]), wc), (!n2 || 2 & r3 && i2 !== (i2 = hc([e3[1]]))) && xr(o2, "class", i2), (!n2 || 1 & r3) && xr(t2, "class", e3[0]), (!n2 || 4 & r3) && xr(t2, "style", e3[2]);
  }, i(e3) {
    n2 || (sa(l2, e3), n2 = true);
  }, o(e3) {
    la(l2, e3), n2 = false;
  }, d(e3) {
    e3 && ur(t2), l2 && l2.d(e3), r2 = false, _n(a2);
  } };
}
function Tc(e2) {
  let t2, o2, i2, n2, r2, a2 = [], s2 = /* @__PURE__ */ new Map(), l2 = e2[4];
  const c2 = (e3) => e3[14];
  for (let t3 = 0; t3 < l2.length; t3 += 1) {
    let o3 = Sc(e2, l2, t3), i3 = c2(o3);
    s2.set(i3, a2[t3] = Rc(i3, o3));
  }
  return { c() {
    t2 = hr("div");
    for (let e3 = 0; e3 < a2.length; e3 += 1)
      a2[e3].c();
    xr(t2, "class", o2 = hc(["PinturaTabPanels", e2[0]])), xr(t2, "style", e2[2]);
  }, m(o3, s3) {
    dr(o3, t2, s3);
    for (let e3 = 0; e3 < a2.length; e3 += 1)
      a2[e3].m(t2, null);
    i2 = true, n2 || (r2 = [fr(t2, "measure", e2[12]), er(oc.call(null, t2, { observePosition: true }))], n2 = true);
  }, p(e3, n3) {
    1042 & n3 && (l2 = e3[4], ra(), a2 = ma(a2, n3, c2, 1, e3, l2, s2, t2, pa, Rc, null, Sc), aa()), (!i2 || 1 & n3 && o2 !== (o2 = hc(["PinturaTabPanels", e3[0]]))) && xr(t2, "class", o2), (!i2 || 4 & n3) && xr(t2, "style", e3[2]);
  }, i(e3) {
    if (!i2) {
      for (let e4 = 0; e4 < l2.length; e4 += 1)
        sa(a2[e4]);
      i2 = true;
    }
  }, o(e3) {
    for (let e4 = 0; e4 < a2.length; e4 += 1)
      la(a2[e4]);
    i2 = false;
  }, d(e3) {
    e3 && ur(t2);
    for (let e4 = 0; e4 < a2.length; e4 += 1)
      a2[e4].d();
    n2 = false, _n(r2);
  } };
}
function Pc(e2) {
  let t2;
  const o2 = e2[11].default, i2 = Zn(o2, e2, e2[10], Cc);
  return { c() {
    i2 && i2.c();
  }, m(e3, o3) {
    i2 && i2.m(e3, o3), t2 = true;
  }, p(e3, n2) {
    i2 && i2.p && (!t2 || 1040 & n2) && Yn(i2, o2, e3, e3[10], t2 ? Gn(o2, e3[10], n2, kc) : qn(e3[10]), Cc);
  }, i(e3) {
    t2 || (sa(i2, e3), t2 = true);
  }, o(e3) {
    la(i2, e3), t2 = false;
  }, d(e3) {
    i2 && i2.d(e3);
  } };
}
function Rc(e2, t2) {
  let o2, i2, n2, r2, a2, s2, l2, c2, d2, u2 = t2[15] && Pc(t2);
  return { key: e2, first: null, c() {
    o2 = hr("div"), u2 && u2.c(), i2 = gr(), xr(o2, "class", n2 = hc(["PinturaTabPanel", t2[1]])), o2.hidden = r2 = t2[20], xr(o2, "id", a2 = t2[16]), xr(o2, "tabindex", s2 = t2[17]), xr(o2, "aria-labelledby", l2 = t2[18]), xr(o2, "data-inert", c2 = !t2[3]), this.first = o2;
  }, m(e3, t3) {
    dr(e3, o2, t3), u2 && u2.m(o2, null), sr(o2, i2), d2 = true;
  }, p(e3, h2) {
    (t2 = e3)[15] ? u2 ? (u2.p(t2, h2), 16 & h2 && sa(u2, 1)) : (u2 = Pc(t2), u2.c(), sa(u2, 1), u2.m(o2, i2)) : u2 && (ra(), la(u2, 1, 1, () => {
      u2 = null;
    }), aa()), (!d2 || 2 & h2 && n2 !== (n2 = hc(["PinturaTabPanel", t2[1]]))) && xr(o2, "class", n2), (!d2 || 16 & h2 && r2 !== (r2 = t2[20])) && (o2.hidden = r2), (!d2 || 16 & h2 && a2 !== (a2 = t2[16])) && xr(o2, "id", a2), (!d2 || 16 & h2 && s2 !== (s2 = t2[17])) && xr(o2, "tabindex", s2), (!d2 || 16 & h2 && l2 !== (l2 = t2[18])) && xr(o2, "aria-labelledby", l2), (!d2 || 16 & h2 && c2 !== (c2 = !t2[3])) && xr(o2, "data-inert", c2);
  }, i(e3) {
    d2 || (sa(u2), d2 = true);
  }, o(e3) {
    la(u2), d2 = false;
  }, d(e3) {
    e3 && ur(o2), u2 && u2.d();
  } };
}
function Ic(e2) {
  let t2, o2, i2, n2;
  const r2 = [Tc, Mc], a2 = [];
  function s2(e3, t3) {
    return e3[5] ? 0 : 1;
  }
  return t2 = s2(e2), o2 = a2[t2] = r2[t2](e2), { c() {
    o2.c(), i2 = $r();
  }, m(e3, o3) {
    a2[t2].m(e3, o3), dr(e3, i2, o3), n2 = true;
  }, p(e3, [n3]) {
    let l2 = t2;
    t2 = s2(e3), t2 === l2 ? a2[t2].p(e3, n3) : (ra(), la(a2[l2], 1, 1, () => {
      a2[l2] = null;
    }), aa(), o2 = a2[t2], o2 ? o2.p(e3, n3) : (o2 = a2[t2] = r2[t2](e3), o2.c()), sa(o2, 1), o2.m(i2.parentNode, i2));
  }, i(e3) {
    n2 || (sa(o2), n2 = true);
  }, o(e3) {
    la(o2), n2 = false;
  }, d(e3) {
    a2[t2].d(e3), e3 && ur(i2);
  } };
}
function Ac(e2, t2, o2) {
  let i2, n2, { $$slots: r2 = {}, $$scope: a2 } = t2, { class: s2 } = t2, { name: l2 } = t2, { selected: c2 } = t2, { panelClass: d2 } = t2, { panels: u2 = [] } = t2, { visible: h2 } = t2, { style: p2 } = t2;
  const m2 = {};
  return e2.$$set = (e3) => {
    "class" in e3 && o2(0, s2 = e3.class), "name" in e3 && o2(6, l2 = e3.name), "selected" in e3 && o2(7, c2 = e3.selected), "panelClass" in e3 && o2(1, d2 = e3.panelClass), "panels" in e3 && o2(8, u2 = e3.panels), "visible" in e3 && o2(3, h2 = e3.visible), "style" in e3 && o2(2, p2 = e3.style), "$$scope" in e3 && o2(10, a2 = e3.$$scope);
  }, e2.$$.update = () => {
    968 & e2.$$.dirty && o2(4, i2 = u2.map((e3) => {
      const t3 = e3 === c2;
      t3 && o2(9, m2[e3] = true, m2);
      const i3 = h2 ? -1 !== h2.indexOf(e3) : t3;
      return { id: e3, panelId: `panel-${l2}-${e3}`, labelledBy: `tab-${l2}-${e3}`, isActive: t3, hidden: !t3, visible: i3, tabindex: t3 ? 0 : -1, shouldDraw: t3 || m2[e3] };
    })), 16 & e2.$$.dirty && o2(5, n2 = i2.length > 1);
  }, [s2, d2, p2, h2, i2, n2, l2, c2, u2, m2, a2, r2, function(t3) {
    _r.call(this, e2, t3);
  }, function(t3) {
    _r.call(this, e2, t3);
  }];
}
var Ec = class extends wa {
  constructor(e2) {
    super(), va(this, e2, Ac, Ic, Nn, { class: 0, name: 6, selected: 7, panelClass: 1, panels: 8, visible: 3, style: 2 });
  }
};
var Lc = (e2) => {
  const t2 = Object.getOwnPropertyDescriptors(e2.prototype);
  return Object.keys(t2).filter((e3) => !!t2[e3].get);
};
function Fc(e2) {
  let t2, o2, i2, n2;
  const r2 = [e2[4]];
  function a2(t3) {
    e2[22](t3);
  }
  var s2 = e2[10];
  function l2(e3) {
    let t3 = {};
    for (let e4 = 0; e4 < r2.length; e4 += 1)
      t3 = On(t3, r2[e4]);
    return void 0 !== e3[2] && (t3.name = e3[2]), { props: t3 };
  }
  return s2 && (t2 = Mr(s2, l2(e2)), Nr.push(() => fa(t2, "name", a2)), e2[23](t2), t2.$on("measure", e2[11])), { c() {
    t2 && ya(t2.$$.fragment), i2 = $r();
  }, m(e3, o3) {
    t2 && ba(t2, e3, o3), dr(e3, i2, o3), n2 = true;
  }, p(e3, n3) {
    const c2 = 16 & n3[0] ? ga(r2, [$a(e3[4])]) : {};
    if (!o2 && 4 & n3[0] && (o2 = true, c2.name = e3[2], qr(() => o2 = false)), s2 !== (s2 = e3[10])) {
      if (t2) {
        ra();
        const e4 = t2;
        la(e4.$$.fragment, 1, 0, () => {
          xa(e4, 1);
        }), aa();
      }
      s2 ? (t2 = Mr(s2, l2(e3)), Nr.push(() => fa(t2, "name", a2)), e3[23](t2), t2.$on("measure", e3[11]), ya(t2.$$.fragment), sa(t2.$$.fragment, 1), ba(t2, i2.parentNode, i2)) : t2 = null;
    } else
      s2 && t2.$set(c2);
  }, i(e3) {
    n2 || (t2 && sa(t2.$$.fragment, e3), n2 = true);
  }, o(e3) {
    t2 && la(t2.$$.fragment, e3), n2 = false;
  }, d(o3) {
    e2[23](null), o3 && ur(i2), t2 && xa(t2, o3);
  } };
}
function zc(e2) {
  let t2, o2, i2, n2 = e2[5] && Fc(e2);
  return { c() {
    t2 = hr("div"), n2 && n2.c(), xr(t2, "data-util", e2[2]), xr(t2, "class", o2 = hc(["PinturaUtilPanel", e2[1]])), xr(t2, "style", e2[6]);
  }, m(o3, r2) {
    dr(o3, t2, r2), n2 && n2.m(t2, null), e2[24](t2), i2 = true;
  }, p(e3, r2) {
    e3[5] ? n2 ? (n2.p(e3, r2), 32 & r2[0] && sa(n2, 1)) : (n2 = Fc(e3), n2.c(), sa(n2, 1), n2.m(t2, null)) : n2 && (ra(), la(n2, 1, 1, () => {
      n2 = null;
    }), aa()), (!i2 || 4 & r2[0]) && xr(t2, "data-util", e3[2]), (!i2 || 2 & r2[0] && o2 !== (o2 = hc(["PinturaUtilPanel", e3[1]]))) && xr(t2, "class", o2), (!i2 || 64 & r2[0]) && xr(t2, "style", e3[6]);
  }, i(e3) {
    i2 || (sa(n2), i2 = true);
  }, o(e3) {
    la(n2), i2 = false;
  }, d(o3) {
    o3 && ur(t2), n2 && n2.d(), e2[24](null);
  } };
}
function Bc(e2, t2, o2) {
  let i2, n2, r2, a2, s2, l2;
  const c2 = Or();
  let { isActive: d2 = true } = t2, { stores: u2 } = t2, { content: h2 } = t2, { component: p2 } = t2, { locale: m2 } = t2, { class: g2 } = t2;
  const $2 = Wr("isAnimated");
  let f2;
  Un(e2, $2, (e3) => o2(21, l2 = e3));
  const y2 = _l(0), b2 = Ma(y2, (e3) => Ua(e3, 0, 1));
  Un(e2, b2, (e3) => o2(20, s2 = e3));
  let x2 = !d2;
  const v2 = Ca(d2);
  Un(e2, v2, (e3) => o2(25, a2 = e3));
  const w2 = { isActive: Ma(v2, async (e3, t3) => {
    if (!e3)
      return t3(e3);
    await Gr(), t3(e3);
  }), isActiveFraction: Ma(b2, (e3) => e3), isVisible: Ma(b2, (e3) => e3 > 0) }, S2 = h2.view, k2 = Lc(S2), C2 = Object.keys(h2.props || {}).reduce((e3, t3) => k2.includes(t3) ? (e3[t3] = h2.props[t3], e3) : e3, {}), M2 = Object.keys(w2).reduce((e3, t3) => k2.includes(t3) ? (e3[t3] = w2[t3], e3) : e3, {});
  let T2, P2;
  const R2 = (e3) => {
    o2(17, f2 = { ...e3.detail }), A2 && d2 && c2("measure", { ...f2 });
  };
  Dr("measurable", oc);
  const I2 = Lr().$$.context;
  let A2 = false;
  return Fr(() => {
    if (o2(19, A2 = true), r2)
      return;
    o2(0, p2 = new S2({ target: P2, props: { ...n2 }, context: I2 })), o2(2, T2 = p2.name);
    const e3 = p2.$on("measure", R2);
    return () => {
      e3(), p2.$destroy();
    };
  }), e2.$$set = (e3) => {
    "isActive" in e3 && o2(12, d2 = e3.isActive), "stores" in e3 && o2(13, u2 = e3.stores), "content" in e3 && o2(14, h2 = e3.content), "component" in e3 && o2(0, p2 = e3.component), "locale" in e3 && o2(15, m2 = e3.locale), "class" in e3 && o2(1, g2 = e3.class);
  }, e2.$$.update = () => {
    135169 & e2.$$.dirty[0] && f2 && d2 && p2 && c2("measure", f2), 2101248 & e2.$$.dirty[0] && y2.set(d2 ? 1 : 0, { hard: false === l2 }), 1310720 & e2.$$.dirty[0] && (s2 <= 0 && !x2 ? o2(18, x2 = true) : s2 > 0 && x2 && o2(18, x2 = false)), 786432 & e2.$$.dirty[0] && A2 && c2(x2 ? "hide" : "show"), 1048576 & e2.$$.dirty[0] && c2("fade", s2), 1048576 & e2.$$.dirty[0] && o2(6, i2 = s2 < 1 ? "opacity: " + s2 : void 0), 4096 & e2.$$.dirty[0] && Qn(v2, a2 = d2, a2), 40960 & e2.$$.dirty[0] && o2(4, n2 = { ...C2, ...M2, stores: u2, locale: m2 });
  }, o2(5, r2 = !k2.includes("external")), [p2, g2, T2, P2, n2, r2, i2, $2, b2, v2, S2, R2, d2, u2, h2, m2, y2, f2, x2, A2, s2, l2, function(e3) {
    T2 = e3, o2(2, T2);
  }, function(e3) {
    Nr[e3 ? "unshift" : "push"](() => {
      p2 = e3, o2(0, p2);
    });
  }, function(e3) {
    Nr[e3 ? "unshift" : "push"](() => {
      P2 = e3, o2(3, P2);
    });
  }];
}
var Oc = class extends wa {
  constructor(e2) {
    super(), va(this, e2, Bc, zc, Nn, { isActive: 12, stores: 13, content: 14, component: 0, locale: 15, class: 1, opacity: 16 }, null, [-1, -1]);
  }
  get opacity() {
    return this.$$.ctx[16];
  }
};
function Dc(e2) {
  let t2, o2, i2;
  const n2 = e2[5].default, r2 = Zn(n2, e2, e2[4], null);
  return { c() {
    t2 = pr("svg"), r2 && r2.c(), xr(t2, "class", e2[3]), xr(t2, "style", e2[2]), xr(t2, "width", e2[0]), xr(t2, "height", e2[1]), xr(t2, "viewBox", o2 = "0 0 " + e2[0] + "\n    " + e2[1]), xr(t2, "xmlns", "http://www.w3.org/2000/svg"), xr(t2, "aria-hidden", "true"), xr(t2, "focusable", "false"), xr(t2, "stroke-linecap", "round"), xr(t2, "stroke-linejoin", "round");
  }, m(e3, o3) {
    dr(e3, t2, o3), r2 && r2.m(t2, null), i2 = true;
  }, p(e3, [a2]) {
    r2 && r2.p && (!i2 || 16 & a2) && Yn(r2, n2, e3, e3[4], i2 ? Gn(n2, e3[4], a2, null) : qn(e3[4]), null), (!i2 || 8 & a2) && xr(t2, "class", e3[3]), (!i2 || 4 & a2) && xr(t2, "style", e3[2]), (!i2 || 1 & a2) && xr(t2, "width", e3[0]), (!i2 || 2 & a2) && xr(t2, "height", e3[1]), (!i2 || 3 & a2 && o2 !== (o2 = "0 0 " + e3[0] + "\n    " + e3[1])) && xr(t2, "viewBox", o2);
  }, i(e3) {
    i2 || (sa(r2, e3), i2 = true);
  }, o(e3) {
    la(r2, e3), i2 = false;
  }, d(e3) {
    e3 && ur(t2), r2 && r2.d(e3);
  } };
}
function Wc(e2, t2, o2) {
  let { $$slots: i2 = {}, $$scope: n2 } = t2, { width: r2 = 24 } = t2, { height: a2 = 24 } = t2, { style: s2 } = t2, { class: l2 } = t2;
  return e2.$$set = (e3) => {
    "width" in e3 && o2(0, r2 = e3.width), "height" in e3 && o2(1, a2 = e3.height), "style" in e3 && o2(2, s2 = e3.style), "class" in e3 && o2(3, l2 = e3.class), "$$scope" in e3 && o2(4, n2 = e3.$$scope);
  }, [r2, a2, s2, l2, n2, i2];
}
var _c = class extends wa {
  constructor(e2) {
    super(), va(this, e2, Wc, Dc, Nn, { width: 0, height: 1, style: 2, class: 3 });
  }
};
var Vc = (e2, t2) => t2 === e2.target || t2.contains(e2.target);
var Nc = (e2, t2, o2) => {
  return (M(t2) ? t2 : e2) + (o2 ? ` (${i2 = o2, i2.map((e3) => "CMD" === e3 ? ao() ? "â" : "Ctrl" : e3).join("+")})` : "");
  var i2;
};
function Hc(e2) {
  let t2, o2;
  return t2 = new _c({ props: { class: "PinturaButtonIcon", $$slots: { default: [jc] }, $$scope: { ctx: e2 } } }), { c() {
    ya(t2.$$.fragment);
  }, m(e3, i2) {
    ba(t2, e3, i2), o2 = true;
  }, p(e3, o3) {
    const i2 = {};
    536870920 & o3 && (i2.$$scope = { dirty: o3, ctx: e3 }), t2.$set(i2);
  }, i(e3) {
    o2 || (sa(t2.$$.fragment, e3), o2 = true);
  }, o(e3) {
    la(t2.$$.fragment, e3), o2 = false;
  }, d(e3) {
    xa(t2, e3);
  } };
}
function jc(e2) {
  let t2;
  return { c() {
    t2 = pr("g");
  }, m(o2, i2) {
    dr(o2, t2, i2), t2.innerHTML = e2[3];
  }, p(e3, o2) {
    8 & o2 && (t2.innerHTML = e3[3]);
  }, d(e3) {
    e3 && ur(t2);
  } };
}
function Uc(e2) {
  let t2;
  return { c() {
    t2 = hr("span"), xr(t2, "class", e2[11]);
  }, m(o2, i2) {
    dr(o2, t2, i2), t2.innerHTML = e2[0];
  }, p(e3, o2) {
    1 & o2 && (t2.innerHTML = e3[0]), 2048 & o2 && xr(t2, "class", e3[11]);
  }, d(e3) {
    e3 && ur(t2);
  } };
}
function Zc(e2) {
  let t2, o2, i2, n2, r2;
  const a2 = e2[27].default, s2 = Zn(a2, e2, e2[29], null), l2 = s2 || function(e3) {
    let t3, o3, i3, n3 = e3[3] && Hc(e3), r3 = e3[0] && Uc(e3);
    return { c() {
      t3 = hr("span"), n3 && n3.c(), o3 = gr(), r3 && r3.c(), xr(t3, "class", e3[13]);
    }, m(e4, a3) {
      dr(e4, t3, a3), n3 && n3.m(t3, null), sr(t3, o3), r3 && r3.m(t3, null), i3 = true;
    }, p(e4, a3) {
      e4[3] ? n3 ? (n3.p(e4, a3), 8 & a3 && sa(n3, 1)) : (n3 = Hc(e4), n3.c(), sa(n3, 1), n3.m(t3, o3)) : n3 && (ra(), la(n3, 1, 1, () => {
        n3 = null;
      }), aa()), e4[0] ? r3 ? r3.p(e4, a3) : (r3 = Uc(e4), r3.c(), r3.m(t3, null)) : r3 && (r3.d(1), r3 = null), (!i3 || 8192 & a3) && xr(t3, "class", e4[13]);
    }, i(e4) {
      i3 || (sa(n3), i3 = true);
    }, o(e4) {
      la(n3), i3 = false;
    }, d(e4) {
      e4 && ur(t3), n3 && n3.d(), r3 && r3.d();
    } };
  }(e2);
  return { c() {
    t2 = hr("button"), l2 && l2.c(), xr(t2, "type", e2[6]), xr(t2, "style", e2[4]), t2.disabled = e2[5], xr(t2, "class", e2[12]), xr(t2, "title", o2 = Nc(e2[0], e2[1], e2[2]));
  }, m(o3, a3) {
    dr(o3, t2, a3), l2 && l2.m(t2, null), e2[28](t2), i2 = true, n2 || (r2 = [fr(t2, "keydown", function() {
      Vn(e2[8]) && e2[8].apply(this, arguments);
    }), fr(t2, "click", function() {
      Vn(e2[7]) && e2[7].apply(this, arguments);
    }), fr(t2, "pointerdown", function() {
      Vn(e2[14]) && e2[14].apply(this, arguments);
    }), er(e2[9].call(null, t2))], n2 = true);
  }, p(n3, [r3]) {
    e2 = n3, s2 ? s2.p && (!i2 || 536870912 & r3) && Yn(s2, a2, e2, e2[29], i2 ? Gn(a2, e2[29], r3, null) : qn(e2[29]), null) : l2 && l2.p && (!i2 || 10249 & r3) && l2.p(e2, i2 ? r3 : -1), (!i2 || 64 & r3) && xr(t2, "type", e2[6]), (!i2 || 16 & r3) && xr(t2, "style", e2[4]), (!i2 || 32 & r3) && (t2.disabled = e2[5]), (!i2 || 4096 & r3) && xr(t2, "class", e2[12]), (!i2 || 7 & r3 && o2 !== (o2 = Nc(e2[0], e2[1], e2[2]))) && xr(t2, "title", o2);
  }, i(e3) {
    i2 || (sa(l2, e3), i2 = true);
  }, o(e3) {
    la(l2, e3), i2 = false;
  }, d(o3) {
    o3 && ur(t2), l2 && l2.d(o3), e2[28](null), n2 = false, _n(r2);
  } };
}
function Xc(e2, t2, o2) {
  let i2, n2, r2, a2, s2, l2, { $$slots: c2 = {}, $$scope: d2 } = t2, { class: u2 } = t2, { label: h2 } = t2, { title: p2 } = t2, { shortcut: m2 } = t2, { labelClass: g2 } = t2, { innerClass: $2 } = t2, { hideLabel: f2 = false } = t2, { icon: y2 } = t2, { style: b2 } = t2, { disabled: x2 } = t2, { type: v2 = "button" } = t2, { onclick: w2 } = t2, { onkeydown: S2 } = t2, { onhold: k2 } = t2, { action: C2 = () => {
  } } = t2, { holdThreshold: M2 = 500 } = t2, { holdSpeedUpFactor: T2 = 0.5 } = t2, { holdSpeedMin: P2 = 20 } = t2;
  const R2 = (e3) => {
    o2(25, l2 = setTimeout(() => {
      k2(), R2(Math.max(e3 * T2, P2));
    }, e3));
  };
  let I2;
  return e2.$$set = (e3) => {
    "class" in e3 && o2(15, u2 = e3.class), "label" in e3 && o2(0, h2 = e3.label), "title" in e3 && o2(1, p2 = e3.title), "shortcut" in e3 && o2(2, m2 = e3.shortcut), "labelClass" in e3 && o2(16, g2 = e3.labelClass), "innerClass" in e3 && o2(17, $2 = e3.innerClass), "hideLabel" in e3 && o2(18, f2 = e3.hideLabel), "icon" in e3 && o2(3, y2 = e3.icon), "style" in e3 && o2(4, b2 = e3.style), "disabled" in e3 && o2(5, x2 = e3.disabled), "type" in e3 && o2(6, v2 = e3.type), "onclick" in e3 && o2(7, w2 = e3.onclick), "onkeydown" in e3 && o2(8, S2 = e3.onkeydown), "onhold" in e3 && o2(19, k2 = e3.onhold), "action" in e3 && o2(9, C2 = e3.action), "holdThreshold" in e3 && o2(20, M2 = e3.holdThreshold), "holdSpeedUpFactor" in e3 && o2(21, T2 = e3.holdSpeedUpFactor), "holdSpeedMin" in e3 && o2(22, P2 = e3.holdSpeedMin), "$$scope" in e3 && o2(29, d2 = e3.$$scope);
  }, e2.$$.update = () => {
    101187584 & e2.$$.dirty && o2(26, n2 = k2 ? () => {
      l2 && (clearTimeout(l2), o2(25, l2 = void 0), document.documentElement.removeEventListener("pointerup", n2));
    } : zn), 68681728 & e2.$$.dirty && o2(14, i2 = k2 ? () => {
      document.documentElement.addEventListener("pointerup", n2), R2(M2);
    } : zn), 131072 & e2.$$.dirty && o2(13, r2 = hc(["PinturaButtonInner", $2])), 294912 & e2.$$.dirty && o2(12, a2 = hc(["PinturaButton", f2 && "PinturaButtonIconOnly", u2])), 327680 & e2.$$.dirty && o2(11, s2 = hc([f2 ? "implicit" : "PinturaButtonLabel", g2]));
  }, [h2, p2, m2, y2, b2, x2, v2, w2, S2, C2, I2, s2, a2, r2, i2, u2, g2, $2, f2, k2, M2, T2, P2, (e3) => Vc(e3, I2), () => I2, l2, n2, c2, function(e3) {
    Nr[e3 ? "unshift" : "push"](() => {
      I2 = e3, o2(10, I2);
    });
  }, d2];
}
var Gc = class extends wa {
  constructor(e2) {
    super(), va(this, e2, Xc, Zc, Nn, { class: 15, label: 0, title: 1, shortcut: 2, labelClass: 16, innerClass: 17, hideLabel: 18, icon: 3, style: 4, disabled: 5, type: 6, onclick: 7, onkeydown: 8, onhold: 19, action: 9, holdThreshold: 20, holdSpeedUpFactor: 21, holdSpeedMin: 22, isEventTarget: 23, getElement: 24 });
  }
  get isEventTarget() {
    return this.$$.ctx[23];
  }
  get getElement() {
    return this.$$.ctx[24];
  }
};
var Yc = (e2, t2) => {
  const o2 = e2.findIndex(t2);
  if (o2 >= 0)
    return e2.splice(o2, 1);
};
var qc = 80;
var Kc = (e2, t2 = {}) => {
  const { inertia: o2 = false, inertiaDurationMultiplier: i2 = qc, shouldStartInteraction: n2 = () => true, pinch: r2 = false, multiTouch: a2, getEventPosition: s2 = (e3) => ce(e3.clientX, e3.clientY) } = t2;
  function l2(t3, o3) {
    e2.dispatchEvent(new CustomEvent(t3, { detail: o3 }));
  }
  function c2() {
    v2 && v2(), v2 = void 0;
  }
  const d2 = [], u2 = (e3) => 0 === e3.timeStamp ? Date.now() : e3.timeStamp, h2 = () => {
    const e3 = ue(d2[0].position);
    if (d2[1]) {
      const t3 = 0.5 * (d2[1].position.x - e3.x), o3 = 0.5 * (d2[1].position.y - e3.y);
      e3.x += t3, e3.y += o3;
    }
    return e3;
  }, p2 = (e3) => {
    e3.origin.x = e3.position.x, e3.origin.y = e3.position.y, e3.translation.x = 0, e3.translation.y = 0;
  }, m2 = (e3) => {
    const t3 = ((e4) => d2.findIndex((t4) => t4.event.pointerId === e4.pointerId))(e3);
    if (!(t3 < 0))
      return d2[t3];
  }, g2 = () => 1 === d2.length, $2 = () => 2 === d2.length, f2 = (e3) => {
    const t3 = Pe(e3.map((e4) => e4.position));
    return { center: t3, distance: ((e4, t4) => e4.reduce((e5, o3) => e5 + Me(t4, o3.position), 0) / e4.length)(e3, t3), velocity: Pe(e3.map((e4) => e4.velocity)), translation: Pe(e3.map((e4) => e4.translation)) };
  };
  let y2, b2, x2, v2, w2, S2, k2, C2, M2 = 0, T2 = void 0;
  function P2(t3) {
    if (!$2() && !((e3) => ko(e3.button) && 0 !== e3.button)(t3) && n2(t3, e2)) {
      if (c2(), ((e3) => {
        const t4 = u2(e3), o3 = { timeStamp: t4, timeStampInitial: t4, position: s2(e3), origin: s2(e3), velocity: le(), velocityHistory: [], velocityAverage: le(), translation: le(), interactionState: void 0, event: e3 };
        d2.push(o3), o3.interactionState = f2(d2);
      })(t3), g2())
        document.documentElement.addEventListener("pointermove", I2), document.documentElement.addEventListener("pointerup", A2), document.documentElement.addEventListener("pointercancel", A2), document.addEventListener("visibilitychange", L2), C2 = false, k2 = 1, S2 = le(), w2 = void 0, l2("interactionstart", { origin: ue(m2(t3).origin) });
      else if (r2)
        C2 = true, w2 = Me(d2[0].position, d2[1].position), S2.x += d2[0].translation.x, S2.y += d2[0].translation.y, p2(d2[0]);
      else if (false === a2)
        return d2.length = 0, z2(), l2("interactioncancel");
    }
  }
  e2.addEventListener("pointerdown", P2);
  let R2 = Date.now();
  function I2(e3) {
    e3.preventDefault(), ((e4) => {
      const t4 = m2(e4);
      if (!t4)
        return;
      const o4 = u2(e4), i4 = s2(e4), n3 = Math.max(1, o4 - t4.timeStamp);
      t4.velocity.x = (i4.x - t4.position.x) / n3, t4.velocity.y = (i4.y - t4.position.y) / n3, t4.velocityHistory.push(ue(t4.velocity)), t4.velocityHistory = t4.velocityHistory.slice(-3), t4.velocityAverage = t4.velocityHistory.reduce((e5, t5, o5, i5) => (e5.x += t5.x / i5.length, e5.y += t5.y / i5.length, e5), le()), t4.translation.x = i4.x - t4.origin.x, t4.translation.y = i4.y - t4.origin.y, t4.timeStamp = o4, t4.position.x = i4.x, t4.position.y = i4.y, t4.event = e4;
    })(e3);
    const t3 = ue(d2[0].translation);
    let o3 = k2;
    if (r2 && $2()) {
      o3 *= Me(d2[0].position, d2[1].position) / w2, be(t3, d2[1].translation);
    }
    be(t3, S2);
    const i3 = Date.now();
    i3 - R2 < 16 || (R2 = i3, l2("interactionupdate", { position: h2(), translation: t3, scalar: r2 ? o3 : void 0, isMultiTouching: $2() }));
  }
  function A2(e3) {
    if (!m2(e3))
      return;
    const t3 = h2(), n3 = ((e4) => {
      const t4 = Yc(d2, (t5) => t5.event.pointerId === e4.pointerId);
      if (t4)
        return t4[0];
    })(e3);
    if (r2 && g2()) {
      const e4 = Me(d2[0].position, n3.position);
      k2 *= e4 / w2, S2.x += d2[0].translation.x + n3.translation.x, S2.y += d2[0].translation.y + n3.translation.y, p2(d2[0]);
    }
    let a3 = false, s3 = false;
    if (!C2 && n3) {
      const e4 = performance.now(), t4 = e4 - n3.timeStampInitial, o3 = Ce(n3.translation);
      a3 = o3 < 64 && t4 < 300, s3 = !!(T2 && a3 && e4 - M2 < 700 && Ce(T2, n3.position) < 128), a3 && (T2 = ue(n3.position), M2 = e4);
    }
    if (d2.length > 0)
      return;
    z2();
    const c3 = ue(n3.translation), u3 = ue(n3.velocityAverage);
    let $3 = false;
    l2("interactionrelease", { isTap: a3, isDoubleTap: s3, position: t3, translation: c3, scalar: k2, preventInertia: () => $3 = true });
    const f3 = Me(u3);
    if ($3 || !o2 || f3 < 0.25)
      return F2(c3, { isTap: a3, isDoubleTap: s3 });
    b2 = ue(t3), x2 = ue(c3), y2 = Dl(ue(c3), { easing: zl, duration: f3 * i2 }), y2.set({ x: c3.x + 50 * u3.x, y: c3.y + 50 * u3.y }).then(() => {
      v2 && F2(jn(y2), { isTap: a3, isDoubleTap: s3 });
    }), v2 = y2.subscribe(E2);
  }
  function E2(e3) {
    e3 && l2("interactionupdate", { position: ce(b2.x + (e3.x - x2.x), b2.y + (e3.y - x2.y)), translation: e3, scalar: r2 ? k2 : void 0 });
  }
  function L2(e3) {
    if ("visible" === document.visibilityState || !d2.length)
      return;
    const t3 = f2(d2);
    c2(), l2("interactionend", { ...t3 }), d2.length = 0, z2();
  }
  function F2(e3, t3) {
    c2(), l2("interactionend", { ...t3, translation: e3, scalar: r2 ? k2 : void 0 });
  }
  function z2() {
    document.documentElement.removeEventListener("pointermove", I2), document.documentElement.removeEventListener("pointerup", A2), document.documentElement.removeEventListener("pointercancel", A2), document.addEventListener("visibilitychange", L2);
  }
  return { destroy() {
    c2(), e2.removeEventListener("pointerdown", P2);
  } };
};
var Jc = (e2, t2 = {}) => {
  const { direction: o2, shiftMultiplier: i2 = 10, bubbles: n2 = false, preventDefault: r2 = false, stopKeydownPropagation: a2 = true } = t2, s2 = "horizontal" === o2, l2 = "vertical" === o2, c2 = (t3) => {
    const { key: o3 } = t3, c3 = t3.shiftKey, d2 = /up|down/i.test(o3), u2 = /left|right/i.test(o3);
    if (!u2 && !d2)
      return;
    if (s2 && d2)
      return;
    if (l2 && u2)
      return;
    const h2 = c3 ? i2 : 1;
    a2 && t3.stopPropagation(), r2 && t3.preventDefault(), e2.dispatchEvent(new CustomEvent("nudge", { bubbles: n2, detail: ce((/left/i.test(o3) ? -1 : /right/i.test(o3) ? 1 : 0) * h2, (/up/i.test(o3) ? -1 : /down/i.test(o3) ? 1 : 0) * h2) }));
  };
  return e2.addEventListener("keydown", c2), { destroy() {
    e2.removeEventListener("keydown", c2);
  } };
};
function Qc(e2, t2) {
  return t2 ? t2 * Math.sign(e2) * Math.log10(1 + Math.abs(e2) / t2) : e2;
}
var ed = (e2, t2, o2) => {
  if (!t2 || !o2)
    return { ...e2 };
  const i2 = e2.x + Qc(t2.x - e2.x, o2), n2 = e2.x + e2.width + Qc(t2.x + t2.width - (e2.x + e2.width), o2), r2 = e2.y + Qc(t2.y - e2.y, o2);
  return { x: i2, y: r2, width: n2 - i2, height: e2.y + e2.height + Qc(t2.y + t2.height - (e2.y + e2.height), o2) - r2 };
};
var td = (e2, t2, o2) => t2 && o2 ? ce(e2.x + Qc(t2.x - e2.x, o2), e2.y + Qc(t2.y - e2.y, o2)) : { ...e2 };
var od = (e2, t2) => {
  if (e2)
    return /em/.test(e2) ? 16 * parseInt(e2, 10) : /px/.test(e2) ? parseInt(e2, 10) : void 0;
};
var id = (e2) => {
  let t2 = e2.detail || 0;
  const { deltaX: o2, deltaY: i2, wheelDelta: n2, wheelDeltaX: r2, wheelDeltaY: a2 } = e2;
  return ko(r2) && Math.abs(r2) > Math.abs(a2) ? t2 = r2 / -120 : ko(o2) && Math.abs(o2) > Math.abs(i2) ? t2 = o2 / 20 : (n2 || a2) && (t2 = (n2 || a2) / -120), t2 || (t2 = i2 / 20), (No() || Vt()) && (t2 *= 2), t2;
};
function nd(e2) {
  let t2, o2, i2, n2, r2, a2, s2;
  const l2 = e2[36].default, c2 = Zn(l2, e2, e2[35], null);
  return { c() {
    t2 = hr("div"), o2 = hr("div"), c2 && c2.c(), xr(o2, "style", e2[5]), xr(t2, "class", i2 = hc(["PinturaScrollable", e2[0]])), xr(t2, "style", e2[4]), xr(t2, "data-direction", e2[1]), xr(t2, "data-state", e2[6]);
  }, m(i3, l3) {
    dr(i3, t2, l3), sr(t2, o2), c2 && c2.m(o2, null), e2[38](t2), r2 = true, a2 || (s2 = [fr(o2, "interactionstart", e2[8]), fr(o2, "interactionupdate", e2[10]), fr(o2, "interactionend", e2[11]), fr(o2, "interactionrelease", e2[9]), er(Kc.call(null, o2, { inertia: true })), fr(o2, "measure", e2[37]), er(oc.call(null, o2)), fr(t2, "wheel", e2[13], { passive: false }), fr(t2, "scroll", e2[15]), fr(t2, "focusin", e2[14]), fr(t2, "nudge", e2[16]), fr(t2, "measure", e2[12]), er(oc.call(null, t2, { observePosition: true })), er(n2 = Jc.call(null, t2, { direction: "x" === e2[1] ? "horizontal" : "vertical", stopKeydownPropagation: false }))], a2 = true);
  }, p(e3, a3) {
    c2 && c2.p && (!r2 || 16 & a3[1]) && Yn(c2, l2, e3, e3[35], r2 ? Gn(l2, e3[35], a3, null) : qn(e3[35]), null), (!r2 || 32 & a3[0]) && xr(o2, "style", e3[5]), (!r2 || 1 & a3[0] && i2 !== (i2 = hc(["PinturaScrollable", e3[0]]))) && xr(t2, "class", i2), (!r2 || 16 & a3[0]) && xr(t2, "style", e3[4]), (!r2 || 2 & a3[0]) && xr(t2, "data-direction", e3[1]), (!r2 || 64 & a3[0]) && xr(t2, "data-state", e3[6]), n2 && Vn(n2.update) && 2 & a3[0] && n2.update.call(null, { direction: "x" === e3[1] ? "horizontal" : "vertical", stopKeydownPropagation: false });
  }, i(e3) {
    r2 || (sa(c2, e3), r2 = true);
  }, o(e3) {
    la(c2, e3), r2 = false;
  }, d(o3) {
    o3 && ur(t2), c2 && c2.d(o3), e2[38](null), a2 = false, _n(s2);
  } };
}
function rd(e2, t2, o2) {
  let i2, r2, a2, s2, l2, c2, d2, u2, { $$slots: h2 = {}, $$scope: p2 } = t2;
  const m2 = Or();
  let g2, $2, f2, y2, b2 = "idle", x2 = _l(0);
  Un(e2, x2, (e3) => o2(34, u2 = e3));
  let v2, { class: w2 } = t2, { scrollBlockInteractionDist: S2 = 5 } = t2, { scrollStep: k2 = 10 } = t2, { scrollFocusMargin: C2 = 64 } = t2, { scrollDirection: M2 = "x" } = t2, { scrollAutoCancel: T2 = false } = t2, { elasticity: P2 = 0 } = t2, { onscroll: R2 = n } = t2, { maskFeatherSize: I2 } = t2, { maskFeatherStartOpacity: A2 } = t2, { maskFeatherEndOpacity: E2 } = t2, { scroll: L2 } = t2, F2 = "", z2 = true;
  const B2 = x2.subscribe((e3) => {
    const t3 = le();
    t3[M2] = e3, R2(t3);
  }), O2 = (e3) => Math.max(Math.min(0, e3), f2[i2] - $2[i2]);
  let D2, W2, _2;
  const V2 = (e3, t3 = {}) => {
    const { elastic: i3 = false, animate: n2 = false, preventScrollState: r3 = false } = t3;
    Math.abs(e3 - g2) > S2 && "idle" === b2 && !y2 && !r3 && o2(27, b2 = "scrolling");
    const a3 = O2(e3), s3 = i3 && P2 && !y2 ? a3 + Qc(e3 - a3, P2) : a3;
    let l3 = true;
    n2 ? l3 = false : z2 || (l3 = !y2), z2 = false, x2.set(s3, { hard: l3 }).then((e4) => {
      y2 && (z2 = true);
    });
  };
  Br(() => {
    B2();
  });
  return e2.$$set = (e3) => {
    "class" in e3 && o2(0, w2 = e3.class), "scrollBlockInteractionDist" in e3 && o2(20, S2 = e3.scrollBlockInteractionDist), "scrollStep" in e3 && o2(21, k2 = e3.scrollStep), "scrollFocusMargin" in e3 && o2(22, C2 = e3.scrollFocusMargin), "scrollDirection" in e3 && o2(1, M2 = e3.scrollDirection), "scrollAutoCancel" in e3 && o2(23, T2 = e3.scrollAutoCancel), "elasticity" in e3 && o2(24, P2 = e3.elasticity), "onscroll" in e3 && o2(25, R2 = e3.onscroll), "maskFeatherSize" in e3 && o2(19, I2 = e3.maskFeatherSize), "maskFeatherStartOpacity" in e3 && o2(17, A2 = e3.maskFeatherStartOpacity), "maskFeatherEndOpacity" in e3 && o2(18, E2 = e3.maskFeatherEndOpacity), "scroll" in e3 && o2(26, L2 = e3.scroll), "$$scope" in e3 && o2(35, p2 = e3.$$scope);
  }, e2.$$.update = () => {
    if (2 & e2.$$.dirty[0] && o2(31, i2 = "x" === M2 ? "width" : "height"), 2 & e2.$$.dirty[0] && o2(29, r2 = M2.toUpperCase()), 8 & e2.$$.dirty[0] && o2(33, a2 = v2 && getComputedStyle(v2)), 8 & e2.$$.dirty[0] | 4 & e2.$$.dirty[1] && o2(32, s2 = a2 && od(a2.getPropertyValue("--scrollable-feather-size"))), 268828676 & e2.$$.dirty[0] | 11 & e2.$$.dirty[1] && null != u2 && f2 && null != s2 && $2) {
      const e3 = -1 * u2 / s2, t3 = -(f2[i2] - $2[i2] - u2) / s2;
      o2(17, A2 = Ua(1 - e3, 0, 1)), o2(18, E2 = Ua(1 - t3, 0, 1)), o2(19, I2 = s2), o2(4, F2 = `--scrollable-feather-start-opacity: ${A2};--scrollable-feather-end-opacity: ${E2}`);
    }
    67108872 & e2.$$.dirty[0] && v2 && void 0 !== L2 && (ko(L2) ? V2(L2) : V2(L2.scrollOffset, L2)), 268435460 & e2.$$.dirty[0] | 1 & e2.$$.dirty[1] && o2(30, l2 = f2 && $2 ? $2[i2] > f2[i2] : void 0), 1207959552 & e2.$$.dirty[0] && o2(6, c2 = hc([b2, l2 ? "overflows" : void 0])), 1610612736 & e2.$$.dirty[0] | 8 & e2.$$.dirty[1] && o2(5, d2 = l2 ? `transform: translate${r2}(${u2}px)` : void 0);
  }, [w2, M2, $2, v2, F2, d2, c2, x2, () => {
    l2 && (W2 = false, D2 = true, _2 = ce(0, 0), y2 = false, o2(27, b2 = "idle"), g2 = jn(x2));
  }, ({ detail: e3 }) => {
    l2 && (y2 = true, o2(27, b2 = "idle"));
  }, ({ detail: e3 }) => {
    l2 && (W2 || D2 && (D2 = false, Ce(e3.translation) < 0.1) || (!T2 || "x" !== M2 || ((e4) => {
      const t3 = ye(ce(e4.x - _2.x, e4.y - _2.y), Math.abs);
      _2 = ue(e4);
      const o3 = Ce(t3), i3 = t3.x - t3.y;
      return !(o3 > 1 && i3 < -0.5);
    })(e3.translation) ? V2(g2 + e3.translation[M2], { elastic: true }) : W2 = true));
  }, ({ detail: e3 }) => {
    if (!l2)
      return;
    if (W2)
      return;
    const t3 = g2 + e3.translation[M2], o3 = O2(t3);
    z2 = false, x2.set(o3).then((e4) => {
      y2 && (z2 = true);
    });
  }, ({ detail: e3 }) => {
    o2(28, f2 = e3), m2("measure", { x: e3.x, y: e3.y, width: e3.width, height: e3.height });
  }, (e3) => {
    if (!l2)
      return;
    e3.preventDefault(), e3.stopPropagation();
    const t3 = e3.shiftKey, o3 = id(e3) * (t3 ? -1 : 1), i3 = jn(x2);
    V2(i3 + o3 * k2, { animate: true });
  }, (e3) => {
    if (!l2)
      return;
    if (!y2)
      return;
    let t3 = e3.target;
    e3.target.classList.contains("implicit") && (t3 = t3.parentNode);
    const o3 = t3["x" === M2 ? "offsetLeft" : "offsetTop"], n2 = o3 + t3["x" === M2 ? "offsetWidth" : "offsetHeight"], r3 = jn(x2), a3 = C2 + I2;
    r3 + o3 < a3 ? V2(-o3 + a3) : r3 + n2 > f2[i2] - a3 && V2(f2[i2] - n2 - a3, { animate: true });
  }, () => {
    o2(3, v2["x" === M2 ? "scrollLeft" : "scrollTop"] = 0, v2);
  }, ({ detail: e3 }) => {
    if (v2.querySelector("[data-focus-visible]"))
      return;
    const t3 = -2 * e3[M2], o3 = jn(x2);
    V2(o3 + t3 * k2, { animate: true, preventScrollState: true });
  }, A2, E2, I2, S2, k2, C2, T2, P2, R2, L2, b2, f2, r2, l2, i2, s2, a2, u2, p2, h2, (e3) => o2(2, $2 = e3.detail), function(e3) {
    Nr[e3 ? "unshift" : "push"](() => {
      v2 = e3, o2(3, v2);
    });
  }];
}
var ad = class extends wa {
  constructor(e2) {
    super(), va(this, e2, rd, nd, Nn, { class: 0, scrollBlockInteractionDist: 20, scrollStep: 21, scrollFocusMargin: 22, scrollDirection: 1, scrollAutoCancel: 23, elasticity: 24, onscroll: 25, maskFeatherSize: 19, maskFeatherStartOpacity: 17, maskFeatherEndOpacity: 18, scroll: 26 }, null, [-1, -1]);
  }
};
function sd(e2, { delay: t2 = 0, duration: o2 = 400, easing: i2 = Bn } = {}) {
  const n2 = +getComputedStyle(e2).opacity;
  return { delay: t2, duration: o2, easing: i2, css: (e3) => "opacity: " + e3 * n2 };
}
function ld(e2) {
  let t2, o2, i2, n2, r2;
  return { c() {
    t2 = hr("span"), xr(t2, "class", "PinturaStatusMessage");
  }, m(o3, a2) {
    dr(o3, t2, a2), t2.innerHTML = e2[0], i2 = true, n2 || (r2 = [fr(t2, "measure", function() {
      Vn(e2[1]) && e2[1].apply(this, arguments);
    }), er(oc.call(null, t2))], n2 = true);
  }, p(o3, [n3]) {
    e2 = o3, (!i2 || 1 & n3) && (t2.innerHTML = e2[0]);
  }, i(e3) {
    i2 || (Yr(() => {
      o2 || (o2 = da(t2, sd, { duration: 500 }, true)), o2.run(1);
    }), i2 = true);
  }, o(e3) {
    o2 || (o2 = da(t2, sd, { duration: 500 }, false)), o2.run(0), i2 = false;
  }, d(e3) {
    e3 && ur(t2), e3 && o2 && o2.end(), n2 = false, _n(r2);
  } };
}
function cd(e2, t2, o2) {
  let { text: i2 } = t2, { onmeasure: r2 = n } = t2;
  return e2.$$set = (e3) => {
    "text" in e3 && o2(0, i2 = e3.text), "onmeasure" in e3 && o2(1, r2 = e3.onmeasure);
  }, [i2, r2];
}
var dd = class extends wa {
  constructor(e2) {
    super(), va(this, e2, cd, ld, Nn, { text: 0, onmeasure: 1 });
  }
};
function ud(e2) {
  let t2, o2, i2, n2, r2, a2, s2, l2;
  return { c() {
    t2 = hr("span"), o2 = pr("svg"), i2 = pr("g"), n2 = pr("circle"), r2 = pr("circle"), a2 = gr(), s2 = hr("span"), l2 = mr(e2[3]), xr(n2, "class", "PinturaProgressIndicatorBar"), xr(n2, "r", "8.5"), xr(n2, "cx", "10"), xr(n2, "cy", "10"), xr(n2, "stroke-linecap", "round"), xr(n2, "opacity", ".25"), xr(r2, "class", "PinturaProgressIndicatorFill"), xr(r2, "r", "8.5"), xr(r2, "stroke-dasharray", e2[2]), xr(r2, "cx", "10"), xr(r2, "cy", "10"), xr(r2, "transform", "rotate(-90) translate(-20)"), xr(i2, "fill", "none"), xr(i2, "stroke", "currentColor"), xr(i2, "stroke-width", "2.5"), xr(i2, "stroke-linecap", "round"), xr(i2, "opacity", e2[1]), xr(o2, "width", "20"), xr(o2, "height", "20"), xr(o2, "viewBox", "0 0 20 20"), xr(o2, "xmlns", "http://www.w3.org/2000/svg"), xr(o2, "aria-hidden", "true"), xr(o2, "focusable", "false"), xr(s2, "class", "implicit"), xr(t2, "class", "PinturaProgressIndicator"), xr(t2, "data-status", e2[0]);
  }, m(e3, c2) {
    dr(e3, t2, c2), sr(t2, o2), sr(o2, i2), sr(i2, n2), sr(i2, r2), sr(t2, a2), sr(t2, s2), sr(s2, l2);
  }, p(e3, [o3]) {
    4 & o3 && xr(r2, "stroke-dasharray", e3[2]), 2 & o3 && xr(i2, "opacity", e3[1]), 8 & o3 && wr(l2, e3[3]), 1 & o3 && xr(t2, "data-status", e3[0]);
  }, i: zn, o: zn, d(e3) {
    e3 && ur(t2);
  } };
}
function hd(e2, t2, o2) {
  let i2, n2, r2, a2, s2, l2;
  const c2 = Or();
  let { progress: d2 } = t2, { min: u2 = 0 } = t2, { max: h2 = 100 } = t2, { labelBusy: p2 = "Busy" } = t2;
  const m2 = _l(0, { precision: 0.01 }), g2 = _l(0, { precision: 0.01 });
  Un(e2, g2, (e3) => o2(10, s2 = e3));
  const $2 = Ma([m2], (e3) => Ua(e3, u2, h2));
  Un(e2, $2, (e3) => o2(11, l2 = e3));
  const f2 = $2.subscribe((e3) => {
    1 === d2 && Math.round(e3) >= 100 && c2("complete");
  });
  return Fr(() => {
    g2.set(1);
  }), Br(() => {
    f2();
  }), e2.$$set = (e3) => {
    "progress" in e3 && o2(6, d2 = e3.progress), "min" in e3 && o2(7, u2 = e3.min), "max" in e3 && o2(8, h2 = e3.max), "labelBusy" in e3 && o2(9, p2 = e3.labelBusy);
  }, e2.$$.update = () => {
    64 & e2.$$.dirty && d2 && d2 !== 1 / 0 && m2.set(100 * d2), 2624 & e2.$$.dirty && o2(3, i2 = d2 === 1 / 0 ? p2 : Math.round(l2) + "%"), 2112 & e2.$$.dirty && o2(2, n2 = d2 === 1 / 0 ? "26.5 53" : l2 / 100 * 53 + " 53"), 1024 & e2.$$.dirty && o2(1, r2 = s2), 64 & e2.$$.dirty && o2(0, a2 = d2 === 1 / 0 ? "busy" : "loading");
  }, [a2, r2, n2, i2, g2, $2, d2, u2, h2, p2, s2, l2];
}
var pd = class extends wa {
  constructor(e2) {
    super(), va(this, e2, hd, ud, Nn, { progress: 6, min: 7, max: 8, labelBusy: 9 });
  }
};
function md(e2) {
  let t2, o2, i2;
  const n2 = e2[5].default, r2 = Zn(n2, e2, e2[4], null);
  return { c() {
    t2 = hr("span"), r2 && r2.c(), xr(t2, "class", o2 = "PinturaStatusAside " + e2[0]), xr(t2, "style", e2[1]);
  }, m(e3, o3) {
    dr(e3, t2, o3), r2 && r2.m(t2, null), i2 = true;
  }, p(e3, [a2]) {
    r2 && r2.p && (!i2 || 16 & a2) && Yn(r2, n2, e3, e3[4], i2 ? Gn(n2, e3[4], a2, null) : qn(e3[4]), null), (!i2 || 1 & a2 && o2 !== (o2 = "PinturaStatusAside " + e3[0])) && xr(t2, "class", o2), (!i2 || 2 & a2) && xr(t2, "style", e3[1]);
  }, i(e3) {
    i2 || (sa(r2, e3), i2 = true);
  }, o(e3) {
    la(r2, e3), i2 = false;
  }, d(e3) {
    e3 && ur(t2), r2 && r2.d(e3);
  } };
}
function gd(e2, t2, o2) {
  let i2, { $$slots: n2 = {}, $$scope: r2 } = t2, { offset: a2 = 0 } = t2, { opacity: s2 = 0 } = t2, { class: l2 } = t2;
  return e2.$$set = (e3) => {
    "offset" in e3 && o2(2, a2 = e3.offset), "opacity" in e3 && o2(3, s2 = e3.opacity), "class" in e3 && o2(0, l2 = e3.class), "$$scope" in e3 && o2(4, r2 = e3.$$scope);
  }, e2.$$.update = () => {
    12 & e2.$$.dirty && o2(1, i2 = `transform:translateX(${a2}px);opacity:${s2}`);
  }, [l2, i2, a2, s2, r2, n2];
}
var $d = class extends wa {
  constructor(e2) {
    super(), va(this, e2, gd, md, Nn, { offset: 2, opacity: 3, class: 0 });
  }
};
function fd(e2) {
  let t2, o2, i2;
  const n2 = e2[3].default, r2 = Zn(n2, e2, e2[2], null);
  let a2 = [{ for: o2 = "_" }, e2[1]], s2 = {};
  for (let e3 = 0; e3 < a2.length; e3 += 1)
    s2 = On(s2, a2[e3]);
  return { c() {
    t2 = hr("label"), r2 && r2.c(), vr(t2, s2);
  }, m(e3, o3) {
    dr(e3, t2, o3), r2 && r2.m(t2, null), i2 = true;
  }, p(e3, o3) {
    r2 && r2.p && (!i2 || 4 & o3) && Yn(r2, n2, e3, e3[2], i2 ? Gn(n2, e3[2], o3, null) : qn(e3[2]), null), vr(t2, s2 = ga(a2, [{ for: "_" }, 2 & o3 && e3[1]]));
  }, i(e3) {
    i2 || (sa(r2, e3), i2 = true);
  }, o(e3) {
    la(r2, e3), i2 = false;
  }, d(e3) {
    e3 && ur(t2), r2 && r2.d(e3);
  } };
}
function yd(e2) {
  let t2, o2;
  const i2 = e2[3].default, n2 = Zn(i2, e2, e2[2], null);
  let r2 = [e2[1]], a2 = {};
  for (let e3 = 0; e3 < r2.length; e3 += 1)
    a2 = On(a2, r2[e3]);
  return { c() {
    t2 = hr("div"), n2 && n2.c(), vr(t2, a2);
  }, m(e3, i3) {
    dr(e3, t2, i3), n2 && n2.m(t2, null), o2 = true;
  }, p(e3, s2) {
    n2 && n2.p && (!o2 || 4 & s2) && Yn(n2, i2, e3, e3[2], o2 ? Gn(i2, e3[2], s2, null) : qn(e3[2]), null), vr(t2, a2 = ga(r2, [2 & s2 && e3[1]]));
  }, i(e3) {
    o2 || (sa(n2, e3), o2 = true);
  }, o(e3) {
    la(n2, e3), o2 = false;
  }, d(e3) {
    e3 && ur(t2), n2 && n2.d(e3);
  } };
}
function bd(e2) {
  let t2, o2;
  const i2 = e2[3].default, n2 = Zn(i2, e2, e2[2], null);
  let r2 = [e2[1]], a2 = {};
  for (let e3 = 0; e3 < r2.length; e3 += 1)
    a2 = On(a2, r2[e3]);
  return { c() {
    t2 = hr("div"), n2 && n2.c(), vr(t2, a2);
  }, m(e3, i3) {
    dr(e3, t2, i3), n2 && n2.m(t2, null), o2 = true;
  }, p(e3, s2) {
    n2 && n2.p && (!o2 || 4 & s2) && Yn(n2, i2, e3, e3[2], o2 ? Gn(i2, e3[2], s2, null) : qn(e3[2]), null), vr(t2, a2 = ga(r2, [2 & s2 && e3[1]]));
  }, i(e3) {
    o2 || (sa(n2, e3), o2 = true);
  }, o(e3) {
    la(n2, e3), o2 = false;
  }, d(e3) {
    e3 && ur(t2), n2 && n2.d(e3);
  } };
}
function xd(e2) {
  let t2, o2, i2, n2;
  const r2 = [bd, yd, fd], a2 = [];
  function s2(e3, t3) {
    return "div" === e3[0] ? 0 : "span" === e3[0] ? 1 : "label" === e3[0] ? 2 : -1;
  }
  return ~(t2 = s2(e2)) && (o2 = a2[t2] = r2[t2](e2)), { c() {
    o2 && o2.c(), i2 = $r();
  }, m(e3, o3) {
    ~t2 && a2[t2].m(e3, o3), dr(e3, i2, o3), n2 = true;
  }, p(e3, [n3]) {
    let l2 = t2;
    t2 = s2(e3), t2 === l2 ? ~t2 && a2[t2].p(e3, n3) : (o2 && (ra(), la(a2[l2], 1, 1, () => {
      a2[l2] = null;
    }), aa()), ~t2 ? (o2 = a2[t2], o2 ? o2.p(e3, n3) : (o2 = a2[t2] = r2[t2](e3), o2.c()), sa(o2, 1), o2.m(i2.parentNode, i2)) : o2 = null);
  }, i(e3) {
    n2 || (sa(o2), n2 = true);
  }, o(e3) {
    la(o2), n2 = false;
  }, d(e3) {
    ~t2 && a2[t2].d(e3), e3 && ur(i2);
  } };
}
function vd(e2, t2, o2) {
  let { $$slots: i2 = {}, $$scope: n2 } = t2, { name: r2 = "div" } = t2, { attributes: a2 = {} } = t2;
  return e2.$$set = (e3) => {
    "name" in e3 && o2(0, r2 = e3.name), "attributes" in e3 && o2(1, a2 = e3.attributes), "$$scope" in e3 && o2(2, n2 = e3.$$scope);
  }, [r2, a2, n2, i2];
}
var wd = class extends wa {
  constructor(e2) {
    super(), va(this, e2, vd, xd, Nn, { name: 0, attributes: 1 });
  }
};
var Sd = () => c() && window.devicePixelRatio || 1;
var kd = null;
var Cd = (e2) => (null === kd && (kd = 1 === Sd() ? Math.round : (e3) => e3), kd(e2));
var Md = (e2, t2 = {}) => {
  if (e2) {
    if (t2.preventScroll && Vt()) {
      const t3 = document.body.scrollTop;
      return e2.focus(), void (document.body.scrollTop = t3);
    }
    e2.focus(t2);
  }
};
var Td = (e2) => ({});
var Pd = (e2) => ({});
var Rd = (e2) => ({});
var Id = (e2) => ({});
function Ad(e2) {
  let t2, o2;
  const i2 = [e2[7]];
  let n2 = { $$slots: { default: [Ld] }, $$scope: { ctx: e2 } };
  for (let e3 = 0; e3 < i2.length; e3 += 1)
    n2 = On(n2, i2[e3]);
  return t2 = new Gc({ props: n2 }), e2[40](t2), { c() {
    ya(t2.$$.fragment);
  }, m(e3, i3) {
    ba(t2, e3, i3), o2 = true;
  }, p(e3, o3) {
    const n3 = 128 & o3[0] ? ga(i2, [$a(e3[7])]) : {};
    8192 & o3[1] && (n3.$$scope = { dirty: o3, ctx: e3 }), t2.$set(n3);
  }, i(e3) {
    o2 || (sa(t2.$$.fragment, e3), o2 = true);
  }, o(e3) {
    la(t2.$$.fragment, e3), o2 = false;
  }, d(o3) {
    e2[40](null), xa(t2, o3);
  } };
}
function Ed(e2) {
  let t2, o2;
  const i2 = [e2[7]];
  let n2 = {};
  for (let e3 = 0; e3 < i2.length; e3 += 1)
    n2 = On(n2, i2[e3]);
  return t2 = new Gc({ props: n2 }), e2[39](t2), { c() {
    ya(t2.$$.fragment);
  }, m(e3, i3) {
    ba(t2, e3, i3), o2 = true;
  }, p(e3, o3) {
    const n3 = 128 & o3[0] ? ga(i2, [$a(e3[7])]) : {};
    t2.$set(n3);
  }, i(e3) {
    o2 || (sa(t2.$$.fragment, e3), o2 = true);
  }, o(e3) {
    la(t2.$$.fragment, e3), o2 = false;
  }, d(o3) {
    e2[39](null), xa(t2, o3);
  } };
}
function Ld(e2) {
  let t2;
  const o2 = e2[38].label, i2 = Zn(o2, e2, e2[44], Id);
  return { c() {
    i2 && i2.c();
  }, m(e3, o3) {
    i2 && i2.m(e3, o3), t2 = true;
  }, p(e3, n2) {
    i2 && i2.p && (!t2 || 8192 & n2[1]) && Yn(i2, o2, e3, e3[44], t2 ? Gn(o2, e3[44], n2, Rd) : qn(e3[44]), Id);
  }, i(e3) {
    t2 || (sa(i2, e3), t2 = true);
  }, o(e3) {
    la(i2, e3), t2 = false;
  }, d(e3) {
    i2 && i2.d(e3);
  } };
}
function Fd(e2) {
  let t2, o2, i2, n2, r2, a2, s2;
  const l2 = e2[38].details, c2 = Zn(l2, e2, e2[44], Pd);
  return { c() {
    t2 = hr("div"), c2 && c2.c(), o2 = gr(), i2 = hr("span"), xr(i2, "class", "PinturaPanelTip"), xr(i2, "style", e2[10]), xr(t2, "class", n2 = hc(["PinturaPanel", "pintura-editor-panel", e2[2]])), xr(t2, "tabindex", "-1"), xr(t2, "style", e2[11]);
  }, m(n3, l3) {
    dr(n3, t2, l3), c2 && c2.m(t2, null), sr(t2, o2), sr(t2, i2), e2[41](t2), r2 = true, a2 || (s2 = [fr(t2, "close", e2[42]), fr(t2, "keydown", e2[18]), fr(t2, "measure", e2[43]), er(oc.call(null, t2))], a2 = true);
  }, p(e3, o3) {
    c2 && c2.p && (!r2 || 8192 & o3[1]) && Yn(c2, l2, e3, e3[44], r2 ? Gn(l2, e3[44], o3, Td) : qn(e3[44]), Pd), (!r2 || 1024 & o3[0]) && xr(i2, "style", e3[10]), (!r2 || 4 & o3[0] && n2 !== (n2 = hc(["PinturaPanel", "pintura-editor-panel", e3[2]]))) && xr(t2, "class", n2), (!r2 || 2048 & o3[0]) && xr(t2, "style", e3[11]);
  }, i(e3) {
    r2 || (sa(c2, e3), r2 = true);
  }, o(e3) {
    la(c2, e3), r2 = false;
  }, d(o3) {
    o3 && ur(t2), c2 && c2.d(o3), e2[41](null), a2 = false, _n(s2);
  } };
}
function zd(e2) {
  let t2, o2, i2, n2, r2, a2, s2, l2, c2;
  const d2 = [Ed, Ad], u2 = [];
  function h2(e3, t3) {
    return e3[1] ? 0 : 1;
  }
  o2 = h2(e2), i2 = u2[o2] = d2[o2](e2);
  let p2 = e2[6] && Fd(e2);
  return { c() {
    t2 = gr(), i2.c(), n2 = gr(), p2 && p2.c(), r2 = gr(), a2 = $r();
  }, m(i3, d3) {
    dr(i3, t2, d3), u2[o2].m(i3, d3), dr(i3, n2, d3), p2 && p2.m(i3, d3), dr(i3, r2, d3), dr(i3, a2, d3), s2 = true, l2 || (c2 = [fr(document.body, "pointerdown", function() {
      Vn(e2[9]) && e2[9].apply(this, arguments);
    }), fr(document.body, "pointerup", function() {
      Vn(e2[8]) && e2[8].apply(this, arguments);
    })], l2 = true);
  }, p(t3, a3) {
    let s3 = o2;
    o2 = h2(e2 = t3), o2 === s3 ? u2[o2].p(e2, a3) : (ra(), la(u2[s3], 1, 1, () => {
      u2[s3] = null;
    }), aa(), i2 = u2[o2], i2 ? i2.p(e2, a3) : (i2 = u2[o2] = d2[o2](e2), i2.c()), sa(i2, 1), i2.m(n2.parentNode, n2)), e2[6] ? p2 ? (p2.p(e2, a3), 64 & a3[0] && sa(p2, 1)) : (p2 = Fd(e2), p2.c(), sa(p2, 1), p2.m(r2.parentNode, r2)) : p2 && (ra(), la(p2, 1, 1, () => {
      p2 = null;
    }), aa());
  }, i(e3) {
    s2 || (sa(i2), sa(p2), sa(false), s2 = true);
  }, o(e3) {
    la(i2), la(p2), la(false), s2 = false;
  }, d(e3) {
    e3 && ur(t2), u2[o2].d(e3), e3 && ur(n2), p2 && p2.d(e3), e3 && ur(r2), e3 && ur(a2), l2 = false, _n(c2);
  } };
}
function Bd(e2, t2, o2) {
  let i2, r2, a2, s2, l2, c2, d2, u2, h2, p2, m2, g2, $2, f2, y2, b2, x2, v2, { $$slots: w2 = {}, $$scope: S2 } = t2, { buttonClass: k2 } = t2, { buttonLabel: C2 } = t2, { panelClass: M2 } = t2, { isActive: T2 = false } = t2, { onshow: P2 = ({ panel: e3 }) => Md(e3, { preventScroll: true }) } = t2, { onhide: R2 = n } = t2;
  const I2 = Wr("isAnimated");
  Un(e2, I2, (e3) => o2(37, v2 = e3));
  const A2 = Wr("rootPortal");
  Un(e2, A2, (e3) => o2(32, $2 = e3));
  const E2 = Wr("rootRect");
  let L2, F2, z2;
  Un(e2, E2, (e3) => o2(36, x2 = e3));
  const B2 = () => o2(22, z2 = i2 && i2.getBoundingClientRect());
  let O2 = le(), D2 = _l(0);
  Un(e2, D2, (e3) => o2(34, y2 = e3));
  let W2 = le();
  const _2 = Ca({ x: 0, y: 0 });
  Un(e2, _2, (e3) => o2(33, f2 = e3));
  const V2 = _l(-5, { stiffness: 0.1, damping: 0.35, precision: 1e-3 });
  Un(e2, V2, (e3) => o2(35, b2 = e3));
  const N2 = (e3) => Vc(e3, $2) || F2.isEventTarget(e3);
  let H2, j2, U2 = false;
  const Z2 = (e3) => {
    T2 || B2(), o2(26, j2 = e3), o2(0, T2 = !T2);
  }, X2 = (e3) => {
    /down/i.test(e3.key) && (o2(0, T2 = true), o2(26, j2 = e3));
  };
  Br(() => {
    if (!$2)
      return;
    if (!H2)
      return;
    const e3 = H2;
    Gr().then(() => {
      e3.parentNode && e3.remove();
    });
  });
  return e2.$$set = (e3) => {
    "buttonClass" in e3 && o2(19, k2 = e3.buttonClass), "buttonLabel" in e3 && o2(1, C2 = e3.buttonLabel), "panelClass" in e3 && o2(2, M2 = e3.panelClass), "isActive" in e3 && o2(0, T2 = e3.isActive), "onshow" in e3 && o2(20, P2 = e3.onshow), "onhide" in e3 && o2(21, R2 = e3.onhide), "$$scope" in e3 && o2(44, S2 = e3.$$scope);
  }, e2.$$.update = () => {
    if (16 & e2.$$.dirty[0] && (i2 = F2 && F2.getElement()), 33554433 & e2.$$.dirty[0] && o2(8, m2 = T2 ? (e3) => {
      U2 && (o2(25, U2 = false), N2(e3) || o2(0, T2 = false));
    } : void 0), 1 & e2.$$.dirty[0] | 64 & e2.$$.dirty[1] && D2.set(T2 ? 1 : 0, { hard: false === v2 }), 1 & e2.$$.dirty[0] | 64 & e2.$$.dirty[1] && V2.set(T2 ? 0 : -5, { hard: false === v2 }), 16 & e2.$$.dirty[1] && o2(29, r2 = 1 - b2 / -5), 1 & e2.$$.dirty[0] | 32 & e2.$$.dirty[1] && x2 && T2 && B2(), 4194313 & e2.$$.dirty[0] | 32 & e2.$$.dirty[1] && x2 && L2 && z2 && T2) {
      let e3 = z2.x - x2.x + 0.5 * z2.width - 0.5 * L2.width, t3 = z2.y - x2.y + z2.height;
      const i3 = 12, n2 = 12, r3 = x2.width - 12, a3 = x2.height - 12, s3 = e3, l3 = t3, c3 = s3 + L2.width, d3 = l3 + L2.height;
      if (s3 < i3 && (o2(24, W2.x = s3 - i3, W2), e3 = i3), c3 > r3 && (o2(24, W2.x = c3 - r3, W2), e3 = r3 - L2.width), d3 > a3) {
        o2(23, O2.y = -1, O2);
        n2 < t3 - L2.height - z2.height ? (o2(24, W2.y = 0, W2), t3 -= L2.height + z2.height) : (o2(24, W2.y = t3 - (d3 - a3), W2), t3 -= d3 - a3);
      } else
        o2(23, O2.y = 1, O2);
      Qn(_2, f2 = ye(ce(e3, t3), Cd), f2);
    }
    8 & e2.$$.dirty[1] && o2(6, a2 = y2 > 0), 8 & e2.$$.dirty[1] && o2(31, s2 = y2 < 1), 8388608 & e2.$$.dirty[0] | 20 & e2.$$.dirty[1] && o2(30, l2 = `translateX(${Math.round(f2.x) + 12 * O2.x}px) translateY(${Math.round(f2.y) + 12 * O2.y + O2.y * b2}px)`), 1073741824 & e2.$$.dirty[0] | 9 & e2.$$.dirty[1] && o2(11, c2 = s2 ? `opacity: ${y2}; pointer-events: ${y2 < 1 ? "none" : "all"}; transform: ${l2};` : "transform: " + l2), 536870912 & e2.$$.dirty[0] && o2(27, d2 = 0.5 + 0.5 * r2), 536870912 & e2.$$.dirty[0] && o2(28, u2 = r2), 427819016 & e2.$$.dirty[0] | 4 & e2.$$.dirty[1] && o2(10, h2 = f2 && L2 && `opacity:${u2};transform:scaleX(${d2})rotate(45deg);top:${O2.y < 0 ? W2.y + L2.height : 0}px;left:${W2.x + 0.5 * L2.width}px`), 1 & e2.$$.dirty[0] && o2(9, p2 = T2 ? (e3) => {
      N2(e3) || o2(25, U2 = true);
    } : void 0), 96 & e2.$$.dirty[0] | 2 & e2.$$.dirty[1] && a2 && $2 && H2 && H2.parentNode !== $2 && $2.append(H2), 1 & e2.$$.dirty[0] && (T2 || o2(26, j2 = void 0)), 68157537 & e2.$$.dirty[0] && T2 && a2 && H2 && P2({ e: j2, panel: H2 }), 2097217 & e2.$$.dirty[0] && a2 && !T2 && R2(), 524290 & e2.$$.dirty[0] && o2(7, g2 = { label: C2, class: hc(["PinturaPanelButton", k2]), onkeydown: X2, onclick: Z2 });
  }, [T2, C2, M2, L2, F2, H2, a2, g2, m2, p2, h2, c2, I2, A2, E2, D2, _2, V2, (e3) => {
    /esc/i.test(e3.key) && (o2(0, T2 = false), i2.focus());
  }, k2, P2, R2, z2, O2, W2, U2, j2, d2, u2, r2, l2, s2, $2, f2, y2, b2, x2, v2, w2, function(e3) {
    Nr[e3 ? "unshift" : "push"](() => {
      F2 = e3, o2(4, F2);
    });
  }, function(e3) {
    Nr[e3 ? "unshift" : "push"](() => {
      F2 = e3, o2(4, F2);
    });
  }, function(e3) {
    Nr[e3 ? "unshift" : "push"](() => {
      H2 = e3, o2(5, H2);
    });
  }, (e3) => {
    e3.stopPropagation(), o2(0, T2 = false);
  }, (e3) => o2(3, L2 = Le(e3.detail)), S2];
}
var Od = class extends wa {
  constructor(e2) {
    super(), va(this, e2, Bd, zd, Nn, { buttonClass: 19, buttonLabel: 1, panelClass: 2, isActive: 0, onshow: 20, onhide: 21 }, null, [-1, -1]);
  }
};
var Dd = { Up: 38, Down: 40, Left: 37, Right: 39 };
function Wd(e2) {
  let t2, o2, i2, n2, r2, a2, s2, l2;
  const c2 = e2[15].default, d2 = Zn(c2, e2, e2[14], null);
  return { c() {
    t2 = hr("li"), o2 = hr("input"), i2 = gr(), n2 = hr("label"), d2 && d2.c(), xr(o2, "type", "radio"), xr(o2, "class", "implicit"), xr(o2, "id", e2[7]), xr(o2, "name", e2[0]), o2.value = e2[3], o2.disabled = e2[6], o2.hidden = e2[5], o2.checked = e2[4], xr(n2, "for", e2[7]), xr(n2, "title", e2[2]), xr(t2, "class", r2 = hc(["PinturaRadioGroupOption", e2[1]])), xr(t2, "data-hidden", e2[5]), xr(t2, "data-disabled", e2[6]), xr(t2, "data-selected", e2[4]);
  }, m(r3, c3) {
    dr(r3, t2, c3), sr(t2, o2), sr(t2, i2), sr(t2, n2), d2 && d2.m(n2, null), a2 = true, s2 || (l2 = [fr(o2, "change", br(e2[16])), fr(o2, "keydown", e2[9]), fr(o2, "click", e2[10])], s2 = true);
  }, p(e3, [i3]) {
    (!a2 || 128 & i3) && xr(o2, "id", e3[7]), (!a2 || 1 & i3) && xr(o2, "name", e3[0]), (!a2 || 8 & i3) && (o2.value = e3[3]), (!a2 || 64 & i3) && (o2.disabled = e3[6]), (!a2 || 32 & i3) && (o2.hidden = e3[5]), (!a2 || 16 & i3) && (o2.checked = e3[4]), d2 && d2.p && (!a2 || 16384 & i3) && Yn(d2, c2, e3, e3[14], a2 ? Gn(c2, e3[14], i3, null) : qn(e3[14]), null), (!a2 || 128 & i3) && xr(n2, "for", e3[7]), (!a2 || 4 & i3) && xr(n2, "title", e3[2]), (!a2 || 2 & i3 && r2 !== (r2 = hc(["PinturaRadioGroupOption", e3[1]]))) && xr(t2, "class", r2), (!a2 || 32 & i3) && xr(t2, "data-hidden", e3[5]), (!a2 || 64 & i3) && xr(t2, "data-disabled", e3[6]), (!a2 || 16 & i3) && xr(t2, "data-selected", e3[4]);
  }, i(e3) {
    a2 || (sa(d2, e3), a2 = true);
  }, o(e3) {
    la(d2, e3), a2 = false;
  }, d(e3) {
    e3 && ur(t2), d2 && d2.d(e3), s2 = false, _n(l2);
  } };
}
function _d(e2, t2, o2) {
  let i2, n2, { $$slots: r2 = {}, $$scope: a2 } = t2, { name: s2 } = t2, { class: l2 } = t2, { label: c2 } = t2, { id: d2 } = t2, { value: u2 } = t2, { checked: h2 } = t2, { onkeydown: p2 } = t2, { onclick: m2 } = t2, { hidden: g2 = false } = t2, { disabled: $2 = false } = t2;
  const f2 = Object.values(Dd), y2 = Wr("keysPressed");
  Un(e2, y2, (e3) => o2(17, n2 = e3));
  return e2.$$set = (e3) => {
    "name" in e3 && o2(0, s2 = e3.name), "class" in e3 && o2(1, l2 = e3.class), "label" in e3 && o2(2, c2 = e3.label), "id" in e3 && o2(11, d2 = e3.id), "value" in e3 && o2(3, u2 = e3.value), "checked" in e3 && o2(4, h2 = e3.checked), "onkeydown" in e3 && o2(12, p2 = e3.onkeydown), "onclick" in e3 && o2(13, m2 = e3.onclick), "hidden" in e3 && o2(5, g2 = e3.hidden), "disabled" in e3 && o2(6, $2 = e3.disabled), "$$scope" in e3 && o2(14, a2 = e3.$$scope);
  }, e2.$$.update = () => {
    2049 & e2.$$.dirty && o2(7, i2 = `${s2}-${d2}`);
  }, [s2, l2, c2, u2, h2, g2, $2, i2, y2, (e3) => {
    p2(e3);
  }, (e3) => {
    n2.some((e4) => f2.includes(e4)) || m2(e3);
  }, d2, p2, m2, a2, r2, function(t3) {
    _r.call(this, e2, t3);
  }];
}
var Vd = class extends wa {
  constructor(e2) {
    super(), va(this, e2, _d, Wd, Nn, { name: 0, class: 1, label: 2, id: 11, value: 3, checked: 4, onkeydown: 12, onclick: 13, hidden: 5, disabled: 6 });
  }
};
var Nd = (e2 = []) => e2.reduce((e3, t2) => (To(t2) ? To(t2[1]) : !!t2.options) ? e3.concat(To(t2) ? t2[1] : t2.options) : (e3.push(t2), e3), []);
var Hd = (e2, t2, o2) => {
  let i2;
  return To(e2) ? i2 = { id: t2, value: e2[0], label: e2[1], ...e2[2] || {} } : (i2 = e2, i2.id = null != i2.id ? i2.id : t2), o2 ? o2(i2) : i2;
};
var jd = (e2, t2, o2) => T(e2) ? e2(t2, o2) : e2;
var Ud = (e2, t2) => e2.map(([e3, o2, i2]) => {
  if (To(o2))
    return [jd(e3, t2), Ud(o2, t2)];
  {
    const n2 = [e3, jd(o2, t2)];
    if (i2) {
      let e4 = { ...i2 };
      i2.icon && (e4.icon = jd(i2.icon, t2)), n2.push(e4);
    }
    return n2;
  }
});
var Zd = (e2, t2) => Ud(e2, t2);
var Xd = (e2, t2) => Array.isArray(e2) && Array.isArray(t2) ? qa(e2, t2) : e2 === t2;
function Gd(e2, t2, o2) {
  const i2 = e2.slice();
  return i2[27] = t2[o2], i2;
}
var Yd = (e2) => ({ option: 1024 & e2[0] });
var qd = (e2) => ({ option: e2[27] });
function Kd(e2, t2, o2) {
  const i2 = e2.slice();
  return i2[27] = t2[o2], i2;
}
var Jd = (e2) => ({ option: 1024 & e2[0] });
var Qd = (e2) => ({ option: e2[27] });
var eu = (e2) => ({ option: 1024 & e2[0] });
var tu = (e2) => ({ option: e2[27] });
function ou(e2) {
  let t2, o2, i2, n2, r2, a2 = [], s2 = /* @__PURE__ */ new Map(), l2 = e2[1] && iu(e2), c2 = e2[10];
  const d2 = (e3) => e3[27].id;
  for (let t3 = 0; t3 < c2.length; t3 += 1) {
    let o3 = Gd(e2, c2, t3), i3 = d2(o3);
    s2.set(i3, a2[t3] = gu(i3, o3));
  }
  return { c() {
    t2 = hr("fieldset"), l2 && l2.c(), o2 = gr(), i2 = hr("ul");
    for (let e3 = 0; e3 < a2.length; e3 += 1)
      a2[e3].c();
    xr(i2, "class", "PinturaRadioGroupOptions"), xr(t2, "class", n2 = hc(["PinturaRadioGroup", e2[3]])), xr(t2, "data-layout", e2[5]), xr(t2, "title", e2[7]);
  }, m(e3, n3) {
    dr(e3, t2, n3), l2 && l2.m(t2, null), sr(t2, o2), sr(t2, i2);
    for (let e4 = 0; e4 < a2.length; e4 += 1)
      a2[e4].m(i2, null);
    r2 = true;
  }, p(e3, u2) {
    e3[1] ? l2 ? l2.p(e3, u2) : (l2 = iu(e3), l2.c(), l2.m(t2, o2)) : l2 && (l2.d(1), l2 = null), 8419153 & u2[0] && (c2 = e3[10], ra(), a2 = ma(a2, u2, d2, 1, e3, c2, s2, i2, pa, gu, null, Gd), aa()), (!r2 || 8 & u2[0] && n2 !== (n2 = hc(["PinturaRadioGroup", e3[3]]))) && xr(t2, "class", n2), (!r2 || 32 & u2[0]) && xr(t2, "data-layout", e3[5]), (!r2 || 128 & u2[0]) && xr(t2, "title", e3[7]);
  }, i(e3) {
    if (!r2) {
      for (let e4 = 0; e4 < c2.length; e4 += 1)
        sa(a2[e4]);
      r2 = true;
    }
  }, o(e3) {
    for (let e4 = 0; e4 < a2.length; e4 += 1)
      la(a2[e4]);
    r2 = false;
  }, d(e3) {
    e3 && ur(t2), l2 && l2.d();
    for (let e4 = 0; e4 < a2.length; e4 += 1)
      a2[e4].d();
  } };
}
function iu(e2) {
  let t2, o2, i2;
  return { c() {
    t2 = hr("legend"), o2 = mr(e2[1]), xr(t2, "class", i2 = e2[2] && "implicit");
  }, m(e3, i3) {
    dr(e3, t2, i3), sr(t2, o2);
  }, p(e3, n2) {
    2 & n2[0] && wr(o2, e3[1]), 4 & n2[0] && i2 !== (i2 = e3[2] && "implicit") && xr(t2, "class", i2);
  }, d(e3) {
    e3 && ur(t2);
  } };
}
function nu(e2) {
  let t2, o2;
  return t2 = new Vd({ props: { name: e2[4], label: e2[27].label, id: e2[27].id, value: e2[27].value, disabled: e2[27].disabled, hidden: e2[27].hidden, class: e2[8], checked: e2[12](e2[27]) === e2[0], onkeydown: e2[13](e2[27]), onclick: e2[14](e2[27]), $$slots: { default: [cu] }, $$scope: { ctx: e2 } } }), { c() {
    ya(t2.$$.fragment);
  }, m(e3, i2) {
    ba(t2, e3, i2), o2 = true;
  }, p(e3, o3) {
    const i2 = {};
    16 & o3[0] && (i2.name = e3[4]), 1024 & o3[0] && (i2.label = e3[27].label), 1024 & o3[0] && (i2.id = e3[27].id), 1024 & o3[0] && (i2.value = e3[27].value), 1024 & o3[0] && (i2.disabled = e3[27].disabled), 1024 & o3[0] && (i2.hidden = e3[27].hidden), 256 & o3[0] && (i2.class = e3[8]), 1025 & o3[0] && (i2.checked = e3[12](e3[27]) === e3[0]), 1024 & o3[0] && (i2.onkeydown = e3[13](e3[27])), 1024 & o3[0] && (i2.onclick = e3[14](e3[27])), 8389696 & o3[0] && (i2.$$scope = { dirty: o3, ctx: e3 }), t2.$set(i2);
  }, i(e3) {
    o2 || (sa(t2.$$.fragment, e3), o2 = true);
  }, o(e3) {
    la(t2.$$.fragment, e3), o2 = false;
  }, d(e3) {
    xa(t2, e3);
  } };
}
function ru(e2) {
  let t2, o2, i2, n2, r2, a2, s2 = [], l2 = /* @__PURE__ */ new Map();
  const c2 = e2[22].group, d2 = Zn(c2, e2, e2[23], tu), u2 = d2 || function(e3) {
    let t3, o3, i3 = e3[27].label + "";
    return { c() {
      t3 = hr("span"), o3 = mr(i3), xr(t3, "class", "PinturaRadioGroupOptionGroupLabel");
    }, m(e4, i4) {
      dr(e4, t3, i4), sr(t3, o3);
    }, p(e4, t4) {
      1024 & t4[0] && i3 !== (i3 = e4[27].label + "") && wr(o3, i3);
    }, d(e4) {
      e4 && ur(t3);
    } };
  }(e2);
  let h2 = e2[27].options;
  const p2 = (e3) => e3[27].id;
  for (let t3 = 0; t3 < h2.length; t3 += 1) {
    let o3 = Kd(e2, h2, t3), i3 = p2(o3);
    l2.set(i3, s2[t3] = mu(i3, o3));
  }
  return { c() {
    t2 = hr("li"), u2 && u2.c(), o2 = gr(), i2 = hr("ul");
    for (let e3 = 0; e3 < s2.length; e3 += 1)
      s2[e3].c();
    n2 = gr(), xr(i2, "class", "PinturaRadioGroupOptions"), xr(t2, "class", r2 = hc(["PinturaRadioGroupOptionGroup", e2[9]]));
  }, m(e3, r3) {
    dr(e3, t2, r3), u2 && u2.m(t2, null), sr(t2, o2), sr(t2, i2);
    for (let e4 = 0; e4 < s2.length; e4 += 1)
      s2[e4].m(i2, null);
    sr(t2, n2), a2 = true;
  }, p(e3, o3) {
    d2 ? d2.p && (!a2 || 8389632 & o3[0]) && Yn(d2, c2, e3, e3[23], a2 ? Gn(c2, e3[23], o3, eu) : qn(e3[23]), tu) : u2 && u2.p && (!a2 || 1024 & o3[0]) && u2.p(e3, a2 ? o3 : [-1, -1]), 8418641 & o3[0] && (h2 = e3[27].options, ra(), s2 = ma(s2, o3, p2, 1, e3, h2, l2, i2, pa, mu, null, Kd), aa()), (!a2 || 512 & o3[0] && r2 !== (r2 = hc(["PinturaRadioGroupOptionGroup", e3[9]]))) && xr(t2, "class", r2);
  }, i(e3) {
    if (!a2) {
      sa(u2, e3);
      for (let e4 = 0; e4 < h2.length; e4 += 1)
        sa(s2[e4]);
      a2 = true;
    }
  }, o(e3) {
    la(u2, e3);
    for (let e4 = 0; e4 < s2.length; e4 += 1)
      la(s2[e4]);
    a2 = false;
  }, d(e3) {
    e3 && ur(t2), u2 && u2.d(e3);
    for (let e4 = 0; e4 < s2.length; e4 += 1)
      s2[e4].d();
  } };
}
function au(e2) {
  let t2, o2;
  return t2 = new _c({ props: { $$slots: { default: [su] }, $$scope: { ctx: e2 } } }), { c() {
    ya(t2.$$.fragment);
  }, m(e3, i2) {
    ba(t2, e3, i2), o2 = true;
  }, p(e3, o3) {
    const i2 = {};
    8389632 & o3[0] && (i2.$$scope = { dirty: o3, ctx: e3 }), t2.$set(i2);
  }, i(e3) {
    o2 || (sa(t2.$$.fragment, e3), o2 = true);
  }, o(e3) {
    la(t2.$$.fragment, e3), o2 = false;
  }, d(e3) {
    xa(t2, e3);
  } };
}
function su(e2) {
  let t2, o2 = e2[27].icon + "";
  return { c() {
    t2 = pr("g");
  }, m(e3, i2) {
    dr(e3, t2, i2), t2.innerHTML = o2;
  }, p(e3, i2) {
    1024 & i2[0] && o2 !== (o2 = e3[27].icon + "") && (t2.innerHTML = o2);
  }, d(e3) {
    e3 && ur(t2);
  } };
}
function lu(e2) {
  let t2, o2, i2 = e2[27].label + "";
  return { c() {
    t2 = hr("span"), o2 = mr(i2), xr(t2, "class", e2[6]);
  }, m(e3, i3) {
    dr(e3, t2, i3), sr(t2, o2);
  }, p(e3, n2) {
    1024 & n2[0] && i2 !== (i2 = e3[27].label + "") && wr(o2, i2), 64 & n2[0] && xr(t2, "class", e3[6]);
  }, d(e3) {
    e3 && ur(t2);
  } };
}
function cu(e2) {
  let t2;
  const o2 = e2[22].option, i2 = Zn(o2, e2, e2[23], qd), n2 = i2 || function(e3) {
    let t3, o3, i3, n3 = e3[27].icon && au(e3), r2 = !e3[27].hideLabel && lu(e3);
    return { c() {
      n3 && n3.c(), t3 = gr(), r2 && r2.c(), o3 = gr();
    }, m(e4, a2) {
      n3 && n3.m(e4, a2), dr(e4, t3, a2), r2 && r2.m(e4, a2), dr(e4, o3, a2), i3 = true;
    }, p(e4, i4) {
      e4[27].icon ? n3 ? (n3.p(e4, i4), 1024 & i4[0] && sa(n3, 1)) : (n3 = au(e4), n3.c(), sa(n3, 1), n3.m(t3.parentNode, t3)) : n3 && (ra(), la(n3, 1, 1, () => {
        n3 = null;
      }), aa()), e4[27].hideLabel ? r2 && (r2.d(1), r2 = null) : r2 ? r2.p(e4, i4) : (r2 = lu(e4), r2.c(), r2.m(o3.parentNode, o3));
    }, i(e4) {
      i3 || (sa(n3), i3 = true);
    }, o(e4) {
      la(n3), i3 = false;
    }, d(e4) {
      n3 && n3.d(e4), e4 && ur(t3), r2 && r2.d(e4), e4 && ur(o3);
    } };
  }(e2);
  return { c() {
    n2 && n2.c();
  }, m(e3, o3) {
    n2 && n2.m(e3, o3), t2 = true;
  }, p(e3, r2) {
    i2 ? i2.p && (!t2 || 8389632 & r2[0]) && Yn(i2, o2, e3, e3[23], t2 ? Gn(o2, e3[23], r2, Yd) : qn(e3[23]), qd) : n2 && n2.p && (!t2 || 1088 & r2[0]) && n2.p(e3, t2 ? r2 : [-1, -1]);
  }, i(e3) {
    t2 || (sa(n2, e3), t2 = true);
  }, o(e3) {
    la(n2, e3), t2 = false;
  }, d(e3) {
    n2 && n2.d(e3);
  } };
}
function du(e2) {
  let t2, o2;
  return t2 = new _c({ props: { $$slots: { default: [uu] }, $$scope: { ctx: e2 } } }), { c() {
    ya(t2.$$.fragment);
  }, m(e3, i2) {
    ba(t2, e3, i2), o2 = true;
  }, p(e3, o3) {
    const i2 = {};
    8389632 & o3[0] && (i2.$$scope = { dirty: o3, ctx: e3 }), t2.$set(i2);
  }, i(e3) {
    o2 || (sa(t2.$$.fragment, e3), o2 = true);
  }, o(e3) {
    la(t2.$$.fragment, e3), o2 = false;
  }, d(e3) {
    xa(t2, e3);
  } };
}
function uu(e2) {
  let t2, o2 = e2[27].icon + "";
  return { c() {
    t2 = pr("g");
  }, m(e3, i2) {
    dr(e3, t2, i2), t2.innerHTML = o2;
  }, p(e3, i2) {
    1024 & i2[0] && o2 !== (o2 = e3[27].icon + "") && (t2.innerHTML = o2);
  }, d(e3) {
    e3 && ur(t2);
  } };
}
function hu(e2) {
  let t2, o2, i2 = e2[27].label + "";
  return { c() {
    t2 = hr("span"), o2 = mr(i2), xr(t2, "class", e2[6]);
  }, m(e3, i3) {
    dr(e3, t2, i3), sr(t2, o2);
  }, p(e3, n2) {
    1024 & n2[0] && i2 !== (i2 = e3[27].label + "") && wr(o2, i2), 64 & n2[0] && xr(t2, "class", e3[6]);
  }, d(e3) {
    e3 && ur(t2);
  } };
}
function pu(e2) {
  let t2;
  const o2 = e2[22].option, i2 = Zn(o2, e2, e2[23], Qd), n2 = i2 || function(e3) {
    let t3, o3, i3, n3 = e3[27].icon && du(e3), r2 = !e3[27].hideLabel && hu(e3);
    return { c() {
      n3 && n3.c(), t3 = gr(), r2 && r2.c(), o3 = gr();
    }, m(e4, a2) {
      n3 && n3.m(e4, a2), dr(e4, t3, a2), r2 && r2.m(e4, a2), dr(e4, o3, a2), i3 = true;
    }, p(e4, i4) {
      e4[27].icon ? n3 ? (n3.p(e4, i4), 1024 & i4[0] && sa(n3, 1)) : (n3 = du(e4), n3.c(), sa(n3, 1), n3.m(t3.parentNode, t3)) : n3 && (ra(), la(n3, 1, 1, () => {
        n3 = null;
      }), aa()), e4[27].hideLabel ? r2 && (r2.d(1), r2 = null) : r2 ? r2.p(e4, i4) : (r2 = hu(e4), r2.c(), r2.m(o3.parentNode, o3));
    }, i(e4) {
      i3 || (sa(n3), i3 = true);
    }, o(e4) {
      la(n3), i3 = false;
    }, d(e4) {
      n3 && n3.d(e4), e4 && ur(t3), r2 && r2.d(e4), e4 && ur(o3);
    } };
  }(e2);
  return { c() {
    n2 && n2.c();
  }, m(e3, o3) {
    n2 && n2.m(e3, o3), t2 = true;
  }, p(e3, r2) {
    i2 ? i2.p && (!t2 || 8389632 & r2[0]) && Yn(i2, o2, e3, e3[23], t2 ? Gn(o2, e3[23], r2, Jd) : qn(e3[23]), Qd) : n2 && n2.p && (!t2 || 1088 & r2[0]) && n2.p(e3, t2 ? r2 : [-1, -1]);
  }, i(e3) {
    t2 || (sa(n2, e3), t2 = true);
  }, o(e3) {
    la(n2, e3), t2 = false;
  }, d(e3) {
    n2 && n2.d(e3);
  } };
}
function mu(e2, t2) {
  let o2, i2, n2;
  return i2 = new Vd({ props: { name: t2[4], label: t2[27].label, id: t2[27].id, value: t2[27].value, disabled: t2[27].disabled, hidden: t2[27].hidden, class: t2[8], checked: t2[12](t2[27]) === t2[0], onkeydown: t2[13](t2[27]), onclick: t2[14](t2[27]), $$slots: { default: [pu] }, $$scope: { ctx: t2 } } }), { key: e2, first: null, c() {
    o2 = $r(), ya(i2.$$.fragment), this.first = o2;
  }, m(e3, t3) {
    dr(e3, o2, t3), ba(i2, e3, t3), n2 = true;
  }, p(e3, o3) {
    t2 = e3;
    const n3 = {};
    16 & o3[0] && (n3.name = t2[4]), 1024 & o3[0] && (n3.label = t2[27].label), 1024 & o3[0] && (n3.id = t2[27].id), 1024 & o3[0] && (n3.value = t2[27].value), 1024 & o3[0] && (n3.disabled = t2[27].disabled), 1024 & o3[0] && (n3.hidden = t2[27].hidden), 256 & o3[0] && (n3.class = t2[8]), 1025 & o3[0] && (n3.checked = t2[12](t2[27]) === t2[0]), 1024 & o3[0] && (n3.onkeydown = t2[13](t2[27])), 1024 & o3[0] && (n3.onclick = t2[14](t2[27])), 8389696 & o3[0] && (n3.$$scope = { dirty: o3, ctx: t2 }), i2.$set(n3);
  }, i(e3) {
    n2 || (sa(i2.$$.fragment, e3), n2 = true);
  }, o(e3) {
    la(i2.$$.fragment, e3), n2 = false;
  }, d(e3) {
    e3 && ur(o2), xa(i2, e3);
  } };
}
function gu(e2, t2) {
  let o2, i2, n2, r2, a2;
  const s2 = [ru, nu], l2 = [];
  function c2(e3, t3) {
    return e3[27].options ? 0 : 1;
  }
  return i2 = c2(t2), n2 = l2[i2] = s2[i2](t2), { key: e2, first: null, c() {
    o2 = $r(), n2.c(), r2 = $r(), this.first = o2;
  }, m(e3, t3) {
    dr(e3, o2, t3), l2[i2].m(e3, t3), dr(e3, r2, t3), a2 = true;
  }, p(e3, o3) {
    let a3 = i2;
    i2 = c2(t2 = e3), i2 === a3 ? l2[i2].p(t2, o3) : (ra(), la(l2[a3], 1, 1, () => {
      l2[a3] = null;
    }), aa(), n2 = l2[i2], n2 ? n2.p(t2, o3) : (n2 = l2[i2] = s2[i2](t2), n2.c()), sa(n2, 1), n2.m(r2.parentNode, r2));
  }, i(e3) {
    a2 || (sa(n2), a2 = true);
  }, o(e3) {
    la(n2), a2 = false;
  }, d(e3) {
    e3 && ur(o2), l2[i2].d(e3), e3 && ur(r2);
  } };
}
function $u(e2) {
  let t2, o2, i2, n2 = e2[11].length && ou(e2);
  return { c() {
    n2 && n2.c(), t2 = gr(), o2 = $r();
  }, m(e3, r2) {
    n2 && n2.m(e3, r2), dr(e3, t2, r2), dr(e3, o2, r2), i2 = true;
  }, p(e3, o3) {
    e3[11].length ? n2 ? (n2.p(e3, o3), 2048 & o3[0] && sa(n2, 1)) : (n2 = ou(e3), n2.c(), sa(n2, 1), n2.m(t2.parentNode, t2)) : n2 && (ra(), la(n2, 1, 1, () => {
      n2 = null;
    }), aa());
  }, i(e3) {
    i2 || (sa(n2), sa(false), i2 = true);
  }, o(e3) {
    la(n2), la(false), i2 = false;
  }, d(e3) {
    n2 && n2.d(e3), e3 && ur(t2), e3 && ur(o2);
  } };
}
function fu(e2, t2, o2) {
  let i2, n2, r2, { $$slots: a2 = {}, $$scope: s2 } = t2;
  const l2 = Or();
  let { label: c2 } = t2, { hideLabel: d2 = true } = t2, { class: u2 } = t2, { name: h2 = "radio-group-" + A() } = t2, { selectedIndex: p2 = -1 } = t2, { options: m2 = [] } = t2, { onchange: g2 } = t2, { layout: $2 } = t2, { optionMapper: f2 } = t2, { optionFilter: y2 } = t2, { value: b2 } = t2, { optionLabelClass: x2 } = t2, { title: v2 } = t2, { locale: w2 } = t2, { optionClass: S2 } = t2, { optionGroupClass: k2 } = t2;
  const C2 = (e3) => r2.findIndex((t3) => t3.id === e3.id), M2 = (e3, t3) => {
    o2(0, p2 = C2(e3));
    const i3 = { index: p2, ...e3 };
    ((e4, ...t4) => {
      e4 && e4(...t4);
    })(g2, i3, t3), l2("change", i3);
  };
  return e2.$$set = (e3) => {
    "label" in e3 && o2(1, c2 = e3.label), "hideLabel" in e3 && o2(2, d2 = e3.hideLabel), "class" in e3 && o2(3, u2 = e3.class), "name" in e3 && o2(4, h2 = e3.name), "selectedIndex" in e3 && o2(0, p2 = e3.selectedIndex), "options" in e3 && o2(15, m2 = e3.options), "onchange" in e3 && o2(16, g2 = e3.onchange), "layout" in e3 && o2(5, $2 = e3.layout), "optionMapper" in e3 && o2(17, f2 = e3.optionMapper), "optionFilter" in e3 && o2(18, y2 = e3.optionFilter), "value" in e3 && o2(19, b2 = e3.value), "optionLabelClass" in e3 && o2(6, x2 = e3.optionLabelClass), "title" in e3 && o2(7, v2 = e3.title), "locale" in e3 && o2(20, w2 = e3.locale), "optionClass" in e3 && o2(8, S2 = e3.optionClass), "optionGroupClass" in e3 && o2(9, k2 = e3.optionGroupClass), "$$scope" in e3 && o2(23, s2 = e3.$$scope);
  }, e2.$$.update = () => {
    1343488 & e2.$$.dirty[0] && o2(11, i2 = Zd(y2 ? m2.filter(y2) : m2, w2)), 133120 & e2.$$.dirty[0] && o2(10, n2 = ((e3 = [], t3) => {
      let o3 = 0;
      return e3.map((e4) => (o3++, To(e4) ? To(e4[1]) ? { id: o3, label: e4[0], options: e4[1].map((e5) => Hd(e5, ++o3, t3)) } : Hd(e4, o3, t3) : e4.options ? { id: e4.id || o3, label: e4.label, options: e4.options.map((e5) => Hd(e5, ++o3, t3)) } : Hd(e4, o3, t3)));
    })(i2, f2)), 1024 & e2.$$.dirty[0] && o2(21, r2 = Nd(n2)), 2654209 & e2.$$.dirty[0] && p2 < 0 && (o2(0, p2 = r2.findIndex((e3) => Xd(e3.value, b2))), p2 < 0 && o2(0, p2 = ((e3) => e3.findIndex((e4) => void 0 === e4[0]))(m2)));
  }, [p2, c2, d2, u2, h2, $2, x2, v2, S2, k2, n2, i2, C2, (e3) => (t3) => {
    var o3;
    (o3 = t3.key, /enter| /i.test(o3)) && M2(e3, t3);
  }, (e3) => (t3) => {
    M2(e3, t3);
  }, m2, g2, f2, y2, b2, w2, r2, a2, s2];
}
var yu = class extends wa {
  constructor(e2) {
    super(), va(this, e2, fu, $u, Nn, { label: 1, hideLabel: 2, class: 3, name: 4, selectedIndex: 0, options: 15, onchange: 16, layout: 5, optionMapper: 17, optionFilter: 18, value: 19, optionLabelClass: 6, title: 7, locale: 20, optionClass: 8, optionGroupClass: 9 }, null, [-1, -1]);
  }
};
var bu = (e2) => ({});
var xu = (e2) => ({});
function vu(e2) {
  let t2, o2;
  return t2 = new _c({ props: { class: "PinturaButtonIcon", $$slots: { default: [wu] }, $$scope: { ctx: e2 } } }), { c() {
    ya(t2.$$.fragment);
  }, m(e3, i2) {
    ba(t2, e3, i2), o2 = true;
  }, p(e3, o3) {
    const i2 = {};
    268435520 & o3 && (i2.$$scope = { dirty: o3, ctx: e3 }), t2.$set(i2);
  }, i(e3) {
    o2 || (sa(t2.$$.fragment, e3), o2 = true);
  }, o(e3) {
    la(t2.$$.fragment, e3), o2 = false;
  }, d(e3) {
    xa(t2, e3);
  } };
}
function wu(e2) {
  let t2;
  return { c() {
    t2 = pr("g");
  }, m(o2, i2) {
    dr(o2, t2, i2), t2.innerHTML = e2[6];
  }, p(e3, o2) {
    64 & o2 && (t2.innerHTML = e3[6]);
  }, d(e3) {
    e3 && ur(t2);
  } };
}
function Su(e2) {
  let t2, o2, i2, n2, r2, a2, s2, l2 = (e2[2] || e2[18]) + "", c2 = e2[6] && vu(e2);
  return { c() {
    t2 = hr("span"), c2 && c2.c(), o2 = gr(), i2 = hr("span"), xr(i2, "class", n2 = hc(["PinturaButtonLabel", e2[3], e2[5] && "implicit"])), xr(t2, "slot", "label"), xr(t2, "title", r2 = jd(e2[1], e2[15])), xr(t2, "class", a2 = hc(["PinturaButtonInner", e2[4]]));
  }, m(e3, n3) {
    dr(e3, t2, n3), c2 && c2.m(t2, null), sr(t2, o2), sr(t2, i2), i2.innerHTML = l2, s2 = true;
  }, p(e3, d2) {
    e3[6] ? c2 ? (c2.p(e3, d2), 64 & d2 && sa(c2, 1)) : (c2 = vu(e3), c2.c(), sa(c2, 1), c2.m(t2, o2)) : c2 && (ra(), la(c2, 1, 1, () => {
      c2 = null;
    }), aa()), (!s2 || 262148 & d2) && l2 !== (l2 = (e3[2] || e3[18]) + "") && (i2.innerHTML = l2), (!s2 || 40 & d2 && n2 !== (n2 = hc(["PinturaButtonLabel", e3[3], e3[5] && "implicit"]))) && xr(i2, "class", n2), (!s2 || 32770 & d2 && r2 !== (r2 = jd(e3[1], e3[15]))) && xr(t2, "title", r2), (!s2 || 16 & d2 && a2 !== (a2 = hc(["PinturaButtonInner", e3[4]]))) && xr(t2, "class", a2);
  }, i(e3) {
    s2 || (sa(c2), s2 = true);
  }, o(e3) {
    la(c2), s2 = false;
  }, d(e3) {
    e3 && ur(t2), c2 && c2.d();
  } };
}
function ku(e2) {
  let t2, o2, i2 = e2[30].label + "";
  return { c() {
    t2 = hr("span"), o2 = mr(i2), xr(t2, "slot", "group");
  }, m(e3, i3) {
    dr(e3, t2, i3), sr(t2, o2);
  }, p(e3, t3) {
    1073741824 & t3 && i2 !== (i2 = e3[30].label + "") && wr(o2, i2);
  }, d(e3) {
    e3 && ur(t2);
  } };
}
function Cu(e2) {
  let t2, o2;
  return t2 = new _c({ props: { style: T(e2[13]) ? e2[13](e2[30].value) : e2[13], $$slots: { default: [Mu] }, $$scope: { ctx: e2 } } }), { c() {
    ya(t2.$$.fragment);
  }, m(e3, i2) {
    ba(t2, e3, i2), o2 = true;
  }, p(e3, o3) {
    const i2 = {};
    1073750016 & o3 && (i2.style = T(e3[13]) ? e3[13](e3[30].value) : e3[13]), 1342177280 & o3 && (i2.$$scope = { dirty: o3, ctx: e3 }), t2.$set(i2);
  }, i(e3) {
    o2 || (sa(t2.$$.fragment, e3), o2 = true);
  }, o(e3) {
    la(t2.$$.fragment, e3), o2 = false;
  }, d(e3) {
    xa(t2, e3);
  } };
}
function Mu(e2) {
  let t2, o2 = e2[30].icon + "";
  return { c() {
    t2 = pr("g");
  }, m(e3, i2) {
    dr(e3, t2, i2), t2.innerHTML = o2;
  }, p(e3, i2) {
    1073741824 & i2 && o2 !== (o2 = e3[30].icon + "") && (t2.innerHTML = o2);
  }, d(e3) {
    e3 && ur(t2);
  } };
}
function Tu(e2) {
  let t2, o2 = e2[30].sublabel + "";
  return { c() {
    t2 = hr("span"), xr(t2, "class", "PinturaDropdownOptionSublabel");
  }, m(e3, i2) {
    dr(e3, t2, i2), t2.innerHTML = o2;
  }, p(e3, i2) {
    1073741824 & i2 && o2 !== (o2 = e3[30].sublabel + "") && (t2.innerHTML = o2);
  }, d(e3) {
    e3 && ur(t2);
  } };
}
function Pu(e2) {
  let t2, o2, i2, n2, r2, a2, s2, l2, c2 = e2[30].label + "", d2 = e2[30].icon && Cu(e2), u2 = e2[30].sublabel && Tu(e2);
  return { c() {
    t2 = hr("span"), d2 && d2.c(), o2 = gr(), i2 = hr("span"), n2 = new Cr(false), r2 = gr(), u2 && u2.c(), n2.a = r2, xr(i2, "style", a2 = T(e2[14]) ? e2[14](e2[30].value) : e2[14]), xr(i2, "class", s2 = hc(["PinturaDropdownOptionLabel", e2[10]])), xr(t2, "slot", "option");
  }, m(e3, a3) {
    dr(e3, t2, a3), d2 && d2.m(t2, null), sr(t2, o2), sr(t2, i2), n2.m(c2, i2), sr(i2, r2), u2 && u2.m(i2, null), l2 = true;
  }, p(e3, r3) {
    e3[30].icon ? d2 ? (d2.p(e3, r3), 1073741824 & r3 && sa(d2, 1)) : (d2 = Cu(e3), d2.c(), sa(d2, 1), d2.m(t2, o2)) : d2 && (ra(), la(d2, 1, 1, () => {
      d2 = null;
    }), aa()), (!l2 || 1073741824 & r3) && c2 !== (c2 = e3[30].label + "") && n2.p(c2), e3[30].sublabel ? u2 ? u2.p(e3, r3) : (u2 = Tu(e3), u2.c(), u2.m(i2, null)) : u2 && (u2.d(1), u2 = null), (!l2 || 1073758208 & r3 && a2 !== (a2 = T(e3[14]) ? e3[14](e3[30].value) : e3[14])) && xr(i2, "style", a2), (!l2 || 1024 & r3 && s2 !== (s2 = hc(["PinturaDropdownOptionLabel", e3[10]]))) && xr(i2, "class", s2);
  }, i(e3) {
    l2 || (sa(d2), l2 = true);
  }, o(e3) {
    la(d2), l2 = false;
  }, d(e3) {
    e3 && ur(t2), d2 && d2.d(), u2 && u2.d();
  } };
}
function Ru(e2) {
  let t2, o2, i2, n2, r2, a2;
  const s2 = e2[26].controls, l2 = Zn(s2, e2, e2[28], xu);
  return i2 = new yu({ props: { class: "PinturaOptionsList PinturaScrollableContent", name: e2[7], value: e2[9], selectedIndex: e2[8], optionFilter: e2[11], optionMapper: e2[12], optionLabelClass: hc(["PinturaDropdownOptionLabel", e2[10]]), optionGroupClass: "PinturaListOptionGroup", optionClass: "PinturaListOption", options: e2[16], onchange: e2[19], $$slots: { option: [Pu, ({ option: e3 }) => ({ 30: e3 }), ({ option: e3 }) => e3 ? 1073741824 : 0], group: [ku, ({ option: e3 }) => ({ 30: e3 }), ({ option: e3 }) => e3 ? 1073741824 : 0] }, $$scope: { ctx: e2 } } }), { c() {
    t2 = hr("div"), l2 && l2.c(), o2 = gr(), ya(i2.$$.fragment), xr(t2, "slot", "details"), xr(t2, "class", "PinturaOptionsListWrapper");
  }, m(s3, c2) {
    dr(s3, t2, c2), l2 && l2.m(t2, null), sr(t2, o2), ba(i2, t2, null), n2 = true, r2 || (a2 = fr(t2, "keydown", e2[21]), r2 = true);
  }, p(e3, t3) {
    l2 && l2.p && (!n2 || 268435456 & t3) && Yn(l2, s2, e3, e3[28], n2 ? Gn(s2, e3[28], t3, bu) : qn(e3[28]), xu);
    const o3 = {};
    128 & t3 && (o3.name = e3[7]), 512 & t3 && (o3.value = e3[9]), 256 & t3 && (o3.selectedIndex = e3[8]), 2048 & t3 && (o3.optionFilter = e3[11]), 4096 & t3 && (o3.optionMapper = e3[12]), 1024 & t3 && (o3.optionLabelClass = hc(["PinturaDropdownOptionLabel", e3[10]])), 65536 & t3 && (o3.options = e3[16]), 1342202880 & t3 && (o3.$$scope = { dirty: t3, ctx: e3 }), i2.$set(o3);
  }, i(e3) {
    n2 || (sa(l2, e3), sa(i2.$$.fragment, e3), n2 = true);
  }, o(e3) {
    la(l2, e3), la(i2.$$.fragment, e3), n2 = false;
  }, d(e3) {
    e3 && ur(t2), l2 && l2.d(e3), xa(i2), r2 = false, a2();
  } };
}
function Iu(e2) {
  let t2, o2, i2;
  function n2(t3) {
    e2[27](t3);
  }
  let r2 = { onshow: e2[20], buttonClass: hc(["PinturaDropdownButton", e2[0], e2[5] && "PinturaDropdownIconOnly"]), $$slots: { details: [Ru], label: [Su] }, $$scope: { ctx: e2 } };
  return void 0 !== e2[17] && (r2.isActive = e2[17]), t2 = new Od({ props: r2 }), Nr.push(() => fa(t2, "isActive", n2)), { c() {
    ya(t2.$$.fragment);
  }, m(e3, o3) {
    ba(t2, e3, o3), i2 = true;
  }, p(e3, [i3]) {
    const n3 = {};
    33 & i3 && (n3.buttonClass = hc(["PinturaDropdownButton", e3[0], e3[5] && "PinturaDropdownIconOnly"])), 268828670 & i3 && (n3.$$scope = { dirty: i3, ctx: e3 }), !o2 && 131072 & i3 && (o2 = true, n3.isActive = e3[17], qr(() => o2 = false)), t2.$set(n3);
  }, i(e3) {
    i2 || (sa(t2.$$.fragment, e3), i2 = true);
  }, o(e3) {
    la(t2.$$.fragment, e3), i2 = false;
  }, d(e3) {
    xa(t2, e3);
  } };
}
function Au(e2, t2, o2) {
  let i2, r2, { $$slots: a2 = {}, $$scope: s2 } = t2, { class: l2 } = t2, { title: c2 } = t2, { label: d2 } = t2, { labelClass: u2 } = t2, { innerClass: h2 } = t2, { hideLabel: p2 = false } = t2, { icon: m2 } = t2, { name: g2 } = t2, { options: $2 = [] } = t2, { selectedIndex: f2 = -1 } = t2, { value: y2 } = t2, { optionLabelClass: b2 } = t2, { optionFilter: x2 } = t2, { optionMapper: v2 } = t2, { optionIconStyle: w2 } = t2, { optionLabelStyle: S2 } = t2, { locale: k2 } = t2, { onchange: C2 = n } = t2, { onload: M2 = n } = t2, { ondestroy: T2 = n } = t2;
  let P2;
  return Fr(() => M2({ options: $2 })), Br(() => T2({ options: $2 })), e2.$$set = (e3) => {
    "class" in e3 && o2(0, l2 = e3.class), "title" in e3 && o2(1, c2 = e3.title), "label" in e3 && o2(2, d2 = e3.label), "labelClass" in e3 && o2(3, u2 = e3.labelClass), "innerClass" in e3 && o2(4, h2 = e3.innerClass), "hideLabel" in e3 && o2(5, p2 = e3.hideLabel), "icon" in e3 && o2(6, m2 = e3.icon), "name" in e3 && o2(7, g2 = e3.name), "options" in e3 && o2(22, $2 = e3.options), "selectedIndex" in e3 && o2(8, f2 = e3.selectedIndex), "value" in e3 && o2(9, y2 = e3.value), "optionLabelClass" in e3 && o2(10, b2 = e3.optionLabelClass), "optionFilter" in e3 && o2(11, x2 = e3.optionFilter), "optionMapper" in e3 && o2(12, v2 = e3.optionMapper), "optionIconStyle" in e3 && o2(13, w2 = e3.optionIconStyle), "optionLabelStyle" in e3 && o2(14, S2 = e3.optionLabelStyle), "locale" in e3 && o2(15, k2 = e3.locale), "onchange" in e3 && o2(23, C2 = e3.onchange), "onload" in e3 && o2(24, M2 = e3.onload), "ondestroy" in e3 && o2(25, T2 = e3.ondestroy), "$$scope" in e3 && o2(28, s2 = e3.$$scope);
  }, e2.$$.update = () => {
    4227072 & e2.$$.dirty && o2(16, i2 = k2 ? Zd($2, k2) : $2), 66048 & e2.$$.dirty && o2(18, r2 = i2.reduce((e3, t3) => {
      if (e3)
        return e3;
      const o3 = Array.isArray(t3) ? t3 : [t3, t3], [i3, n2] = o3;
      return Xd(i3, y2) ? n2 : void 0;
    }, void 0) || ((e3) => {
      const t3 = e3.find((e4) => void 0 === e4[0]);
      if (t3)
        return t3[1];
    })(i2) || y2);
  }, [l2, c2, d2, u2, h2, p2, m2, g2, f2, y2, b2, x2, v2, w2, S2, k2, i2, P2, r2, (e3) => {
    o2(18, r2 = e3.value), C2(e3), o2(17, P2 = false);
  }, ({ e: e3, panel: t3 }) => {
    if (e3 && e3.key && /up|down/i.test(e3.key))
      return Md(t3.querySelector("input:not([disabled])"));
    Md(t3.querySelector("fieldset"));
  }, (e3) => {
    /tab/i.test(e3.key) && e3.preventDefault();
  }, $2, C2, M2, T2, a2, function(e3) {
    P2 = e3, o2(17, P2);
  }, s2];
}
var Eu = class extends wa {
  constructor(e2) {
    super(), va(this, e2, Au, Iu, Nn, { class: 0, title: 1, label: 2, labelClass: 3, innerClass: 4, hideLabel: 5, icon: 6, name: 7, options: 22, selectedIndex: 8, value: 9, optionLabelClass: 10, optionFilter: 11, optionMapper: 12, optionIconStyle: 13, optionLabelStyle: 14, locale: 15, onchange: 23, onload: 24, ondestroy: 25 });
  }
};
function Lu(e2) {
  let t2;
  return { c() {
    t2 = hr("div"), xr(t2, "slot", "details");
  }, m(o2, i2) {
    dr(o2, t2, i2), e2[10](t2);
  }, p: zn, d(o2) {
    o2 && ur(t2), e2[10](null);
  } };
}
function Fu(e2) {
  let t2, o2, i2;
  function n2(t3) {
    e2[11](t3);
  }
  let r2 = { buttonLabel: e2[0], buttonClass: e2[1], onshow: e2[2], onhide: e2[3], $$slots: { details: [Lu] }, $$scope: { ctx: e2 } };
  return void 0 !== e2[5] && (r2.isActive = e2[5]), t2 = new Od({ props: r2 }), Nr.push(() => fa(t2, "isActive", n2)), { c() {
    ya(t2.$$.fragment);
  }, m(e3, o3) {
    ba(t2, e3, o3), i2 = true;
  }, p(e3, [i3]) {
    const n3 = {};
    1 & i3 && (n3.buttonLabel = e3[0]), 2 & i3 && (n3.buttonClass = e3[1]), 4 & i3 && (n3.onshow = e3[2]), 8 & i3 && (n3.onhide = e3[3]), 4112 & i3 && (n3.$$scope = { dirty: i3, ctx: e3 }), !o2 && 32 & i3 && (o2 = true, n3.isActive = e3[5], qr(() => o2 = false)), t2.$set(n3);
  }, i(e3) {
    i2 || (sa(t2.$$.fragment, e3), i2 = true);
  }, o(e3) {
    la(t2.$$.fragment, e3), i2 = false;
  }, d(e3) {
    xa(t2, e3);
  } };
}
function zu(e2, t2, o2) {
  let { buttonLabel: i2 } = t2, { buttonClass: r2 } = t2, { root: a2 } = t2, { ondestroy: s2 = n } = t2, { onshow: l2 = n } = t2, { onhide: c2 = n } = t2;
  let d2, u2 = false;
  return Br(s2), e2.$$set = (e3) => {
    "buttonLabel" in e3 && o2(0, i2 = e3.buttonLabel), "buttonClass" in e3 && o2(1, r2 = e3.buttonClass), "root" in e3 && o2(6, a2 = e3.root), "ondestroy" in e3 && o2(7, s2 = e3.ondestroy), "onshow" in e3 && o2(2, l2 = e3.onshow), "onhide" in e3 && o2(3, c2 = e3.onhide);
  }, e2.$$.update = () => {
    80 & e2.$$.dirty && d2 && a2 && d2.firstChild !== a2 && (d2.hasChildNodes() ? d2.replaceChild(a2, d2.firstChild) : d2.append(a2));
  }, [i2, r2, l2, c2, d2, u2, a2, s2, () => o2(5, u2 = false), () => o2(5, u2 = true), function(e3) {
    Nr[e3 ? "unshift" : "push"](() => {
      d2 = e3, o2(4, d2);
    });
  }, function(e3) {
    u2 = e3, o2(5, u2);
  }];
}
var Bu = class extends wa {
  constructor(e2) {
    super(), va(this, e2, zu, Fu, Nn, { buttonLabel: 0, buttonClass: 1, root: 6, ondestroy: 7, onshow: 2, onhide: 3, hide: 8, show: 9 });
  }
  get hide() {
    return this.$$.ctx[8];
  }
  get show() {
    return this.$$.ctx[9];
  }
};
var Ou = (e2, t2, o2) => (e2 - t2) / (o2 - t2);
var Du = (e2) => ({});
var Wu = (e2) => ({});
function _u(e2) {
  let t2, o2, i2, n2, r2, a2, s2, l2;
  return o2 = new _c({ props: { $$slots: { default: [Vu] }, $$scope: { ctx: e2 } } }), r2 = new _c({ props: { $$slots: { default: [Nu] }, $$scope: { ctx: e2 } } }), { c() {
    t2 = hr("button"), ya(o2.$$.fragment), i2 = gr(), n2 = hr("button"), ya(r2.$$.fragment), xr(t2, "type", "button"), xr(t2, "aria-label", "Increase"), xr(n2, "type", "button"), xr(n2, "aria-label", "Decrease");
  }, m(c2, d2) {
    dr(c2, t2, d2), ba(o2, t2, null), dr(c2, i2, d2), dr(c2, n2, d2), ba(r2, n2, null), a2 = true, s2 || (l2 = [fr(t2, "pointerdown", e2[20](1)), fr(n2, "pointerdown", e2[20](-1))], s2 = true);
  }, p(e3, t3) {
    const i3 = {};
    128 & t3[1] && (i3.$$scope = { dirty: t3, ctx: e3 }), o2.$set(i3);
    const n3 = {};
    128 & t3[1] && (n3.$$scope = { dirty: t3, ctx: e3 }), r2.$set(n3);
  }, i(e3) {
    a2 || (sa(o2.$$.fragment, e3), sa(r2.$$.fragment, e3), a2 = true);
  }, o(e3) {
    la(o2.$$.fragment, e3), la(r2.$$.fragment, e3), a2 = false;
  }, d(e3) {
    e3 && ur(t2), xa(o2), e3 && ur(i2), e3 && ur(n2), xa(r2), s2 = false, _n(l2);
  } };
}
function Vu(e2) {
  let t2;
  return { c() {
    t2 = pr("path"), xr(t2, "d", "M8 12 h8 M12 8 v8");
  }, m(e3, o2) {
    dr(e3, t2, o2);
  }, p: zn, d(e3) {
    e3 && ur(t2);
  } };
}
function Nu(e2) {
  let t2;
  return { c() {
    t2 = pr("path"), xr(t2, "d", "M9 12 h6");
  }, m(e3, o2) {
    dr(e3, t2, o2);
  }, p: zn, d(e3) {
    e3 && ur(t2);
  } };
}
function Hu(e2) {
  let t2, o2, i2, n2, r2, a2, s2, l2, c2, d2, u2, h2, p2, m2, g2, $2, f2;
  const y2 = e2[36].default, b2 = Zn(y2, e2, e2[38], null), x2 = e2[36].knob, v2 = Zn(x2, e2, e2[38], Wu);
  let w2 = e2[9] && _u(e2);
  return { c() {
    t2 = hr("div"), o2 = hr("div"), i2 = hr("input"), r2 = gr(), a2 = hr("div"), b2 && b2.c(), l2 = gr(), c2 = hr("div"), d2 = hr("div"), v2 && v2.c(), p2 = gr(), w2 && w2.c(), xr(i2, "type", "range"), xr(i2, "id", e2[3]), xr(i2, "min", e2[0]), xr(i2, "max", e2[1]), xr(i2, "step", e2[2]), i2.value = e2[14], xr(i2, "style", n2 = e2[10] ? "pointer-events:none" : ""), xr(a2, "class", s2 = hc(["PinturaSliderTrack", e2[5]])), xr(a2, "style", e2[4]), xr(d2, "class", u2 = hc(["PinturaSliderKnob", e2[7]])), xr(d2, "style", e2[6]), xr(c2, "class", "PinturaSliderKnobController"), xr(c2, "style", e2[17]), xr(o2, "class", "PinturaSliderControl"), xr(o2, "style", h2 = "--slider-position:" + Math.round(e2[15])), xr(t2, "class", m2 = hc(["PinturaSlider", e2[12]])), xr(t2, "data-direction", e2[8]);
  }, m(n3, s3) {
    dr(n3, t2, s3), sr(t2, o2), sr(o2, i2), e2[37](i2), sr(o2, r2), sr(o2, a2), b2 && b2.m(a2, null), sr(o2, l2), sr(o2, c2), sr(c2, d2), v2 && v2.m(d2, null), sr(t2, p2), w2 && w2.m(t2, null), g2 = true, $2 || (f2 = [fr(i2, "input", e2[18]), fr(i2, "nudge", e2[19]), er(Jc.call(null, i2)), fr(o2, "pointerdown", function() {
      Vn(e2[11] && e2[13]) && (e2[11] && e2[13]).apply(this, arguments);
    })], $2 = true);
  }, p(r3, l3) {
    e2 = r3, (!g2 || 8 & l3[0]) && xr(i2, "id", e2[3]), (!g2 || 1 & l3[0]) && xr(i2, "min", e2[0]), (!g2 || 2 & l3[0]) && xr(i2, "max", e2[1]), (!g2 || 4 & l3[0]) && xr(i2, "step", e2[2]), (!g2 || 16384 & l3[0]) && (i2.value = e2[14]), (!g2 || 1024 & l3[0] && n2 !== (n2 = e2[10] ? "pointer-events:none" : "")) && xr(i2, "style", n2), b2 && b2.p && (!g2 || 128 & l3[1]) && Yn(b2, y2, e2, e2[38], g2 ? Gn(y2, e2[38], l3, null) : qn(e2[38]), null), (!g2 || 32 & l3[0] && s2 !== (s2 = hc(["PinturaSliderTrack", e2[5]]))) && xr(a2, "class", s2), (!g2 || 16 & l3[0]) && xr(a2, "style", e2[4]), v2 && v2.p && (!g2 || 128 & l3[1]) && Yn(v2, x2, e2, e2[38], g2 ? Gn(x2, e2[38], l3, Du) : qn(e2[38]), Wu), (!g2 || 128 & l3[0] && u2 !== (u2 = hc(["PinturaSliderKnob", e2[7]]))) && xr(d2, "class", u2), (!g2 || 64 & l3[0]) && xr(d2, "style", e2[6]), (!g2 || 131072 & l3[0]) && xr(c2, "style", e2[17]), (!g2 || 32768 & l3[0] && h2 !== (h2 = "--slider-position:" + Math.round(e2[15]))) && xr(o2, "style", h2), e2[9] ? w2 ? (w2.p(e2, l3), 512 & l3[0] && sa(w2, 1)) : (w2 = _u(e2), w2.c(), sa(w2, 1), w2.m(t2, null)) : w2 && (ra(), la(w2, 1, 1, () => {
      w2 = null;
    }), aa()), (!g2 || 4096 & l3[0] && m2 !== (m2 = hc(["PinturaSlider", e2[12]]))) && xr(t2, "class", m2), (!g2 || 256 & l3[0]) && xr(t2, "data-direction", e2[8]);
  }, i(e3) {
    g2 || (sa(b2, e3), sa(v2, e3), sa(w2), g2 = true);
  }, o(e3) {
    la(b2, e3), la(v2, e3), la(w2), g2 = false;
  }, d(o3) {
    o3 && ur(t2), e2[37](null), b2 && b2.d(o3), v2 && v2.d(o3), w2 && w2.d(), $2 = false, _n(f2);
  } };
}
function ju(e2, t2, o2) {
  let i2, r2, a2, s2, l2, c2, d2, u2, h2, p2, m2, g2, $2, f2, y2, { $$slots: b2 = {}, $$scope: x2 } = t2, { min: v2 = 0 } = t2, { max: w2 = 100 } = t2, { step: S2 = 1 } = t2, { id: k2 } = t2, { value: C2 = 0 } = t2, { valueMin: T2 } = t2, { valueMax: P2 } = t2, { trackStyle: R2 } = t2, { trackClass: I2 } = t2, { knobStyle: A2 } = t2, { knobClass: E2 } = t2, { ongrab: L2 = n } = t2, { onchange: F2 = n } = t2, { onrelease: z2 = n } = t2, { onexceed: B2 = n } = t2, { direction: O2 = "x" } = t2, { getValue: D2 = j } = t2, { setValue: W2 = j } = t2, { enableSpinButtons: _2 = true } = t2, { enableForceUseKnob: V2 = false } = t2, { enableStopPropagation: N2 = true } = t2, { enablePointerdownListener: H2 = true } = t2, { maxInteractionDistance: U2 = 6 } = t2, { class: Z2 } = t2;
  const X2 = (e3) => W2(((e4, t3) => (t3 = 1 / t3, Math.round(e4 * t3) / t3))(Ua(e3, v2, w2), S2)), G2 = (e3, t3, i3 = {}) => {
    const { grabbed: n2 = false, released: a3 = false } = i3, s3 = X2(v2 + e3 / t3 * r2), l3 = T2 || v2, c3 = P2 || w2;
    o2(21, C2 = M(s3) ? s3 : Ua(s3, l3, c3)), y2 !== s3 && (y2 = s3, !M(s3) && (s3 < l3 || s3 > c3) && B2(C2, s3), C2 !== f2 && (f2 = C2, n2 && L2(C2), F2(C2), a3 && z2(C2)));
  };
  let Y2;
  const q2 = (e3) => {
    const t3 = e3[u2] - $2;
    G2(g2 + t3, m2);
  }, K2 = (e3) => {
    m2 = void 0, document.documentElement.removeEventListener("pointermove", q2), document.documentElement.removeEventListener("pointerup", K2), F2(C2), z2(C2);
  }, J2 = () => {
    o2(21, C2 = X2(i2 + ee2 * S2)), F2(C2);
  };
  let Q2, ee2 = 1, te2 = false;
  const oe2 = (e3) => {
    clearTimeout(Q2), te2 || J2(), z2(C2), document.removeEventListener("pointerup", oe2);
  };
  return e2.$$set = (e3) => {
    "min" in e3 && o2(0, v2 = e3.min), "max" in e3 && o2(1, w2 = e3.max), "step" in e3 && o2(2, S2 = e3.step), "id" in e3 && o2(3, k2 = e3.id), "value" in e3 && o2(21, C2 = e3.value), "valueMin" in e3 && o2(22, T2 = e3.valueMin), "valueMax" in e3 && o2(23, P2 = e3.valueMax), "trackStyle" in e3 && o2(4, R2 = e3.trackStyle), "trackClass" in e3 && o2(5, I2 = e3.trackClass), "knobStyle" in e3 && o2(6, A2 = e3.knobStyle), "knobClass" in e3 && o2(7, E2 = e3.knobClass), "ongrab" in e3 && o2(24, L2 = e3.ongrab), "onchange" in e3 && o2(25, F2 = e3.onchange), "onrelease" in e3 && o2(26, z2 = e3.onrelease), "onexceed" in e3 && o2(27, B2 = e3.onexceed), "direction" in e3 && o2(8, O2 = e3.direction), "getValue" in e3 && o2(28, D2 = e3.getValue), "setValue" in e3 && o2(29, W2 = e3.setValue), "enableSpinButtons" in e3 && o2(9, _2 = e3.enableSpinButtons), "enableForceUseKnob" in e3 && o2(10, V2 = e3.enableForceUseKnob), "enableStopPropagation" in e3 && o2(30, N2 = e3.enableStopPropagation), "enablePointerdownListener" in e3 && o2(11, H2 = e3.enablePointerdownListener), "maxInteractionDistance" in e3 && o2(31, U2 = e3.maxInteractionDistance), "class" in e3 && o2(12, Z2 = e3.class), "$$scope" in e3 && o2(38, x2 = e3.$$scope);
  }, e2.$$.update = () => {
    270532608 & e2.$$.dirty[0] && o2(14, i2 = void 0 !== C2 ? D2(C2) : 0), 3 & e2.$$.dirty[0] && (r2 = w2 - v2), 16387 & e2.$$.dirty[0] && o2(33, a2 = Ou(i2, v2, w2)), 4 & e2.$$.dirty[1] && o2(15, s2 = 100 * a2), 256 & e2.$$.dirty[0] && o2(34, l2 = O2.toUpperCase()), 256 & e2.$$.dirty[0] && o2(35, c2 = "x" === O2 ? "Width" : "Height"), 16 & e2.$$.dirty[1] && (d2 = "offset" + c2), e2.$$.dirty[1], 8 & e2.$$.dirty[1] && (u2 = "page" + l2), 32768 & e2.$$.dirty[0] | 8 & e2.$$.dirty[1] && o2(17, h2 = `transform: translate${l2}(${s2}%)`);
  }, [v2, w2, S2, k2, R2, I2, A2, E2, O2, _2, V2, H2, Z2, (e3) => {
    let t3 = false;
    N2 && e3.stopPropagation(), clearTimeout(Y2);
    const o3 = p2.getBoundingClientRect();
    if (m2 = p2[d2], $2 = e3[u2], g2 = $2 - o3[O2], V2) {
      if (Math.abs(g2 - a2 * m2) > U2)
        return;
      t3 = true, e3.stopPropagation();
    }
    return document.activeElement !== p2 && p2.focus(), G2(g2, m2, { grabbed: true }), document.documentElement.addEventListener("pointermove", q2), document.documentElement.addEventListener("pointerup", K2), t3;
  }, i2, s2, p2, h2, (e3) => {
    m2 || (o2(21, C2 = W2(parseFloat(e3.target.value))), C2 !== f2 && (f2 = C2, F2(C2)));
  }, (e3) => {
    const t3 = p2[d2];
    G2(i2 / r2 * t3 + e3.detail[O2], t3), clearTimeout(Y2), Y2 = setTimeout(() => {
      z2(C2);
    }, 250);
  }, (e3) => (t3) => {
    clearTimeout(Y2), ee2 = e3, te2 = false, Q2 = setInterval(() => {
      te2 = true, J2();
    }, 100), document.addEventListener("pointercancel", oe2), document.addEventListener("pointerup", oe2);
  }, C2, T2, P2, L2, F2, z2, B2, D2, W2, N2, U2, (e3) => {
    const t3 = p2.getBoundingClientRect(), o3 = e3[u2] - t3[O2], i3 = p2[d2];
    return Math.abs(o3 - a2 * i3);
  }, a2, l2, c2, b2, function(e3) {
    Nr[e3 ? "unshift" : "push"](() => {
      p2 = e3, o2(16, p2);
    });
  }, x2];
}
var Uu = class extends wa {
  constructor(e2) {
    super(), va(this, e2, ju, Hu, Nn, { min: 0, max: 1, step: 2, id: 3, value: 21, valueMin: 22, valueMax: 23, trackStyle: 4, trackClass: 5, knobStyle: 6, knobClass: 7, ongrab: 24, onchange: 25, onrelease: 26, onexceed: 27, direction: 8, getValue: 28, setValue: 29, enableSpinButtons: 9, enableForceUseKnob: 10, enableStopPropagation: 30, enablePointerdownListener: 11, maxInteractionDistance: 31, class: 12, eventDistanceToKnob: 32, handlePointerDown: 13 }, null, [-1, -1]);
  }
  get eventDistanceToKnob() {
    return this.$$.ctx[32];
  }
  get handlePointerDown() {
    return this.$$.ctx[13];
  }
};
function Zu(e2) {
  let t2, o2;
  return t2 = new _c({ props: { class: "PinturaButtonIcon", $$slots: { default: [Xu] }, $$scope: { ctx: e2 } } }), { c() {
    ya(t2.$$.fragment);
  }, m(e3, i2) {
    ba(t2, e3, i2), o2 = true;
  }, p(e3, o3) {
    const i2 = {};
    524292 & o3 && (i2.$$scope = { dirty: o3, ctx: e3 }), t2.$set(i2);
  }, i(e3) {
    o2 || (sa(t2.$$.fragment, e3), o2 = true);
  }, o(e3) {
    la(t2.$$.fragment, e3), o2 = false;
  }, d(e3) {
    xa(t2, e3);
  } };
}
function Xu(e2) {
  let t2;
  return { c() {
    t2 = pr("g");
  }, m(o2, i2) {
    dr(o2, t2, i2), t2.innerHTML = e2[2];
  }, p(e3, o2) {
    4 & o2 && (t2.innerHTML = e3[2]);
  }, d(e3) {
    e3 && ur(t2);
  } };
}
function Gu(e2) {
  let t2, o2, i2, n2, r2, a2, s2, l2, c2 = e2[2] && Zu(e2);
  return { c() {
    t2 = hr("span"), c2 && c2.c(), o2 = gr(), i2 = hr("span"), n2 = mr(e2[8]), xr(i2, "class", r2 = hc(["PinturaButtonLabel", e2[3], e2[5] && "implicit"])), xr(t2, "slot", "label"), xr(t2, "title", a2 = jd(e2[1], e2[6])), xr(t2, "class", s2 = hc(["PinturaButtonInner", e2[4]]));
  }, m(e3, r3) {
    dr(e3, t2, r3), c2 && c2.m(t2, null), sr(t2, o2), sr(t2, i2), sr(i2, n2), l2 = true;
  }, p(e3, d2) {
    e3[2] ? c2 ? (c2.p(e3, d2), 4 & d2 && sa(c2, 1)) : (c2 = Zu(e3), c2.c(), sa(c2, 1), c2.m(t2, o2)) : c2 && (ra(), la(c2, 1, 1, () => {
      c2 = null;
    }), aa()), (!l2 || 256 & d2) && wr(n2, e3[8]), (!l2 || 40 & d2 && r2 !== (r2 = hc(["PinturaButtonLabel", e3[3], e3[5] && "implicit"]))) && xr(i2, "class", r2), (!l2 || 66 & d2 && a2 !== (a2 = jd(e3[1], e3[6]))) && xr(t2, "title", a2), (!l2 || 16 & d2 && s2 !== (s2 = hc(["PinturaButtonInner", e3[4]]))) && xr(t2, "class", s2);
  }, i(e3) {
    l2 || (sa(c2), l2 = true);
  }, o(e3) {
    la(c2), l2 = false;
  }, d(e3) {
    e3 && ur(t2), c2 && c2.d();
  } };
}
function Yu(e2) {
  let t2, o2, i2, n2, r2;
  const a2 = [e2[11], { value: e2[7] }, { onchange: e2[10] }];
  let s2 = {};
  for (let e3 = 0; e3 < a2.length; e3 += 1)
    s2 = On(s2, a2[e3]);
  return o2 = new Uu({ props: s2 }), { c() {
    t2 = hr("div"), ya(o2.$$.fragment), xr(t2, "slot", "details");
  }, m(a3, s3) {
    dr(a3, t2, s3), ba(o2, t2, null), i2 = true, n2 || (r2 = fr(t2, "keydown", e2[9]), n2 = true);
  }, p(e3, t3) {
    const i3 = 3200 & t3 ? ga(a2, [2048 & t3 && $a(e3[11]), 128 & t3 && { value: e3[7] }, 1024 & t3 && { onchange: e3[10] }]) : {};
    o2.$set(i3);
  }, i(e3) {
    i2 || (sa(o2.$$.fragment, e3), i2 = true);
  }, o(e3) {
    la(o2.$$.fragment, e3), i2 = false;
  }, d(e3) {
    e3 && ur(t2), xa(o2), n2 = false, r2();
  } };
}
function qu(e2) {
  let t2, o2;
  return t2 = new Od({ props: { panelClass: "PinturaSliderPanel", buttonClass: hc(["PinturaSliderButton", e2[0], e2[5] && "PinturaSliderIconOnly"]), $$slots: { details: [Yu], label: [Gu] }, $$scope: { ctx: e2 } } }), { c() {
    ya(t2.$$.fragment);
  }, m(e3, i2) {
    ba(t2, e3, i2), o2 = true;
  }, p(e3, [o3]) {
    const i2 = {};
    33 & o3 && (i2.buttonClass = hc(["PinturaSliderButton", e3[0], e3[5] && "PinturaSliderIconOnly"])), 526846 & o3 && (i2.$$scope = { dirty: o3, ctx: e3 }), t2.$set(i2);
  }, i(e3) {
    o2 || (sa(t2.$$.fragment, e3), o2 = true);
  }, o(e3) {
    la(t2.$$.fragment, e3), o2 = false;
  }, d(e3) {
    xa(t2, e3);
  } };
}
function Ku(e2, t2, o2) {
  const i2 = ["class", "title", "label", "icon", "labelClass", "innerClass", "hideLabel", "locale", "value", "onchange"];
  let r2 = Jn(t2, i2), { class: a2 } = t2, { title: s2 } = t2, { label: l2 = Math.round } = t2, { icon: c2 } = t2, { labelClass: d2 } = t2, { innerClass: u2 } = t2, { hideLabel: h2 = false } = t2, { locale: p2 } = t2, { value: m2 } = t2, { onchange: g2 = n } = t2;
  const { min: $2, max: f2, getValue: y2 = j } = r2;
  let b2;
  const x2 = (e3) => o2(8, b2 = ((e4) => T(l2) ? l2(y2(e4), $2, f2) : l2)(e3));
  return e2.$$set = (e3) => {
    t2 = On(On({}, t2), Kn(e3)), o2(11, r2 = Jn(t2, i2)), "class" in e3 && o2(0, a2 = e3.class), "title" in e3 && o2(1, s2 = e3.title), "label" in e3 && o2(12, l2 = e3.label), "icon" in e3 && o2(2, c2 = e3.icon), "labelClass" in e3 && o2(3, d2 = e3.labelClass), "innerClass" in e3 && o2(4, u2 = e3.innerClass), "hideLabel" in e3 && o2(5, h2 = e3.hideLabel), "locale" in e3 && o2(6, p2 = e3.locale), "value" in e3 && o2(7, m2 = e3.value), "onchange" in e3 && o2(13, g2 = e3.onchange);
  }, e2.$$.update = () => {
    4224 & e2.$$.dirty && x2(m2);
  }, [a2, s2, c2, d2, u2, h2, p2, m2, b2, (e3) => {
    /tab/i.test(e3.key) && e3.preventDefault();
  }, (e3) => {
    x2(e3), g2(e3);
  }, r2, l2, g2];
}
var Ju = class extends wa {
  constructor(e2) {
    super(), va(this, e2, Ku, qu, Nn, { class: 0, title: 1, label: 12, icon: 2, labelClass: 3, innerClass: 4, hideLabel: 5, locale: 6, value: 7, onchange: 13 });
  }
};
function Qu(e2, t2, o2) {
  const i2 = e2.slice();
  return i2[9] = t2[o2][0], i2[0] = t2[o2][1], i2[10] = t2[o2][2], i2[2] = t2[o2][3], i2;
}
function eh(e2) {
  let t2, o2, i2;
  const n2 = [e2[10]];
  var r2 = e2[3][e2[9]] || e2[9];
  function a2(e3) {
    let t3 = {};
    for (let e4 = 0; e4 < n2.length; e4 += 1)
      t3 = On(t3, n2[e4]);
    return { props: t3 };
  }
  return r2 && (t2 = Mr(r2, a2())), { c() {
    t2 && ya(t2.$$.fragment), o2 = $r();
  }, m(e3, n3) {
    t2 && ba(t2, e3, n3), dr(e3, o2, n3), i2 = true;
  }, p(e3, i3) {
    const s2 = 4 & i3 ? ga(n2, [$a(e3[10])]) : {};
    if (r2 !== (r2 = e3[3][e3[9]] || e3[9])) {
      if (t2) {
        ra();
        const e4 = t2;
        la(e4.$$.fragment, 1, 0, () => {
          xa(e4, 1);
        }), aa();
      }
      r2 ? (t2 = Mr(r2, a2()), ya(t2.$$.fragment), sa(t2.$$.fragment, 1), ba(t2, o2.parentNode, o2)) : t2 = null;
    } else
      r2 && t2.$set(s2);
  }, i(e3) {
    i2 || (t2 && sa(t2.$$.fragment, e3), i2 = true);
  }, o(e3) {
    t2 && la(t2.$$.fragment, e3), i2 = false;
  }, d(e3) {
    e3 && ur(o2), t2 && xa(t2, e3);
  } };
}
function th(e2) {
  let t2, o2;
  return t2 = new wd({ props: { name: e2[9], attributes: e2[4](e2[10]), $$slots: { default: [rh] }, $$scope: { ctx: e2 } } }), { c() {
    ya(t2.$$.fragment);
  }, m(e3, i2) {
    ba(t2, e3, i2), o2 = true;
  }, p(e3, o3) {
    const i2 = {};
    4 & o3 && (i2.name = e3[9]), 4 & o3 && (i2.attributes = e3[4](e3[10])), 8196 & o3 && (i2.$$scope = { dirty: o3, ctx: e3 }), t2.$set(i2);
  }, i(e3) {
    o2 || (sa(t2.$$.fragment, e3), o2 = true);
  }, o(e3) {
    la(t2.$$.fragment, e3), o2 = false;
  }, d(e3) {
    xa(t2, e3);
  } };
}
function oh(e2) {
  let t2, o2, i2 = e2[10].innerHTML + "";
  return { c() {
    t2 = new Cr(false), o2 = $r(), t2.a = o2;
  }, m(e3, n2) {
    t2.m(i2, e3, n2), dr(e3, o2, n2);
  }, p(e3, o3) {
    4 & o3 && i2 !== (i2 = e3[10].innerHTML + "") && t2.p(i2);
  }, i: zn, o: zn, d(e3) {
    e3 && ur(o2), e3 && t2.d();
  } };
}
function ih(e2) {
  let t2, o2 = e2[10].textContent + "";
  return { c() {
    t2 = mr(o2);
  }, m(e3, o3) {
    dr(e3, t2, o3);
  }, p(e3, i2) {
    4 & i2 && o2 !== (o2 = e3[10].textContent + "") && wr(t2, o2);
  }, i: zn, o: zn, d(e3) {
    e3 && ur(t2);
  } };
}
function nh(e2) {
  let t2, o2;
  return t2 = new ch({ props: { items: e2[2], discardEmptyItems: true } }), { c() {
    ya(t2.$$.fragment);
  }, m(e3, i2) {
    ba(t2, e3, i2), o2 = true;
  }, p(e3, o3) {
    const i2 = {};
    4 & o3 && (i2.items = e3[2]), t2.$set(i2);
  }, i(e3) {
    o2 || (sa(t2.$$.fragment, e3), o2 = true);
  }, o(e3) {
    la(t2.$$.fragment, e3), o2 = false;
  }, d(e3) {
    xa(t2, e3);
  } };
}
function rh(e2) {
  let t2, o2, i2, n2;
  const r2 = [nh, ih, oh], a2 = [];
  function s2(e3, t3) {
    return e3[2] && e3[2].length ? 0 : e3[10].textContent ? 1 : e3[10].innerHTML ? 2 : -1;
  }
  return ~(t2 = s2(e2)) && (o2 = a2[t2] = r2[t2](e2)), { c() {
    o2 && o2.c(), i2 = gr();
  }, m(e3, o3) {
    ~t2 && a2[t2].m(e3, o3), dr(e3, i2, o3), n2 = true;
  }, p(e3, n3) {
    let l2 = t2;
    t2 = s2(e3), t2 === l2 ? ~t2 && a2[t2].p(e3, n3) : (o2 && (ra(), la(a2[l2], 1, 1, () => {
      a2[l2] = null;
    }), aa()), ~t2 ? (o2 = a2[t2], o2 ? o2.p(e3, n3) : (o2 = a2[t2] = r2[t2](e3), o2.c()), sa(o2, 1), o2.m(i2.parentNode, i2)) : o2 = null);
  }, i(e3) {
    n2 || (sa(o2), n2 = true);
  }, o(e3) {
    la(o2), n2 = false;
  }, d(e3) {
    ~t2 && a2[t2].d(e3), e3 && ur(i2);
  } };
}
function ah(e2, t2) {
  let o2, i2, n2, r2, a2, s2;
  const l2 = [th, eh], c2 = [];
  function d2(e3, t3) {
    return 4 & t3 && (i2 = null), null == i2 && (i2 = !e3[5](e3[9])), i2 ? 0 : 1;
  }
  return n2 = d2(t2, -1), r2 = c2[n2] = l2[n2](t2), { key: e2, first: null, c() {
    o2 = $r(), r2.c(), a2 = $r(), this.first = o2;
  }, m(e3, t3) {
    dr(e3, o2, t3), c2[n2].m(e3, t3), dr(e3, a2, t3), s2 = true;
  }, p(e3, o3) {
    let i3 = n2;
    n2 = d2(t2 = e3, o3), n2 === i3 ? c2[n2].p(t2, o3) : (ra(), la(c2[i3], 1, 1, () => {
      c2[i3] = null;
    }), aa(), r2 = c2[n2], r2 ? r2.p(t2, o3) : (r2 = c2[n2] = l2[n2](t2), r2.c()), sa(r2, 1), r2.m(a2.parentNode, a2));
  }, i(e3) {
    s2 || (sa(r2), s2 = true);
  }, o(e3) {
    la(r2), s2 = false;
  }, d(e3) {
    e3 && ur(o2), c2[n2].d(e3), e3 && ur(a2);
  } };
}
function sh(e2) {
  let t2, o2, i2 = [], n2 = /* @__PURE__ */ new Map(), r2 = e2[2];
  const a2 = (e3) => e3[0] + e3[1];
  for (let t3 = 0; t3 < r2.length; t3 += 1) {
    let o3 = Qu(e2, r2, t3), s2 = a2(o3);
    n2.set(s2, i2[t3] = ah(s2, o3));
  }
  return { c() {
    for (let e3 = 0; e3 < i2.length; e3 += 1)
      i2[e3].c();
    t2 = $r();
  }, m(e3, n3) {
    for (let t3 = 0; t3 < i2.length; t3 += 1)
      i2[t3].m(e3, n3);
    dr(e3, t2, n3), o2 = true;
  }, p(e3, [o3]) {
    62 & o3 && (r2 = e3[2], ra(), i2 = ma(i2, o3, a2, 1, e3, r2, n2, t2.parentNode, pa, ah, t2, Qu), aa());
  }, i(e3) {
    if (!o2) {
      for (let e4 = 0; e4 < r2.length; e4 += 1)
        sa(i2[e4]);
      o2 = true;
    }
  }, o(e3) {
    for (let e4 = 0; e4 < i2.length; e4 += 1)
      la(i2[e4]);
    o2 = false;
  }, d(e3) {
    for (let t3 = 0; t3 < i2.length; t3 += 1)
      i2[t3].d(e3);
    e3 && ur(t2);
  } };
}
function lh(e2, t2, o2) {
  let i2, n2, { items: r2 } = t2, { discardEmptyItems: a2 = true } = t2, { key: s2 = "" } = t2;
  const l2 = { Button: Gc, Dropdown: Eu, Panel: Bu, Slider: Ju }, c2 = (e3) => !M(e3) || !!l2[e3], d2 = (e3) => {
    if (!e3)
      return false;
    const [t3, , o3, i3 = []] = e3;
    return !!c2(t3) || (i3.some(d2) || o3.textContent || o3.innerHTML);
  };
  return e2.$$set = (e3) => {
    "items" in e3 && o2(6, r2 = e3.items), "discardEmptyItems" in e3 && o2(7, a2 = e3.discardEmptyItems), "key" in e3 && o2(0, s2 = e3.key);
  }, e2.$$.update = () => {
    1 & e2.$$.dirty && o2(1, i2 = s2), 192 & e2.$$.dirty && o2(2, n2 = (r2 && a2 ? r2.filter(d2) : r2) || []);
  }, [s2, i2, n2, l2, (e3 = {}) => {
    const { textContent: t3, innerHTML: o3, ...i3 } = e3;
    return i3;
  }, c2, r2, a2];
}
var ch = class extends wa {
  constructor(e2) {
    super(), va(this, e2, lh, sh, Nn, { items: 6, discardEmptyItems: 7, key: 0 });
  }
};
var dh = ["aspectRatio", "isRotatedSideways", "flip", "cropSize"];
var uh = es.map(([e2]) => e2).filter((e2) => !dh.includes(e2));
var hh = (e2, t2) => new CustomEvent("ping", { detail: { type: e2, data: t2 }, cancelable: true, bubbles: true });
var ph = (e2) => ((e3) => /textarea/i.test(e3.nodeName))(e2) || ((e3) => /date|email|number|search|text|url/.test(e3.type))(e2) || e2.isContentEditable;
var mh = (e2, t2) => (t2 ? Ys(e2, t2) : e2).replace(/([a-z])([A-Z])/g, "$1-$2").replace(/\s+/g, "-").toLowerCase();
var gh = (e2, t2 = j) => {
  const { subscribe: o2, set: i2 } = Ca(void 0);
  return { subscribe: o2, destroy: ((e3, t3) => {
    const o3 = matchMedia(e3);
    return o3.addListener(t3), t3(o3), { get matches() {
      return o3.matches;
    }, destroy: () => o3.removeListener(t3) };
  })(e2, ({ matches: e3 }) => i2(t2(e3))).destroy };
};
var $h = (e2) => /video/.test(e2.type);
var fh = (e2, t2, o2) => new Promise((i2, n2) => {
  (async () => {
    $h(e2) && i2(await ((e3) => new Promise((t3, o3) => {
      const i3 = p("video");
      i3.onseeked = () => {
        const e4 = p("canvas");
        Ht(i3).then(({ width: o4, height: n3 }) => {
          e4.width = o4, e4.height = n3;
          const r3 = e4.getContext("2d", { willReadFrequently: true }), a3 = () => {
            r3.drawImage(i3, 0, 0, e4.width, e4.height);
            const o5 = r3.getImageData(0, 0, e4.width, e4.height);
            g(e4), t3(o5);
          };
          Vt() ? setTimeout(a3, 16) : a3();
        });
      }, i3.onloadeddata = () => {
        i3.currentTime = 0;
      }, i3.onerror = (e4) => {
        console.error(e4), o3(i3.error);
      }, i3.src = URL.createObjectURL(e3), i3.load();
    }))(e2));
    const r2 = await t2.read(e2), a2 = (e3) => F(e3, o2).then((e4) => t2.apply(e4, r2)).then(i2).catch(n2);
    if (I(e2) || !R() || Vt() || lo())
      return a2(e2);
    let s2;
    try {
      s2 = await L((e3, t3) => createImageBitmap(e3).then((e4) => t3(null, e4)).catch(t3), [e2]);
    } catch (e3) {
    }
    s2 && s2.width ? await u() ? vl() && r2 > 1 ? i2(await (async (e3) => h(await v(e3)))(s2)) : i2(s2) : i2(t2.apply(s2, r2)) : a2(e2);
  })();
});
var yh = (e2, t2) => new Promise(async (o2) => {
  if (e2.width < t2.width && e2.height < t2.height)
    return o2(e2);
  const i2 = Math.min(t2.width / e2.width, t2.height / e2.height), n2 = i2 * e2.width, r2 = i2 * e2.height, a2 = p("canvas", { width: n2, height: r2 }), s2 = a2.getContext("2d", { willReadFrequently: true }), l2 = $(e2) ? await v(e2) : e2;
  s2.drawImage(l2, 0, 0, n2, r2), o2(h(a2));
});
var bh = (e2) => (e2 = e2.trim(), /^rgba/.test(e2) ? e2.substr(5).split(",").map(parseFloat).map((e3, t2) => e3 / (3 === t2 ? 1 : 255)) : /^rgb/.test(e2) ? e2.substr(4).split(",").map(parseFloat).map((e3) => e3 / 255) : /^#/.test(e2) ? ((e3) => {
  const [, t2, o2, i2] = e3.split("");
  e3 = 4 === e3.length ? `#${t2}${t2}${o2}${o2}${i2}${i2}` : e3;
  const [, n2, r2, a2] = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e3);
  return [n2, r2, a2].map((e4) => parseInt(e4, 16) / 255);
})(e2) : /[0-9]{1,3}\s?,\s?[0-9]{1,3}\s?,\s?[0-9]{1,3}/.test(e2) ? e2.split(",").map((e3) => parseInt(e3, 10)).map((e3) => e3 / 255) : void 0);
var xh = null;
var vh = () => {
  if (null === xh) {
    let e2 = p("canvas");
    xh = !!ul(e2), g(e2), e2 = void 0;
  }
  return xh;
};
var wh = [1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0];
var Sh = { precision: 1e-4 };
var kh = { precision: 0.01 * Sh.precision };
var Ch = () => {
  const e2 = [], t2 = [], o2 = [], i2 = () => {
    t2.forEach((e3) => e3(o2));
  }, n2 = (t3) => {
    t3.unsub = t3.subscribe((n3) => ((t4, n4) => {
      const r2 = e2.indexOf(t4);
      r2 < 0 || (o2[r2] = n4, i2());
    })(t3, n3)), i2();
  };
  return { get length() {
    return e2.length;
  }, clear: () => {
    e2.forEach((e3) => e3.unsub()), e2.length = 0, o2.length = 0;
  }, unshift: (t3) => {
    e2.unshift(t3), n2(t3);
  }, get: (t3) => e2[t3], push: (t3) => {
    e2.push(t3), n2(t3);
  }, remove: (t3) => {
    t3.unsub();
    const i3 = e2.indexOf(t3);
    e2.splice(i3, 1), o2.splice(i3, 1);
  }, forEach: (t3) => e2.forEach(t3), filter: (t3) => e2.filter(t3), subscribe: (e3) => (t2.push(e3), e3(o2), () => {
    t2.splice(t2.indexOf(e3), 1);
  }) };
};
var Mh = (e2) => e2[0] < 0.25 && e2[1] < 0.25 && e2[2] < 0.25;
var Th = (e2 = {}) => new Promise((t2) => {
  const { accept: o2 = "image/*" } = e2, i2 = p("input", { style: "position:absolute;visibility:hidden;width:0;height:0;", type: "file", accept: o2 }), n2 = () => {
    const [e3] = i2.files;
    i2.parentNode && i2.remove(), i2.removeEventListener("change", n2), t2(e3);
  };
  i2.addEventListener("change", n2), lo() && document.body.append(i2), i2.click();
});
var Ph = (e2) => {
  try {
    return e2();
  } catch (e3) {
    console.error(e3);
  }
};
var Rh = ([e2, t2]) => e2 + 0.5 * (t2 - e2);
var Ih = (e2) => Math.round(100 * e2);
var Ah = (e2) => ce(e2.clientX, e2.clientY);
var Eh = (e2, t2, o2) => {
  const i2 = Ah(e2);
  return xe(xe(i2, t2), o2);
};
function Lh(e2, t2, o2) {
  let i2, n2, r2, a2, s2, l2, c2, d2, u2, h2, p2, m2, g2, $2, f2, y2, b2, x2, v2, w2, { root: S2 } = t2, { locale: k2 } = t2, { stores: C2 } = t2, { allowPan: M2 = true } = t2, { allowZoom: T2 = true } = t2, { enablePan: P2 = true } = t2, { enableZoom: R2 = true } = t2, { enableZoomControls: I2 = R2 } = t2, { enableZoomInput: A2 = true } = t2, { enablePanInput: E2 = true } = t2, { enablePanLimit: L2 = true } = t2, { panLimitGutterScalar: F2 = 0 } = t2, { zoomOptions: z2 = [0.25, 0.5, 1, 1.25, 1.5, 2, 3, 4, 6, 8, 16] } = t2, { zoomAdjustStep: B2 = 0.25 } = t2, { zoomAdjustFactor: O2 = 0.1 } = t2, { zoomAdjustWheelFactor: D2 = 1 } = t2, { elasticity: W2 = 5 } = t2, { imageSelectionRectCentered: _2 } = t2, { imageSelectionRectScalar: V2 } = t2, { zoomLevel: N2 = null } = t2, { zoomControls: H2 } = t2, { zoomMultiTouching: j2 = false } = t2;
  const { isAnimated: U2, isInteracting: Z2, rootRect: X2, stageRect: G2, stageScalar: Y2, imageSelectionPan: q2, imageSelectionZoom: K2, imageSelectionStageFitScalar: J2, imageSelectionRect: Q2, imageSelectionStoredState: ee2, imagePreviewUpscale: te2 } = C2;
  Un(e2, U2, (e3) => o2(68, v2 = e3)), Un(e2, Z2, (e3) => o2(67, b2 = e3)), Un(e2, X2, (e3) => o2(65, f2 = e3)), Un(e2, G2, (e3) => o2(64, $2 = e3)), Un(e2, Y2, (e3) => o2(45, x2 = e3)), Un(e2, q2, (e3) => o2(63, p2 = e3)), Un(e2, K2, (e3) => o2(42, h2 = e3)), Un(e2, J2, (e3) => o2(43, m2 = e3)), Un(e2, Q2, (e3) => o2(66, y2 = e3)), Un(e2, ee2, (e3) => o2(69, w2 = e3)), Un(e2, te2, (e3) => o2(44, g2 = e3));
  let oe2 = false, ie2 = void 0, ne2 = void 0, re2 = void 0, ae2 = void 0;
  const se2 = (e3) => {
    const t3 = S2.querySelector(".PinturaMain > .PinturaUtilMain") || S2.querySelector('div[tabindex="0"] .PinturaUtilMain');
    return !!t3 && (!!t3.contains(e3.target) && !ph(e3.target));
  }, de2 = (e3 = {}) => {
    const { pan: t3 = p2, zoom: o3 = h2 } = e3;
    Qn(ee2, w2 = { translation: t3, zoom: o3 }, w2);
  }, he2 = () => p2 && 0 === p2.x && 0 === p2.y, pe2 = () => {
    Qn(K2, h2 = void 0, h2), he2() || Qn(q2, p2 = le(), p2), $e2.set(void 0, { hard: true });
  }, ge2 = () => {
    pe2(), de2();
  }, $e2 = _l(void 0, { precision: 0.01 });
  $e2.subscribe((e3) => {
    if (void 0 === e3)
      return Qn(K2, h2 = void 0, h2), void (he2() || Qn(q2, p2 = le(), p2));
    const t3 = h2;
    e3 <= 1 ? he2() || Qn(q2, p2 = le(), p2) : e3 <= t3 && Qn(q2, p2 = we(p2, 0.8), p2), Qn(K2, h2 = e3, h2);
  });
  const fe2 = (e3) => {
    $e2.update((t3) => {
      const o3 = e3(t3 || m2);
      return de2({ zoom: o3 }), o3;
    });
  }, ye2 = (e3) => {
    e3 ? $e2.set(e3, { hard: false === v2 }) : (e3 = void 0, $e2.set(void 0, { hard: true })), Qn(K2, h2 = e3, h2), de2({ zoom: e3 });
  }, be2 = (e3, t3) => {
    const o3 = V2 * t3, i3 = { ..._2 }, n3 = 1 - Ua(F2, 0, 1);
    rt(i3, o3 < n3 ? o3 : n3);
    const r3 = { ..._2 };
    rt(r3, o3), nt(r3, e3);
    const a3 = { ...r3 };
    return r3.x > i3.x && (a3.x = i3.x), r3.y > i3.y && (a3.y = i3.y), r3.x + r3.width < i3.x + i3.width && (a3.x = i3.x + i3.width - r3.width), r3.y + r3.height < i3.y + i3.height && (a3.y = i3.y + i3.height - r3.height), xe(it(a3), it(i3));
  }, Se2 = ({ translation: e3, zoom: t3 = 1, elastify: o3 = true }) => {
    if (!ie2)
      return;
    let i3 = e3;
    const n3 = ce(ie2.x + i3.x, ie2.y + i3.y);
    if (!L2)
      return n3;
    const r3 = be2(n3, t3);
    return o3 ? td(r3, n3, W2) : r3;
  };
  let ke2, Ce2;
  const Me2 = () => {
    Ce2 = void 0, Qn(Z2, b2 = true, b2), o2(33, oe2 = E2), ke2 = false, re2 = false, ie2 = { ...p2 }, ne2 = g2 ? h2 || m2 : r2 ? h2 || 1 : h2 || m2;
  }, Te2 = (e3) => {
    const { scalar: t3, translation: n3, isMultiTouching: r3 } = e3.detail;
    if (!ie2 || !r3 && !E2)
      return;
    r3 && we(n3, 0.5), (E2 || r3) && (ke2 = true), j2 || o2(12, j2 = r3);
    const a3 = i2 ? Ua(ne2 * t3, s2, l2) : 1, c3 = Se2({ translation: n3, zoom: a3, elastify: true }), d3 = me(c3);
    ae2 = me(p2), re2 = d3 < ae2, i2 && K2.set(a3), q2.set(c3), Ce2 = j2 && { translation: e3.detail.translation, scalar: t3 };
  }, Pe2 = (e3) => {
    Qn(Z2, b2 = false, b2), o2(33, oe2 = false), o2(12, j2 = false), re2 && ae2 < 50 && (ie2 = void 0, ne2 = void 0, q2.set(le()));
  }, Re2 = (e3) => {
    Qn(Z2, b2 = false, b2), o2(33, oe2 = false), o2(12, j2 = false), Promise.resolve().then(() => {
      if (ke2 && ie2) {
        const t3 = Ce2 || e3.detail, o3 = i2 ? Ua(ne2 * t3.scalar, s2, l2) : 1, n3 = Se2({ elastify: false, translation: t3.translation, zoom: o3 });
        q2.set(n3);
      }
      ie2 = void 0, ne2 = void 0, E2 && e3.detail.isDoubleTap && ge2(), de2();
    });
  };
  let Ie2, Ae2 = Date.now(), Ee2 = 0, Le2 = false, Fe2 = false;
  const ze2 = (e3) => {
    if (!se2(e3))
      return;
    if (e3.preventDefault(), e3.stopPropagation(), Fe2)
      return;
    clearTimeout(Ie2);
    const t3 = id(e3), o3 = Date.now(), i3 = o3 - Ae2;
    Ae2 = o3;
    const n3 = Math.abs(t3 / i3) > 0.2;
    Ee2 = n3 ? Ee2 + 1 : 0;
    const r3 = 1 + -1 * t3 * D2 / (n3 ? 50 : 100), a3 = Eh(e3, f2, $2);
    Be2(a3, r3, { isZoomingFast: n3 });
  }, Be2 = (e3, t3, { isZoomingFast: o3 }) => {
    const i3 = g2 ? h2 || m2 : r2 ? h2 || 1 : h2 || m2, n3 = i3 * t3, a3 = le(), c3 = p2, d3 = g2 ? m2 : r2 ? 1 : m2, u3 = Math.abs(n3 - d3), $3 = n3 < i3, f3 = i3 > d3 && $3 || i3 < d3 && n3 > i3, b3 = Ee2 >= 5;
    if (o3 || (Le2 = false), Ee2 > 0 && !Le2 && (Le2 = f3), b3 && Le2)
      return ge2(), Fe2 = true, void setTimeout(() => {
        Fe2 = false;
      }, 100);
    if (b3)
      return;
    !o3 && f3 && u3 <= 0.05 && (Ie2 = setTimeout(() => {
      ge2();
    }, 250)), Qn(K2, h2 = Ua(n3, s2, l2), h2);
    const x3 = Ye(y2);
    rt(x3, i3), nt(x3, c3);
    const v3 = it(x3), w3 = Ye(x3);
    rt(w3, h2 - i3 + 1, e3);
    const S3 = it(w3), k3 = ve(xe(S3, v3), i3);
    ((e4, t4, o4) => {
      e4.x = t4, e4.y = o4;
    })(a3, c3.x + k3.x, c3.y + k3.y), Qn(q2, p2 = $3 && o3 ? we(ue(p2), 0.85) : be2(a3, i3), p2), de2();
  }, Oe2 = (e3) => (e3 ? "add" : "remove") + "EventListener";
  let De2, We2, _e2, Ve2;
  const Ne2 = (e3) => {
    e3.preventDefault(), We2 = { ...p2 }, Ve2 = Ye(y2), _e2 = Eh(e3, f2, $2), De2 = g2 ? h2 || m2 : r2 ? h2 || 1 : h2 || m2;
  }, He2 = (e3) => {
    e3.preventDefault(), Qn(K2, h2 = Ua(e3.scale * De2, s2, l2), h2);
    const t3 = Ye(Ve2);
    rt(t3, De2), nt(t3, We2);
    const o3 = it(t3), i3 = Ye(t3);
    rt(i3, h2 - De2 + 1, _e2);
    const n3 = it(i3), r3 = ve(xe(n3, o3), De2), a3 = { x: We2.x + r3.x, y: We2.y + r3.y };
    Qn(q2, p2 = be2(a3, h2), p2);
  }, je2 = (e3) => {
    e3.preventDefault();
  }, Ue2 = (e3) => {
    S2[Oe2(e3)]("wheel", ze2), lo() || (S2[Oe2(e3)]("gesturestart", Ne2), S2[Oe2(e3)]("gesturechange", He2), S2[Oe2(e3)]("gestureend", je2));
  }, Ze2 = (e3) => {
    const t3 = Oe2(e3);
    S2[t3]("interactionstart", Me2), S2[t3]("interactionupdate", Te2), S2[t3]("interactionrelease", Pe2), S2[t3]("interactionend", Re2);
  };
  let Xe2;
  return Fr(() => {
    Xe2 = Kc(S2, { drag: true, pinch: true, inertia: true, inertiaDurationMultiplier: 10, shouldStartInteraction: se2 });
  }), Br(() => {
    Ue2(false), Ze2(false), Xe2.destroy(), Xe2 = void 0;
  }), e2.$$set = (e3) => {
    "root" in e3 && o2(13, S2 = e3.root), "locale" in e3 && o2(14, k2 = e3.locale), "stores" in e3 && o2(15, C2 = e3.stores), "allowPan" in e3 && o2(16, M2 = e3.allowPan), "allowZoom" in e3 && o2(17, T2 = e3.allowZoom), "enablePan" in e3 && o2(18, P2 = e3.enablePan), "enableZoom" in e3 && o2(19, R2 = e3.enableZoom), "enableZoomControls" in e3 && o2(20, I2 = e3.enableZoomControls), "enableZoomInput" in e3 && o2(21, A2 = e3.enableZoomInput), "enablePanInput" in e3 && o2(22, E2 = e3.enablePanInput), "enablePanLimit" in e3 && o2(23, L2 = e3.enablePanLimit), "panLimitGutterScalar" in e3 && o2(24, F2 = e3.panLimitGutterScalar), "zoomOptions" in e3 && o2(25, z2 = e3.zoomOptions), "zoomAdjustStep" in e3 && o2(26, B2 = e3.zoomAdjustStep), "zoomAdjustFactor" in e3 && o2(27, O2 = e3.zoomAdjustFactor), "zoomAdjustWheelFactor" in e3 && o2(28, D2 = e3.zoomAdjustWheelFactor), "elasticity" in e3 && o2(29, W2 = e3.elasticity), "imageSelectionRectCentered" in e3 && o2(30, _2 = e3.imageSelectionRectCentered), "imageSelectionRectScalar" in e3 && o2(31, V2 = e3.imageSelectionRectScalar), "zoomLevel" in e3 && o2(32, N2 = e3.zoomLevel), "zoomControls" in e3 && o2(11, H2 = e3.zoomControls), "zoomMultiTouching" in e3 && o2(12, j2 = e3.zoomMultiTouching);
  }, e2.$$.update = () => {
    var t3, $3;
    2752512 & e2.$$.dirty[0] && o2(35, i2 = T2 && R2 && A2), 327680 & e2.$$.dirty[0] && o2(34, n2 = M2 && P2), 196608 & e2.$$.dirty[0] && (M2 || T2 ? (Qn(K2, h2 = R2 ? w2.zoom : void 0, h2), Qn(q2, p2 = P2 ? ue(w2.translation) : he2() ? p2 : le(), p2), $e2.set(h2)) : pe2()), 16384 & e2.$$.dirty[1] && (r2 = x2 >= 1), 33570816 & e2.$$.dirty[0] | 28672 & e2.$$.dirty[1] && o2(39, a2 = [(g2 || x2 < 1) && [m2, Ih(m2) + "%", { sublabel: k2.labelZoomFit }], ...z2.map((e3) => [e3, Ih(e3) + "%"])].filter(Boolean).map((e3) => (1 === e3[0] && (e3[2] = { sublabel: k2.labelZoomActual }), e3)).sort((e3, t4) => {
      const o3 = e3[0] || m2, i3 = t4[0] || m2;
      return o3 < i3 ? -1 : i3 < o3 ? 1 : 0;
    })), 4352 & e2.$$.dirty[1] && o2(37, s2 = Math.min(a2.reduce((e3, [t4]) => t4 < e3 ? t4 : e3, Number.MAX_SAFE_INTEGER), m2)), 256 & e2.$$.dirty[1] && o2(36, l2 = a2.reduce((e3, [t4]) => t4 > e3 ? t4 : e3, Number.MIN_SAFE_INTEGER)), 2 & e2.$$.dirty[1] && null !== N2 && ye2(N2), 30720 & e2.$$.dirty[1] && o2(41, d2 = h2 || (g2 || x2 < 1 ? m2 : 1)), 1280 & e2.$$.dirty[1] && o2(38, (t3 = a2.map(([e3]) => e3), $3 = d2, c2 = t3.findIndex((e3) => e3 === $3))), 1024 & e2.$$.dirty[1] && o2(40, u2 = Ih(d2) + "%"), 202522624 & e2.$$.dirty[0] | 3040 & e2.$$.dirty[1] && o2(11, H2 = (T2 || T2) && I2 ? [["Button", "zoom-out", { hideLabel: true, label: k2.labelZoomOut, icon: k2.iconZoomOut, disabled: h2 === s2, onclick: () => fe2((e3) => Math.max(s2, e3 - B2)), onhold: () => fe2((e3) => Math.max(s2, e3 * (1 - O2))) }], ["Dropdown", "zoom-level", { label: u2, labelClass: "PinturaFixedWidthCharacters", options: a2, selectedIndex: c2, onchange: (e3) => ye2(e3.value) }], ["Button", "zoom-in", { hideLabel: true, label: k2.labelZoomIn, icon: k2.iconZoomIn, disabled: h2 === l2, onclick: () => fe2((e3) => Math.min(l2, e3 + B2)), onhold: () => fe2((e3) => Math.min(l2, e3 * (1 + O2))) }]] : []), 8192 & e2.$$.dirty[0] | 16 & e2.$$.dirty[1] && S2 && Ue2(i2), 8192 & e2.$$.dirty[0] | 8 & e2.$$.dirty[1] && S2 && Ze2(n2), 4202496 & e2.$$.dirty[0] | 12 & e2.$$.dirty[1] && S2 && S2.style.setProperty("--cursor", n2 && E2 ? oe2 ? "grabbing" : "grab" : "");
  }, [U2, Z2, X2, G2, Y2, q2, K2, J2, Q2, ee2, te2, H2, j2, S2, k2, C2, M2, T2, P2, R2, I2, A2, E2, L2, F2, z2, B2, O2, D2, W2, _2, V2, N2, oe2, n2, i2, l2, s2, c2, a2, u2, d2, h2, m2, g2, x2];
}
var Fh = class extends wa {
  constructor(e2) {
    super(), va(this, e2, Lh, null, Nn, { root: 13, locale: 14, stores: 15, allowPan: 16, allowZoom: 17, enablePan: 18, enableZoom: 19, enableZoomControls: 20, enableZoomInput: 21, enablePanInput: 22, enablePanLimit: 23, panLimitGutterScalar: 24, zoomOptions: 25, zoomAdjustStep: 26, zoomAdjustFactor: 27, zoomAdjustWheelFactor: 28, elasticity: 29, imageSelectionRectCentered: 30, imageSelectionRectScalar: 31, zoomLevel: 32, zoomControls: 11, zoomMultiTouching: 12 }, null, [-1, -1, -1, -1]);
  }
};
var zh = (e2) => new Promise((t2) => {
  const o2 = new FileReader();
  o2.onload = () => t2(o2.result), o2.readAsArrayBuffer(e2);
});
var Bh = (e2, { limit: t2 = 1024 } = {}) => {
  let o2 = 0;
  o2 += 4;
  if (1718909296 !== e2.getUint32(o2))
    return 0;
  o2 += 4;
  if (1836069938 !== e2.getUint32(o2))
    return 0;
  let i2 = false, n2 = -1;
  for (let r3 = o2; r3 < t2; r3++) {
    if (i2 || 1953653099 !== e2.getUint32(r3) || (i2 = true, r3 += 4), !i2)
      continue;
    if (64 == e2.getUint8(r3)) {
      n2 = r3;
      break;
    }
  }
  if (n2 < 0)
    return 0;
  const r2 = e2.getUint32(n2 - 28), a2 = e2.getUint32(n2 - 20), s2 = e2.getUint32(n2 - 32), l2 = e2.getUint32(n2 - 16);
  return 65536 === r2 && 4294901760 === a2 ? 90 : 4294901760 === s2 && 4294901760 === l2 ? 180 : 4294901760 === r2 && 65536 === a2 ? 270 : 0;
};
var { window: Oh } = ua;
function Dh(e2) {
  let t2, o2, i2, n2 = e2[41] && Wh(e2), r2 = e2[38] && Gh(e2);
  return { c() {
    n2 && n2.c(), t2 = gr(), r2 && r2.c(), o2 = $r();
  }, m(e3, a2) {
    n2 && n2.m(e3, a2), dr(e3, t2, a2), r2 && r2.m(e3, a2), dr(e3, o2, a2), i2 = true;
  }, p(e3, i3) {
    e3[41] ? n2 ? (n2.p(e3, i3), 1024 & i3[1] && sa(n2, 1)) : (n2 = Wh(e3), n2.c(), sa(n2, 1), n2.m(t2.parentNode, t2)) : n2 && (ra(), la(n2, 1, 1, () => {
      n2 = null;
    }), aa()), e3[38] ? r2 ? (r2.p(e3, i3), 128 & i3[1] && sa(r2, 1)) : (r2 = Gh(e3), r2.c(), sa(r2, 1), r2.m(o2.parentNode, o2)) : r2 && (ra(), la(r2, 1, 1, () => {
      r2 = null;
    }), aa());
  }, i(e3) {
    i2 || (sa(n2), sa(r2), i2 = true);
  }, o(e3) {
    la(n2), la(r2), i2 = false;
  }, d(e3) {
    n2 && n2.d(e3), e3 && ur(t2), r2 && r2.d(e3), e3 && ur(o2);
  } };
}
function Wh(e2) {
  let t2, o2, i2, n2, r2, a2;
  const s2 = [Vh, _h], l2 = [];
  function c2(e3, t3) {
    return e3[39] ? 0 : e3[34] ? 1 : -1;
  }
  return ~(i2 = c2(e2)) && (n2 = l2[i2] = s2[i2](e2)), { c() {
    t2 = hr("div"), o2 = hr("p"), n2 && n2.c(), xr(o2, "style", e2[68]), xr(t2, "class", "PinturaStatus"), xr(t2, "style", r2 = "opacity: " + e2[53]);
  }, m(e3, n3) {
    dr(e3, t2, n3), sr(t2, o2), ~i2 && l2[i2].m(o2, null), a2 = true;
  }, p(e3, d2) {
    let u2 = i2;
    i2 = c2(e3), i2 === u2 ? ~i2 && l2[i2].p(e3, d2) : (n2 && (ra(), la(l2[u2], 1, 1, () => {
      l2[u2] = null;
    }), aa()), ~i2 ? (n2 = l2[i2], n2 ? n2.p(e3, d2) : (n2 = l2[i2] = s2[i2](e3), n2.c()), sa(n2, 1), n2.m(o2, null)) : n2 = null), (!a2 || 64 & d2[2]) && xr(o2, "style", e3[68]), (!a2 || 4194304 & d2[1] && r2 !== (r2 = "opacity: " + e3[53])) && xr(t2, "style", r2);
  }, i(e3) {
    a2 || (sa(n2), a2 = true);
  }, o(e3) {
    la(n2), a2 = false;
  }, d(e3) {
    e3 && ur(t2), ~i2 && l2[i2].d();
  } };
}
function _h(e2) {
  let t2, o2, i2, n2;
  t2 = new dd({ props: { text: e2[34].text || "", onmeasure: e2[199] } });
  let r2 = e2[34].aside && Nh(e2);
  return { c() {
    ya(t2.$$.fragment), o2 = gr(), r2 && r2.c(), i2 = $r();
  }, m(e3, a2) {
    ba(t2, e3, a2), dr(e3, o2, a2), r2 && r2.m(e3, a2), dr(e3, i2, a2), n2 = true;
  }, p(e3, o3) {
    const n3 = {};
    8 & o3[1] && (n3.text = e3[34].text || ""), t2.$set(n3), e3[34].aside ? r2 ? (r2.p(e3, o3), 8 & o3[1] && sa(r2, 1)) : (r2 = Nh(e3), r2.c(), sa(r2, 1), r2.m(i2.parentNode, i2)) : r2 && (ra(), la(r2, 1, 1, () => {
      r2 = null;
    }), aa());
  }, i(e3) {
    n2 || (sa(t2.$$.fragment, e3), sa(r2), n2 = true);
  }, o(e3) {
    la(t2.$$.fragment, e3), la(r2), n2 = false;
  }, d(e3) {
    xa(t2, e3), e3 && ur(o2), r2 && r2.d(e3), e3 && ur(i2);
  } };
}
function Vh(e2) {
  let t2, o2, i2, n2;
  return t2 = new dd({ props: { text: e2[39], onmeasure: e2[199] } }), i2 = new $d({ props: { class: "PinturaStatusIcon", offset: e2[78], opacity: e2[79], $$slots: { default: [Xh] }, $$scope: { ctx: e2 } } }), { c() {
    ya(t2.$$.fragment), o2 = gr(), ya(i2.$$.fragment);
  }, m(e3, r2) {
    ba(t2, e3, r2), dr(e3, o2, r2), ba(i2, e3, r2), n2 = true;
  }, p(e3, o3) {
    const n3 = {};
    256 & o3[1] && (n3.text = e3[39]), t2.$set(n3);
    const r2 = {};
    65536 & o3[2] && (r2.offset = e3[78]), 131072 & o3[2] && (r2.opacity = e3[79]), 8 & o3[0] | 32 & o3[17] && (r2.$$scope = { dirty: o3, ctx: e3 }), i2.$set(r2);
  }, i(e3) {
    n2 || (sa(t2.$$.fragment, e3), sa(i2.$$.fragment, e3), n2 = true);
  }, o(e3) {
    la(t2.$$.fragment, e3), la(i2.$$.fragment, e3), n2 = false;
  }, d(e3) {
    xa(t2, e3), e3 && ur(o2), xa(i2, e3);
  } };
}
function Nh(e2) {
  let t2, o2;
  return t2 = new $d({ props: { class: "PinturaStatusButton", offset: e2[78], opacity: e2[79], $$slots: { default: [Uh] }, $$scope: { ctx: e2 } } }), { c() {
    ya(t2.$$.fragment);
  }, m(e3, i2) {
    ba(t2, e3, i2), o2 = true;
  }, p(e3, o3) {
    const i2 = {};
    65536 & o3[2] && (i2.offset = e3[78]), 131072 & o3[2] && (i2.opacity = e3[79]), 8 & o3[1] | 32 & o3[17] && (i2.$$scope = { dirty: o3, ctx: e3 }), t2.$set(i2);
  }, i(e3) {
    o2 || (sa(t2.$$.fragment, e3), o2 = true);
  }, o(e3) {
    la(t2.$$.fragment, e3), o2 = false;
  }, d(e3) {
    xa(t2, e3);
  } };
}
function Hh(e2) {
  let t2, o2;
  return t2 = new pd({ props: { progress: e2[34].progressIndicator.progress } }), { c() {
    ya(t2.$$.fragment);
  }, m(e3, i2) {
    ba(t2, e3, i2), o2 = true;
  }, p(e3, o3) {
    const i2 = {};
    8 & o3[1] && (i2.progress = e3[34].progressIndicator.progress), t2.$set(i2);
  }, i(e3) {
    o2 || (sa(t2.$$.fragment, e3), o2 = true);
  }, o(e3) {
    la(t2.$$.fragment, e3), o2 = false;
  }, d(e3) {
    xa(t2, e3);
  } };
}
function jh(e2) {
  let t2, o2;
  const i2 = [e2[34].closeButton, { hideLabel: true }];
  let n2 = {};
  for (let e3 = 0; e3 < i2.length; e3 += 1)
    n2 = On(n2, i2[e3]);
  return t2 = new Gc({ props: n2 }), { c() {
    ya(t2.$$.fragment);
  }, m(e3, i3) {
    ba(t2, e3, i3), o2 = true;
  }, p(e3, o3) {
    const n3 = 8 & o3[1] ? ga(i2, [$a(e3[34].closeButton), i2[1]]) : {};
    t2.$set(n3);
  }, i(e3) {
    o2 || (sa(t2.$$.fragment, e3), o2 = true);
  }, o(e3) {
    la(t2.$$.fragment, e3), o2 = false;
  }, d(e3) {
    xa(t2, e3);
  } };
}
function Uh(e2) {
  let t2, o2, i2, n2 = e2[34].progressIndicator.visible && Hh(e2), r2 = e2[34].closeButton && e2[34].text && jh(e2);
  return { c() {
    n2 && n2.c(), t2 = gr(), r2 && r2.c(), o2 = $r();
  }, m(e3, a2) {
    n2 && n2.m(e3, a2), dr(e3, t2, a2), r2 && r2.m(e3, a2), dr(e3, o2, a2), i2 = true;
  }, p(e3, i3) {
    e3[34].progressIndicator.visible ? n2 ? (n2.p(e3, i3), 8 & i3[1] && sa(n2, 1)) : (n2 = Hh(e3), n2.c(), sa(n2, 1), n2.m(t2.parentNode, t2)) : n2 && (ra(), la(n2, 1, 1, () => {
      n2 = null;
    }), aa()), e3[34].closeButton && e3[34].text ? r2 ? (r2.p(e3, i3), 8 & i3[1] && sa(r2, 1)) : (r2 = jh(e3), r2.c(), sa(r2, 1), r2.m(o2.parentNode, o2)) : r2 && (ra(), la(r2, 1, 1, () => {
      r2 = null;
    }), aa());
  }, i(e3) {
    i2 || (sa(n2), sa(r2), i2 = true);
  }, o(e3) {
    la(n2), la(r2), i2 = false;
  }, d(e3) {
    n2 && n2.d(e3), e3 && ur(t2), r2 && r2.d(e3), e3 && ur(o2);
  } };
}
function Zh(e2) {
  let t2, o2 = e2[3].iconSupportError + "";
  return { c() {
    t2 = pr("g");
  }, m(e3, i2) {
    dr(e3, t2, i2), t2.innerHTML = o2;
  }, p(e3, i2) {
    8 & i2[0] && o2 !== (o2 = e3[3].iconSupportError + "") && (t2.innerHTML = o2);
  }, d(e3) {
    e3 && ur(t2);
  } };
}
function Xh(e2) {
  let t2, o2;
  return t2 = new _c({ props: { $$slots: { default: [Zh] }, $$scope: { ctx: e2 } } }), { c() {
    ya(t2.$$.fragment);
  }, m(e3, i2) {
    ba(t2, e3, i2), o2 = true;
  }, p(e3, o3) {
    const i2 = {};
    8 & o3[0] | 32 & o3[17] && (i2.$$scope = { dirty: o3, ctx: e3 }), t2.$set(i2);
  }, i(e3) {
    o2 || (sa(t2.$$.fragment, e3), o2 = true);
  }, o(e3) {
    la(t2.$$.fragment, e3), o2 = false;
  }, d(e3) {
    xa(t2, e3);
  } };
}
function Gh(e2) {
  let t2, o2, i2, n2, r2, a2, s2, l2, c2, d2, u2, h2, p2, m2, g2 = e2[10] && Yh(e2), $2 = e2[45] && e2[44] && qh(e2);
  const f2 = [tp, ep], y2 = [];
  function b2(e3, t3) {
    return e3[45] ? 0 : 1;
  }
  function x2(t3) {
    e2[386](t3);
  }
  function v2(t3) {
    e2[387](t3);
  }
  function w2(t3) {
    e2[388](t3);
  }
  i2 = b2(e2), n2 = y2[i2] = f2[i2](e2), a2 = new uc({ props: { isAnimated: e2[52], isTransparent: e2[19], pixelRatio: e2[56], textPixelRatio: e2[6], backgroundColor: e2[55], maskRect: e2[57], maskOpacity: e2[69] ? e2[69].maskOpacity : 1, maskMarkupOpacity: e2[7], maskFrameOpacity: e2[5], clipAnnotationsToImage: e2[81], images: e2[54], interfaceImages: e2[82], loadImageData: e2[27], enableGrid: e2[11], gridSize: e2[83], gridColors: [e2[84], e2[85]], gridOpacity: e2[86], willRequest: e2[77] || e2[87], willRender: e2[383], didRender: e2[384] } });
  let S2 = { root: e2[2], locale: e2[3], stores: e2[185], allowPan: e2[89], enablePan: e2[16], enablePanLimit: e2[20], panLimitGutterScalar: e2[21], enablePanInput: e2[90], allowZoom: e2[91], enableZoom: e2[17], enableZoomInput: void 0 !== e2[18] ? e2[18] : e2[92], enableZoomControls: e2[93], zoomOptions: e2[12] || e2[22], zoomAdjustStep: e2[13] || e2[23], zoomAdjustFactor: e2[14] || e2[24], zoomAdjustWheelFactor: e2[15] || e2[25], imageSelectionRectCentered: e2[94], imageSelectionRectScalar: e2[95], elasticity: rp * e2[8] };
  return void 0 !== e2[0] && (S2.zoomLevel = e2[0]), void 0 !== e2[32] && (S2.zoomControls = e2[32]), void 0 !== e2[33] && (S2.zoomMultiTouching = e2[33]), d2 = new Fh({ props: S2 }), Nr.push(() => fa(d2, "zoomLevel", x2)), Nr.push(() => fa(d2, "zoomControls", v2)), Nr.push(() => fa(d2, "zoomMultiTouching", w2)), { c() {
    g2 && g2.c(), t2 = gr(), $2 && $2.c(), o2 = gr(), n2.c(), r2 = gr(), ya(a2.$$.fragment), s2 = gr(), l2 = hr("div"), c2 = gr(), ya(d2.$$.fragment), xr(l2, "class", "PinturaRootPortal");
  }, m(n3, u3) {
    g2 && g2.m(n3, u3), dr(n3, t2, u3), $2 && $2.m(n3, u3), dr(n3, o2, u3), y2[i2].m(n3, u3), dr(n3, r2, u3), ba(a2, n3, u3), dr(n3, s2, u3), dr(n3, l2, u3), e2[385](l2), dr(n3, c2, u3), ba(d2, n3, u3), m2 = true;
  }, p(e3, s3) {
    e3[10] ? g2 ? (g2.p(e3, s3), 1024 & s3[0] && sa(g2, 1)) : (g2 = Yh(e3), g2.c(), sa(g2, 1), g2.m(t2.parentNode, t2)) : g2 && (ra(), la(g2, 1, 1, () => {
      g2 = null;
    }), aa()), e3[45] && e3[44] ? $2 ? ($2.p(e3, s3), 24576 & s3[1] && sa($2, 1)) : ($2 = qh(e3), $2.c(), sa($2, 1), $2.m(o2.parentNode, o2)) : $2 && (ra(), la($2, 1, 1, () => {
      $2 = null;
    }), aa());
    let l3 = i2;
    i2 = b2(e3), i2 === l3 ? y2[i2].p(e3, s3) : (ra(), la(y2[l3], 1, 1, () => {
      y2[l3] = null;
    }), aa(), n2 = y2[i2], n2 ? n2.p(e3, s3) : (n2 = y2[i2] = f2[i2](e3), n2.c()), sa(n2, 1), n2.m(r2.parentNode, r2));
    const c3 = {};
    2097152 & s3[1] && (c3.isAnimated = e3[52]), 524288 & s3[0] && (c3.isTransparent = e3[19]), 33554432 & s3[1] && (c3.pixelRatio = e3[56]), 64 & s3[0] && (c3.textPixelRatio = e3[6]), 16777216 & s3[1] && (c3.backgroundColor = e3[55]), 67108864 & s3[1] && (c3.maskRect = e3[57]), 128 & s3[2] && (c3.maskOpacity = e3[69] ? e3[69].maskOpacity : 1), 128 & s3[0] && (c3.maskMarkupOpacity = e3[7]), 32 & s3[0] && (c3.maskFrameOpacity = e3[5]), 524288 & s3[2] && (c3.clipAnnotationsToImage = e3[81]), 8388608 & s3[1] && (c3.images = e3[54]), 1048576 & s3[2] && (c3.interfaceImages = e3[82]), 134217728 & s3[0] && (c3.loadImageData = e3[27]), 2048 & s3[0] && (c3.enableGrid = e3[11]), 2097152 & s3[2] && (c3.gridSize = e3[83]), 12582912 & s3[2] && (c3.gridColors = [e3[84], e3[85]]), 16777216 & s3[2] && (c3.gridOpacity = e3[86]), 33587200 & s3[2] && (c3.willRequest = e3[77] || e3[87]), 512 & s3[0] | 1507344 & s3[1] | 67108864 & s3[2] && (c3.willRender = e3[383]), 1879048192 & s3[1] | 3 & s3[2] && (c3.didRender = e3[384]), a2.$set(c3);
    const m3 = {};
    4 & s3[0] && (m3.root = e3[2]), 8 & s3[0] && (m3.locale = e3[3]), 134217728 & s3[2] && (m3.allowPan = e3[89]), 65536 & s3[0] && (m3.enablePan = e3[16]), 1048576 & s3[0] && (m3.enablePanLimit = e3[20]), 2097152 & s3[0] && (m3.panLimitGutterScalar = e3[21]), 268435456 & s3[2] && (m3.enablePanInput = e3[90]), 536870912 & s3[2] && (m3.allowZoom = e3[91]), 131072 & s3[0] && (m3.enableZoom = e3[17]), 262144 & s3[0] | 1073741824 & s3[2] && (m3.enableZoomInput = void 0 !== e3[18] ? e3[18] : e3[92]), 1 & s3[3] && (m3.enableZoomControls = e3[93]), 4198400 & s3[0] && (m3.zoomOptions = e3[12] || e3[22]), 8396800 & s3[0] && (m3.zoomAdjustStep = e3[13] || e3[23]), 16793600 & s3[0] && (m3.zoomAdjustFactor = e3[14] || e3[24]), 33587200 & s3[0] && (m3.zoomAdjustWheelFactor = e3[15] || e3[25]), 2 & s3[3] && (m3.imageSelectionRectCentered = e3[94]), 4 & s3[3] && (m3.imageSelectionRectScalar = e3[95]), 256 & s3[0] && (m3.elasticity = rp * e3[8]), !u2 && 1 & s3[0] && (u2 = true, m3.zoomLevel = e3[0], qr(() => u2 = false)), !h2 && 2 & s3[1] && (h2 = true, m3.zoomControls = e3[32], qr(() => h2 = false)), !p2 && 4 & s3[1] && (p2 = true, m3.zoomMultiTouching = e3[33], qr(() => p2 = false)), d2.$set(m3);
  }, i(e3) {
    m2 || (sa(g2), sa($2), sa(n2), sa(a2.$$.fragment, e3), sa(d2.$$.fragment, e3), m2 = true);
  }, o(e3) {
    la(g2), la($2), la(n2), la(a2.$$.fragment, e3), la(d2.$$.fragment, e3), m2 = false;
  }, d(n3) {
    g2 && g2.d(n3), n3 && ur(t2), $2 && $2.d(n3), n3 && ur(o2), y2[i2].d(n3), n3 && ur(r2), xa(a2, n3), n3 && ur(s2), n3 && ur(l2), e2[385](null), n3 && ur(c2), xa(d2, n3);
  } };
}
function Yh(e2) {
  let t2, o2, i2, n2, r2;
  return o2 = new ch({ props: { items: e2[65] } }), { c() {
    t2 = hr("div"), ya(o2.$$.fragment), xr(t2, "class", "PinturaNav PinturaNavTools");
  }, m(a2, s2) {
    dr(a2, t2, s2), ba(o2, t2, null), i2 = true, n2 || (r2 = [fr(t2, "measure", e2[370]), er(oc.call(null, t2))], n2 = true);
  }, p(e3, t3) {
    const i3 = {};
    8 & t3[2] && (i3.items = e3[65]), o2.$set(i3);
  }, i(e3) {
    i2 || (sa(o2.$$.fragment, e3), i2 = true);
  }, o(e3) {
    la(o2.$$.fragment, e3), i2 = false;
  }, d(e3) {
    e3 && ur(t2), xa(o2), n2 = false, _n(r2);
  } };
}
function qh(e2) {
  let t2, o2, i2;
  return o2 = new ad({ props: { elasticity: e2[8] * ap, scrollDirection: e2[71] ? "y" : "x", $$slots: { default: [Qh] }, $$scope: { ctx: e2 } } }), { c() {
    t2 = hr("div"), ya(o2.$$.fragment), xr(t2, "class", "PinturaNav PinturaNavMain");
  }, m(e3, n2) {
    dr(e3, t2, n2), ba(o2, t2, null), i2 = true;
  }, p(e3, t3) {
    const i3 = {};
    256 & t3[0] && (i3.elasticity = e3[8] * ap), 512 & t3[2] && (i3.scrollDirection = e3[71] ? "y" : "x"), 4096 & t3[1] | 12288 & t3[2] | 32 & t3[17] && (i3.$$scope = { dirty: t3, ctx: e3 }), o2.$set(i3);
  }, i(e3) {
    i2 || (sa(o2.$$.fragment, e3), i2 = true);
  }, o(e3) {
    la(o2.$$.fragment, e3), i2 = false;
  }, d(e3) {
    e3 && ur(t2), xa(o2);
  } };
}
function Kh(e2) {
  let t2, o2 = e2[531].icon + "";
  return { c() {
    t2 = pr("g");
  }, m(e3, i2) {
    dr(e3, t2, i2), t2.innerHTML = o2;
  }, p(e3, i2) {
    16 & i2[17] && o2 !== (o2 = e3[531].icon + "") && (t2.innerHTML = o2);
  }, d(e3) {
    e3 && ur(t2);
  } };
}
function Jh(e2) {
  let t2, o2, i2, n2, r2, a2 = e2[531].label + "";
  return t2 = new _c({ props: { $$slots: { default: [Kh] }, $$scope: { ctx: e2 } } }), { c() {
    ya(t2.$$.fragment), o2 = gr(), i2 = hr("span"), n2 = mr(a2);
  }, m(e3, a3) {
    ba(t2, e3, a3), dr(e3, o2, a3), dr(e3, i2, a3), sr(i2, n2), r2 = true;
  }, p(e3, o3) {
    const i3 = {};
    48 & o3[17] && (i3.$$scope = { dirty: o3, ctx: e3 }), t2.$set(i3), (!r2 || 16 & o3[17]) && a2 !== (a2 = e3[531].label + "") && wr(n2, a2);
  }, i(e3) {
    r2 || (sa(t2.$$.fragment, e3), r2 = true);
  }, o(e3) {
    la(t2.$$.fragment, e3), r2 = false;
  }, d(e3) {
    xa(t2, e3), e3 && ur(o2), e3 && ur(i2);
  } };
}
function Qh(e2) {
  let t2, o2;
  const i2 = [e2[75], { tabs: e2[74] }];
  let n2 = { $$slots: { default: [Jh, ({ tab: e3 }) => ({ 531: e3 }), ({ tab: e3 }) => [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, e3 ? 16 : 0]] }, $$scope: { ctx: e2 } };
  for (let e3 = 0; e3 < i2.length; e3 += 1)
    n2 = On(n2, i2[e3]);
  return t2 = new xc({ props: n2 }), t2.$on("select", e2[371]), { c() {
    ya(t2.$$.fragment);
  }, m(e3, i3) {
    ba(t2, e3, i3), o2 = true;
  }, p(e3, o3) {
    const n3 = 12288 & o3[2] ? ga(i2, [8192 & o3[2] && $a(e3[75]), 4096 & o3[2] && { tabs: e3[74] }]) : {};
    48 & o3[17] && (n3.$$scope = { dirty: o3, ctx: e3 }), t2.$set(n3);
  }, i(e3) {
    o2 || (sa(t2.$$.fragment, e3), o2 = true);
  }, o(e3) {
    la(t2.$$.fragment, e3), o2 = false;
  }, d(e3) {
    xa(t2, e3);
  } };
}
function ep(e2) {
  let t2, o2, i2;
  function n2(t3) {
    e2[379](t3);
  }
  let r2 = { class: "PinturaMain", content: { ...e2[46].find(e2[378]), props: e2[26][e2[43]] }, locale: e2[3], stores: e2[185] };
  return void 0 !== e2[1][e2[43]] && (r2.component = e2[1][e2[43]]), t2 = new Oc({ props: r2 }), Nr.push(() => fa(t2, "component", n2)), t2.$on("measure", e2[211]), t2.$on("show", e2[380]), t2.$on("hide", e2[381]), t2.$on("fade", e2[382]), { c() {
    ya(t2.$$.fragment);
  }, m(e3, o3) {
    ba(t2, e3, o3), i2 = true;
  }, p(e3, i3) {
    const n3 = {};
    67108864 & i3[0] | 36864 & i3[1] && (n3.content = { ...e3[46].find(e3[378]), props: e3[26][e3[43]] }), 8 & i3[0] && (n3.locale = e3[3]), !o2 && 2 & i3[0] | 4096 & i3[1] && (o2 = true, n3.component = e3[1][e3[43]], qr(() => o2 = false)), t2.$set(n3);
  }, i(e3) {
    i2 || (sa(t2.$$.fragment, e3), i2 = true);
  }, o(e3) {
    la(t2.$$.fragment, e3), i2 = false;
  }, d(e3) {
    xa(t2, e3);
  } };
}
function tp(e2) {
  let t2, o2;
  const i2 = [{ class: "PinturaMain" }, { visible: e2[58] }, e2[75], { panels: e2[73] }];
  let n2 = { $$slots: { default: [op, ({ panel: e3, panelIsActive: t3 }) => ({ 529: e3, 530: t3 }), ({ panel: e3, panelIsActive: t3 }) => [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, (e3 ? 4 : 0) | (t3 ? 8 : 0)]] }, $$scope: { ctx: e2 } };
  for (let e3 = 0; e3 < i2.length; e3 += 1)
    n2 = On(n2, i2[e3]);
  return t2 = new Ec({ props: n2 }), t2.$on("measure", e2[377]), { c() {
    ya(t2.$$.fragment);
  }, m(e3, i3) {
    ba(t2, e3, i3), o2 = true;
  }, p(e3, o3) {
    const n3 = 134217728 & o3[1] | 10240 & o3[2] ? ga(i2, [i2[0], 134217728 & o3[1] && { visible: e3[58] }, 8192 & o3[2] && $a(e3[75]), 2048 & o3[2] && { panels: e3[73] }]) : {};
    67108874 & o3[0] | 134250560 & o3[1] | 44 & o3[17] && (n3.$$scope = { dirty: o3, ctx: e3 }), t2.$set(n3);
  }, i(e3) {
    o2 || (sa(t2.$$.fragment, e3), o2 = true);
  }, o(e3) {
    la(t2.$$.fragment, e3), o2 = false;
  }, d(e3) {
    xa(t2, e3);
  } };
}
function op(e2) {
  let t2, o2, i2;
  function n2(...t3) {
    return e2[372](e2[529], ...t3);
  }
  function r2(t3) {
    e2[373](t3, e2[529]);
  }
  let a2 = { content: { ...e2[46].find(n2), props: e2[26][e2[529]] }, locale: e2[3], isActive: e2[530], stores: e2[185] };
  return void 0 !== e2[1][e2[529]] && (a2.component = e2[1][e2[529]]), t2 = new Oc({ props: a2 }), Nr.push(() => fa(t2, "component", r2)), t2.$on("measure", e2[211]), t2.$on("show", function() {
    return e2[374](e2[529]);
  }), t2.$on("hide", function() {
    return e2[375](e2[529]);
  }), t2.$on("fade", function(...t3) {
    return e2[376](e2[529], ...t3);
  }), { c() {
    ya(t2.$$.fragment);
  }, m(e3, o3) {
    ba(t2, e3, o3), i2 = true;
  }, p(i3, r3) {
    e2 = i3;
    const a3 = {};
    67108864 & r3[0] | 32768 & r3[1] | 4 & r3[17] && (a3.content = { ...e2[46].find(n2), props: e2[26][e2[529]] }), 8 & r3[0] && (a3.locale = e2[3]), 8 & r3[17] && (a3.isActive = e2[530]), !o2 && 2 & r3[0] | 4 & r3[17] && (o2 = true, a3.component = e2[1][e2[529]], qr(() => o2 = false)), t2.$set(a3);
  }, i(e3) {
    i2 || (sa(t2.$$.fragment, e3), i2 = true);
  }, o(e3) {
    la(t2.$$.fragment, e3), i2 = false;
  }, d(e3) {
    xa(t2, e3);
  } };
}
function ip(e2) {
  let t2, o2;
  return { c() {
    t2 = hr("span"), xr(t2, "class", "PinturaEditorOverlay"), xr(t2, "style", o2 = "opacity:" + e2[96]);
  }, m(e3, o3) {
    dr(e3, t2, o3);
  }, p(e3, i2) {
    8 & i2[3] && o2 !== (o2 = "opacity:" + e3[96]) && xr(t2, "style", o2);
  }, d(e3) {
    e3 && ur(t2);
  } };
}
function np(e2) {
  let t2, o2, i2, r2, a2;
  Yr(e2[369]);
  let s2 = e2[40] && Dh(e2), l2 = e2[96] > 0 && ip(e2);
  return { c() {
    t2 = hr("div"), s2 && s2.c(), o2 = gr(), l2 && l2.c(), xr(t2, "id", e2[4]), xr(t2, "class", e2[72]), xr(t2, "data-env", e2[70]);
  }, m(c2, d2) {
    dr(c2, t2, d2), s2 && s2.m(t2, null), sr(t2, o2), l2 && l2.m(t2, null), e2[389](t2), i2 = true, r2 || (a2 = [fr(Oh, "keydown", e2[202]), fr(Oh, "keyup", e2[203]), fr(Oh, "blur", e2[204]), fr(Oh, "paste", e2[208]), fr(Oh, "resize", e2[369]), fr(t2, "ping", function() {
      Vn(e2[64]) && e2[64].apply(this, arguments);
    }), fr(t2, "contextmenu", e2[205]), fr(t2, "touchstart", e2[200], { passive: false }), fr(t2, "touchmove", function() {
      Vn(e2[67]) && e2[67].apply(this, arguments);
    }), fr(t2, "pointermove", function() {
      Vn(e2[66]) && e2[66].apply(this, arguments);
    }), fr(t2, "transitionend", e2[190]), fr(t2, "dropfiles", e2[206]), fr(t2, "measure", e2[390]), fr(t2, "click", function() {
      Vn(e2[42] ? e2[207] : n) && (e2[42] ? e2[207] : n).apply(this, arguments);
    }), er(oc.call(null, t2, { observeViewRect: true, isMeasureRoot: true })), er(ic.call(null, t2)), er(rc.call(null, t2))], r2 = true);
  }, p(n2, r3) {
    (e2 = n2)[40] ? s2 ? (s2.p(e2, r3), 512 & r3[1] && sa(s2, 1)) : (s2 = Dh(e2), s2.c(), sa(s2, 1), s2.m(t2, o2)) : s2 && (ra(), la(s2, 1, 1, () => {
      s2 = null;
    }), aa()), e2[96] > 0 ? l2 ? l2.p(e2, r3) : (l2 = ip(e2), l2.c(), l2.m(t2, null)) : l2 && (l2.d(1), l2 = null), (!i2 || 16 & r3[0]) && xr(t2, "id", e2[4]), (!i2 || 1024 & r3[2]) && xr(t2, "class", e2[72]), (!i2 || 256 & r3[2]) && xr(t2, "data-env", e2[70]);
  }, i(e3) {
    i2 || (sa(s2), i2 = true);
  }, o(e3) {
    la(s2), i2 = false;
  }, d(o3) {
    o3 && ur(t2), s2 && s2.d(), l2 && l2.d(), e2[389](null), r2 = false, _n(a2);
  } };
}
var rp = 1;
var ap = 10;
function sp(e2, t2, o2) {
  let i2, r2, a2, s2, l2, c2, d2, u2, p2, m2, $2, f2, y2, v2, w2, S2, k2, C2, T2, P2, R2, I2, E2, L2, F2, z2, B2, O2, D2, W2, _2, V2, N2, H2, U2, Z2, X2, G2, Y2, q2, K2, J2, Q2, ee2, te2, oe2, ie2, ne2, ae2, se2, de2, ue2, he2, pe2, me2, ge2, $e2, fe2, be2, xe2, ve2, we2, Se2, ke2, Ce2, Me2, Te2, Pe2, Re2, Ie2, Ae2, Ee2, Le2, Fe2, ze2, Be2, De2, We2, _e2, Ve2, Ne2, He2, je2, Ue2, Ze2, Xe2, Ge2, Je2, et2, tt2, it2, at2, st2, ut2, ht2, gt2, $t2, bt2, vt2, St2, kt2, Ct2, Mt2, Tt2, Pt2, Rt2, It2, At2, Ft2, zt2, Bt2, Ot2, Dt2, Wt2, _t2, Nt2, Ht2, jt2, Ut2, Zt2, Xt2, Gt2, Yt2, qt2, Kt2, Jt2, Qt2, eo2, to2, io2, no2, ro2, ao2, so2, co2, uo2, ho2, po2, mo2, go2, $o2, fo2, yo2, bo2, xo2, vo2, wo2, So2, Co2, Mo2, To2, Po2, Ro2, Io2, Ao2, Eo2, Fo2, zo2, Bo2, Oo2, Do2, Wo2, Vo2, Ho2, jo2, Uo2, Zo2, Xo2, Go2, Yo2, qo2, Ko2, Jo2, Qo2, ei2, ti2, oi2, ii2, ni2, ri2, ai2, si2, li2, di2, ui2, hi2, pi2, mi2, gi2, yi2 = zn, bi2 = zn;
  Un(e2, Vl, (e3) => o2(365, Do2 = e3)), e2.$$.on_destroy.push(() => yi2()), e2.$$.on_destroy.push(() => bi2());
  const xi2 = _o(), wi2 = Or();
  let { class: Si2 } = t2, { layout: Ci2 } = t2, { stores: Mi2 } = t2, { locale: Ti2 } = t2, { id: Pi2 } = t2, { util: Ri2 } = t2, { utils: Ii2 } = t2, { animations: Ai2 = "auto" } = t2, { disabled: Ei2 = false } = t2, { status: Li2 } = t2, { previewUpscale: Fi2 = false } = t2, { previewPad: zi2 = false } = t2, { previewMaskOpacity: Bi2 = 0.95 } = t2, { previewImageDataMaxSize: Oi2 } = t2, { previewImageTextPixelRatio: Di2 } = t2, { markupMaskOpacity: Wi2 = 1 } = t2, { zoomMaskOpacity: _i2 = 0.85 } = t2, { elasticityMultiplier: Vi2 = 10 } = t2, { willRevert: Ni2 = () => Promise.resolve(true) } = t2, { willProcessImage: Hi2 = () => Promise.resolve(true) } = t2, { willRenderCanvas: ji2 = j } = t2, { willRenderToolbar: Ui2 = j } = t2, { willSetHistoryInitialState: Zi2 = j } = t2, { enableButtonExport: Xi2 = true } = t2, { enableButtonRevert: Gi2 = true } = t2, { enableNavigateHistory: Yi2 = true } = t2, { enableToolbar: qi2 = true } = t2, { enableUtils: Ki2 = true } = t2, { enableButtonClose: Ji2 = false } = t2, { enableDropImage: Qi2 = false } = t2, { enablePasteImage: en2 = false } = t2, { enableBrowseImage: on2 = false } = t2, { enableTransparencyGrid: nn2 = false } = t2, { layoutDirectionPreference: rn2 = "auto" } = t2, { layoutHorizontalUtilsPreference: an2 = "left" } = t2, { layoutVerticalUtilsPreference: cn2 = "bottom" } = t2, { layoutVerticalToolbarPreference: dn2 = "top" } = t2, { layoutVerticalControlGroupsPreference: un2 = "bottom" } = t2, { layoutVerticalControlTabsPreference: hn2 = "bottom" } = t2, { markupEditorZoomLevel: pn2 = null } = t2, { markupEditorZoomLevels: gn2 } = t2, { markupEditorZoomAdjustStep: $n2 } = t2, { markupEditorZoomAdjustFactor: fn2 } = t2, { markupEditorZoomAdjustWheelFactor: yn2 } = t2, { markupEditorInteractionMode: bn2 = false } = t2, { muteAudio: xn2 = true } = t2, { willSetMediaInitialTimeOffset: vn2 = (e3, t3) => e3 * Rh(t3[0]) } = t2, { enablePan: wn2 = true } = t2, { enableZoom: Sn2 = true } = t2, { enableZoomControls: kn2 = true } = t2, { enableZoomInput: Cn2 } = t2, { enablePanInput: Mn2 } = t2, { enableCanvasAlpha: Tn2 = false } = t2, { enablePanLimit: Pn2 } = t2, { panLimitGutterScalar: Rn2 } = t2, { zoomPresetOptions: In2 = [0.25, 0.5, 1, 1.25, 1.5, 2, 3, 4, 6, 8, 16] } = t2, { zoomAdjustStep: An2 = 0.25 } = t2, { zoomAdjustFactor: En2 = 0.1 } = t2, { zoomAdjustWheelFactor: Bn2 = 1 } = t2, { zoomLevel: On2 = null } = t2, { imagePreviewSrc: Dn2 } = t2, { imageOrienter: Wn2 = { read: () => 1, apply: (e3) => e3 } } = t2, { pluginComponents: _n2 } = t2, { pluginOptions: Vn2 = {} } = t2;
  const Nn2 = xi2.sub, Zn2 = {};
  let { root: Xn2 } = t2;
  const Gn2 = Ca(xn2);
  Un(e2, Gn2, (e3) => o2(351, ao2 = e3));
  const Yn2 = Ca({});
  Un(e2, Yn2, (e3) => o2(51, At2 = e3)), Dr("redrawTrigger", Yn2);
  const qn2 = Ca(Vi2);
  Un(e2, qn2, (e3) => o2(431, Yo2 = e3)), Dr("elasticityMultiplier", qn2);
  let Kn2 = [];
  const Jn2 = _l();
  Un(e2, Jn2, (e3) => o2(96, gi2 = e3));
  const er2 = xl() || 1024, tr2 = Oe(er2, er2), or2 = ds(), ir2 = (e3) => Promise.resolve(Go2 && Go2(e3, { resourceType: "image" })).then((t3) => {
    if (false === t3)
      return;
    const { headers: o3, credentials: i3 } = t3 || {};
    return fetch(e3, { headers: o3, credentials: i3 }).then((e4) => {
      if (200 !== e4.status)
        throw `${e4.status} (${e4.statusText})`;
      return e4.blob();
    }).then((e4) => fh(e4, Wn2, or2)).then((e4) => yh(e4, a2));
  });
  let { imageSourceToImageData: nr2 = (e3) => M(e3) ? ir2(e3) : Et(e3) ? new Promise((t3) => t3(h(e3))) : oo(e3) || Lt(e3) ? fh(e3, Wn2, or2).then((e4) => yh(e4, a2)) : void 0 } = t2;
  const rr2 = (() => {
    let e3, t3;
    const o3 = uh.reduce((e4, o4) => (e4[o4] = function(e5, t4, o5) {
      let i3 = [];
      return { set: t4, update: o5, publish: (e6) => {
        i3.forEach((t5) => t5(e6));
      }, subscribe: (t5) => (i3.push(t5), e5(t5), () => {
        i3 = i3.filter((e6) => e6 !== t5);
      }) };
    }((e5) => {
      if (!t3)
        return e5();
      t3.stores[o4].subscribe(e5)();
    }, (e5) => {
      t3 && t3.stores[o4].set(e5);
    }, (e5) => {
      t3 && t3.stores[o4].update(e5);
    }), e4), {});
    return { update: (i3) => {
      if (t3 = i3, e3 && (e3.forEach((e4) => e4()), e3 = void 0), !i3)
        return o3.file.publish(void 0), void o3.loadState.publish(void 0);
      e3 = uh.map((e4) => i3.stores[e4].subscribe((t4) => {
        o3[e4].publish(t4);
      }));
    }, stores: o3, destroy: () => {
      e3 && e3.forEach((e4) => e4());
    } };
  })(), { file: ar2, size: sr2, duration: lr2, trim: cr2, loadState: dr2, processState: ur2, cropAspectRatio: hr2, cropLimitToImage: pr2, crop: mr2, cropMinSize: gr2, cropMaxSize: $r2, cropRange: fr2, cropOrigin: yr2, cropRectAspectRatio: br2, rotation: xr2, rotationRange: vr2, targetSize: wr2, flipX: Sr2, flipY: kr2, backgroundColor: Cr2, backgroundImage: Mr2, colorMatrix: Tr2, convolutionMatrix: Pr2, gamma: Rr2, vignette: Ir2, noise: Ar2, decoration: Er2, annotation: Lr2, redaction: Fr2, frame: zr2, state: Wr2 } = rr2.stores;
  Un(e2, ar2, (e3) => o2(348, eo2 = e3)), Un(e2, sr2, (e3) => o2(320, et2 = e3)), Un(e2, lr2, (e3) => o2(416, so2 = e3)), Un(e2, cr2, (e3) => o2(430, Xo2 = e3)), Un(e2, dr2, (e3) => o2(340, jt2 = e3)), Un(e2, ur2, (e3) => o2(339, Ht2 = e3)), Un(e2, hr2, (e3) => o2(427, Wo2 = e3)), Un(e2, pr2, (e3) => o2(81, Qo2 = e3)), Un(e2, mr2, (e3) => o2(360, So2 = e3)), Un(e2, xr2, (e3) => o2(323, at2 = e3)), Un(e2, Sr2, (e3) => o2(322, it2 = e3)), Un(e2, kr2, (e3) => o2(321, tt2 = e3)), Un(e2, Cr2, (e3) => o2(330, Mt2 = e3)), Un(e2, Er2, (e3) => o2(48, Je2 = e3)), Un(e2, Lr2, (e3) => o2(49, st2 = e3)), Un(e2, Fr2, (e3) => o2(328, kt2 = e3)), Un(e2, zr2, (e3) => o2(47, Ge2 = e3)), Un(e2, Wr2, (e3) => o2(415, no2 = e3));
  const _r2 = (e3, t3, o3 = 0) => new Promise((i3, n2) => {
    if ($h(e3)) {
      return void (No() ? (async (e4) => {
        const t4 = await zh(e4), o4 = new DataView(t4);
        return Bh(o4);
      })(e3) : Promise.resolve()).then((t4) => {
        const o4 = document.createElement("video");
        o4.onerror = () => console.error(o4.error), o4.playsInline = true, o4.preload = "auto", o4.onloadeddata = () => {
          o4.onloadeddata = void 0, o4.dataset.rotation = t4, hs(o4).then(() => {
            const e4 = vn2(o4.duration, Xo2 || [[0, 1]]);
            e4 > 0 ? (o4.onseeked = () => {
              o4.onseeked = void 0, i3(o4);
            }, o4.currentTime = e4) : (o4.currentTime = e4, i3(o4));
          });
        }, o4.src = URL.createObjectURL(e3), o4.load();
      });
    }
    let r3, a3 = false;
    t3.cancel = () => a3 = true;
    const s3 = Date.now();
    nr2(e3).then((e4) => {
      const t4 = Date.now() - s3;
      clearTimeout(r3), r3 = setTimeout(() => {
        a3 || i3(e4);
      }, Math.max(0, o3 - t4));
    }).catch(n2);
  }), { images: Vr2, shapePreprocessor: Hr2, imageScrambler: jr2, imageRedactionRendering: Ur2, willRequest: Zr2, willRequestResource: Xr2 } = Mi2;
  let Gr2;
  Un(e2, Vr2, (e3) => o2(368, Zo2 = e3)), Un(e2, Hr2, (e3) => o2(367, Uo2 = e3)), Un(e2, jr2, (e3) => o2(331, Tt2 = e3)), Un(e2, Ur2, (e3) => o2(329, Ct2 = e3)), Un(e2, Zr2, (e3) => o2(77, Go2 = e3)), Un(e2, Xr2, (e3) => o2(87, ri2 = e3));
  const Yr2 = Ma(Mr2, (e3, t3) => {
    if (!e3)
      return t3(void 0);
    Gr2 && (Gr2.cancel(), Gr2 = void 0), Gr2 = { cancel: n }, _r2(e3, Gr2).then(t3).catch((e4) => {
    });
  }), qr2 = Wr2.subscribe((e3) => xi2.pub("update", e3)), Kr2 = Ca();
  Dr("ui", Ca({}));
  const Jr2 = Ca(true);
  Un(e2, Jr2, (e3) => o2(89, si2 = e3));
  const Qr2 = Ca(true);
  Un(e2, Qr2, (e3) => o2(91, di2 = e3));
  const ea2 = Ca(true);
  Un(e2, ea2, (e3) => o2(366, jo2 = e3));
  const ta2 = Ca(true);
  Un(e2, ta2, (e3) => o2(428, Vo2 = e3));
  const oa2 = Ca(true);
  Un(e2, oa2, (e3) => o2(92, ui2 = e3));
  const ia2 = Ca();
  Un(e2, ia2, (e3) => o2(93, hi2 = e3));
  const na2 = Ca();
  Un(e2, na2, (e3) => o2(429, Ho2 = e3));
  const ra2 = Ma([na2, ta2], () => void 0 !== Ho2 ? Ho2 : Vo2);
  Un(e2, ra2, (e3) => o2(90, li2 = e3));
  const aa2 = Ca([0, 0, 0]);
  Un(e2, aa2, (e3) => o2(55, po2 = e3));
  const sa2 = Ca([1, 1, 1]);
  Un(e2, sa2, (e3) => o2(412, vt2 = e3));
  const la2 = _l([1, 1, 1]);
  Un(e2, la2, (e3) => o2(411, bt2 = e3));
  const ca2 = Ca(), da2 = Ca();
  Un(e2, da2, (e3) => o2(50, Rt2 = e3));
  const ua2 = Ca();
  Un(e2, ua2, (e3) => o2(325, ht2 = e3));
  const ha2 = Ca(qe());
  Un(e2, ha2, (e3) => o2(76, ro2 = e3));
  const pa2 = Ca(qe());
  Un(e2, pa2, (e3) => o2(80, Jo2 = e3));
  const ma2 = Ca();
  Un(e2, ma2, (e3) => o2(409, Xe2 = e3));
  const ga2 = gh("(pointer: fine)", (e3) => e3 ? "pointer-fine" : "pointer-coarse");
  Un(e2, ga2, (e3) => o2(346, Jt2 = e3));
  const $a2 = gh("(hover: hover)", (e3) => e3 ? "pointer-hover" : "pointer-no-hover");
  Un(e2, $a2, (e3) => o2(345, Kt2 = e3));
  const fa2 = Ca(false), ya2 = Ca(false);
  Un(e2, ya2, (e3) => o2(326, $t2 = e3));
  const ba2 = ka(void 0, (e3) => {
    const t3 = _l(0), o3 = [ya2.subscribe((e4) => {
      t3.set(e4 ? 1 : 0);
    }), t3.subscribe(e3)];
    return () => o3.forEach((e4) => e4());
  });
  Un(e2, ba2, (e3) => o2(410, gt2 = e3));
  const xa2 = Ca();
  Un(e2, xa2, (e3) => o2(414, Gt2 = e3));
  const va2 = Ca();
  let wa2;
  Un(e2, va2, (e3) => o2(52, zt2 = e3)), Dr("isAnimated", va2);
  const Sa2 = Ca(Fi2);
  Un(e2, Sa2, (e3) => o2(349, to2 = e3));
  const Ta2 = Ca(false);
  Un(e2, Ta2, (e3) => o2(421, Po2 = e3)), Dr("imageIsStatic", Ta2);
  const Pa2 = Ca();
  Un(e2, Pa2, (e3) => o2(422, Ro2 = e3));
  const Ra2 = Ca();
  Un(e2, Ra2, (e3) => o2(419, Mo2 = e3));
  const Ia2 = ka(void 0, (e3) => {
    const t3 = Ca(void 0), o3 = [mr2.subscribe(() => {
      if (!So2)
        return;
      if (Po2)
        return t3.set(Ye(So2));
      const e4 = ed(So2, Mo2, 5 * Vi2);
      t3.set(e4);
    }), t3.subscribe(e3)];
    return () => o3.forEach((e4) => e4());
  }), Aa2 = Ca();
  Un(e2, Aa2, (e3) => o2(418, wo2 = e3));
  const Ea2 = Ca();
  Un(e2, Ea2, (e3) => o2(420, To2 = e3));
  const La2 = Ca(void 0);
  Un(e2, La2, (e3) => o2(425, zo2 = e3));
  const Fa2 = Ca(le());
  Un(e2, Fa2, (e3) => o2(426, Bo2 = e3));
  const za2 = (e3, t3) => {
    if (!t3 || !e3)
      return { top: 0, right: 0, bottom: 0, left: 0 };
    const o3 = ln(t3, e3, s2), i3 = sn(o3, e3);
    return { top: Math.abs(i3.top), right: Math.abs(i3.right), bottom: Math.abs(i3.bottom), left: Math.abs(i3.left) };
  }, Ba2 = Ca({}), Oa2 = Ma([ma2, ha2, pa2, Ba2], ([e3, t3, o3, n2], r3) => {
    if (!e3)
      return r3(void 0);
    let a3 = 0;
    1 !== T2.length || i2 || "bottom" === dn2 || (a3 = o3.y + o3.height), r3(ot(e3.x + t3.x, e3.y + t3.y + a3, e3.width, e3.height));
  });
  let Da2 = { left: 0, right: 0, top: 0, bottom: 0 };
  const Wa2 = Ca(false), _a2 = Ma([Wa2, zr2, Oa2, ya2], ([e3, t3, o3, i3], n2) => {
    if (!o3)
      return n2({ left: 0, right: 0, top: 0, bottom: 0 });
    if (!e3)
      return;
    const r3 = Math.min(o3.width, o3.height), a3 = za2({ width: r3, height: r3 }, t3);
    re(Da2.top, 4) === re(a3.top, 4) && re(Da2.bottom, 4) === re(a3.bottom, 4) && re(Da2.right, 4) === re(a3.right, 4) && re(Da2.left, 4) === re(a3.left, 4) || (Da2 = a3, n2(a3));
  });
  Un(e2, _a2, (e3) => o2(358, bo2 = e3));
  const Va2 = Ma([Wa2, _a2], ([e3, t3], o3) => {
    if (!e3)
      return o3(false);
    o3(Object.values(t3).some((e4) => e4 > 0));
  });
  Un(e2, Va2, (e3) => o2(359, xo2 = e3));
  const Na2 = Ma([Wa2, ma2, Va2, _a2], ([e3, t3, o3, i3], n2) => {
    if (t3)
      return e3 && o3 ? void n2(ot(t3.x + i3.left, t3.y + i3.top, t3.width - i3.left - i3.right, t3.height - i3.top - i3.bottom)) : n2({ ...t3 });
  }), Ha2 = Ma([Oa2, Va2, _a2], ([e3, t3, o3], i3) => e3 ? t3 ? void i3(ot(e3.x + o3.left, e3.y + o3.top, e3.width - o3.left - o3.right, e3.height - o3.top - o3.bottom)) : i3(e3) : i3(void 0));
  Un(e2, Ha2, (e3) => o2(324, ut2 = e3));
  const ja2 = Ma([Ta2, sr2, xr2], ([e3, t3, o3], i3) => {
    if (!e3 || !t3)
      return i3(void 0);
    const n2 = Ke(t3);
    i3(pt(n2, o3));
  }), Za2 = Ma([ja2], ([e3], t3) => {
    if (!e3)
      return t3(void 0);
    const o3 = Qe(e3);
    t3(wt(o3));
  });
  Un(e2, Za2, (e3) => o2(361, Co2 = e3));
  const Xa2 = Ma([Ha2, mr2, Za2, Sa2], ([e3, t3, o3, i3], n2) => {
    if (!e3 || !t3 || !(!Ro2 && !Mo2))
      return;
    const { width: r3, height: a3 } = o3 || t3, s3 = Math.min(e3.width / r3, e3.height / a3);
    n2(i3 ? s3 : Math.min(1, s3));
  });
  Un(e2, Xa2, (e3) => o2(362, Ao2 = e3));
  Dr("imageStaticVisualCorners", Ma([Ta2, sr2, xr2, Ha2, ma2, Xa2], ([e3, t3, o3, i3, n2, r3], a3) => {
    if (!(e3 && i3 && n2 && t3))
      return a3(void 0);
    const s3 = Ke(t3), l3 = wt(rt(s3, r3)), c3 = mt(i3, l3);
    l3.x = c3.x, l3.y = c3.y;
    a3(pt(l3, o3));
  }));
  const Ga2 = Ca(void 0);
  Un(e2, Ga2, (e3) => o2(364, Oo2 = e3));
  const Ya2 = Ma([mr2, Ha2], ([e3, t3]) => {
    if (t3 && e3)
      return Math.min(t3.width / e3.width, t3.height / e3.height);
  }), Ka2 = Ma([mr2, Aa2], ([e3, t3]) => e3 && t3 ? Math.min(e3.width / t3.width, e3.height / t3.height) : 1);
  Un(e2, Ka2, (e3) => o2(95, mi2 = e3));
  const Ja2 = Ma([Ga2, Ka2], ([e3, t3]) => e3 && t3 ? t3 * e3 : 1);
  Un(e2, Ja2, (e3) => o2(424, Eo2 = e3));
  const Qa2 = Ca(le());
  Un(e2, Qa2, (e3) => o2(363, Fo2 = e3));
  const es2 = Ca({ scalar: Eo2, translation: Fo2 }), ts2 = () => {
    es2.set({ scalar: void 0, translation: le() });
  }, os2 = ka(void 0, (e3) => {
    const t3 = _l(void 0, { precision: 1e-4 }), o3 = 1 === Sd() ? (e4) => xt(e4, Math.round) : j, i3 = () => {
      if (!wo2)
        return;
      const e4 = $t2 || !Gt2;
      if (Po2) {
        const o4 = Ye(wo2);
        return nt(o4, Bo2), nt(o4, ut2), t3.set(o4, { hard: e4 });
      }
      const i4 = ed(wo2, zo2, rp * Vi2);
      i4.width < 0 && (i4.width = 0, i4.x = wo2.x), i4.height < 0 && (i4.height = 0, i4.y = wo2.y), nt(i4, ut2), nt(i4, Fo2), rt(i4, Eo2), !e4 && o3(i4), t3.set(i4, { hard: e4 });
    }, n2 = [Ha2.subscribe(i3), Aa2.subscribe(i3), Ja2.subscribe(i3), Qa2.subscribe(i3), zr2.subscribe(i3), t3.subscribe(e3)];
    return () => n2.forEach((e4) => e4());
  });
  Un(e2, os2, (e3) => o2(57, yo2 = e3));
  const is2 = Ca(1);
  Un(e2, is2, (e3) => o2(417, vo2 = e3));
  const ns2 = () => {
    if (!So2 || !ut2)
      return;
    let e3 = lt(Ye(So2), Ao2 || 1);
    const t3 = mt(ut2, lt(Ye(Co2), Ao2));
    nt(e3, t3);
    const o3 = Xe2.width / e3.width, i3 = Xe2.height / e3.height, n2 = Math.min(1, o3, i3);
    is2.set(n2), rt(e3, n2), ((e4, t4) => {
      const [o4, i4, n3, r3] = yt(e4);
      o4 < t4.y && (e4.y = Math.max(t4.y, e4.y)), i4 > t4.width && (e4.x = t4.width - e4.width), n3 > t4.height && (e4.y = t4.height - e4.height), r3 < t4.x && (e4.x = Math.max(t4.x, e4.x));
    })(e3, { ...Xe2, x: 0, y: 0 }), Aa2.set(e3);
  }, rs2 = Ma([Ha2, Xa2, mr2, sr2], ([e3, t3, o3, i3], n2) => {
    e3 && (o3 || i3) && n2(as2(e3, t3 || 1, o3 || i3));
  });
  Un(e2, rs2, (e3) => o2(94, pi2 = e3));
  const as2 = (e3, t3, o3) => o3.width <= e3.width && o3.height <= e3.height ? mt(e3, lt(Ye(o3), t3)) : ft(e3, dt(o3));
  let ss2, ls2;
  const cs2 = (e3) => {
    if (i2 && ss2 && ct(ss2, e3) && ls2 === Ao2)
      return;
    if (Po2)
      return ns2();
    ss2 = e3, ls2 = Ao2;
    const t3 = as2(e3, Ao2, So2 || et2);
    Aa2.set(t3);
  };
  let us2 = false;
  const ps2 = Xa2.subscribe((e3) => {
    !us2 && void 0 !== e3 && So2 && (cs2(ut2), us2 = true);
  }), ms2 = Ha2.subscribe((e3) => {
    e3 && void 0 !== Ao2 && So2 && cs2(e3);
  }), gs2 = Ta2.subscribe((e3) => {
    !e3 && ut2 && cs2(ut2);
  });
  let $s2;
  const fs2 = Ea2.subscribe((e3) => {
    if (!e3)
      return $s2 = void 0, void Qn(Pa2, Ro2 = void 0, Ro2);
    $s2 = Io2;
    const t3 = Ye(So2);
    Pa2.set(t3);
  }), ys2 = Aa2.subscribe((e3) => {
    if (!e3 || !To2)
      return;
    const t3 = (o3 = Ye(e3), i3 = To2, o3.x -= i3.x, o3.y -= i3.y, o3.width -= i3.width, o3.height -= i3.height, o3);
    var o3, i3;
    ((e4, t4) => {
      e4.x /= t4, e4.y /= t4, e4.width /= t4, e4.height /= t4;
    })(t3, $s2);
    const n2 = ((e4, t4) => (e4.x += t4.x, e4.y += t4.y, e4.width += t4.width, e4.height += t4.height, e4))(Ye(Ro2), t3);
    mr2.set(n2);
  }), bs2 = mr2.subscribe((e3) => {
    if (!e3 || !wo2)
      return;
    if (Po2)
      return void (To2 || ns2());
    if ($t2 || To2 || Mo2)
      return;
    const t3 = dt(wo2), o3 = dt(e3);
    if (re(t3, 6) === re(o3, 6))
      return;
    const { width: i3, height: n2 } = Co2 || So2, r3 = Math.min(ut2.width / i3, ut2.height / n2), a3 = Oe(e3.width * r3, e3.height * r3), s3 = 0.5 * (wo2.width - a3.width), l3 = 0.5 * (wo2.height - a3.height), c3 = ot(wo2.x + s3, wo2.y + l3, a3.width, a3.height);
    Aa2.set(c3);
  }), xs2 = Ma([Xa2, mr2, Aa2, Ta2], ([e3, t3, o3, i3], n2) => {
    if (!e3 || !t3 || !o3)
      return;
    if (i3)
      return n2(vo2);
    const r3 = o3.width / t3.width, a3 = o3.height / t3.height;
    n2(Math.max(r3, a3) / e3);
  }), vs2 = Ma([Xa2, xs2], ([e3, t3], o3) => {
    if (!t3)
      return;
    o3(e3 * t3);
  });
  Un(e2, vs2, (e3) => o2(423, Io2 = e3));
  let ws2 = { left: 0, right: 0, top: 0, bottom: 0 };
  const Ss2 = Ma([zr2, Aa2], ([e3, t3], o3) => {
    if (!t3)
      return o3(ws2);
    const i3 = za2(t3, e3);
    re(ws2.top, 4) === re(i3.top, 4) && re(ws2.bottom, 4) === re(i3.bottom, 4) && re(ws2.right, 4) === re(i3.right, 4) && re(ws2.left, 4) === re(i3.left, 4) || (ws2 = i3, o3(i3));
  }), ks2 = Ma([Ss2], ([e3], t3) => {
    t3(Object.values(e3).some((e4) => e4 > 0));
  }), Cs2 = _l(0.075, { stiffness: 0.03, damping: 0.4, precision: 1e-3 }), Ms2 = Ma([la2, aa2, Cs2, os2, Ja2, zr2, ks2, Ss2, Va2], ([e3, t3, o3, n2, r3, a3, s3, l3, c3], d3) => {
    if (!n2 || i2)
      return d3([]);
    let { x: u3, y: h2, width: p3, height: m3 } = n2;
    u3 += 0.5, h2 += 0.5, p3 -= 0.5, m3 -= 0.5;
    const g2 = [];
    if (a3) {
      if (s3) {
        let { left: e4, right: o4, top: i4, bottom: n3 } = l3;
        e4 *= r3, o4 *= r3, i4 *= r3, n3 *= r3;
        const a4 = Mh(t3) ? [1, 1, 1, 0.125] : [0, 0, 0, 0.075];
        g2.push({ x: u3 - e4 - 0.5, y: h2 - i4 - 0.5, width: p3 + e4 + o4 + 1, height: m3 + i4 + n3 + 1, strokeWidth: 1, strokeColor: a4, opacity: c3 ? 1 : 0.5 });
      }
      const i3 = Mh(e3);
      a3 && a3.frameColor && Mh(a3.frameColor) || i3 || (g2.push({ x: u3 - 1, y: h2 - 1, width: p3 + 2, height: m3 + 2, strokeWidth: 2, strokeColor: [0, 0, 0, 0.1], opacity: o3 }), g2.push({ x: u3 + 1, y: h2 + 1, width: p3 - 2, height: m3 - 2, strokeWidth: 2, strokeColor: [0, 0, 0, 0.1], opacity: o3 }));
    }
    d3([...g2, { x: u3, y: h2, width: p3, height: m3, strokeWidth: 1, strokeColor: e3, opacity: o3 }]);
  }), Ts2 = Ca([]);
  Un(e2, Ts2, (e3) => o2(352, co2 = e3));
  const Ps2 = Ma([Ms2, Ts2], ([e3, t3], o3) => {
    o3([...e3, ...t3]);
  });
  Un(e2, Ps2, (e3) => o2(88, ai2 = e3));
  const Rs2 = _l(0, { precision: 1e-3 });
  Un(e2, Rs2, (e3) => o2(354, ho2 = e3));
  const Is2 = _l();
  Un(e2, Is2, (e3) => o2(357, $o2 = e3));
  const As2 = _l();
  Un(e2, As2, (e3) => o2(356, go2 = e3));
  const Es2 = _l();
  Un(e2, Es2, (e3) => o2(355, mo2 = e3));
  const Ls2 = _l();
  Un(e2, Ls2, (e3) => o2(353, uo2 = e3));
  const Fs2 = Ca(false);
  Un(e2, Fs2, (e3) => o2(338, Nt2 = e3));
  const zs2 = Ca();
  let Bs2;
  Un(e2, zs2, (e3) => o2(341, Ut2 = e3));
  const Os2 = Ma([Fs2, zs2], ([e3, t3], i3) => {
    if (!e3 || !t3)
      return void i3(void 0);
    if (Bs2 && (Bs2.cancel(), o2(255, Bs2 = void 0)), mn(t3))
      return i3(x(t3));
    const r3 = rl2.length ? 0 : zt2 ? 250 : 0;
    o2(255, Bs2 = { cancel: n }), _r2(t3, Bs2, r3).then(i3).catch((e4) => {
      Qn(dr2, jt2.error = e4, jt2);
    }).finally(() => {
      o2(255, Bs2 = void 0);
    });
  });
  yi2(), yi2 = Hn(Os2, (e3) => o2(327, St2 = e3));
  const Ds2 = (e3) => {
    so2 && St2 && (e3 && St2.paused ? St2.play().catch(() => {
    }) : e3 || St2.paused || St2.pause());
  };
  let { imagePreviewCurrent: Ws2 } = t2;
  const _s2 = Ca({});
  Un(e2, _s2, (e3) => o2(343, Yt2 = e3));
  const Vs2 = Ca([]);
  Un(e2, Vs2, (e3) => o2(82, ei2 = e3));
  const Ns2 = Ma([Ha2, ua2, sr2, Ia2, Aa2, vs2, xr2, Sr2, kr2, Ja2, Qa2, fa2], ([e3, t3, o3, i3, n2, r3, a3, s3, l3, c3, d3, u3], h2) => {
    if (!e3 || !n2)
      return;
    const p3 = Us(e3, t3, o3, i3, n2, c3, d3, r3, a3, s3, l3);
    !u3 && S2(p3), h2(p3);
  });
  Un(e2, Ns2, (e3) => o2(344, qt2 = e3));
  const Hs2 = Ma([Tr2, Pr2, Rr2, Ir2, Ar2], ([e3, t3, o3, i3, n2], r3) => {
    const a3 = e3 && Object.keys(e3).map((t4) => e3[t4]).filter(Boolean);
    r3({ gamma: o3 || void 0, vignette: i3 || void 0, noise: n2 || void 0, convolutionMatrix: t3 || void 0, colorMatrix: a3 && a3.length && Ln(a3) });
  });
  let js2, Zs2;
  const Xs2 = (() => {
    if (!lo())
      return false;
    const e3 = navigator.userAgent.match(/OS (\d+)_(\d+)_?(\d+)?/i) || [], [, t3, o3] = e3.map((e4) => parseInt(e4, 10) || 0);
    return t3 > 13 || 13 === t3 && o3 >= 4;
  })(), Gs2 = Ca({});
  Un(e2, Gs2, (e3) => o2(332, It2 = e3));
  const qs2 = Sd(), Ks2 = ka(qs2, (e3) => {
    const t3 = () => e3(Sd()), o3 = matchMedia(`(resolution: ${qs2}dppx)`);
    return o3.addListener(t3), () => o3.removeListener(t3);
  });
  Un(e2, Ks2, (e3) => o2(56, fo2 = e3));
  const Js2 = ((e3, t3) => {
    const { sub: o3, pub: i3 } = _o(), n2 = [], r3 = Ca(0), a3 = [], s3 = () => a3.forEach((e4) => e4({ index: jn(r3), length: n2.length })), l3 = { get index() {
      return jn(r3);
    }, set index(e4) {
      e4 = Number.isInteger(e4) ? e4 : 0, e4 = Ua(e4, 0, n2.length - 1), r3.set(e4), t3(n2[l3.index]), s3();
    }, get state() {
      return n2[n2.length - 1];
    }, length: () => n2.length, undo() {
      const e4 = l3.index--;
      return i3("undo", e4), e4;
    }, redo() {
      const e4 = l3.index++;
      return i3("redo", l3.index), e4;
    }, revert() {
      n2.length = 1, l3.index = 0, i3("revert");
    }, write(o4) {
      o4 && t3({ ...e3(), ...o4 });
      const a4 = e3(), c3 = n2[n2.length - 1];
      JSON.stringify(a4) !== JSON.stringify(c3) && (n2.length = l3.index + 1, n2.push(a4), r3.set(n2.length - 1), s3(), i3("writehistory"));
    }, set(e4 = {}) {
      n2.length = 0, l3.index = 0;
      const t4 = Array.isArray(e4) ? e4 : [e4];
      n2.push(...t4), l3.index = n2.length - 1;
    }, get: () => [...n2], subscribe: (e4) => (a3.push(e4), e4({ index: l3.index, length: n2.length }), () => a3.splice(a3.indexOf(e4), 1)), on: o3 };
    return l3;
  })(() => no2, (e3) => {
    Qn(Wr2, no2 = e3, no2), ha2.set(ro2);
  });
  bi2(), bi2 = Hn(Js2, (e3) => o2(350, io2 = e3));
  const Qs2 = () => {
    const e3 = { x: 0, y: 0, ...et2 }, t3 = xt(ft(e3, no2.cropAspectRatio), Math.round), o3 = Zi2({ ...no2, rotation: 0, crop: t3 }, no2), i3 = [o3];
    JSON.stringify(o3) !== JSON.stringify(no2) && i3.push({ ...no2 }), Js2.set(i3);
  }, el2 = dr2.subscribe((e3) => {
    e3 && e3.complete && Qs2();
  }), tl2 = () => Ni2().then((e3) => e3 && Js2.revert()), ol2 = Ca(false);
  Un(e2, ol2, (e3) => o2(333, Ft2 = e3));
  const il2 = () => {
    Qn(ol2, Ft2 = true, Ft2), Hi2().then((e3) => {
      if (!e3)
        return void Qn(ol2, Ft2 = false, Ft2);
      let t3;
      t3 = Al2.subscribe((e4) => {
        1 === e4 && (t3 && t3(), wi2("processImage"));
      });
    });
  }, nl2 = ur2.subscribe((e3) => {
    if (!e3)
      return void Qn(ol2, Ft2 = false, Ft2);
    Qn(ol2, Ft2 = true, Ft2);
    const { complete: t3, abort: o3 } = e3;
    (t3 || o3) && Qn(ol2, Ft2 = false, Ft2);
  }), rl2 = Ch();
  Un(e2, rl2, (e3) => o2(54, Zt2 = e3));
  const al2 = Ma([rl2], ([e3], t3) => {
    if (!e3.length)
      return t3();
    const { origin: o3, translation: i3, rotation: n2, scale: r3 } = e3[0];
    t3({ origin: o3, translation: i3, rotation: n2, scale: r3 });
  }), sl2 = Ca();
  Un(e2, sl2, (e3) => o2(347, Qt2 = e3));
  let ll2, cl2 = [];
  const dl2 = Ca(), ul2 = Ca(), hl2 = Ma([Ga2, ul2, Xa2, Ya2], ([e3, t3, o3, i3]) => e3 || (t3 || o3 < 1 ? i3 : 1)), pl2 = { ...Mi2, imageFile: ar2, imageSize: sr2, mediaDuration: lr2, mediaTrim: cr2, imageBackgroundColor: Cr2, imageBackgroundImage: Mr2, imageCropAspectRatio: hr2, imageCropMinSize: gr2, imageCropMaxSize: $r2, imageCropLimitToImage: pr2, imageCropRect: mr2, imageCropRectOrigin: yr2, imageCropRectSnapshot: Pa2, imageCropRectAspectRatio: br2, imageCropRange: fr2, imageRotation: xr2, imageRotationRange: vr2, imageFlipX: Sr2, imageFlipY: kr2, imageOutputSize: wr2, imageColorMatrix: Tr2, imageConvolutionMatrix: Pr2, imageGamma: Rr2, imageVignette: Ir2, imageNoise: Ar2, imageDecoration: Er2, imageAnnotation: Lr2, imageRedaction: Fr2, imageFrame: zr2, imagePreview: Os2, imagePreviewSource: zs2, imageTransforms: Ns2, imagePreviewModifiers: _s2, history: Js2, animation: xa2, pixelRatio: Ks2, elasticityMultiplier: Vi2, scrollElasticity: ap, rangeInputElasticity: 5, redrawTrigger: Yn2, pointerAccuracy: ga2, pointerHoverable: $a2, env: Gs2, rootRect: ua2, stageRect: Ha2, stageRectBase: Oa2, stageRecenter: Ba2, stageScalar: Xa2, stagePadding: _a2, stagePadded: Va2, presentationScalar: vs2, imagePreviewUpscale: ul2, utilRect: ma2, utilRectPadded: Na2, allowPan: Jr2, allowZoom: Qr2, allowZoomControls: ea2, enableZoomInput: oa2, enablePanInput: ta2, enablePanInputStatus: ra2, imageSelectionMultiTouching: dl2, rootBackgroundColor: aa2, rootForegroundColor: sa2, rootLineColor: la2, rootColorSecondary: ca2, imageOutlineOpacity: Cs2, utilTools: sl2, imageSelectionPan: Qa2, imageSelectionZoom: Ga2, imageSelectionZoomCurrent: hl2, imageSelectionStageFitScalar: Ya2, imageSelectionStoredState: es2, muteAudioStore: Gn2, imageOverlayMarkup: Ts2, interfaceImages: Vs2, isInteracting: ya2, isTransformingImage: fa2, isInteractingFraction: ba2, imageCropRectIntent: Ra2, imageCropRectPresentation: Ia2, imageSelectionRect: Aa2, imageSelectionRectIntent: La2, imageSelectionRectPresentation: os2, imageSelectionRectSnapshot: Ea2, imageScalar: xs2, imageTransformsInterpolated: al2, imageEffects: Hs2 };
  delete pl2.image;
  const ml2 = "util-" + A();
  let gl2 = [];
  const $l2 = (e3) => P2.find(([t3]) => e3 === t3);
  let fl2 = [], yl2 = lo();
  const bl2 = (e3, t3, o3 = false) => {
    const i3 = ((e4) => {
      const t4 = se2.getPropertyValue(e4);
      return bh(t4);
    })(e3);
    i3 && 0 !== i3[3] && (o3 || (i3.length = 3), t3.set(i3, { hard: !zt2 }));
  }, wl2 = Ca();
  Un(e2, wl2, (e3) => o2(83, ti2 = e3));
  const Sl2 = Ca();
  Un(e2, Sl2, (e3) => o2(84, oi2 = e3));
  const kl2 = Ca();
  Un(e2, kl2, (e3) => o2(85, ii2 = e3));
  const Cl2 = _l(0, { damping: 0.9 });
  Un(e2, Cl2, (e3) => o2(86, ni2 = e3));
  const Ml2 = () => {
    bl2("color", sa2), bl2(Tn2 ? "--color-background" : "background-color", aa2), bl2("outline-color", la2), bl2("--color-secondary", ca2), bl2("--grid-color-even", Sl2, true), bl2("--grid-color-odd", kl2, true), ((e3, t3) => {
      let o3 = se2.getPropertyValue(e3);
      o3 = /^[0-9]+$/.test(o3) ? parseFloat(o3) : void 0, t3.set(o3, { hard: !zt2 });
    })("--grid-size", wl2);
  }, Tl2 = Ma([Ns2, Hs2, Cr2, Yr2], ([e3, t3, o3, i3]) => e3 && { ...e3, ...t3, backgroundColor: o3, backgroundImage: i3 });
  Un(e2, Tl2, (e3) => o2(342, Xt2 = e3));
  const Pl2 = () => {
    const e3 = rl2.length ? void 0 : { resize: 1.05 }, t3 = ((e4, t4, o3 = {}) => {
      const { resize: i3 = 1, opacity: n2 = 0 } = o3, r3 = { opacity: [_l(n2, { ...Sh, stiffness: 0.1 }), j], resize: [_l(i3, { ...Sh, stiffness: 0.1 }), j], translation: [_l(void 0, Sh), j], rotation: [_l(void 0, kh), j], origin: [_l(void 0, Sh), j], scale: [_l(void 0, kh), j], gamma: [_l(void 0, kh), (e5) => e5 || 1], vignette: [_l(void 0, kh), (e5) => e5 || 0], colorMatrix: [_l([...wh], Sh), (e5) => e5 || [...wh]], convolutionMatrix: [Ca(void 0), (e5) => e5 && e5.clarity || void 0], backgroundColor: [_l(void 0, Sh), (e5, t5, o4) => {
        if (Array.isArray(e5)) {
          if (Array.isArray(t5)) {
            const i4 = [...e5];
            0 === t5[3] ? (i4[3] = 0, o4(i4)) : 0 === i4[3] && ((e5 = [...t5])[3] = 0);
          }
          return e5;
        }
      }], backgroundImage: [Ca(void 0), j] }, a3 = Object.entries(r3).map(([e5, t5]) => [e5, t5[0]]), s3 = a3.map(([, e5]) => e5), l3 = Object.entries(r3).reduce((e5, [t5, o4]) => {
        const [i4, n3] = o4;
        return e5[t5] = (e6, o5) => i4.set(n3(e6, c3[t5], (e7) => {
          i4.set(e7, { hard: true });
        }), o5), e5;
      }, {});
      let c3;
      const d3 = Ma(s3, (o4) => (c3 = o4.reduce((e5, t5, o5) => (e5[a3[o5][0]] = t5, e5), {}), c3.data = e4, c3.size = t4, c3.scale *= o4[1], c3));
      return d3.get = () => c3, d3.set = (e5, t5) => {
        const o4 = { hard: !t5 };
        Object.entries(e5).forEach(([e6, t6]) => {
          l3[e6] && l3[e6](t6, o4);
        });
      }, d3;
    })(St2, et2, e3);
    rl2.unshift(t3), Rl2(Xt2);
  }, Rl2 = (e3) => {
    rl2.forEach((t3, o3) => {
      const i3 = 0 === o3 ? 1 : 0;
      t3.set({ ...e3, opacity: i3, resize: 1 }, Gt2);
    });
  };
  let Il2;
  const Al2 = Dl(void 0, { duration: 500 });
  let El2;
  Un(e2, Al2, (e3) => o2(53, Wt2 = e3));
  const Ll2 = Ca(false);
  let Fl2;
  Un(e2, Ll2, (e3) => o2(337, _t2 = e3));
  const zl2 = _l(void 0, { stiffness: 0.1, damping: 0.7, precision: 0.25 });
  Un(e2, zl2, (e3) => o2(78, qo2 = e3));
  const Bl2 = _l(0, { stiffness: 0.1, precision: 0.05 });
  Un(e2, Bl2, (e3) => o2(79, Ko2 = e3));
  const Ol2 = _l(0, { stiffness: 0.02, damping: 0.5, precision: 0.25 });
  Un(e2, Ol2, (e3) => o2(335, Ot2 = e3));
  const Wl2 = _l(void 0, { stiffness: 0.02, damping: 0.5, precision: 0.25 });
  Un(e2, Wl2, (e3) => o2(336, Dt2 = e3));
  const Nl2 = _l(void 0, { stiffness: 0.02, damping: 0.5, precision: 0.25 });
  let Hl2;
  Un(e2, Nl2, (e3) => o2(334, Bt2 = e3));
  const jl2 = () => {
    wi2("abortLoadImage");
  }, Ul2 = () => {
    wi2("abortProcessImage"), Qn(ol2, Ft2 = false, Ft2);
  }, Zl2 = (e3) => e3.preventDefault(), Xl2 = Xs2 ? (e3) => {
    const t3 = e3.touches ? e3.touches[0] : e3;
    t3.pageX > 20 && t3.pageX < window.innerWidth - 20 || Zl2(e3);
  } : n, Gl2 = Ca([]);
  Un(e2, Gl2, (e3) => o2(413, Pt2 = e3)), Dr("keysPressed", Gl2);
  const Yl2 = (e3) => {
    !e3 || Lo(e3) && !((e4) => /^image/.test(e4.type) && !/svg/.test(e4.type))(e3) || !Lo(e3) && !/^http/.test(e3) || wi2("loadImage", e3);
  }, ql2 = (e3) => {
    e3 && Yl2(e3);
  };
  let Kl2 = void 0;
  let Jl2, Ql2 = [];
  const ec2 = Ca();
  Dr("rootPortal", ec2), Dr("rootRect", ua2);
  const tc2 = () => ({ foregroundColor: [...vt2], lineColor: [...bt2], utilVisibility: { ...L2 }, isInteracting: $t2, isInteractingFraction: gt2, rootRect: Ye(ht2), stageRect: Ye(ut2), annotationShapesDirty: $c2, decorationShapesDirty: yc2, frameShapesDirty: bc2, blendShapesDirty: xc2 }), oc2 = (e3, t3, o3) => tn(e3, Oe(t3.width / o3, t3.height / o3)), ic2 = (e3, t3, o3) => {
    var i3;
    return e3._translate = ce((i3 = t3).x, i3.y), e3._scale = o3, e3;
  }, nc2 = (e3) => {
    const t3 = [];
    return e3.forEach((e4) => t3.push(rc2(e4))), t3.filter(Boolean);
  }, rc2 = (e3) => vi(e3) ? (e3.points = [ce(e3.x1, e3.y1), ce(e3.x2, e3.y2)], e3) : (!((e4) => $i(e4) && !e4.text.length)(e3) || e3.backgroundColor && 0 !== e3.backgroundColor[3] || (fi(e3) && (e3.width = 5, e3.height = e3.lineHeight), e3.strokeWidth = 1, e3.strokeColor = [1, 1, 1, 0.5], e3.backgroundColor = [0, 0, 0, 0.1]), e3);
  let ac2, lc2 = [], cc2 = [], dc2 = [], uc2 = [], pc2 = [], mc2 = {};
  const gc2 = (e3, t3, o3, i3, n2, r3) => {
    const { annotationShapesDirty: a3, decorationShapesDirty: l3, frameShapesDirty: c3, blendShapesDirty: d3, selectionRect: u3, scale: h2 } = e3, p3 = ac2 !== h2, m3 = p3 || !ct(mc2, u3);
    m3 && (ac2 = h2, mc2 = u3), (a3 || o3 !== st2) && (lc2 = o3.filter(ki).map(ci).sort((e4, t4) => e4.alwaysOnTop ? 1 : t4.alwaysOnTop ? -1 : 0).map((e4) => tn(e4, et2))), (p3 || fc2 || a3 || o3 !== st2) && (cc2 = nc2(lc2.map((e4) => s2(e4, { flipX: it2, flipY: tt2, rotation: at2, scale: h2, context: Ke(et2) })).flat())), d3 && (dc2 = t3.filter(ki).map((e4) => tn(e4, et2))), (l3 || i3 !== Je2 || m3) && (uc2 = nc2(i3.filter(ki).map(ci).sort((e4, t4) => e4.alwaysOnTop ? 1 : t4.alwaysOnTop ? -1 : 0).map((e4) => oc2(e4, u3, h2)).map((e4) => s2(e4, { context: u3 })).flat().map((e4) => ic2(e4, u3, h2)))), (c3 || r3 !== Ge2 || m3) && (pc2 = r3 ? nc2([r3].map(ci).map((e4) => oc2(e4, u3, h2)).map(s2).flat().map((e4) => ic2(e4, u3, h2))) : []);
    let g2 = nc2(n2.filter(ki));
    return "undefined" != typeof window && ((e4) => {
      if (e4 && e4._39fjmbg)
        return;
      const [t4] = [[85, 110, 108, 105, 99, 101, 110, 115, 101, 100, 32, 80, 105, 110, 116, 117, 114, 97, 32, 105, 110, 115, 116, 97, 110, 99, 101]].map((e5) => e5.map((e6) => String.fromCharCode(e6)).join(""));
      g2 = [...g2, { x: u3.x + 0.5 * u3.width - 82, y: u3.y + u3.height - 16 - 12, width: 164, height: 16, text: t4, fontWeight: 900, fontSize: 12, color: [1, 1, 1, 0.25] }];
    })(window), { blendShapesDirty: d3, blendShapes: dc2, annotationShapesDirty: a3, annotationShapes: cc2, decorationShapesDirty: l3, decorationShapes: uc2, frameShapesDirty: c3, frameShapes: pc2, interfaceShapes: g2 };
  };
  let $c2 = true;
  let fc2 = true;
  let yc2 = true;
  let bc2 = true;
  let xc2 = true;
  Br(() => {
    Ds2(false), qr2(), ms2(), ps2(), gs2(), fs2(), ys2(), bs2(), el2(), nl2(), ga2.destroy(), $a2.destroy(), rr2.destroy(), rl2.clear(), lc2.length = 0, cc2.length = 0, dc2.length = 0, uc2.length = 0, pc2.length = 0;
    try {
      o2(213, Ws2 = void 0), o2(256, Il2 = void 0);
    } catch (e3) {
    }
  });
  return e2.$$set = (e3) => {
    "class" in e3 && o2(214, Si2 = e3.class), "layout" in e3 && o2(215, Ci2 = e3.layout), "stores" in e3 && o2(216, Mi2 = e3.stores), "locale" in e3 && o2(3, Ti2 = e3.locale), "id" in e3 && o2(4, Pi2 = e3.id), "util" in e3 && o2(217, Ri2 = e3.util), "utils" in e3 && o2(218, Ii2 = e3.utils), "animations" in e3 && o2(219, Ai2 = e3.animations), "disabled" in e3 && o2(220, Ei2 = e3.disabled), "status" in e3 && o2(212, Li2 = e3.status), "previewUpscale" in e3 && o2(221, Fi2 = e3.previewUpscale), "previewPad" in e3 && o2(222, zi2 = e3.previewPad), "previewMaskOpacity" in e3 && o2(5, Bi2 = e3.previewMaskOpacity), "previewImageDataMaxSize" in e3 && o2(223, Oi2 = e3.previewImageDataMaxSize), "previewImageTextPixelRatio" in e3 && o2(6, Di2 = e3.previewImageTextPixelRatio), "markupMaskOpacity" in e3 && o2(7, Wi2 = e3.markupMaskOpacity), "zoomMaskOpacity" in e3 && o2(224, _i2 = e3.zoomMaskOpacity), "elasticityMultiplier" in e3 && o2(8, Vi2 = e3.elasticityMultiplier), "willRevert" in e3 && o2(225, Ni2 = e3.willRevert), "willProcessImage" in e3 && o2(226, Hi2 = e3.willProcessImage), "willRenderCanvas" in e3 && o2(9, ji2 = e3.willRenderCanvas), "willRenderToolbar" in e3 && o2(227, Ui2 = e3.willRenderToolbar), "willSetHistoryInitialState" in e3 && o2(228, Zi2 = e3.willSetHistoryInitialState), "enableButtonExport" in e3 && o2(229, Xi2 = e3.enableButtonExport), "enableButtonRevert" in e3 && o2(230, Gi2 = e3.enableButtonRevert), "enableNavigateHistory" in e3 && o2(231, Yi2 = e3.enableNavigateHistory), "enableToolbar" in e3 && o2(10, qi2 = e3.enableToolbar), "enableUtils" in e3 && o2(232, Ki2 = e3.enableUtils), "enableButtonClose" in e3 && o2(233, Ji2 = e3.enableButtonClose), "enableDropImage" in e3 && o2(234, Qi2 = e3.enableDropImage), "enablePasteImage" in e3 && o2(235, en2 = e3.enablePasteImage), "enableBrowseImage" in e3 && o2(236, on2 = e3.enableBrowseImage), "enableTransparencyGrid" in e3 && o2(11, nn2 = e3.enableTransparencyGrid), "layoutDirectionPreference" in e3 && o2(237, rn2 = e3.layoutDirectionPreference), "layoutHorizontalUtilsPreference" in e3 && o2(238, an2 = e3.layoutHorizontalUtilsPreference), "layoutVerticalUtilsPreference" in e3 && o2(239, cn2 = e3.layoutVerticalUtilsPreference), "layoutVerticalToolbarPreference" in e3 && o2(240, dn2 = e3.layoutVerticalToolbarPreference), "layoutVerticalControlGroupsPreference" in e3 && o2(241, un2 = e3.layoutVerticalControlGroupsPreference), "layoutVerticalControlTabsPreference" in e3 && o2(242, hn2 = e3.layoutVerticalControlTabsPreference), "markupEditorZoomLevel" in e3 && o2(243, pn2 = e3.markupEditorZoomLevel), "markupEditorZoomLevels" in e3 && o2(12, gn2 = e3.markupEditorZoomLevels), "markupEditorZoomAdjustStep" in e3 && o2(13, $n2 = e3.markupEditorZoomAdjustStep), "markupEditorZoomAdjustFactor" in e3 && o2(14, fn2 = e3.markupEditorZoomAdjustFactor), "markupEditorZoomAdjustWheelFactor" in e3 && o2(15, yn2 = e3.markupEditorZoomAdjustWheelFactor), "markupEditorInteractionMode" in e3 && o2(244, bn2 = e3.markupEditorInteractionMode), "muteAudio" in e3 && o2(245, xn2 = e3.muteAudio), "willSetMediaInitialTimeOffset" in e3 && o2(246, vn2 = e3.willSetMediaInitialTimeOffset), "enablePan" in e3 && o2(16, wn2 = e3.enablePan), "enableZoom" in e3 && o2(17, Sn2 = e3.enableZoom), "enableZoomControls" in e3 && o2(247, kn2 = e3.enableZoomControls), "enableZoomInput" in e3 && o2(18, Cn2 = e3.enableZoomInput), "enablePanInput" in e3 && o2(248, Mn2 = e3.enablePanInput), "enableCanvasAlpha" in e3 && o2(19, Tn2 = e3.enableCanvasAlpha), "enablePanLimit" in e3 && o2(20, Pn2 = e3.enablePanLimit), "panLimitGutterScalar" in e3 && o2(21, Rn2 = e3.panLimitGutterScalar), "zoomPresetOptions" in e3 && o2(22, In2 = e3.zoomPresetOptions), "zoomAdjustStep" in e3 && o2(23, An2 = e3.zoomAdjustStep), "zoomAdjustFactor" in e3 && o2(24, En2 = e3.zoomAdjustFactor), "zoomAdjustWheelFactor" in e3 && o2(25, Bn2 = e3.zoomAdjustWheelFactor), "zoomLevel" in e3 && o2(0, On2 = e3.zoomLevel), "imagePreviewSrc" in e3 && o2(249, Dn2 = e3.imagePreviewSrc), "imageOrienter" in e3 && o2(250, Wn2 = e3.imageOrienter), "pluginComponents" in e3 && o2(251, _n2 = e3.pluginComponents), "pluginOptions" in e3 && o2(26, Vn2 = e3.pluginOptions), "root" in e3 && o2(2, Xn2 = e3.root), "imageSourceToImageData" in e3 && o2(27, nr2 = e3.imageSourceToImageData), "imagePreviewCurrent" in e3 && o2(213, Ws2 = e3.imagePreviewCurrent);
  }, e2.$$.update = () => {
    if (1 & e2.$$.dirty[0] | 67108864 & e2.$$.dirty[7] && o2(0, On2 = null === On2 ? pn2 : On2), 268435456 & e2.$$.dirty[7] && Gn2.set(xn2), 256 & e2.$$.dirty[0] && Qn(qn2, Yo2 = Vi2, Yo2), 536870912 & e2.$$.dirty[6] && o2(316, i2 = "overlay" === Ci2), 32768 & e2.$$.dirty[7] | 64 & e2.$$.dirty[10] && o2(44, r2 = Ki2 && !i2), 67108866 & e2.$$.dirty[0] && Vn2 && Object.entries(Vn2).forEach(([e3, t4]) => {
      Object.entries(t4).forEach(([t5, i3]) => {
        Zn2[e3] && o2(1, Zn2[e3][t5] = i3, Zn2);
      });
    }), 2 & e2.$$.dirty[0] | 8 & e2.$$.dirty[8]) {
      let e3 = false;
      _n2.forEach(([t4]) => {
        Zn2[t4] || (o2(1, Zn2[t4] = {}, Zn2), e3 = true);
      }), e3 && o2(253, Kn2 = [..._n2]);
    }
    var t3, h2, b2, x2;
    if (8 & e2.$$.dirty[7] && Jn2.set(Ei2 ? 1 : 0), 64 & e2.$$.dirty[7] && (a2 = Oi2 ? (t3 = Oi2, h2 = tr2, Oe(Math.min(t3.width, h2.width), Math.min(t3.height, h2.height))) : tr2), 134217728 & e2.$$.dirty[11] && rr2.update(Zo2[0]), 67108864 & e2.$$.dirty[11] && (s2 = Uo2 ? (e3, t4) => Uo2(e3, { flipX: void 0, flipY: void 0, rotation: void 0, ...t4, isPreview: true }) : j), 1073741824 & e2.$$.dirty[7] | 33554432 & e2.$$.dirty[11] && ia2.set(jo2 && kn2), 134217728 & e2.$$.dirty[7] | 1 & e2.$$.dirty[8] && na2.set("pan" === bn2 || Mn2), 524288 & e2.$$.dirty[1] && Rt2 && ua2.set(ot(Rt2.x, Rt2.y, Rt2.width, Rt2.height)), 1073774656 & e2.$$.dirty[10] && ht2 && i2 && jt2 && jt2.complete && (() => {
      const e3 = Wo2, t4 = dt(ht2);
      e3 && e3 === t4 || (hr2.set(dt(ht2)), Qs2());
    })(), 8 & e2.$$.dirty[0] | 2 & e2.$$.dirty[7] | 32 & e2.$$.dirty[8] && o2(306, T2 = Ti2 && Kn2.length ? Ii2 || Kn2.map(([e3]) => e3) : []), 134217728 & e2.$$.dirty[9] && o2(45, O2 = T2.length > 1), 16384 & e2.$$.dirty[1] && (O2 || ha2.set(qe())), 1024 & e2.$$.dirty[0] && (qi2 || pa2.set(qe())), 65792 & e2.$$.dirty[10] && o2(319, c2 = !$t2 && l2), 16777216 & e2.$$.dirty[11] && o2(317, d2 = !Do2), 524288 & e2.$$.dirty[1] && o2(263, Ve2 = Rt2 && Rt2.width > 0 && Rt2.height > 0), 67108864 & e2.$$.dirty[0] | 32 & e2.$$.dirty[8] | 134217728 & e2.$$.dirty[9] | 128 & e2.$$.dirty[11] && o2(307, P2 = ((e3, t4, o3, i3) => {
      const n2 = t4.filter(([t5]) => e3.includes(t5)).filter(([e4, { isSupported: t5 }]) => t5({ ...i3, ...o3[e4] })).map(([e4, t5]) => [e4, t5.Component]);
      return qa(n2, gl2, (e4, t5) => e4[0] === t5[0] && e4[1] === t5[1]) ? gl2 : (gl2 = n2, n2);
    })(T2, Kn2, Vn2, { src: eo2 })), 268435456 & e2.$$.dirty[9] && o2(262, R2 = P2.length), 8 & e2.$$.dirty[0] | 49152 & e2.$$.dirty[8] && o2(40, Ne2 = Ve2 && Ti2 && !!R2), 512 & e2.$$.dirty[1] && setTimeout(() => o2(254, wa2 = Ne2), 1), 4 & e2.$$.dirty[7] | 64 & e2.$$.dirty[8] | 640 & e2.$$.dirty[10] && Qn(xa2, Gt2 = "always" === Ai2 ? c2 : "never" !== Ai2 && (c2 && wa2 && d2), Gt2), 4 & e2.$$.dirty[7] | 384 & e2.$$.dirty[10] && Qn(va2, zt2 = "always" === Ai2 ? l2 : "never" !== Ai2 && (l2 && d2), zt2), 16 & e2.$$.dirty[7] | 64 & e2.$$.dirty[10] && Sa2.set(Fi2 || i2), 32 & e2.$$.dirty[7] && Wa2.set(zi2), 4 & e2.$$.dirty[0] | 10485760 & e2.$$.dirty[11] && Xn2 && (Xn2.dispatchEvent(hh("markupzoom", Oo2)), Xn2.dispatchEvent(hh("zoom", ko(Oo2) ? Oo2 : Ao2))), 4 & e2.$$.dirty[0] | 4194304 & e2.$$.dirty[11] && Xn2 && (Xn2.dispatchEvent(hh("markuppan", Fo2)), Xn2.dispatchEvent(hh("pan", Fo2))), 524288 & e2.$$.dirty[11] && So2 && ts2(), 1048576 & e2.$$.dirty[11] && Co2 && ns2(), 1 & e2.$$.dirty[7] | 16384 & e2.$$.dirty[8] && o2(43, E2 = R2 && Ri2 && "string" == typeof Ri2 && $l2(Ri2) ? Ri2 : R2 > 0 ? P2[0][0] : void 0), 2101248 & e2.$$.dirty[1] && E2 && Cs2.set(0.075, { hard: !zt2 }), 128 & e2.$$.dirty[7] && o2(314, u2 = _i2), 393216 & e2.$$.dirty[11] && o2(315, p2 = xo2 ? -Math.max(...Object.values(bo2)) : 0), 69206016 & e2.$$.dirty[1] | 16432 & e2.$$.dirty[10] && yo2) {
      let e3 = yo2.x - ut2.x, t4 = ut2.x + ut2.width - (yo2.x + yo2.width), o3 = yo2.y - ut2.y, i3 = ut2.y + ut2.height - (yo2.y + yo2.height), n2 = Math.min(e3, o3, t4, i3);
      Rs2.set(n2 > p2 ? 0 : Math.min(u2, Math.abs(n2 / 64)), { hard: !zt2 });
    }
    if (33554432 & e2.$$.dirty[1] && o2(313, m2 = 0.55 / fo2), 2097152 & e2.$$.dirty[1] | 16392 & e2.$$.dirty[10] && ut2 && Is2.set({ x: 0, y: ut2.y, width: ut2.x < 64 ? 0 : ut2.x, height: ut2.height + m2 }, { hard: !zt2 }), 2097152 & e2.$$.dirty[1] | 49160 & e2.$$.dirty[10] && ut2 && As2.set({ x: 0, y: 0, width: ht2.width, height: ut2.y + m2 }, { hard: !zt2 }), 2097152 & e2.$$.dirty[1] | 49160 & e2.$$.dirty[10] && ut2) {
      let e3 = ut2.x + ut2.width, t4 = ht2.width - (ut2.x + ut2.width);
      t4 < 64 && (e3 += t4, t4 = 0), Es2.set({ x: e3, y: ut2.y, width: t4, height: ut2.height + m2 }, { hard: !zt2 });
    }
    if (2097152 & e2.$$.dirty[1] | 49152 & e2.$$.dirty[10] && ut2 && Ls2.set({ x: 0, y: ut2.y + ut2.height, width: ht2.width, height: ht2.height - (ut2.y + ut2.height) }, { hard: !zt2 }), 16777216 & e2.$$.dirty[1] | 73728 & e2.$$.dirty[11] && o2(309, $2 = $o2 && { id: "stage-overlay", backgroundColor: po2, opacity: ho2, ...$o2 }), 16777216 & e2.$$.dirty[1] | 40960 & e2.$$.dirty[11] && o2(312, f2 = go2 && { id: "stage-overlay", backgroundColor: po2, opacity: ho2, ...go2 }), 16777216 & e2.$$.dirty[1] | 24576 & e2.$$.dirty[11] && o2(311, y2 = mo2 && { id: "stage-overlay", backgroundColor: po2, opacity: ho2, ...mo2 }), 16777216 & e2.$$.dirty[1] | 12288 & e2.$$.dirty[11] && o2(310, v2 = uo2 && { id: "stage-overlay", backgroundColor: po2, opacity: ho2, ...uo2 }), 1073741824 & e2.$$.dirty[9] | 7 & e2.$$.dirty[10] && o2(308, w2 = [f2, y2, v2, $2].filter(Boolean)), 536870912 & e2.$$.dirty[9] | 2048 & e2.$$.dirty[11] && w2 && co2) {
      const e3 = co2.filter((e4) => "stage-overlay" !== e4.id);
      Ts2.set([...e3, ...w2]);
    }
    if (2 & e2.$$.dirty[8] | 128 & e2.$$.dirty[11] && zs2.set(Dn2 || (eo2 || void 0)), 131072 & e2.$$.dirty[10] | 1024 & e2.$$.dirty[11] && St2 && ((e3) => {
      if (!so2 || !St2)
        return;
      St2.muted = e3;
    })(ao2), 4 & e2.$$.dirty[0] | 134217728 & e2.$$.dirty[6] | 131072 & e2.$$.dirty[10] && (o2(213, Ws2 = St2), St2 && Xn2.dispatchEvent(hh("loadpreview", Ws2))), 1 & e2.$$.dirty[11] && Ut2 && (Qa2.set(le()), Ga2.set(void 0), ts2(), Vs2.set([])), 512 & e2.$$.dirty[11] && o2(267, k2 = io2.index > 0), 512 & e2.$$.dirty[11] && o2(266, C2 = io2.index < io2.length - 1), 4 & e2.$$.dirty[1] && dl2.set(ll2), 256 & e2.$$.dirty[11] && ul2.set(to2), 8 & e2.$$.dirty[0] | 16384 & e2.$$.dirty[8] | 134217728 & e2.$$.dirty[9] && o2(46, I2 = R2 && T2.map((e3) => {
      const t4 = $l2(e3);
      if (t4)
        return { id: e3, view: t4[1], tabIcon: Ti2[e3 + "Icon"], tabLabel: Ti2[e3 + "Label"] };
    }).filter(Boolean) || []), 4096 & e2.$$.dirty[1] && Kr2.set(E2), 32832 & e2.$$.dirty[1] && o2(37, L2 = I2.reduce((e3, t4) => (e3[t4.id] = L2 && L2[t4.id] || 0, e3), {})), 4096 & e2.$$.dirty[1] && o2(75, F2 = { name: ml2, selected: E2 }), 32768 & e2.$$.dirty[1] && o2(74, z2 = I2.map((e3) => ({ id: e3.id, icon: e3.tabIcon, label: e3.tabLabel }))), 32768 & e2.$$.dirty[1] && o2(73, B2 = I2.map((e3) => e3.id)), 268435456 & e2.$$.dirty[6] && o2(72, D2 = hc(["PinturaRoot", "PinturaRootComponent", Si2])), 32768 & e2.$$.dirty[10] && o2(302, W2 = ht2 && (ht2.width > 1e3 ? "wide" : ht2.width < 600 ? "narrow" : void 0)), 32768 & e2.$$.dirty[10] && o2(289, _2 = ht2 && (ht2.width <= 320 || ht2.height <= 460)), 32768 & e2.$$.dirty[10] && o2(301, V2 = ht2 && (ht2.height > 1e3 ? "tall" : ht2.height < 600 ? "short" : void 0)), 4 & e2.$$.dirty[0] && o2(269, N2 = Xn2 && Xn2.parentNode && Xn2.parentNode.classList.contains("PinturaModal")), 1073741824 & e2.$$.dirty[0] | 2097152 & e2.$$.dirty[8] | 32768 & e2.$$.dirty[10] && o2(294, H2 = N2 && ht2 && js2 > ht2.width), 1 & e2.$$.dirty[1] | 2097152 & e2.$$.dirty[8] | 32768 & e2.$$.dirty[10] && o2(293, U2 = N2 && ht2 && Zs2 > ht2.height), 49152 & e2.$$.dirty[9] && o2(295, Z2 = H2 && U2), 524288 & e2.$$.dirty[0] && o2(292, X2 = Tn2), 8388608 & e2.$$.dirty[9] && o2(264, G2 = "narrow" === W2), 1048576 & e2.$$.dirty[7] | 32768 & e2.$$.dirty[10] && o2(303, (b2 = ht2, x2 = rn2, Y2 = ht2 ? "auto" === x2 ? b2.width > b2.height ? "landscape" : "portrait" : "horizontal" === x2 ? b2.width < 500 ? "portrait" : "landscape" : "vertical" === x2 ? b2.height < 400 ? "landscape" : "portrait" : void 0 : "landscape")), 16777216 & e2.$$.dirty[9] && o2(71, q2 = "landscape" === Y2), 65536 & e2.$$.dirty[8] | 4194304 & e2.$$.dirty[9] && o2(291, K2 = G2 || "short" === V2), 1073741824 & e2.$$.dirty[0] | 32768 & e2.$$.dirty[10] && o2(290, J2 = yl2 && ht2 && js2 === ht2.width && !Xs2), 2 & e2.$$.dirty[1] | 64 & e2.$$.dirty[11] && o2(265, Q2 = [...Qt2 || [], ...cl2].filter(Boolean)), 2097152 & e2.$$.dirty[7] && o2(300, ee2 = "has-navigation-preference-" + an2), 4194304 & e2.$$.dirty[7] && o2(299, te2 = "has-navigation-preference-" + cn2), 8388608 & e2.$$.dirty[7] && o2(296, oe2 = "has-toolbar-preference-" + dn2), 16777216 & e2.$$.dirty[7] && o2(298, ie2 = "has-controlgroups-preference-" + un2), 33554432 & e2.$$.dirty[7] && o2(297, ne2 = "has-controltabs-preference-" + hn2), 32768 & e2.$$.dirty[10] && o2(305, ae2 = void 0 !== ht2 && ht2.width > 0 && ht2.height > 0), 4 & e2.$$.dirty[0] | 67108864 & e2.$$.dirty[9] && o2(304, se2 = ae2 && Xn2 && getComputedStyle(Xn2)), 33554432 & e2.$$.dirty[9] && se2 && Ml2(), 1024 & e2.$$.dirty[0] | 2121728 & e2.$$.dirty[1] | 536870912 & e2.$$.dirty[6] | 8 & e2.$$.dirty[7] | 2097152 & e2.$$.dirty[8] | 33553408 & e2.$$.dirty[9] | 4194304 & e2.$$.dirty[10] | 48 & e2.$$.dirty[11] && Gs2.set({ ...It2, layoutMode: Ci2, orientation: Y2, horizontalSpace: W2, verticalSpace: V2, navigationHorizontalPreference: ee2, navigationVerticalPreference: te2, controlGroupsVerticalPreference: ie2, controlTabsVerticalpreference: ne2, toolbarVerticalPreference: oe2, isModal: N2, isDisabled: Ei2, isCentered: Z2, isCenteredHorizontally: H2, isCenteredVertically: U2, isAnimated: zt2, isTransparent: X2, pointerAccuracy: Jt2, pointerHoverable: Kt2, isCompact: K2, hasSwipeNavigation: J2, hasLimitedSpace: _2, hasToolbar: qi2, hasNavigation: O2 && r2, isIOS: yl2, browserVersion: vl() ? "chrome-" + (navigator.userAgent.match(/Chrome\/([0-9]+)/) || [])[1] : void 0 }), 4194304 & e2.$$.dirty[10] && o2(70, de2 = Object.entries(It2).map(([e3, t4]) => /^is|has/.test(e3) ? t4 ? mh(e3) : void 0 : t4).filter(Boolean).join(" ")), 4096 & e2.$$.dirty[1] && E2 && sl2.set([]), 12 & e2.$$.dirty[11] && o2(69, ue2 = qt2 && Object.entries(Yt2).filter(([, e3]) => null != e3).reduce((e3, [, t4]) => e3 = { ...e3, ...t4 }, {})), 1073741824 & e2.$$.dirty[10] && o2(286, ge2 = jt2 && "any-to-file" === jt2.task), 128 & e2.$$.dirty[9] && ge2 && rl2 && rl2.clear(), 2 & e2.$$.dirty[11] && o2(288, he2 = !!Xt2 && !!Xt2.translation), 256 & e2.$$.dirty[8] | 512 & e2.$$.dirty[9] | 131072 & e2.$$.dirty[10] && he2 && St2 && St2 !== Il2 && (o2(256, Il2 = St2), Pl2()), 512 & e2.$$.dirty[9] | 2 & e2.$$.dirty[11] && he2 && Rl2(Xt2), 8388608 & e2.$$.dirty[1] && Zt2 && Zt2.length > 1) {
      let e3 = [];
      rl2.forEach((t4, o3) => {
        0 !== o3 && t4.get().opacity <= 0 && e3.push(t4);
      }), e3.forEach((e4) => rl2.remove(e4));
    }
    if (8 & e2.$$.dirty[0] | 256 & e2.$$.dirty[9] && o2(39, me2 = Ti2 && pe2.length && Ti2.labelSupportError(pe2)), 1073741824 & e2.$$.dirty[10] && o2(278, $e2 = jt2 && !!jt2.error), 1073741824 & e2.$$.dirty[10] && o2(42, fe2 = !jt2 || !jt2.complete && void 0 === jt2.task), 1073741824 & e2.$$.dirty[10] && o2(279, be2 = jt2 && (jt2.taskLengthComputable ? jt2.taskProgress : 1 / 0)), 128 & e2.$$.dirty[9] && ge2 && Qn(Fs2, Nt2 = false, Nt2), 2097152 & e2.$$.dirty[1] | 512 & e2.$$.dirty[8] | 1073741824 & e2.$$.dirty[10] && jt2 && jt2.complete) {
      const e3 = zt2 ? 250 : 0;
      clearTimeout(El2), o2(257, El2 = setTimeout(() => {
        Qn(Fs2, Nt2 = true, Nt2);
      }, e3));
    }
    if (2048 & e2.$$.dirty[1] | 1073741824 & e2.$$.dirty[8] | 1342177280 & e2.$$.dirty[10] && o2(283, xe2 = jt2 && !$e2 && !fe2 && !Nt2), 128 & e2.$$.dirty[8] | 131072 & e2.$$.dirty[10] | 1 & e2.$$.dirty[11] && o2(282, ve2 = !(!Ut2 || St2 && !Bs2)), 2097152 & e2.$$.dirty[1] | 268435456 & e2.$$.dirty[10])
      if (Nt2) {
        setTimeout(() => Cl2.set(1), zt2 ? 500 : 0);
      } else
        Cl2.set(0);
    if (545259520 & e2.$$.dirty[10] && o2(277, we2 = !!(Ft2 || Ht2 && void 0 !== Ht2.progress && !Ht2.complete)), 536870912 & e2.$$.dirty[8] && we2 && Ds2(false), 2048 & e2.$$.dirty[1] | 1073741824 & e2.$$.dirty[10] && o2(280, Se2 = jt2 && !(jt2.error || fe2)), 8 & e2.$$.dirty[0] | 1073741824 & e2.$$.dirty[10] && o2(281, ke2 = Ti2 && (jt2 ? !jt2.complete || jt2.error ? Ys(Ti2.statusLabelLoadImage(jt2), jt2.error && jt2.error.metadata, "{", "}") : Ti2.statusLabelLoadImage({ progress: 1 / 0, task: "blob-to-bitmap" }) : Ti2.statusLabelLoadImage(jt2))), 8 & e2.$$.dirty[0] | 536870912 & e2.$$.dirty[10] && o2(276, Ce2 = Ht2 && Ti2 && Ti2.statusLabelProcessImage(Ht2)), 536870912 & e2.$$.dirty[10] && o2(274, Me2 = Ht2 && (Ht2.taskLengthComputable ? Ht2.taskProgress : 1 / 0)), 536870912 & e2.$$.dirty[10] && o2(275, Te2 = Ht2 && !Ht2.error), 536870912 & e2.$$.dirty[10] && o2(273, Pe2 = !(!Ht2 || !Ht2.error)), 8 & e2.$$.dirty[0] | 2048 & e2.$$.dirty[1] | 67108864 & e2.$$.dirty[6] | 2113929216 & e2.$$.dirty[8] | 31 & e2.$$.dirty[9])
      if (Li2) {
        let e3, t4, i3, n2, r3;
        M(Li2) && (e3 = Li2), ko(Li2) ? t4 = Li2 : Array.isArray(Li2) && ([e3, t4, r3] = Li2, false === t4 && (n2 = true), ko(t4) && (i3 = true)), o2(34, Fl2 = (e3 || t4) && { text: e3, aside: n2 || i3, progressIndicator: { visible: i3, progress: t4 }, closeButton: n2 && { label: Ti2.statusLabelButtonClose, icon: Ti2.statusIconButtonClose, onclick: r3 || (() => o2(212, Li2 = void 0)) } });
      } else
        o2(34, Fl2 = Ti2 && fe2 || $e2 || xe2 || ve2 ? { text: ke2, aside: $e2 || Se2, progressIndicator: { visible: Se2, progress: be2 }, closeButton: $e2 && { label: Ti2.statusLabelButtonClose, icon: Ti2.statusIconButtonClose, onclick: jl2 } } : Ti2 && we2 && Ce2 ? { text: Ce2, aside: Pe2 || Te2, progressIndicator: { visible: Te2, progress: Me2 }, closeButton: Pe2 && { label: Ti2.statusLabelButtonClose, icon: Ti2.statusIconButtonClose, onclick: Ul2 } } : void 0);
    if (67108864 & e2.$$.dirty[6] && o2(285, Re2 = void 0 !== Li2), 2097152 & e2.$$.dirty[1] | 2097152 & e2.$$.dirty[8] | 536870912 & e2.$$.dirty[10] && N2 && Ht2 && Ht2.complete && (Ll2.set(true), setTimeout(() => Ll2.set(false), zt2 ? 100 : 0)), 4 & e2.$$.dirty[0] | 4096 & e2.$$.dirty[1] | 268435456 & e2.$$.dirty[10] && Nt2 && Xn2 && Xn2.dispatchEvent(hh("selectutil", E2)), 2304 & e2.$$.dirty[1] | 1610612736 & e2.$$.dirty[8] | 88 & e2.$$.dirty[9] | 134217728 & e2.$$.dirty[10] && o2(284, Ie2 = _t2 || me2 || fe2 || $e2 || xe2 || ve2 || we2 || Re2), 32 & e2.$$.dirty[9] && Qn(Al2, Wt2 = Ie2 ? 1 : 0, Wt2), 2097152 & e2.$$.dirty[1] | 32 & e2.$$.dirty[9] && Al2.set(Ie2 ? 1 : 0, { duration: zt2 ? 500 : 1 }), 4194304 & e2.$$.dirty[1] && o2(41, Ae2 = Wt2 > 0), 8 & e2.$$.dirty[1] && o2(272, Ee2 = !(!Fl2 || !Fl2.aside)), 2098184 & e2.$$.dirty[1] | 16778240 & e2.$$.dirty[8] | 67108864 & e2.$$.dirty[10] && Ae2 && Fl2) {
      clearTimeout(Hl2);
      const e3 = { hard: false === zt2 };
      if (Ee2) {
        const t4 = !!Fl2.error || !zt2;
        Bl2.set(1, e3), zl2.set(Dt2, { hard: t4 }), o2(258, Hl2 = setTimeout(() => {
          Ol2.set(16, e3);
        }, 1));
      } else
        Bl2.set(0, e3), o2(258, Hl2 = setTimeout(() => {
          Ol2.set(0, e3);
        }, 1));
    }
    if (1024 & e2.$$.dirty[1] && (Ae2 || (Nl2.set(void 0, { hard: true }), zl2.set(void 0, { hard: true }), Ol2.set(0, { hard: true }))), 33554432 & e2.$$.dirty[10] && o2(271, Le2 = 0.5 * Ot2), 8388608 & e2.$$.dirty[8] | 16777216 & e2.$$.dirty[10] && o2(68, Fe2 = `transform: translateX(${Bt2 - Le2}px)`), 256 & e2.$$.dirty[1] | 131072 & e2.$$.dirty[10] && o2(38, Ze2 = St2 && !me2), 128 & e2.$$.dirty[1] | 6291456 & e2.$$.dirty[8] && o2(268, Be2 = ze2 && (Ze2 || N2) ? Zl2 : n), 1048576 & e2.$$.dirty[8] && o2(67, De2 = Be2), 1048576 & e2.$$.dirty[8] && o2(66, We2 = Be2), 8 & e2.$$.dirty[0] | 1048576 & e2.$$.dirty[1] | 95232 & e2.$$.dirty[7] | 983040 & e2.$$.dirty[8] | 4194304 & e2.$$.dirty[10] && o2(65, _e2 = Ti2 && At2 && Ph(() => Ui2([["div", "alpha", { class: "PinturaNavGroup" }, [["div", "alpha-set", { class: "PinturaNavSet" }, [Ji2 && ["Button", "close", { label: Ti2.labelClose, icon: Ti2.iconButtonClose, onclick: () => wi2("close"), hideLabel: true }], Gi2 && ["Button", "revert", { label: Ti2.labelButtonRevert, icon: Ti2.iconButtonRevert, disabled: !k2, onclick: tl2, hideLabel: true }]]]]], ["div", "beta", { class: "PinturaNavGroup PinturaNavGroupFloat" }, [Yi2 && ["div", "history", { class: "PinturaNavSet" }, [["Button", "undo", { label: Ti2.labelButtonUndo, icon: Ti2.iconButtonUndo, disabled: !k2, onclick: Js2.undo, hideLabel: true }], ["Button", "redo", { label: Ti2.labelButtonRedo, icon: Ti2.iconButtonRedo, disabled: !C2, onclick: Js2.redo, hideLabel: true }]]], Q2.length && ["div", "plugin-tools", { class: "PinturaNavSet" }, Q2.filter(Boolean).map(([e3, t4, o3]) => [e3, t4, { ...o3 }])]]], ["div", "gamma", { class: "PinturaNavGroup" }, [Xi2 && ["Button", "export", { label: Ti2.labelButtonExport, icon: G2 && Ti2.iconButtonExport, class: "PinturaButtonExport", onclick: il2, hideLabel: G2 }]]]], { ...It2 }, () => Yn2.set({})))), 262144 & e2.$$.dirty[10] && o2(261, He2 = kt2 && !!kt2.length), 8192 & e2.$$.dirty[8] | 263168 & e2.$$.dirty[10] && o2(260, je2 = He2 && Fn(et2, kt2)), 12288 & e2.$$.dirty[8] | 3276800 & e2.$$.dirty[10] && He2 && ((e3, t4, i3, n2) => {
      if (!t4)
        return;
      const r3 = { dataSizeScalar: i3 };
      n2 && n2[3] > 0 && (r3.backgroundColor = [...n2]), t4(e3, r3).then((e4) => {
        Kl2 && g(Kl2), o2(259, Kl2 = e4);
      });
    })(St2, Tt2, je2, Mt2), 2048 & e2.$$.dirty[8] | 787456 & e2.$$.dirty[10] && kt2 && Kl2 && et2) {
      const { width: e3, height: t4 } = et2, i3 = Vt() ? "pixelated" : "auto" === Ct2 ? "auto" : "pixelated";
      o2(35, Ql2 = kt2.map((o3) => {
        const n2 = ot(o3.x, o3.y, o3.width, o3.height), r3 = pt(Ye(n2), o3.rotation).map((o4) => ce(o4.x / e3, o4.y / t4));
        return { ...o3, id: "redaction", flipX: false, flipY: false, cornerRadius: 0, strokeWidth: 0, strokeColor: void 0, backgroundColor: [0, 0, 0, 0], backgroundImage: Kl2, backgroundImageRendering: i3, backgroundCorners: r3 };
      }));
    }
    32 & e2.$$.dirty[1] && Jl2 && ec2.set(Jl2), 4 & e2.$$.dirty[0] | 128 & e2.$$.dirty[1] && Ze2 && Xn2.dispatchEvent(hh("ready")), 262144 & e2.$$.dirty[1] && o2(59, $c2 = true), 15360 & e2.$$.dirty[10] && o2(60, fc2 = true), 131072 & e2.$$.dirty[1] && o2(61, yc2 = true), 65536 & e2.$$.dirty[1] && o2(62, bc2 = true), 16 & e2.$$.dirty[1] && o2(63, xc2 = true);
  }, o2(318, l2 = !sc()), S2 = 1 === Sd() ? (e3) => {
    e3 && (ye(e3.origin, Math.round), ye(e3.translation, Math.round));
  } : j, o2(287, pe2 = [!vh() && "WebGL"].filter(Boolean)), o2(270, ze2 = lo() || b() && No()), o2(64, Ue2 = ((e3, t3 = true) => (o3) => {
    "ping" === o3.type && (t3 && o3.stopPropagation(), e3(o3.detail.type, o3.detail.data));
  })(xi2.pub)), [On2, Zn2, Xn2, Ti2, Pi2, Bi2, Di2, Wi2, Vi2, ji2, qi2, nn2, gn2, $n2, fn2, yn2, wn2, Sn2, Cn2, Tn2, Pn2, Rn2, In2, An2, En2, Bn2, Vn2, nr2, Os2, Js2, js2, Zs2, cl2, ll2, Fl2, Ql2, Jl2, L2, Ze2, me2, Ne2, Ae2, fe2, E2, r2, O2, I2, Ge2, Je2, st2, Rt2, At2, zt2, Wt2, Zt2, po2, fo2, yo2, fl2, $c2, fc2, yc2, bc2, xc2, Ue2, _e2, We2, De2, Fe2, ue2, de2, q2, D2, B2, z2, F2, ro2, Go2, qo2, Ko2, Jo2, Qo2, ei2, ti2, oi2, ii2, ni2, ri2, ai2, si2, li2, di2, ui2, hi2, pi2, mi2, gi2, Gn2, Yn2, qn2, Jn2, ar2, sr2, lr2, cr2, dr2, ur2, hr2, pr2, mr2, xr2, Sr2, kr2, Cr2, Er2, Lr2, Fr2, zr2, Wr2, Vr2, Hr2, jr2, Ur2, Zr2, Xr2, Jr2, Qr2, ea2, ta2, oa2, ia2, na2, ra2, aa2, sa2, la2, da2, ua2, ha2, pa2, ma2, ga2, $a2, ya2, ba2, xa2, va2, Sa2, Ta2, Pa2, Ra2, Aa2, Ea2, La2, Fa2, _a2, Va2, Ha2, Za2, Xa2, Ga2, Ka2, Ja2, Qa2, os2, is2, rs2, vs2, Ts2, Ps2, Rs2, Is2, As2, Es2, Ls2, Fs2, zs2, _s2, Vs2, Ns2, Gs2, Ks2, ol2, rl2, sl2, pl2, wl2, Sl2, kl2, Cl2, ({ target: e3, propertyName: t3 }) => {
    e3 === Xn2 && /background|outline/.test(t3) && se2 && Ml2();
  }, Tl2, Al2, Ll2, zl2, Bl2, Ol2, Wl2, Nl2, (e3) => {
    const t3 = !(!Fl2 || !Fl2.closeButton) || !zt2;
    Wl2.set(e3.detail.width, { hard: t3 }), Nl2.set(Math.round(0.5 * -e3.detail.width), { hard: t3 });
  }, Xl2, Gl2, (e3) => {
    const { keyCode: t3, metaKey: o3, ctrlKey: i3, shiftKey: n2 } = e3;
    if (9 === t3 && Ei2)
      return void e3.preventDefault();
    if (e3.target && 32 === t3 && Xn2.contains(e3.target) && !ph(e3.target) && e3.preventDefault(), 90 === t3 && (o3 || i3))
      return void (n2 && o3 ? Js2.redo() : Js2.undo());
    if (89 === t3 && i3)
      return void Js2.redo();
    if (229 === t3)
      return;
    if (o3 || i3)
      return;
    const r3 = /* @__PURE__ */ new Set([...Pt2, t3]);
    Gl2.set(Array.from(r3));
  }, ({ key: e3, keyCode: t3 }) => {
    if ("Meta" === e3)
      return Gl2.set([]);
    Gl2.set(Pt2.filter((e4) => e4 !== t3));
  }, () => {
    Gl2.set([]);
  }, (e3) => {
    ph(e3.target) || e3.preventDefault();
  }, (e3) => {
    Qi2 && Yl2(e3.detail.resources[0]);
  }, () => {
    on2 && Th().then(ql2);
  }, (e3) => {
    if (!en2)
      return;
    const t3 = Ua((window.innerWidth - Math.abs(ht2.x)) / ht2.width, 0, 1), o3 = Ua((window.innerHeight - Math.abs(ht2.y)) / ht2.height, 0, 1);
    t3 < 0.75 && o3 < 0.75 || Yl2((e3.clipboardData || window.clipboardData).files[0]);
  }, tc2, gc2, (e3) => {
    Xe2 && ct(e3.detail, Xe2) || Qn(ma2, Xe2 = e3.detail, Xe2);
  }, Li2, Ws2, Si2, Ci2, Mi2, Ri2, Ii2, Ai2, Ei2, Fi2, zi2, Oi2, _i2, Ni2, Hi2, Ui2, Zi2, Xi2, Gi2, Yi2, Ki2, Ji2, Qi2, en2, on2, rn2, an2, cn2, dn2, un2, hn2, pn2, bn2, xn2, vn2, kn2, Mn2, Dn2, Wn2, _n2, Nn2, Kn2, wa2, Bs2, Il2, El2, Hl2, Kl2, je2, He2, R2, Ve2, G2, Q2, C2, k2, Be2, N2, ze2, Le2, Ee2, Pe2, Me2, Te2, Ce2, we2, $e2, be2, Se2, ke2, ve2, xe2, Ie2, Re2, ge2, pe2, he2, _2, J2, K2, X2, U2, H2, Z2, oe2, ne2, ie2, te2, ee2, V2, W2, Y2, se2, ae2, T2, P2, w2, $2, v2, y2, f2, m2, u2, p2, i2, d2, l2, c2, et2, tt2, it2, at2, ut2, ht2, $t2, St2, kt2, Ct2, Mt2, Tt2, It2, Ft2, Bt2, Ot2, Dt2, _t2, Nt2, Ht2, jt2, Ut2, Xt2, Yt2, qt2, Kt2, Jt2, Qt2, eo2, to2, io2, ao2, co2, uo2, ho2, mo2, go2, $o2, bo2, xo2, So2, Co2, Ao2, Fo2, Oo2, Do2, jo2, Uo2, Zo2, function() {
    o2(30, js2 = Oh.innerWidth), o2(31, Zs2 = Oh.innerHeight);
  }, (e3) => Qn(pa2, Jo2 = e3.detail, Jo2), ({ detail: e3 }) => o2(43, E2 = e3), (e3, t3) => t3.id === e3, function(t3, i3) {
    e2.$$.not_equal(Zn2[i3], t3) && (Zn2[i3] = t3, o2(1, Zn2), o2(26, Vn2), o2(251, _n2));
  }, (e3) => o2(58, fl2 = fl2.concat(e3)), (e3) => o2(58, fl2 = fl2.filter((t3) => t3 !== e3)), (e3, { detail: t3 }) => o2(37, L2[e3] = t3, L2), (e3) => Qn(ha2, ro2 = e3.detail, ro2), (e3) => e3.id === E2, function(t3) {
    e2.$$.not_equal(Zn2[E2], t3) && (Zn2[E2] = t3, o2(1, Zn2), o2(26, Vn2), o2(251, _n2));
  }, () => o2(58, fl2 = fl2.concat(E2)), () => o2(58, fl2 = fl2.filter((e3) => e3 !== E2)), ({ detail: e3 }) => o2(37, L2[E2] = e3, L2), (e3) => {
    const t3 = { ...e3, ...tc2() }, { annotationShapes: o3, decorationShapes: i3, interfaceShapes: n2, frameShapes: r3 } = ji2({ annotationShapes: st2, decorationShapes: Je2, interfaceShapes: ai2, frameShapes: Ge2 }, t3);
    return gc2(t3, Ql2, o3, i3, n2, r3);
  }, () => {
    o2(59, $c2 = false), o2(60, fc2 = false), o2(61, yc2 = false), o2(62, bc2 = false), o2(63, xc2 = false);
  }, function(e3) {
    Nr[e3 ? "unshift" : "push"](() => {
      Jl2 = e3, o2(36, Jl2);
    });
  }, function(e3) {
    On2 = e3, o2(0, On2), o2(243, pn2);
  }, function(e3) {
    cl2 = e3, o2(32, cl2);
  }, function(e3) {
    ll2 = e3, o2(33, ll2);
  }, function(e3) {
    Nr[e3 ? "unshift" : "push"](() => {
      Xn2 = e3, o2(2, Xn2);
    });
  }, (e3) => Qn(da2, Rt2 = e3.detail, Rt2)];
}
var lp = class extends wa {
  constructor(e2) {
    super(), va(this, e2, sp, np, Nn, { class: 214, layout: 215, stores: 216, locale: 3, id: 4, util: 217, utils: 218, animations: 219, disabled: 220, status: 212, previewUpscale: 221, previewPad: 222, previewMaskOpacity: 5, previewImageDataMaxSize: 223, previewImageTextPixelRatio: 6, markupMaskOpacity: 7, zoomMaskOpacity: 224, elasticityMultiplier: 8, willRevert: 225, willProcessImage: 226, willRenderCanvas: 9, willRenderToolbar: 227, willSetHistoryInitialState: 228, enableButtonExport: 229, enableButtonRevert: 230, enableNavigateHistory: 231, enableToolbar: 10, enableUtils: 232, enableButtonClose: 233, enableDropImage: 234, enablePasteImage: 235, enableBrowseImage: 236, enableTransparencyGrid: 11, layoutDirectionPreference: 237, layoutHorizontalUtilsPreference: 238, layoutVerticalUtilsPreference: 239, layoutVerticalToolbarPreference: 240, layoutVerticalControlGroupsPreference: 241, layoutVerticalControlTabsPreference: 242, markupEditorZoomLevel: 243, markupEditorZoomLevels: 12, markupEditorZoomAdjustStep: 13, markupEditorZoomAdjustFactor: 14, markupEditorZoomAdjustWheelFactor: 15, markupEditorInteractionMode: 244, muteAudio: 245, willSetMediaInitialTimeOffset: 246, enablePan: 16, enableZoom: 17, enableZoomControls: 247, enableZoomInput: 18, enablePanInput: 248, enableCanvasAlpha: 19, enablePanLimit: 20, panLimitGutterScalar: 21, zoomPresetOptions: 22, zoomAdjustStep: 23, zoomAdjustFactor: 24, zoomAdjustWheelFactor: 25, zoomLevel: 0, imagePreviewSrc: 249, imageOrienter: 250, pluginComponents: 251, pluginOptions: 26, sub: 252, pluginInterface: 1, root: 2, imageSourceToImageData: 27, imagePreview: 28, imagePreviewCurrent: 213, history: 29 }, null, [-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1]);
  }
  get class() {
    return this.$$.ctx[214];
  }
  set class(e2) {
    this.$$set({ class: e2 }), ea();
  }
  get layout() {
    return this.$$.ctx[215];
  }
  set layout(e2) {
    this.$$set({ layout: e2 }), ea();
  }
  get stores() {
    return this.$$.ctx[216];
  }
  set stores(e2) {
    this.$$set({ stores: e2 }), ea();
  }
  get locale() {
    return this.$$.ctx[3];
  }
  set locale(e2) {
    this.$$set({ locale: e2 }), ea();
  }
  get id() {
    return this.$$.ctx[4];
  }
  set id(e2) {
    this.$$set({ id: e2 }), ea();
  }
  get util() {
    return this.$$.ctx[217];
  }
  set util(e2) {
    this.$$set({ util: e2 }), ea();
  }
  get utils() {
    return this.$$.ctx[218];
  }
  set utils(e2) {
    this.$$set({ utils: e2 }), ea();
  }
  get animations() {
    return this.$$.ctx[219];
  }
  set animations(e2) {
    this.$$set({ animations: e2 }), ea();
  }
  get disabled() {
    return this.$$.ctx[220];
  }
  set disabled(e2) {
    this.$$set({ disabled: e2 }), ea();
  }
  get status() {
    return this.$$.ctx[212];
  }
  set status(e2) {
    this.$$set({ status: e2 }), ea();
  }
  get previewUpscale() {
    return this.$$.ctx[221];
  }
  set previewUpscale(e2) {
    this.$$set({ previewUpscale: e2 }), ea();
  }
  get previewPad() {
    return this.$$.ctx[222];
  }
  set previewPad(e2) {
    this.$$set({ previewPad: e2 }), ea();
  }
  get previewMaskOpacity() {
    return this.$$.ctx[5];
  }
  set previewMaskOpacity(e2) {
    this.$$set({ previewMaskOpacity: e2 }), ea();
  }
  get previewImageDataMaxSize() {
    return this.$$.ctx[223];
  }
  set previewImageDataMaxSize(e2) {
    this.$$set({ previewImageDataMaxSize: e2 }), ea();
  }
  get previewImageTextPixelRatio() {
    return this.$$.ctx[6];
  }
  set previewImageTextPixelRatio(e2) {
    this.$$set({ previewImageTextPixelRatio: e2 }), ea();
  }
  get markupMaskOpacity() {
    return this.$$.ctx[7];
  }
  set markupMaskOpacity(e2) {
    this.$$set({ markupMaskOpacity: e2 }), ea();
  }
  get zoomMaskOpacity() {
    return this.$$.ctx[224];
  }
  set zoomMaskOpacity(e2) {
    this.$$set({ zoomMaskOpacity: e2 }), ea();
  }
  get elasticityMultiplier() {
    return this.$$.ctx[8];
  }
  set elasticityMultiplier(e2) {
    this.$$set({ elasticityMultiplier: e2 }), ea();
  }
  get willRevert() {
    return this.$$.ctx[225];
  }
  set willRevert(e2) {
    this.$$set({ willRevert: e2 }), ea();
  }
  get willProcessImage() {
    return this.$$.ctx[226];
  }
  set willProcessImage(e2) {
    this.$$set({ willProcessImage: e2 }), ea();
  }
  get willRenderCanvas() {
    return this.$$.ctx[9];
  }
  set willRenderCanvas(e2) {
    this.$$set({ willRenderCanvas: e2 }), ea();
  }
  get willRenderToolbar() {
    return this.$$.ctx[227];
  }
  set willRenderToolbar(e2) {
    this.$$set({ willRenderToolbar: e2 }), ea();
  }
  get willSetHistoryInitialState() {
    return this.$$.ctx[228];
  }
  set willSetHistoryInitialState(e2) {
    this.$$set({ willSetHistoryInitialState: e2 }), ea();
  }
  get enableButtonExport() {
    return this.$$.ctx[229];
  }
  set enableButtonExport(e2) {
    this.$$set({ enableButtonExport: e2 }), ea();
  }
  get enableButtonRevert() {
    return this.$$.ctx[230];
  }
  set enableButtonRevert(e2) {
    this.$$set({ enableButtonRevert: e2 }), ea();
  }
  get enableNavigateHistory() {
    return this.$$.ctx[231];
  }
  set enableNavigateHistory(e2) {
    this.$$set({ enableNavigateHistory: e2 }), ea();
  }
  get enableToolbar() {
    return this.$$.ctx[10];
  }
  set enableToolbar(e2) {
    this.$$set({ enableToolbar: e2 }), ea();
  }
  get enableUtils() {
    return this.$$.ctx[232];
  }
  set enableUtils(e2) {
    this.$$set({ enableUtils: e2 }), ea();
  }
  get enableButtonClose() {
    return this.$$.ctx[233];
  }
  set enableButtonClose(e2) {
    this.$$set({ enableButtonClose: e2 }), ea();
  }
  get enableDropImage() {
    return this.$$.ctx[234];
  }
  set enableDropImage(e2) {
    this.$$set({ enableDropImage: e2 }), ea();
  }
  get enablePasteImage() {
    return this.$$.ctx[235];
  }
  set enablePasteImage(e2) {
    this.$$set({ enablePasteImage: e2 }), ea();
  }
  get enableBrowseImage() {
    return this.$$.ctx[236];
  }
  set enableBrowseImage(e2) {
    this.$$set({ enableBrowseImage: e2 }), ea();
  }
  get enableTransparencyGrid() {
    return this.$$.ctx[11];
  }
  set enableTransparencyGrid(e2) {
    this.$$set({ enableTransparencyGrid: e2 }), ea();
  }
  get layoutDirectionPreference() {
    return this.$$.ctx[237];
  }
  set layoutDirectionPreference(e2) {
    this.$$set({ layoutDirectionPreference: e2 }), ea();
  }
  get layoutHorizontalUtilsPreference() {
    return this.$$.ctx[238];
  }
  set layoutHorizontalUtilsPreference(e2) {
    this.$$set({ layoutHorizontalUtilsPreference: e2 }), ea();
  }
  get layoutVerticalUtilsPreference() {
    return this.$$.ctx[239];
  }
  set layoutVerticalUtilsPreference(e2) {
    this.$$set({ layoutVerticalUtilsPreference: e2 }), ea();
  }
  get layoutVerticalToolbarPreference() {
    return this.$$.ctx[240];
  }
  set layoutVerticalToolbarPreference(e2) {
    this.$$set({ layoutVerticalToolbarPreference: e2 }), ea();
  }
  get layoutVerticalControlGroupsPreference() {
    return this.$$.ctx[241];
  }
  set layoutVerticalControlGroupsPreference(e2) {
    this.$$set({ layoutVerticalControlGroupsPreference: e2 }), ea();
  }
  get layoutVerticalControlTabsPreference() {
    return this.$$.ctx[242];
  }
  set layoutVerticalControlTabsPreference(e2) {
    this.$$set({ layoutVerticalControlTabsPreference: e2 }), ea();
  }
  get markupEditorZoomLevel() {
    return this.$$.ctx[243];
  }
  set markupEditorZoomLevel(e2) {
    this.$$set({ markupEditorZoomLevel: e2 }), ea();
  }
  get markupEditorZoomLevels() {
    return this.$$.ctx[12];
  }
  set markupEditorZoomLevels(e2) {
    this.$$set({ markupEditorZoomLevels: e2 }), ea();
  }
  get markupEditorZoomAdjustStep() {
    return this.$$.ctx[13];
  }
  set markupEditorZoomAdjustStep(e2) {
    this.$$set({ markupEditorZoomAdjustStep: e2 }), ea();
  }
  get markupEditorZoomAdjustFactor() {
    return this.$$.ctx[14];
  }
  set markupEditorZoomAdjustFactor(e2) {
    this.$$set({ markupEditorZoomAdjustFactor: e2 }), ea();
  }
  get markupEditorZoomAdjustWheelFactor() {
    return this.$$.ctx[15];
  }
  set markupEditorZoomAdjustWheelFactor(e2) {
    this.$$set({ markupEditorZoomAdjustWheelFactor: e2 }), ea();
  }
  get markupEditorInteractionMode() {
    return this.$$.ctx[244];
  }
  set markupEditorInteractionMode(e2) {
    this.$$set({ markupEditorInteractionMode: e2 }), ea();
  }
  get muteAudio() {
    return this.$$.ctx[245];
  }
  set muteAudio(e2) {
    this.$$set({ muteAudio: e2 }), ea();
  }
  get willSetMediaInitialTimeOffset() {
    return this.$$.ctx[246];
  }
  set willSetMediaInitialTimeOffset(e2) {
    this.$$set({ willSetMediaInitialTimeOffset: e2 }), ea();
  }
  get enablePan() {
    return this.$$.ctx[16];
  }
  set enablePan(e2) {
    this.$$set({ enablePan: e2 }), ea();
  }
  get enableZoom() {
    return this.$$.ctx[17];
  }
  set enableZoom(e2) {
    this.$$set({ enableZoom: e2 }), ea();
  }
  get enableZoomControls() {
    return this.$$.ctx[247];
  }
  set enableZoomControls(e2) {
    this.$$set({ enableZoomControls: e2 }), ea();
  }
  get enableZoomInput() {
    return this.$$.ctx[18];
  }
  set enableZoomInput(e2) {
    this.$$set({ enableZoomInput: e2 }), ea();
  }
  get enablePanInput() {
    return this.$$.ctx[248];
  }
  set enablePanInput(e2) {
    this.$$set({ enablePanInput: e2 }), ea();
  }
  get enableCanvasAlpha() {
    return this.$$.ctx[19];
  }
  set enableCanvasAlpha(e2) {
    this.$$set({ enableCanvasAlpha: e2 }), ea();
  }
  get enablePanLimit() {
    return this.$$.ctx[20];
  }
  set enablePanLimit(e2) {
    this.$$set({ enablePanLimit: e2 }), ea();
  }
  get panLimitGutterScalar() {
    return this.$$.ctx[21];
  }
  set panLimitGutterScalar(e2) {
    this.$$set({ panLimitGutterScalar: e2 }), ea();
  }
  get zoomPresetOptions() {
    return this.$$.ctx[22];
  }
  set zoomPresetOptions(e2) {
    this.$$set({ zoomPresetOptions: e2 }), ea();
  }
  get zoomAdjustStep() {
    return this.$$.ctx[23];
  }
  set zoomAdjustStep(e2) {
    this.$$set({ zoomAdjustStep: e2 }), ea();
  }
  get zoomAdjustFactor() {
    return this.$$.ctx[24];
  }
  set zoomAdjustFactor(e2) {
    this.$$set({ zoomAdjustFactor: e2 }), ea();
  }
  get zoomAdjustWheelFactor() {
    return this.$$.ctx[25];
  }
  set zoomAdjustWheelFactor(e2) {
    this.$$set({ zoomAdjustWheelFactor: e2 }), ea();
  }
  get zoomLevel() {
    return this.$$.ctx[0];
  }
  set zoomLevel(e2) {
    this.$$set({ zoomLevel: e2 }), ea();
  }
  get imagePreviewSrc() {
    return this.$$.ctx[249];
  }
  set imagePreviewSrc(e2) {
    this.$$set({ imagePreviewSrc: e2 }), ea();
  }
  get imageOrienter() {
    return this.$$.ctx[250];
  }
  set imageOrienter(e2) {
    this.$$set({ imageOrienter: e2 }), ea();
  }
  get pluginComponents() {
    return this.$$.ctx[251];
  }
  set pluginComponents(e2) {
    this.$$set({ pluginComponents: e2 }), ea();
  }
  get pluginOptions() {
    return this.$$.ctx[26];
  }
  set pluginOptions(e2) {
    this.$$set({ pluginOptions: e2 }), ea();
  }
  get sub() {
    return this.$$.ctx[252];
  }
  get pluginInterface() {
    return this.$$.ctx[1];
  }
  get root() {
    return this.$$.ctx[2];
  }
  set root(e2) {
    this.$$set({ root: e2 }), ea();
  }
  get imageSourceToImageData() {
    return this.$$.ctx[27];
  }
  set imageSourceToImageData(e2) {
    this.$$set({ imageSourceToImageData: e2 }), ea();
  }
  get imagePreview() {
    return this.$$.ctx[28];
  }
  get imagePreviewCurrent() {
    return this.$$.ctx[213];
  }
  set imagePreviewCurrent(e2) {
    this.$$set({ imagePreviewCurrent: e2 }), ea();
  }
  get history() {
    return this.$$.ctx[29];
  }
};
"undefined" != typeof window && ((e2) => {
  if (e2 && e2._39fjmbg)
    return;
  const [t2, o2, i2] = [[99, 111, 110, 115, 111, 108, 101], [108, 111, 103], [84, 104, 105, 115, 32, 118, 101, 114, 115, 105, 111, 110, 32, 111, 102, 32, 80, 105, 110, 116, 117, 114, 97, 32, 105, 115, 32, 102, 111, 114, 32, 116, 101, 115, 116, 105, 110, 103, 32, 112, 117, 114, 112, 111, 115, 101, 115, 32, 111, 110, 108, 121, 46, 32, 86, 105, 115, 105, 116, 32, 104, 116, 116, 112, 115, 58, 47, 47, 112, 113, 105, 110, 97, 46, 110, 108, 47, 112, 105, 110, 116, 117, 114, 97, 47, 32, 116, 111, 32, 112, 117, 114, 99, 104, 97, 115, 101, 32, 97, 32, 118, 97, 108, 105, 100, 32, 108, 105, 99, 101, 110, 115, 101, 46]].map((e3) => e3.map((e4) => String.fromCharCode(e4)).join(""));
  e2 && e2[t2] && e2[t2][o2](i2);
})(window);
var cp = ["klass", "stores", "isVisible", "isActive", "isActiveFraction", "locale"];
var dp = ["history", "klass", "stores", "navButtons", "pluginComponents", "pluginInterface", "pluginOptions", "sub", "imagePreviewSrc", "imagePreview", "imagePreviewCurrent"];
var up = ["locale"];
var hp;
var pp = /* @__PURE__ */ new Set([]);
var mp = {};
var gp = /* @__PURE__ */ new Map();
var $p = (...e2) => {
  e2.filter((e3) => !!e3.util).forEach((e3) => {
    const [t2, o2, i2 = () => true] = e3.util;
    gp.has(t2) || (gp.set(t2, { Component: o2, isSupported: i2 }), Lc(o2).filter((e4) => !cp.includes(e4)).forEach((e4) => {
      pp.add(e4), mp[e4] ? mp[e4].push(t2) : mp[e4] = [t2];
    }));
  });
};
var fp = [...os, "init", "update", "undo", "redo", "revert", "writehistory", "destroy", "show", "hide", "close", "ready", "zoom", "pan", "loadpreview", "selectshape", "updateshape", "addshape", "removeshape", "selectstyle", "markuptap", "markupzoom", "markuppan", "selectutil", "selectcontrol"];
var yp = (e2, t2, o2 = {}) => {
  const { prefix: i2 = "pintura:" } = o2;
  return fp.map((o3) => e2.on(o3, (e3) => Et(t2) ? ((e4, t3, o4) => e4.dispatchEvent(new CustomEvent(t3, { detail: o4, bubbles: true, cancelable: true })))(t2, `${i2}${o3}`, e3) : t2(o3, e3)));
};
var bp = (e2) => {
  if (void 0 === e2 || ko(e2))
    return e2;
  if (!M(e2))
    return false;
  const t2 = e2;
  if (!t2.length)
    return;
  const [o2, i2] = t2.split(/\/|:/g).map((e3) => parseFloat(e3.replace(/,/, "."))).filter(Boolean);
  return !!o2 && (i2 ? Math.abs(o2 / i2) : o2);
};
var xp = (e2) => M(e2[0]);
var vp = (e2) => !xp(e2);
var wp = (e2) => e2[1];
var Sp = (e2) => e2[3] || [];
function kp(e2, t2, o2, i2) {
  return Array.isArray(o2) && (i2 = o2, o2 = {}), [e2, t2, o2 || {}, i2 || []];
}
var Cp = (e2, t2, o2, i2 = (e3) => e3) => {
  const n2 = Ap(t2, o2), r2 = n2.findIndex((e3) => wp(e3) === t2);
  var a2, s2, l2;
  a2 = n2, s2 = i2(r2), l2 = e2, a2.splice(s2, 0, l2);
};
var Mp = (e2, t2, o2) => Cp(e2, t2, o2);
var Tp = (e2, t2, o2) => Cp(e2, t2, o2, (e3) => e3 + 1);
var Pp = (e2, t2) => {
  if (vp(t2))
    return t2.push(e2);
  t2[3] = [...Sp(t2), e2];
};
var Rp = (e2, t2) => {
  const o2 = Ap(e2, t2);
  return Yc(o2, (t3) => wp(t3) === e2), o2;
};
var Ip = (e2, t2) => {
  if (t2 && t2.length) {
    if (xp(t2)) {
      if (wp(t2) === e2)
        return t2;
      const o2 = Ip(e2, Sp(t2));
      if (o2)
        return o2;
    }
    if (vp(t2))
      for (const o2 of t2) {
        const t3 = Ip(e2, o2);
        if (t3)
          return t3;
      }
  }
};
var Ap = (e2, t2) => vp(t2) ? t2.find((t3) => wp(t3) === e2) ? t2 : t2.find((t3) => Ap(e2, Sp(t3))) : Ap(e2, Sp(t2));
var Ep = (e2, t2) => {
  const [, , o2] = e2;
  Object.assign(o2, t2);
};
var Lp = () => [0.75, 0.25, 0.25, 0, 0, 0.25, 0.75, 0.25, 0, 0, 0.25, 0.25, 0.75, 0, 0, 0, 0, 0, 1, 0];
var Fp = () => [1.398, -0.316, 0.065, -0.273, 0.201, -0.051, 1.278, -0.08, -0.273, 0.201, -0.051, 0.119, 1.151, -0.29, 0.215, 0, 0, 0, 1, 0];
var zp = () => [1.073, -0.015, 0.092, -0.115, -0.017, 0.107, 0.859, 0.184, -0.115, -0.017, 0.015, 0.077, 1.104, -0.115, -0.017, 0, 0, 0, 1, 0];
var Bp = () => [1.06, 0, 0, 0, 0, 0, 1.01, 0, 0, 0, 0, 0, 0.93, 0, 0, 0, 0, 0, 1, 0];
var Op = () => [1.1, 0, 0, 0, -0.1, 0, 1.1, 0, 0, -0.1, 0, 0, 1.2, 0, -0.1, 0, 0, 0, 1, 0];
var Dp = () => [-1, 0, 0, 1, 0, 0, -1, 0, 1, 0, 0, 0, -1, 1, 0, 0, 0, 0, 1, 0];
var Wp = () => [0.212, 0.715, 0.114, 0, 0, 0.212, 0.715, 0.114, 0, 0, 0.212, 0.715, 0.114, 0, 0, 0, 0, 0, 1, 0];
var _p = () => [0.15, 1.3, -0.25, 0.1, -0.2, 0.15, 1.3, -0.25, 0.1, -0.2, 0.15, 1.3, -0.25, 0.1, -0.2, 0, 0, 0, 1, 0];
var Vp = () => [0.163, 0.518, 0.084, -0.01, 0.208, 0.163, 0.529, 0.082, -0.02, 0.21, 0.171, 0.529, 0.084, 0, 0.214, 0, 0, 0, 1, 0];
var Np = () => [0.338, 0.991, 0.117, 0.093, -0.196, 0.302, 1.049, 0.096, 0.078, -0.196, 0.286, 1.016, 0.146, 0.101, -0.196, 0, 0, 0, 1, 0];
var Hp = () => [0.393, 0.768, 0.188, 0, 0, 0.349, 0.685, 0.167, 0, 0, 0.272, 0.533, 0.13, 0, 0, 0, 0, 0, 1, 0];
var jp = () => [0.289, 0.62, 0.185, 0, 0.077, 0.257, 0.566, 0.163, 0, 0.115, 0.2, 0.43, 0.128, 0, 0.188, 0, 0, 0, 1, 0];
var Up = () => [0.269, 0.764, 0.172, 0.05, 0.1, 0.239, 0.527, 0.152, 0, 0.176, 0.186, 0.4, 0.119, 0, 0.159, 0, 0, 0, 1, 0];
var Zp = () => [0.547, 0.764, 0.134, 0, -0.147, 0.281, 0.925, 0.12, 0, -0.135, 0.225, 0.558, 0.33, 0, -0.113, 0, 0, 0, 1, 0];
var Xp = { chrome: Fp, fade: zp, pastel: Lp, cold: Op, warm: Bp, monoDefault: Wp, monoWash: Vp, monoNoir: _p, monoStark: Np, sepiaDefault: Hp, sepiaRust: Up, sepiaBlues: jp, sepiaColor: Zp };
var Gp = { filterFunctions: Xp, filterOptions: [["Default", [[void 0, (e2) => e2.labelDefault]]], ["Classic", [["chrome", (e2) => e2.filterLabelChrome], ["fade", (e2) => e2.filterLabelFade], ["cold", (e2) => e2.filterLabelCold], ["warm", (e2) => e2.filterLabelWarm], ["pastel", (e2) => e2.filterLabelPastel]]], ["Monochrome", [["monoDefault", (e2) => e2.filterLabelMonoDefault], ["monoNoir", (e2) => e2.filterLabelMonoNoir], ["monoStark", (e2) => e2.filterLabelMonoStark], ["monoWash", (e2) => e2.filterLabelMonoWash]]], ["Sepia", [["sepiaDefault", (e2) => e2.filterLabelSepiaDefault], ["sepiaRust", (e2) => e2.filterLabelSepiaRust], ["sepiaBlues", (e2) => e2.filterLabelSepiaBlues], ["sepiaColor", (e2) => e2.filterLabelSepiaColor]]]] };
var Yp = { borderColor: "strokeColor", borderWidth: "strokeWidth", lineWidth: "strokeWidth", fontColor: "color", lineColor: "strokeColor", src: "backgroundImage", fit: "backgroundSize" };
var qp = (e2) => 0 === e2 || "0%" === e2 || "0px" === e2 ? 0 : /px$/.test(e2) ? parseInt(e2, 10) : /\%$/.test(e2) ? e2 : e2 <= 1 ? 100 * e2 + "%" : void 0;
var Kp = (e2, t2) => {
  let o2, i2;
  return /%$/.test(e2) ? (o2 = parseFloat(e2), i2 = parseFloat(t2), o2 + i2 + "%") : /px$/.test(e2) ? (o2 = parseInt(e2, 10), i2 = parseInt(t2, 10), o2 + i2 + "px") : void 0;
};
var Jp = (e2, t2) => {
  const o2 = e2, i2 = t2, n2 = 1.5707963267948966 - t2, r2 = Math.sin(1.5707963267948966), a2 = Math.sin(i2), s2 = Math.sin(n2), l2 = Math.cos(n2), c2 = o2 / r2;
  return ce(l2 * (c2 * a2), l2 * (c2 * s2));
};
var Qp = (e2, { flip: t2, aspectRatio: o2, rotation: i2, center: n2, zoom: r2, scaleToFit: a2 }) => {
  const s2 = { flipX: false, flipY: false }, l2 = !n2 || n2 && 0.5 === n2.x && 0.5 === n2.y;
  t2 && t2.horizontal && (s2.flipX = t2.horizontal), t2 && t2.vertical && (s2.flipY = t2.vertical);
  const c2 = ((e3, t3) => null != t3 ? 1 / t3 : e3.width / e3.height)(e2, o2), d2 = !(false === a2), u2 = ((e3, t3, o3 = 1) => {
    const i3 = e3.height / e3.width, n3 = t3;
    let r3 = 1, a3 = i3;
    a3 > n3 && (a3 = n3, r3 = a3 / i3);
    const s3 = Math.max(1 / r3, n3 / a3), l3 = e3.width / (o3 * s3 * r3);
    return { width: l3, height: l3 * t3 };
  })(e2, o2, r2), h2 = l2 ? e2 : ((e3, t3) => {
    const o3 = t3.x > 0.5 ? 1 - t3.x : t3.x, i3 = t3.y > 0.5 ? 1 - t3.y : t3.y;
    return Oe(2 * o3 * e3.width, 2 * i3 * e3.height);
  })(e2, d2 ? n2 : { x: 0.5, y: 0.5 }), p2 = ((e3, t3) => {
    let o3 = e3.width, i3 = o3 * t3;
    i3 > e3.height && (i3 = e3.height, o3 = i3 / t3);
    const n3 = 0.5 * (e3.width - o3), r3 = 0.5 * (e3.height - i3);
    return ot(n3, r3, o3, i3);
  })(e2, o2);
  if ((o2 || !l2 || r2) && (s2.crop = ft(Ke(h2), c2)), "number" == typeof i2 && null !== i2 && 0 !== i2) {
    null != i2 && (s2.rotation = i2);
    const t3 = ((e3, t4) => {
      const o4 = e3.width, i3 = e3.height, n3 = Jp(o4, t4), r4 = Jp(i3, t4), a4 = ce(e3.x + Math.abs(n3.x), e3.y - Math.abs(n3.y)), s3 = ce(e3.x + e3.width + Math.abs(r4.y), e3.y + Math.abs(r4.x)), l4 = ce(e3.x - Math.abs(r4.y), e3.y + e3.height - Math.abs(r4.x));
      return { width: Me(a4, s3), height: Me(a4, l4) };
    })(p2, i2), o3 = Math.max(t3.width / h2.width, t3.height / h2.height), r3 = ce(n2.x * e2.width, n2.y * e2.height), a3 = At(e2, i2), l3 = _e(a3), c3 = ce(0.5 * (a3.width - e2.width), 0.5 * (a3.height - e2.height)), d3 = pt({ x: c3.x + r3.x - u2.width / o3 * 0.5, y: c3.y + r3.y - u2.height / o3 * 0.5, width: u2.width / o3, height: u2.height / o3 }, i2), m2 = Ie(d3.map(ue), i2, l3.x, l3.y), g2 = it(Qe(m2)), $2 = Ie(m2.map(ue), -2 * i2, g2.x, g2.y);
    s2.crop = Qe($2);
  } else
    null != r2 && rt(s2.crop, 1 / r2);
  return d2 || (s2.cropLimitToImage = false), s2;
};
var em = (e2, t2, o2 = {}) => {
  const i2 = {};
  if (!((e3 = {}) => {
    if ("markup" in e3 || "color" in e3 || "filter" in e3)
      return true;
    const { crop: t3 } = e3;
    return !(!t3 || !("flip" in t3 || "center" in t3 || "aspectRatio" in t3 || "rotation" in t3));
  })(o2))
    return o2;
  if (o2.crop && Object.assign(i2, Qp(t2, o2.crop)), o2.markup) {
    const e3 = Array.isArray(o2.markup) ? o2.markup : Object.values(o2.markup);
    i2.decoration = e3.map((e4) => ((e5, t3, o3) => {
      const i3 = Object.keys(o3).reduce((t4, i4) => {
        let n3 = o3[i4];
        return i4 = Yp[i4] || i4, /px$/.test(n3) ? n3 = qp(n3) : /^(?:x|y|left|right|top|bottom|width|height|fontSize|borderWidth|strokeWidth)$/.test(i4) && "number" == typeof n3 && ("strokeWidth" !== i4 && "borderWidth" !== i4 && "fontSize" !== i4 || (n3 = Math.min(e5.width, e5.height) * n3 + "px"), n3 = qp(n3)), /color/i.test(i4) && n3 && (n3 = bh(n3)), null === n3 && (n3 = void 0), t4[i4] = n3, t4;
      }, {});
      if ("line" === t3 && (i3.lineDecoration.length >= 1 && (i3.lineEnd = "arrow"), 2 === i3.lineDecoration.length && (i3.lineStart = "arrow"), i3.x1 = i3.x, i3.y1 = i3.y, i3.x2 = Kp(i3.x, i3.width), i3.y2 = Kp(i3.y, i3.height), delete i3.x, delete i3.y, delete i3.width, delete i3.height, delete i3.lineDecoration, delete i3.lineStyle), "text" === t3) {
        if (!ko(i3.y)) {
          const t4 = Math.min(e5.width, e5.height);
          i3.y = t4 * (parseFloat(i3.y) / 100);
        }
        i3.y = i3.y - i3.fontSize, delete i3.width, delete i3.height, delete i3.borderStyle, i3.lineHeight = i3.lineHeight || "120%";
      }
      if ("ellipse" === t3) {
        let t4, o4;
        if (/%$/.test(i3.width)) {
          t4 = parseFloat(i3.width) / 100, o4 = parseFloat(i3.height) / 100;
          const n3 = t4 * e5.width, r2 = o4 * e5.height;
          t4 = n3 / e5.width * 100, o4 = r2 / e5.height * 100;
        } else
          t4 = i3.width, o4 = i3.height;
        i3.rx = 0.5 * t4, i3.ry = 0.5 * o4, /%$/.test(i3.width) && (i3.rx += "%", i3.ry += "%"), i3.x = Kp(i3.x, i3.rx), i3.y = Kp(i3.y, i3.ry), delete i3.width, delete i3.height, delete i3.borderStyle;
      }
      if ("rect" === t3 && delete i3.borderStyle, "path" === t3) {
        let e6, t4 = [];
        for (const o4 of i3.points)
          e6 ? Ce(e6, o4) < 1e-9 || (t4.push(o4), e6 = o4, e6 = o4) : (t4.push(o4), e6 = o4);
        i3.points = t4.map((e7) => ({ x: qp(e7.x), y: qp(e7.y) }));
      }
      return i3;
    })(i2.crop || t2, e4[0], e4[1]));
  }
  if (o2.color || o2.colors) {
    const e3 = o2.color || o2.colors;
    Object.keys(e3).filter((t3) => e3[t3]).map((t3) => [t3, Array.isArray(e3[t3].matrix) ? e3[t3].matrix : Object.values(e3[t3].matrix)]).forEach(([e4, t3]) => {
      i2.colorMatrix || (i2.colorMatrix = {}), i2.colorMatrix[e4] = t3;
    });
  }
  if (o2.filter || o2.filters) {
    const t3 = o2.filters || o2.filter;
    i2.colorMatrix || (i2.colorMatrix = {});
    const n3 = e2 ? e2.filterFunctions : Xp;
    i2.colorMatrix.filter = "string" == typeof t3 && n3[t3] ? n3[t3]() : t3.matrix;
  }
  const n2 = o2.size ? o2.size : !!o2.resize && o2.resize.size;
  return n2 && n2.width && n2.height && (i2.targetSize = { width: n2.width, height: n2.height }), i2;
};
var tm = null;
var om = () => (null === tm && (tm = c() && !("[object OperaMini]" === Object.prototype.toString.call(window.operamini)) && "visibilityState" in document && "Promise" in window && "File" in window && "URL" in window && "createObjectURL" in window.URL && "performance" in window), tm);
var im = { base: 0, min: -0.25, max: 0.25, getLabel: (e2) => Ih(e2 / 0.25), getStore: ({ imageColorMatrix: e2 }) => e2, getValue: (e2) => {
  if (e2.brightness)
    return e2.brightness[4];
}, setValue: (e2, t2) => e2.update((e3) => ({ ...e3, brightness: [1, 0, 0, 0, t2, 0, 1, 0, 0, t2, 0, 0, 1, 0, t2, 0, 0, 0, 1, 0] })) };
var nm = { base: 1, min: 0.5, max: 1.5, getLabel: (e2) => Ih(2 * (e2 - 0.5) - 1), getStore: ({ imageColorMatrix: e2 }) => e2, getValue: (e2) => {
  if (e2.contrast)
    return e2.contrast[0];
}, setValue: (e2, t2) => e2.update((e3) => ({ ...e3, contrast: [t2, 0, 0, 0, 0.5 * (1 - t2), 0, t2, 0, 0, 0.5 * (1 - t2), 0, 0, t2, 0, 0.5 * (1 - t2), 0, 0, 0, 1, 0] })) };
var rm = { base: 1, min: 0, max: 2, getLabel: (e2) => Ih(e2 - 1), getStore: ({ imageColorMatrix: e2 }) => e2, getValue: (e2) => {
  if (e2.saturation)
    return (e2.saturation[0] - 0.213) / 0.787;
}, setValue: (e2, t2) => e2.update((e3) => ({ ...e3, saturation: [0.213 + 0.787 * t2, 0.715 - 0.715 * t2, 0.072 - 0.072 * t2, 0, 0, 0.213 - 0.213 * t2, 0.715 + 0.285 * t2, 0.072 - 0.072 * t2, 0, 0, 0.213 - 0.213 * t2, 0.715 - 0.715 * t2, 0.072 + 0.928 * t2, 0, 0, 0, 0, 0, 1, 0] })) };
var am = { base: 1, min: 0.5, max: 1.5, getLabel: (e2) => Ih(2 * (e2 - 0.5) - 1), getStore: ({ imageColorMatrix: e2 }) => e2, getValue: (e2) => {
  if (e2.exposure)
    return e2.exposure[0];
}, setValue: (e2, t2) => e2.update((e3) => ({ ...e3, exposure: [t2, 0, 0, 0, 0, 0, t2, 0, 0, 0, 0, 0, t2, 0, 0, 0, 0, 0, 1, 0] })) };
var sm = { base: 1, min: 0.15, max: 4, getLabel: (e2) => Ih(e2 < 1 ? (e2 - 0.15) / 0.85 - 1 : (e2 - 1) / 3), getStore: ({ imageGamma: e2 }) => e2 };
var lm = { base: 0, min: -1, max: 1, getStore: ({ imageVignette: e2 }) => e2 };
var cm = { base: 0, min: -1, max: 1, getStore: ({ imageConvolutionMatrix: e2 }) => e2, getValue: (e2) => {
  if (e2.clarity)
    return 0 === e2.clarity[0] ? e2.clarity[1] / -1 : e2.clarity[1] / -2;
}, setValue: (e2, t2) => {
  e2.update((e3) => ({ ...e3, clarity: t2 >= 0 ? [0, -1 * t2, 0, -1 * t2, 1 + 4 * t2, -1 * t2, 0, -1 * t2, 0] : [-1 * t2, -2 * t2, -1 * t2, -2 * t2, 1 + -3 * t2, -2 * t2, -1 * t2, -2 * t2, -1 * t2] }));
} };
var dm = { base: 0, min: -1, max: 1, getStore: ({ imageColorMatrix: e2 }) => e2, getValue: (e2) => {
  if (!e2.temperature)
    return;
  const t2 = e2.temperature[0];
  return t2 >= 1 ? (t2 - 1) / 0.1 : (1 - t2) / -0.15;
}, setValue: (e2, t2) => e2.update((e3) => ({ ...e3, temperature: t2 > 0 ? [1 + 0.1 * t2, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1 + 0.1 * -t2, 0, 0, 0, 0, 0, 1, 0] : [1 + 0.15 * t2, 0, 0, 0, 0, 0, 1 + 0.05 * t2, 0, 0, 0, 0, 0, 1 + 0.15 * -t2, 0, 0, 0, 0, 0, 1, 0] })) };
var um = { finetuneControlConfiguration: { gamma: sm, brightness: im, contrast: nm, saturation: rm, exposure: am, temperature: dm, clarity: cm, vignette: lm }, finetuneOptions: [["brightness", (e2) => e2.finetuneLabelBrightness], ["contrast", (e2) => e2.finetuneLabelContrast], ["saturation", (e2) => e2.finetuneLabelSaturation], ["exposure", (e2) => e2.finetuneLabelExposure], ["temperature", (e2) => e2.finetuneLabelTemperature], ["gamma", (e2) => e2.finetuneLabelGamma], !sc() && ["clarity", (e2) => e2.finetuneLabelClarity], ["vignette", (e2) => e2.finetuneLabelVignette]].filter(Boolean) };
var hm = { shape: { frameColor: [1, 1, 1], frameStyle: "solid", frameSize: "2.5%" }, thumb: '<rect stroke-width="5" x="0" y="0" width="100%" height="100%"/>' };
var pm = { shape: { frameColor: [1, 1, 1], frameStyle: "solid", frameSize: "2.5%", frameRound: true }, thumb: '<rect stroke-width="5" x="0" y="0" width="100%" height="100%" rx="12%"/>' };
var mm = { shape: { frameColor: [1, 1, 1], frameStyle: "line", frameInset: "2.5%", frameSize: ".3125%", frameRadius: 0 }, thumb: '<div style="top:.5em;left:.5em;right:.5em;bottom:.5em;box-shadow:inset 0 0 0 1px currentColor"></div>' };
var gm = { shape: { frameColor: [1, 1, 1], frameStyle: "line", frameAmount: 2, frameInset: "2.5%", frameSize: ".3125%", frameOffset: "1.25%", frameRadius: 0 }, thumb: '<div style="top:.75em;left:.75em;right:.75em;bottom:.75em; outline: 3px double"></div>' };
var $m = { shape: { frameColor: [1, 1, 1], frameStyle: "edge", frameInset: "2.5%", frameOffset: "5%", frameSize: ".3125%" }, thumb: '<div style="top:.75em;left:.5em;bottom:.75em;border-left:1px solid"></div><div style="top:.75em;right:.5em;bottom:.75em;border-right:1px solid"></div><div style="top:.5em;left:.75em;right:.75em;border-top:1px solid"></div><div style="bottom:.5em;left:.75em;right:.75em;border-bottom:1px solid"></div>' };
var fm = { shape: { frameColor: [1, 1, 1], frameStyle: "edge", frameInset: "2.5%", frameSize: ".3125%" }, thumb: '<div style="top:-.5em;left:.5em;right:.5em;bottom:-.5em; box-shadow: inset 0 0 0 1px currentColor"></div><div style="top:.5em;left:-.5em;right:-.5em;bottom:.5em;box-shadow:inset 0 0 0 1px currentColor"></div>' };
var ym = { shape: { frameColor: [1, 1, 1], frameStyle: "edge", frameOffset: "1.5%", frameSize: ".3125%" }, thumb: '<div style="top:.3125em;left:.5em;bottom:.3125em;border-left:1px solid"></div><div style="top:.3125em;right:.5em;bottom:.3125em;border-right:1px solid"></div><div style="top:.5em;left:.3125em;right:.3125em;border-top:1px solid"></div><div style="bottom:.5em;left:.3125em;right:.3125em;border-bottom:1px solid"></div>' };
var bm = { shape: { frameColor: [1, 1, 1], frameStyle: "hook", frameInset: "2.5%", frameSize: ".3125%", frameLength: "5%" }, thumb: '<div style="top:.5em;left:.5em;width:.75em;height:.75em; border-left: 1px solid;border-top: 1px solid;"></div><div style="top:.5em;right:.5em;width:.75em;height:.75em; border-right: 1px solid;border-top: 1px solid;"></div><div style="bottom:.5em;left:.5em;width:.75em;height:.75em; border-left: 1px solid;border-bottom: 1px solid;"></div><div style="bottom:.5em;right:.5em;width:.75em;height:.75em; border-right: 1px solid;border-bottom: 1px solid;"></div>' };
var xm = { shape: { frameColor: [1, 1, 1], frameStyle: "polaroid" }, thumb: '<rect stroke-width="20%" x="-5%" y="-5%" width="110%" height="96%"/>' };
var vm = { frameStyles: { solidSharp: hm, solidRound: pm, lineSingle: mm, lineMultiple: gm, edgeSeparate: $m, edgeCross: fm, edgeOverlap: ym, hook: bm, polaroid: xm }, frameOptions: [[void 0, (e2) => e2.labelNone], ["solidSharp", (e2) => e2.frameLabelMatSharp], ["solidRound", (e2) => e2.frameLabelMatRound], ["lineSingle", (e2) => e2.frameLabelLineSingle], ["lineMultiple", (e2) => e2.frameLabelLineMultiple], ["edgeCross", (e2) => e2.frameLabelEdgeCross], ["edgeSeparate", (e2) => e2.frameLabelEdgeSeparate], ["edgeOverlap", (e2) => e2.frameLabelEdgeOverlap], ["hook", (e2) => e2.frameLabelCornerHooks], ["polaroid", (e2) => e2.frameLabelPolaroid]] };
var wm = (e2, t2, o2) => {
  let i2, n2, r2;
  const a2 = Math.floor(6 * e2), s2 = 6 * e2 - a2, l2 = o2 * (1 - t2), c2 = o2 * (1 - s2 * t2), d2 = o2 * (1 - (1 - s2) * t2);
  switch (a2 % 6) {
    case 0:
      i2 = o2, n2 = d2, r2 = l2;
      break;
    case 1:
      i2 = c2, n2 = o2, r2 = l2;
      break;
    case 2:
      i2 = l2, n2 = o2, r2 = d2;
      break;
    case 3:
      i2 = l2, n2 = c2, r2 = o2;
      break;
    case 4:
      i2 = d2, n2 = l2, r2 = o2;
      break;
    case 5:
      i2 = o2, n2 = l2, r2 = c2;
  }
  return [i2, n2, r2];
};
function Sm(e2) {
  let t2, o2, i2;
  return { c() {
    t2 = hr("div"), o2 = hr("span"), xr(t2, "class", "PinturaColorPreview"), xr(t2, "title", e2[0]), xr(t2, "style", i2 = "--color:" + e2[1]);
  }, m(e3, i3) {
    dr(e3, t2, i3), sr(t2, o2);
  }, p(e3, [o3]) {
    1 & o3 && xr(t2, "title", e3[0]), 2 & o3 && i2 !== (i2 = "--color:" + e3[1]) && xr(t2, "style", i2);
  }, i: zn, o: zn, d(e3) {
    e3 && ur(t2);
  } };
}
function km(e2, t2, o2) {
  let i2, { color: n2 } = t2, { title: r2 } = t2;
  return e2.$$set = (e3) => {
    "color" in e3 && o2(2, n2 = e3.color), "title" in e3 && o2(0, r2 = e3.title);
  }, e2.$$.update = () => {
    4 & e2.$$.dirty && o2(1, i2 = n2 ? zo(n2) : "transparent");
  }, [r2, i2, n2];
}
var Cm = class extends wa {
  constructor(e2) {
    super(), va(this, e2, km, Sm, Nn, { color: 2, title: 0 });
  }
};
function Mm(e2) {
  let t2, o2;
  return { c() {
    t2 = hr("span"), o2 = mr(e2[0]);
  }, m(e3, i2) {
    dr(e3, t2, i2), sr(t2, o2);
  }, p(e3, t3) {
    1 & t3[0] && wr(o2, e3[0]);
  }, d(e3) {
    e3 && ur(t2);
  } };
}
function Tm(e2) {
  let t2, o2, i2, n2;
  o2 = new Cm({ props: { color: e2[4], title: jd(e2[8], e2[10]) } });
  let r2 = !e2[9] && Mm(e2);
  return { c() {
    t2 = hr("span"), ya(o2.$$.fragment), i2 = gr(), r2 && r2.c(), xr(t2, "slot", "label"), xr(t2, "class", "PinturaButtonLabel");
  }, m(e3, a2) {
    dr(e3, t2, a2), ba(o2, t2, null), sr(t2, i2), r2 && r2.m(t2, null), n2 = true;
  }, p(e3, i3) {
    const n3 = {};
    16 & i3[0] && (n3.color = e3[4]), 1280 & i3[0] && (n3.title = jd(e3[8], e3[10])), o2.$set(n3), e3[9] ? r2 && (r2.d(1), r2 = null) : r2 ? r2.p(e3, i3) : (r2 = Mm(e3), r2.c(), r2.m(t2, null));
  }, i(e3) {
    n2 || (sa(o2.$$.fragment, e3), n2 = true);
  }, o(e3) {
    la(o2.$$.fragment, e3), n2 = false;
  }, d(e3) {
    e3 && ur(t2), xa(o2), r2 && r2.d();
  } };
}
function Pm(e2) {
  let t2, o2, i2, n2, r2, a2, s2, l2, c2, d2, u2, h2, p2;
  c2 = new Uu({ props: { class: "PinturaHuePicker", knobStyle: "background-color:" + e2[19], onchange: e2[24], value: e2[14], min: 0, max: 1, step: 0.01 } });
  let m2 = e2[11] && Rm(e2);
  return { c() {
    t2 = hr("div"), o2 = hr("div"), i2 = hr("div"), n2 = hr("div"), l2 = gr(), ya(c2.$$.fragment), d2 = gr(), m2 && m2.c(), xr(n2, "role", "button"), xr(n2, "aria-label", "Saturation slider"), xr(n2, "class", "PinturaPickerKnob"), xr(n2, "tabindex", "0"), xr(n2, "style", r2 = `background-color:${e2[18]};`), xr(i2, "class", "PinturaPickerKnobController"), xr(i2, "style", a2 = `transform:translate(${e2[22]}%,${e2[21]}%)`), xr(o2, "class", "PinturaSaturationPicker"), xr(o2, "style", s2 = "background-color: " + e2[19]), xr(t2, "class", "PinturaPicker");
  }, m(r3, a3) {
    dr(r3, t2, a3), sr(t2, o2), sr(o2, i2), sr(i2, n2), e2[32](o2), sr(t2, l2), ba(c2, t2, null), sr(t2, d2), m2 && m2.m(t2, null), u2 = true, h2 || (p2 = [fr(n2, "nudge", e2[27]), er(Jc.call(null, n2, { preventDefault: true })), fr(o2, "pointerdown", e2[26])], h2 = true);
  }, p(e3, l3) {
    (!u2 || 262144 & l3[0] && r2 !== (r2 = `background-color:${e3[18]};`)) && xr(n2, "style", r2), (!u2 || 6291456 & l3[0] && a2 !== (a2 = `transform:translate(${e3[22]}%,${e3[21]}%)`)) && xr(i2, "style", a2), (!u2 || 524288 & l3[0] && s2 !== (s2 = "background-color: " + e3[19])) && xr(o2, "style", s2);
    const d3 = {};
    524288 & l3[0] && (d3.knobStyle = "background-color:" + e3[19]), 16384 & l3[0] && (d3.value = e3[14]), c2.$set(d3), e3[11] ? m2 ? (m2.p(e3, l3), 2048 & l3[0] && sa(m2, 1)) : (m2 = Rm(e3), m2.c(), sa(m2, 1), m2.m(t2, null)) : m2 && (ra(), la(m2, 1, 1, () => {
      m2 = null;
    }), aa());
  }, i(e3) {
    u2 || (sa(c2.$$.fragment, e3), sa(m2), u2 = true);
  }, o(e3) {
    la(c2.$$.fragment, e3), la(m2), u2 = false;
  }, d(o3) {
    o3 && ur(t2), e2[32](null), xa(c2), m2 && m2.d(), h2 = false, _n(p2);
  } };
}
function Rm(e2) {
  let t2, o2;
  return t2 = new Uu({ props: { class: "PinturaOpacityPicker", knobStyle: "background-color:" + e2[16], trackStyle: `background-image:linear-gradient(to right,${e2[17]},${e2[18]})`, onchange: e2[25], value: e2[15], min: 0, max: 1, step: 0.01 } }), { c() {
    ya(t2.$$.fragment);
  }, m(e3, i2) {
    ba(t2, e3, i2), o2 = true;
  }, p(e3, o3) {
    const i2 = {};
    65536 & o3[0] && (i2.knobStyle = "background-color:" + e3[16]), 393216 & o3[0] && (i2.trackStyle = `background-image:linear-gradient(to right,${e3[17]},${e3[18]})`), 32768 & o3[0] && (i2.value = e3[15]), t2.$set(i2);
  }, i(e3) {
    o2 || (sa(t2.$$.fragment, e3), o2 = true);
  }, o(e3) {
    la(t2.$$.fragment, e3), o2 = false;
  }, d(e3) {
    xa(t2, e3);
  } };
}
function Im(e2) {
  let t2, o2;
  return t2 = new yu({ props: { label: jd(e2[10].labelColorPalette, e2[10]), class: hc(["PinturaColorPresets", e2[9] ? "PinturaColorPresetsGrid" : "PinturaColorPresetsList"]), hideLabel: false, name: e2[1], value: e2[4], optionGroupClass: "PinturaListOptionGroup", optionClass: "PinturaListOption", options: e2[2].map(e2[33]), selectedIndex: e2[3], optionMapper: e2[7], optionLabelClass: e2[6], onchange: e2[34], $$slots: { option: [Lm, ({ option: e3 }) => ({ 45: e3 }), ({ option: e3 }) => [0, e3 ? 16384 : 0]], group: [Am, ({ option: e3 }) => ({ 45: e3 }), ({ option: e3 }) => [0, e3 ? 16384 : 0]] }, $$scope: { ctx: e2 } } }), { c() {
    ya(t2.$$.fragment);
  }, m(e3, i2) {
    ba(t2, e3, i2), o2 = true;
  }, p(e3, o3) {
    const i2 = {};
    1024 & o3[0] && (i2.label = jd(e3[10].labelColorPalette, e3[10])), 512 & o3[0] && (i2.class = hc(["PinturaColorPresets", e3[9] ? "PinturaColorPresetsGrid" : "PinturaColorPresetsList"])), 2 & o3[0] && (i2.name = e3[1]), 16 & o3[0] && (i2.value = e3[4]), 1028 & o3[0] && (i2.options = e3[2].map(e3[33])), 8 & o3[0] && (i2.selectedIndex = e3[3]), 128 & o3[0] && (i2.optionMapper = e3[7]), 64 & o3[0] && (i2.optionLabelClass = e3[6]), 512 & o3[0] | 49152 & o3[1] && (i2.$$scope = { dirty: o3, ctx: e3 }), t2.$set(i2);
  }, i(e3) {
    o2 || (sa(t2.$$.fragment, e3), o2 = true);
  }, o(e3) {
    la(t2.$$.fragment, e3), o2 = false;
  }, d(e3) {
    xa(t2, e3);
  } };
}
function Am(e2) {
  let t2, o2, i2 = e2[45].label + "";
  return { c() {
    t2 = hr("span"), o2 = mr(i2), xr(t2, "slot", "group");
  }, m(e3, i3) {
    dr(e3, t2, i3), sr(t2, o2);
  }, p(e3, t3) {
    16384 & t3[1] && i2 !== (i2 = e3[45].label + "") && wr(o2, i2);
  }, d(e3) {
    e3 && ur(t2);
  } };
}
function Em(e2) {
  let t2, o2, i2 = e2[45].label + "";
  return { c() {
    t2 = hr("span"), o2 = mr(i2), xr(t2, "class", "PinturaButtonLabel");
  }, m(e3, i3) {
    dr(e3, t2, i3), sr(t2, o2);
  }, p(e3, t3) {
    16384 & t3[1] && i2 !== (i2 = e3[45].label + "") && wr(o2, i2);
  }, d(e3) {
    e3 && ur(t2);
  } };
}
function Lm(e2) {
  let t2, o2, i2, n2;
  o2 = new Cm({ props: { title: e2[45].label, color: e2[45].value } });
  let r2 = !e2[9] && Em(e2);
  return { c() {
    t2 = hr("span"), ya(o2.$$.fragment), i2 = gr(), r2 && r2.c(), xr(t2, "slot", "option");
  }, m(e3, a2) {
    dr(e3, t2, a2), ba(o2, t2, null), sr(t2, i2), r2 && r2.m(t2, null), n2 = true;
  }, p(e3, i3) {
    const n3 = {};
    16384 & i3[1] && (n3.title = e3[45].label), 16384 & i3[1] && (n3.color = e3[45].value), o2.$set(n3), e3[9] ? r2 && (r2.d(1), r2 = null) : r2 ? r2.p(e3, i3) : (r2 = Em(e3), r2.c(), r2.m(t2, null));
  }, i(e3) {
    n2 || (sa(o2.$$.fragment, e3), n2 = true);
  }, o(e3) {
    la(o2.$$.fragment, e3), n2 = false;
  }, d(e3) {
    e3 && ur(t2), xa(o2), r2 && r2.d();
  } };
}
function Fm(e2) {
  let t2, o2, i2, n2 = e2[13] && Pm(e2), r2 = e2[12] && Im(e2);
  return { c() {
    t2 = hr("div"), n2 && n2.c(), o2 = gr(), r2 && r2.c(), xr(t2, "slot", "details"), xr(t2, "class", "PinturaColorPickerPanel");
  }, m(e3, a2) {
    dr(e3, t2, a2), n2 && n2.m(t2, null), sr(t2, o2), r2 && r2.m(t2, null), i2 = true;
  }, p(e3, i3) {
    e3[13] ? n2 ? (n2.p(e3, i3), 8192 & i3[0] && sa(n2, 1)) : (n2 = Pm(e3), n2.c(), sa(n2, 1), n2.m(t2, o2)) : n2 && (ra(), la(n2, 1, 1, () => {
      n2 = null;
    }), aa()), e3[12] ? r2 ? (r2.p(e3, i3), 4096 & i3[0] && sa(r2, 1)) : (r2 = Im(e3), r2.c(), sa(r2, 1), r2.m(t2, null)) : r2 && (ra(), la(r2, 1, 1, () => {
      r2 = null;
    }), aa());
  }, i(e3) {
    i2 || (sa(n2), sa(r2), i2 = true);
  }, o(e3) {
    la(n2), la(r2), i2 = false;
  }, d(e3) {
    e3 && ur(t2), n2 && n2.d(), r2 && r2.d();
  } };
}
function zm(e2) {
  let t2, o2;
  return t2 = new Od({ props: { buttonClass: hc(["PinturaColorPickerButton", e2[5]]), $$slots: { details: [Fm], label: [Tm] }, $$scope: { ctx: e2 } } }), { c() {
    ya(t2.$$.fragment);
  }, m(e3, i2) {
    ba(t2, e3, i2), o2 = true;
  }, p(e3, o3) {
    const i2 = {};
    32 & o3[0] && (i2.buttonClass = hc(["PinturaColorPickerButton", e3[5]])), 8388575 & o3[0] | 32768 & o3[1] && (i2.$$scope = { dirty: o3, ctx: e3 }), t2.$set(i2);
  }, i(e3) {
    o2 || (sa(t2.$$.fragment, e3), o2 = true);
  }, o(e3) {
    la(t2.$$.fragment, e3), o2 = false;
  }, d(e3) {
    xa(t2, e3);
  } };
}
function Bm(e2, t2, o2) {
  let i2, n2, r2, a2, s2, l2, c2, d2, u2, h2, p2, m2, { label: g2 } = t2, { name: $2 } = t2, { options: f2 = [] } = t2, { selectedIndex: y2 = -1 } = t2, { value: b2 } = t2, { buttonClass: x2 } = t2, { optionLabelClass: v2 } = t2, { optionMapper: w2 } = t2, { onchange: S2 } = t2, { title: k2 } = t2, { hidePresetLabel: C2 = true } = t2, { locale: M2 } = t2, { enableOpacity: P2 = true } = t2, { enablePresets: R2 = true } = t2, { enablePicker: I2 = true } = t2;
  const A2 = (e3, t3) => {
    if (c2 = [e3[0], e3[1], e3[2]], t3) {
      let t4 = ((e4, t5, o3) => {
        let i3 = Math.max(e4, t5, o3), n3 = i3 - Math.min(e4, t5, o3), r3 = n3 && (i3 == e4 ? (t5 - o3) / n3 : i3 == t5 ? 2 + (o3 - e4) / n3 : 4 + (e4 - t5) / n3);
        return [60 * (r3 < 0 ? r3 + 6 : r3) / 360, i3 && n3 / i3, i3];
      })(...c2);
      o2(14, r2 = t4[0]), o2(29, a2 = t4[1]), o2(30, s2 = t4[2]), o2(15, l2 = ko(e3[3]) ? e3[3] : 1);
    }
    o2(16, d2 = zo(e3)), o2(17, u2 = zo([...c2, 0])), o2(18, h2 = zo([...c2, 1])), o2(19, p2 = zo(wm(r2, 1, 1)));
  }, E2 = () => {
    const e3 = [...wm(r2, a2, s2), l2];
    A2(e3), S2(e3);
  }, L2 = (e3) => {
    const t3 = 3 === e3.length ? [...e3, 1] : e3;
    A2(t3, true), S2(t3);
  }, F2 = (e3, t3) => {
    const i3 = Ua(e3.x / t3.width, 0, 1), n3 = Ua(e3.y / t3.height, 0, 1);
    var r3;
    r3 = 1 - n3, o2(29, a2 = i3), o2(30, s2 = r3), 0 === l2 && o2(15, l2 = 1), E2();
  };
  let z2, B2, O2, D2;
  const W2 = (e3) => {
    const t3 = xe(de(e3), D2);
    F2(be(ue(O2), t3), B2);
  }, _2 = (e3) => {
    B2 = void 0, document.documentElement.removeEventListener("pointermove", W2), document.documentElement.removeEventListener("pointerup", _2);
  };
  return e2.$$set = (e3) => {
    "label" in e3 && o2(0, g2 = e3.label), "name" in e3 && o2(1, $2 = e3.name), "options" in e3 && o2(2, f2 = e3.options), "selectedIndex" in e3 && o2(3, y2 = e3.selectedIndex), "value" in e3 && o2(4, b2 = e3.value), "buttonClass" in e3 && o2(5, x2 = e3.buttonClass), "optionLabelClass" in e3 && o2(6, v2 = e3.optionLabelClass), "optionMapper" in e3 && o2(7, w2 = e3.optionMapper), "onchange" in e3 && o2(28, S2 = e3.onchange), "title" in e3 && o2(8, k2 = e3.title), "hidePresetLabel" in e3 && o2(9, C2 = e3.hidePresetLabel), "locale" in e3 && o2(10, M2 = e3.locale), "enableOpacity" in e3 && o2(11, P2 = e3.enableOpacity), "enablePresets" in e3 && o2(12, R2 = e3.enablePresets), "enablePicker" in e3 && o2(13, I2 = e3.enablePicker);
  }, e2.$$.update = () => {
    16 & e2.$$.dirty[0] | 1 & e2.$$.dirty[1] && (!b2 || m2 && qa(b2, m2) || (o2(31, m2 = [...b2]), A2(b2, true))), 536870912 & e2.$$.dirty[0] && o2(22, i2 = 100 * a2), 1073741824 & e2.$$.dirty[0] && o2(21, n2 = 100 - 100 * s2);
  }, [g2, $2, f2, y2, b2, x2, v2, w2, k2, C2, M2, P2, R2, I2, r2, l2, d2, u2, h2, p2, z2, n2, i2, L2, (e3) => {
    o2(14, r2 = e3), 0 === l2 && o2(15, l2 = 1), E2();
  }, (e3) => {
    o2(15, l2 = e3), E2();
  }, (e3) => {
    e3.stopPropagation(), B2 = Oe(z2.offsetWidth, z2.offsetHeight), O2 = ((e4) => ce(e4.offsetX, e4.offsetY))(e3), D2 = de(e3), F2(O2, B2), document.documentElement.addEventListener("pointermove", W2), document.documentElement.addEventListener("pointerup", _2);
  }, (e3) => {
    B2 = Oe(z2.offsetWidth, z2.offsetHeight);
    const t3 = i2 / 100 * B2.width, o3 = n2 / 100 * B2.height;
    F2({ x: t3 + e3.detail.x, y: o3 + e3.detail.y }, B2);
  }, S2, a2, s2, m2, function(e3) {
    Nr[e3 ? "unshift" : "push"](() => {
      z2 = e3, o2(20, z2);
    });
  }, ([e3, t3]) => [e3, T(t3) ? t3(M2) : t3], (e3) => L2(e3.value)];
}
var Om = class extends wa {
  constructor(e2) {
    super(), va(this, e2, Bm, zm, Nn, { label: 0, name: 1, options: 2, selectedIndex: 3, value: 4, buttonClass: 5, optionLabelClass: 6, optionMapper: 7, onchange: 28, title: 8, hidePresetLabel: 9, locale: 10, enableOpacity: 11, enablePresets: 12, enablePicker: 13 }, null, [-1, -1]);
  }
};
var Dm = (e2) => e2.charAt(0).toUpperCase() + e2.slice(1);
var Wm = null;
var _m = () => {
  if (null === Wm)
    if (c())
      try {
        Wm = false === document.fonts.check("16px TestNonExistingFont");
      } catch (e2) {
        Wm = false;
      }
    else
      Wm = false;
  return Wm;
};
var Vm = (e2, t2) => (o2) => o2[t2 ? `${t2}${Dm(e2)}` : e2];
var Nm = (e2) => [e2, "" + e2];
var Hm = (e2, t2) => (o2) => [e2[o2], Vm(o2, t2)];
var jm = [1, 0.2549, 0.2118];
var Um = [1, 1, 1, 0];
var Zm = { eraser: () => ({ eraseRadius: 0 }), path: () => ({ points: [] }), line: () => ({ x1: 0, y1: 0, x2: 0, y2: 0, disableErase: false }), rectangle: () => ({ x: 0, y: 0, width: 0, height: 0 }), ellipse: () => ({ x: 0, y: 0, rx: 0, ry: 0 }), text: () => ({ x: 0, y: 0, text: "Text" }) };
var Xm = (e2, t2 = {}, o2) => {
  if (!Zm[e2])
    return;
  const { position: i2 = "relative", inputMode: n2 = "drag" } = o2 || {};
  return [{ ...Zm[e2](), ...t2 }, { position: i2, inputMode: n2 }];
};
var Gm = (e2) => ({ sharpie: Xm("path", { strokeWidth: "0.5%", strokeColor: [...jm], disableErase: false, disableResize: true, disableMove: true }), eraser: Xm("eraser"), path: Xm("path", { pathClose: void 0, strokeWidth: "0.5%", strokeColor: [...jm], backgroundColor: [0, 0, 0, 0] }, { inputMode: "step" }), line: Xm("line", { strokeColor: [...jm], strokeWidth: "0.5%" }), arrow: Xm("line", { lineStart: "none", lineEnd: "arrow-solid", strokeColor: [...jm], strokeWidth: "0.5%" }), rectangle: Xm("rectangle", { strokeColor: [...Um], backgroundColor: [...jm] }), ellipse: Xm("ellipse", { strokeColor: [...Um], backgroundColor: [...jm] }), text: Xm("text", { color: [...jm], fontSize: "2%" }), ...e2 });
var Ym = (e2, t2, o2) => [e2, t2 || Vm(e2, "shapeLabelTool"), { icon: Vm(e2, "shapeIconTool"), ...o2 }];
var qm = (e2 = ["move", "view", "sharpie", "eraser", "path", "line", "arrow", "rectangle", "ellipse", "text", "preset"]) => e2.map((e3) => M(e3) ? Ym(e3) : Array.isArray(e3) ? S(e3[1]) ? Ym(e3[0], void 0, e3[1]) : Ym(e3[0], e3[1], e3[2]) : void 0).filter(Boolean);
var Km = () => ({ transparent: [1, 1, 1, 0], white: [1, 1, 1], silver: [0.8667, 0.8667, 0.8667], gray: [0.6667, 0.6667, 0.6667], black: [0, 0, 0], navy: [0, 0.1216, 0.2471], blue: [0, 0.4549, 0.851], aqua: [0.498, 0.8588, 1], teal: [0.2235, 0.8, 0.8], olive: [0.2392, 0.6, 0.4392], green: [0.1804, 0.8, 0.251], yellow: [1, 0.8627, 0], orange: [1, 0.5216, 0.1059], red: [1, 0.2549, 0.2118], maroon: [0.5216, 0.0784, 0.2941], fuchsia: [0.9412, 0.0706, 0.7451], purple: [0.6941, 0.051, 0.7882] });
var Jm = () => [16, 18, 20, 24, 30, 36, 48, 64, 72, 96, 128, 144];
var Qm = Jm;
var eg = () => ({ extraSmall: "2%", small: "4%", mediumSmall: "8%", medium: "10%", mediumLarge: "15%", large: "20%", extraLarge: "25%" });
var tg = () => ({ extraSmall: "40%", small: "60%", mediumSmall: "100%", medium: "120%", mediumLarge: "140%", large: "180%", extraLarge: "220%" });
var og = () => [1, 2, 3, 4, 6, 8, 12, 16, 20, 24, 32, 48, 64];
var ig = () => ({ extraSmall: "0.25%", small: "0.5%", mediumSmall: "1%", medium: "1.75%", mediumLarge: "2.5%", large: "3.5%", extraLarge: "5%" });
var ng = () => ["bar", "arrow", "arrowSolid", "circle", "circleSolid", "square", "squareSolid"];
var rg = () => [["Helvetica, Arial, Verdana, 'Droid Sans', sans-serif", "Sans Serif"], ["'Arial Black', 'Avenir-Black', 'Arial Bold'", "Black"], ["'Arial Narrow', 'Futura-CondensedMedium'", "Narrow"], ["'Trebuchet MS'", "Humanist"], ["Georgia, 'Avenir-Black', 'Times New Roman', 'Droid Serif', serif", "Serif"], ["Palatino", "Old-Style"], ["'Times New Roman', 'TimesNewRomanPSMT'", "Transitional"], ["Menlo, Monaco, 'Lucida Console', monospace", "Monospaced"], ["'Courier New', monospace", "Slab Serif"]];
var ag = () => ["left", "center", "right"];
var sg = () => [["normal", "bold"], ["italic", "normal"], ["italic", "bold"]];
var lg = (e2) => Object.keys(e2).map(Hm(e2, "shapeTitleColor"));
var cg = (e2) => e2.map(Nm);
var dg = (e2) => Object.keys(e2).map(Hm(e2, "labelSize"));
var ug = (e2) => e2.map(Nm);
var hg = (e2) => Object.keys(e2).map(Hm(e2, "labelSize"));
var pg = (e2) => e2.map(Nm);
var mg = (e2) => Object.keys(e2).map(Hm(e2, "labelSize"));
var gg = (e2) => [...e2];
var $g = (e2) => e2.map((e3) => [e3, (t2) => t2["shapeLabelFontStyle" + e3.filter((e4) => "normal" !== e4).map(Dm).join("")]]);
var fg = (e2) => e2.map((e3) => [mh(e3), (t2) => t2["shapeTitleLineDecoration" + Dm(e3)], { icon: (t2) => t2["shapeIconLineDecoration" + Dm(e3)] }]);
var yg = (e2) => e2.map((e3) => [e3, (t2) => t2["shapeTitleTextAlign" + Dm(e3)], { hideLabel: true, icon: (t2) => t2["shapeIconTextAlign" + Dm(e3)] }]);
var bg = (e2, t2) => {
  const { defaultKey: o2, defaultValue: i2, defaultOptions: n2 } = t2 || {}, r2 = [];
  return o2 && (r2[0] = [i2, (e3) => e3[o2], { ...n2 }]), [...r2, ...e2];
};
var xg = (e2) => e2.split(",").map((e3) => e3.trim()).some((e3) => document.fonts.check("16px " + e3));
var vg = (e2, t2 = {}) => [Om, { title: (e3) => e3.labelColor, options: bg(e2), ...t2 }];
var wg = (e2 = {}) => [Ju, { ...e2 }];
var Sg = (e2, t2 = { defaultKey: "labelDefault" }) => [Eu, { title: (e3) => e3.shapeTitleFontFamily, onload: ({ options: e3 = [] }) => {
  _m() && e3.map(([e4]) => e4).filter(Boolean).filter((e4) => !xg(e4)).forEach((e4) => {
    const t3 = "PinturaFontTest-" + e4.replace(/[^a-zA-Z0-9]+/g, "").toLowerCase();
    document.getElementById(t3) || document.body.append(p("span", { textContent: " ", id: t3, class: "PinturaFontTest", style: `font-family:${e4};font-size:0;color:transparent;` }));
  });
}, ondestroy: () => {
  if (!_m())
    return;
  document.querySelectorAll(".PinturaFontTest").forEach((e3) => e3.remove());
}, optionLabelStyle: (e3) => "font-family: " + e3, options: bg(e2, t2), optionFilter: (e3) => {
  if (!_m())
    return true;
  const [t3] = e3;
  if (!t3)
    return true;
  return xg(t3);
} }];
var kg = (e2, t2 = {}) => [Om, { title: (e3) => e3.shapeTitleBackgroundColor, options: bg(e2), ...t2 }];
var Cg = (e2, t2 = {}) => [Om, { title: (e3) => e3.shapeTitleStrokeColor, options: bg(e2), buttonClass: "PinturaColorPickerButtonStroke", onchange: (e3, o2) => {
  const i2 = o2.strokeWidth;
  (ko(i2) || M(i2) ? parseFloat(i2) : 0) > 0 || (o2.strokeWidth = t2 && t2.defaultStrokeWidth || "0.5%");
}, ...t2 }];
var Mg = (e2) => [Eu, { title: (e3) => e3.shapeTitleStrokeWidth, options: (t2) => Mo(t2, "backgroundColor") ? bg(e2, { defaultKey: "shapeLabelStrokeNone" }) : bg(e2), onchange: (e3, t2) => {
  if (!e3)
    return;
  const o2 = t2.strokeColor || [];
  if (o2[3])
    return;
  const i2 = [...o2];
  i2[3] = 1, t2.strokeColor = i2;
} }];
var Tg = (e2, t2, o2) => [Eu, { title: (e3) => e3[t2], options: bg(e2, { defaultKey: "labelNone", defaultOptions: { icon: '<g stroke="currentColor" stroke-linecap="round" stroke-width=".125em"><path d="M5,12 H14"/></g>' } }), optionIconStyle: o2 }];
var Pg = (e2) => Tg(e2, "shapeTitleLineStart", "transform: scaleX(-1)");
var Rg = (e2) => Tg(e2, "shapeTitleLineEnd");
var Ig = (e2) => [Om, { title: (e3) => e3.shapeTitleTextColor, options: bg(e2) }];
var Ag = (e2) => [Eu, { title: (e3) => e3.shapeTitleFontStyle, optionLabelStyle: (e3) => e3 && `font-style:${e3[0]};font-weight:${e3[1]}`, options: bg(e2, { defaultKey: "shapeLabelFontStyleNormal" }) }];
var Eg = (e2, t2) => (t2 || e2.find(([e3]) => "4%" === e3) || (t2 = { defaultKey: "labelAuto", defaultValue: "4%" }), [Eu, { title: (e3) => e3.shapeTitleFontSize, options: bg(e2, t2) }]);
var Lg = (e2) => [yu, { title: (e3) => e3.shapeTitleTextAlign, options: bg(e2) }];
var Fg = (e2, t2) => (t2 || e2.find(([e3]) => "120%" === e3) || (t2 = { defaultKey: "labelAuto", defaultValue: "120%" }), [Eu, { title: (e3) => e3.shapeTitleLineHeight, options: bg(e2, t2) }]);
var zg = (e2 = {}) => {
  const { colorOptions: t2 = lg(Km()), lineEndStyleOptions: o2 = fg(ng()), fontFamilyOptions: i2 = gg(rg()), fontStyleOptions: n2 = $g(sg()), textAlignOptions: r2 = yg(ag()) } = e2;
  let { strokeWidthOptions: a2 = mg(ig()), fontSizeOptions: s2 = dg(eg()), lineHeightOptions: l2 = hg(tg()) } = e2;
  [s2, l2, a2] = [s2, l2, a2].map((e3) => Array.isArray(e3) && e3.every(ko) ? e3.map(Nm) : e3);
  const c2 = { defaultColor: t2 && vg(t2), defaultNumber: wg(), defaultPercentage: wg({ getValue: (e3) => parseFloat(e3), setValue: (e3) => e3 + "%", step: 0.05, label: (e3, t3, o3) => Math.round(e3 / o3 * 100) + "%", labelClass: "PinturaPercentageLabel" }), backgroundColor: t2 && kg(t2), strokeColor: t2 && Cg(t2), strokeWidth: a2 && Mg(a2), lineStart: o2 && Pg(o2), lineEnd: o2 && Rg(o2), color: t2 && Ig(t2), fontFamily: i2 && Sg(i2), fontStyle_fontWeight: n2 && Ag(n2), fontSize: s2 && Eg(s2), lineHeight: l2 && Fg(l2), textAlign: r2 && Lg(r2), cornerRadius: ["defaultPercentage", { min: 0, max: 50, title: (e3) => e3.shapeTitleCornerRadius }], frameColor: ["defaultColor"], frameSize: ["defaultPercentage", { min: 0.2, max: 10, title: (e3) => e3.labelSize }], frameInset: ["defaultPercentage", { min: 0.5, max: 10, title: (e3) => e3.labelInset }], frameOffset: ["defaultPercentage", { min: 0.5, max: 10, title: (e3) => e3.labelOffset }], frameRadius: ["defaultPercentage", { min: 0.5, max: 10, title: (e3) => e3.labelRadius }], frameAmount: ["defaultNumber", { min: 1, max: 5, step: 1, title: (e3) => e3.labelAmount }] };
  return Object.entries(e2).forEach(([e3, t3]) => {
    c2[e3] || (c2[e3] = t3);
  }), c2;
};
function Bg(e2) {
  let t2, o2, i2, n2;
  const r2 = e2[5].default, a2 = Zn(r2, e2, e2[4], null);
  return { c() {
    t2 = hr("div"), a2 && a2.c(), xr(t2, "class", e2[0]);
  }, m(r3, s2) {
    dr(r3, t2, s2), a2 && a2.m(t2, null), o2 = true, i2 || (n2 = [fr(t2, "measure", function() {
      Vn(e2[1] && e2[3]) && (e2[1] && e2[3]).apply(this, arguments);
    }), er(e2[2].call(null, t2))], i2 = true);
  }, p(i3, [n3]) {
    e2 = i3, a2 && a2.p && (!o2 || 16 & n3) && Yn(a2, r2, e2, e2[4], o2 ? Gn(r2, e2[4], n3, null) : qn(e2[4]), null), (!o2 || 1 & n3) && xr(t2, "class", e2[0]);
  }, i(e3) {
    o2 || (sa(a2, e3), o2 = true);
  }, o(e3) {
    la(a2, e3), o2 = false;
  }, d(e3) {
    e3 && ur(t2), a2 && a2.d(e3), i2 = false, _n(n2);
  } };
}
function Og(e2, t2, o2) {
  let { $$slots: i2 = {}, $$scope: n2 } = t2;
  const r2 = Or();
  let { class: a2 = null } = t2;
  const s2 = Wr("measurable");
  let l2 = false;
  return Fr(() => o2(1, l2 = true)), e2.$$set = (e3) => {
    "class" in e3 && o2(0, a2 = e3.class), "$$scope" in e3 && o2(4, n2 = e3.$$scope);
  }, [a2, l2, s2, ({ detail: e3 }) => r2("measure", e3), n2, i2];
}
var Dg = class extends wa {
  constructor(e2) {
    super(), va(this, e2, Og, Bg, Nn, { class: 0 });
  }
};
var Wg = (e2) => ({});
var _g = (e2) => ({});
var Vg = (e2) => ({});
var Ng = (e2) => ({});
var Hg = (e2) => ({});
var jg = (e2) => ({});
function Ug(e2) {
  let t2, o2;
  const i2 = e2[4].header, n2 = Zn(i2, e2, e2[3], jg);
  return { c() {
    t2 = hr("div"), n2 && n2.c(), xr(t2, "class", "PinturaUtilHeader");
  }, m(e3, i3) {
    dr(e3, t2, i3), n2 && n2.m(t2, null), o2 = true;
  }, p(e3, t3) {
    n2 && n2.p && (!o2 || 8 & t3) && Yn(n2, i2, e3, e3[3], o2 ? Gn(i2, e3[3], t3, Hg) : qn(e3[3]), jg);
  }, i(e3) {
    o2 || (sa(n2, e3), o2 = true);
  }, o(e3) {
    la(n2, e3), o2 = false;
  }, d(e3) {
    e3 && ur(t2), n2 && n2.d(e3);
  } };
}
function Zg(e2) {
  let t2, o2;
  const i2 = e2[4].footer, n2 = Zn(i2, e2, e2[3], _g);
  return { c() {
    t2 = hr("div"), n2 && n2.c(), xr(t2, "class", "PinturaUtilFooter");
  }, m(e3, i3) {
    dr(e3, t2, i3), n2 && n2.m(t2, null), o2 = true;
  }, p(e3, t3) {
    n2 && n2.p && (!o2 || 8 & t3) && Yn(n2, i2, e3, e3[3], o2 ? Gn(i2, e3[3], t3, Wg) : qn(e3[3]), _g);
  }, i(e3) {
    o2 || (sa(n2, e3), o2 = true);
  }, o(e3) {
    la(n2, e3), o2 = false;
  }, d(e3) {
    e3 && ur(t2), n2 && n2.d(e3);
  } };
}
function Xg(e2) {
  let t2, o2, i2, n2, r2, a2, s2 = e2[1] && Ug(e2);
  const l2 = e2[4].main, c2 = Zn(l2, e2, e2[3], Ng), d2 = c2 || function(e3) {
    let t3, o3;
    return t3 = new Dg({ props: { class: "PinturaStage" } }), t3.$on("measure", e3[5]), { c() {
      ya(t3.$$.fragment);
    }, m(e4, i3) {
      ba(t3, e4, i3), o3 = true;
    }, p: zn, i(e4) {
      o3 || (sa(t3.$$.fragment, e4), o3 = true);
    }, o(e4) {
      la(t3.$$.fragment, e4), o3 = false;
    }, d(e4) {
      xa(t3, e4);
    } };
  }(e2);
  let u2 = e2[2] && Zg(e2);
  return { c() {
    s2 && s2.c(), t2 = gr(), o2 = hr("div"), d2 && d2.c(), i2 = gr(), u2 && u2.c(), n2 = gr(), r2 = $r(), xr(o2, "class", "PinturaUtilMain");
  }, m(l3, c3) {
    s2 && s2.m(l3, c3), dr(l3, t2, c3), dr(l3, o2, c3), d2 && d2.m(o2, null), e2[6](o2), dr(l3, i2, c3), u2 && u2.m(l3, c3), dr(l3, n2, c3), dr(l3, r2, c3), a2 = true;
  }, p(e3, [o3]) {
    e3[1] ? s2 ? (s2.p(e3, o3), 2 & o3 && sa(s2, 1)) : (s2 = Ug(e3), s2.c(), sa(s2, 1), s2.m(t2.parentNode, t2)) : s2 && (ra(), la(s2, 1, 1, () => {
      s2 = null;
    }), aa()), c2 && c2.p && (!a2 || 8 & o3) && Yn(c2, l2, e3, e3[3], a2 ? Gn(l2, e3[3], o3, Vg) : qn(e3[3]), Ng), e3[2] ? u2 ? (u2.p(e3, o3), 4 & o3 && sa(u2, 1)) : (u2 = Zg(e3), u2.c(), sa(u2, 1), u2.m(n2.parentNode, n2)) : u2 && (ra(), la(u2, 1, 1, () => {
      u2 = null;
    }), aa());
  }, i(e3) {
    a2 || (sa(s2), sa(d2, e3), sa(u2), sa(false), a2 = true);
  }, o(e3) {
    la(s2), la(d2, e3), la(u2), la(false), a2 = false;
  }, d(a3) {
    s2 && s2.d(a3), a3 && ur(t2), a3 && ur(o2), d2 && d2.d(a3), e2[6](null), a3 && ur(i2), u2 && u2.d(a3), a3 && ur(n2), a3 && ur(r2);
  } };
}
function Gg(e2, t2, o2) {
  let { $$slots: i2 = {}, $$scope: n2 } = t2, { hasHeader: r2 = !!t2.$$slots.header } = t2, { hasFooter: a2 = !!t2.$$slots.footer } = t2, { root: s2 } = t2;
  return e2.$$set = (e3) => {
    o2(7, t2 = On(On({}, t2), Kn(e3))), "hasHeader" in e3 && o2(1, r2 = e3.hasHeader), "hasFooter" in e3 && o2(2, a2 = e3.hasFooter), "root" in e3 && o2(0, s2 = e3.root), "$$scope" in e3 && o2(3, n2 = e3.$$scope);
  }, t2 = Kn(t2), [s2, r2, a2, n2, i2, function(t3) {
    _r.call(this, e2, t3);
  }, function(e3) {
    Nr[e3 ? "unshift" : "push"](() => {
      s2 = e3, o2(0, s2);
    });
  }];
}
var Yg = class extends wa {
  constructor(e2) {
    super(), va(this, e2, Gg, Xg, Nn, { hasHeader: 1, hasFooter: 2, root: 0 });
  }
};
function qg(e2) {
  let t2, o2;
  return { c() {
    t2 = hr("div"), xr(t2, "class", "PinturaRangeInputMeter"), xr(t2, "style", o2 = `transform: translateX(${e2[9].x - e2[11].x}px) translateY(${e2[9].y - e2[11].y}px)`);
  }, m(o3, i2) {
    dr(o3, t2, i2), t2.innerHTML = e2[7];
  }, p(e3, i2) {
    128 & i2[0] && (t2.innerHTML = e3[7]), 512 & i2[0] && o2 !== (o2 = `transform: translateX(${e3[9].x - e3[11].x}px) translateY(${e3[9].y - e3[11].y}px)`) && xr(t2, "style", o2);
  }, d(e3) {
    e3 && ur(t2);
  } };
}
function Kg(e2) {
  let t2, o2, i2, n2, r2, a2, s2, l2, c2, d2, u2, h2 = e2[9] && qg(e2);
  return { c() {
    t2 = hr("div"), o2 = hr("span"), i2 = gr(), n2 = hr("button"), r2 = mr(e2[1]), s2 = gr(), l2 = hr("div"), h2 && h2.c(), xr(o2, "class", "PinturaRangeInputValue"), xr(n2, "class", "PinturaRangeInputReset"), xr(n2, "type", "button"), n2.disabled = a2 = e2[0] === e2[2], xr(l2, "class", "PinturaRangeInputInner"), xr(l2, "style", e2[8]), xr(l2, "data-value-limited", e2[5]), xr(t2, "class", "PinturaRangeInput"), xr(t2, "tabindex", "0");
  }, m(a3, p2) {
    dr(a3, t2, p2), sr(t2, o2), o2.innerHTML = e2[3], sr(t2, i2), sr(t2, n2), sr(n2, r2), sr(t2, s2), sr(t2, l2), h2 && h2.m(l2, null), d2 || (u2 = [fr(n2, "click", e2[16]), fr(l2, "interactionstart", e2[12]), fr(l2, "interactionupdate", e2[14]), fr(l2, "interactionend", e2[15]), fr(l2, "interactionrelease", e2[13]), er(c2 = Kc.call(null, l2, { inertia: e2[6] })), fr(l2, "measure", e2[36]), er(oc.call(null, l2)), fr(t2, "wheel", e2[18], { passive: false }), fr(t2, "nudge", e2[19]), er(Jc.call(null, t2, { direction: "horizontal", preventDefault: true }))], d2 = true);
  }, p(e3, t3) {
    8 & t3[0] && (o2.innerHTML = e3[3]), 2 & t3[0] && wr(r2, e3[1]), 5 & t3[0] && a2 !== (a2 = e3[0] === e3[2]) && (n2.disabled = a2), e3[9] ? h2 ? h2.p(e3, t3) : (h2 = qg(e3), h2.c(), h2.m(l2, null)) : h2 && (h2.d(1), h2 = null), 256 & t3[0] && xr(l2, "style", e3[8]), 32 & t3[0] && xr(l2, "data-value-limited", e3[5]), c2 && Vn(c2.update) && 64 & t3[0] && c2.update.call(null, { inertia: e3[6] });
  }, i: zn, o: zn, d(e3) {
    e3 && ur(t2), h2 && h2.d(), d2 = false, _n(u2);
  } };
}
function Jg(e2, t2, o2) {
  let i2, r2, a2, s2, l2, c2, d2, u2, h2, { labelReset: p2 = "Reset" } = t2, { direction: m2 = "x" } = t2, { min: g2 = 0 } = t2, { max: $2 = 1 } = t2, { base: f2 = g2 } = t2, { value: y2 = 0 } = t2, { valueLabel: b2 = 0 } = t2, { valueMin: x2 } = t2, { valueMax: v2 } = t2, { oninputstart: w2 = n } = t2, { oninputmove: S2 = n } = t2, { oninputend: k2 = n } = t2, { elasticity: C2 = 0 } = t2, { nudgeMultiplier: M2 } = t2, { step: T2 = 8 } = t2;
  const P2 = Wr("isAnimated");
  Un(e2, P2, (e3) => o2(6, u2 = e3));
  const R2 = (e3, t3, o3) => Math.ceil((e3 - o3) / t3) * t3 + o3;
  let I2, A2, E2;
  const L2 = { x: 2, y: 0 }, F2 = (e3, t3, o3) => `M ${e3 - o3} ${t3} a ${o3} ${o3} 0 1 0 0 -1`;
  let z2, B2 = void 0, O2 = false, D2 = { snap: false, elastic: false };
  const W2 = (e3, t3, o3) => {
    const i3 = e3[m2] + t3[m2], n2 = Ua(i3, z2[1][m2], z2[0][m2]), r3 = C2 ? n2 + Qc(i3 - n2, C2) : n2, a3 = o3.elastic ? r3 : n2, s3 = ce(0, 0);
    return s3[m2] = a3, _2.set(s3, { hard: o3.snap }), Ua(N2(s3, m2), g2, $2);
  }, _2 = _l();
  Un(e2, _2, (e3) => o2(9, h2 = e3));
  const V2 = (e3, t3) => {
    const o3 = 0.5 * (I2[t3] - s2[t3]) - (Ou(e3, g2, $2) * s2[t3] - 0.5 * s2[t3]);
    return { x: "x" === t3 ? o3 : 0, y: "y" === t3 ? o3 : 0 };
  }, N2 = (e3, t3) => {
    const o3 = -(e3[t3] - 0.5 * I2[t3]) / s2[t3];
    return g2 + o3 * i2;
  }, H2 = _2.subscribe((e3) => {
    e3 && B2 && S2(Ua(N2(e3, m2), g2, $2));
  }), j2 = (e3) => {
    const t3 = [V2(null != x2 ? x2 : g2, m2), V2(null != v2 ? v2 : $2, m2)], o3 = { x: "x" === m2 ? h2.x + e3 : 0, y: "y" === m2 ? h2.y + e3 : 0 }, i3 = Ua(o3[m2], t3[1][m2], t3[0][m2]), n2 = { ...h2, [m2]: i3 };
    Qn(_2, h2 = n2, h2);
    const r3 = Ua(N2(n2, m2), g2, $2);
    w2(), S2(r3), k2(r3);
  };
  Br(() => {
    H2();
  });
  return e2.$$set = (e3) => {
    "labelReset" in e3 && o2(1, p2 = e3.labelReset), "direction" in e3 && o2(20, m2 = e3.direction), "min" in e3 && o2(21, g2 = e3.min), "max" in e3 && o2(22, $2 = e3.max), "base" in e3 && o2(2, f2 = e3.base), "value" in e3 && o2(0, y2 = e3.value), "valueLabel" in e3 && o2(3, b2 = e3.valueLabel), "valueMin" in e3 && o2(23, x2 = e3.valueMin), "valueMax" in e3 && o2(24, v2 = e3.valueMax), "oninputstart" in e3 && o2(25, w2 = e3.oninputstart), "oninputmove" in e3 && o2(26, S2 = e3.oninputmove), "oninputend" in e3 && o2(27, k2 = e3.oninputend), "elasticity" in e3 && o2(28, C2 = e3.elasticity), "nudgeMultiplier" in e3 && o2(29, M2 = e3.nudgeMultiplier), "step" in e3 && o2(30, T2 = e3.step);
  }, e2.$$.update = () => {
    if (6291456 & e2.$$.dirty[0] && o2(32, i2 = $2 - g2), 10485760 & e2.$$.dirty[0] && o2(34, r2 = null != x2 ? Math.max(x2, g2) : g2), 20971520 & e2.$$.dirty[0] && o2(33, a2 = null != v2 ? Math.min(v2, $2) : $2), 6291460 & e2.$$.dirty[0] && o2(35, l2 = Ou(f2, g2, $2)), 16 & e2.$$.dirty[0] | 16 & e2.$$.dirty[1] && I2) {
      const e3 = 0.5 * I2.y;
      let t3, i3 = 40 * l2, n2 = "", r3 = I2.y, a3 = "";
      for (let o3 = 0; o3 <= 40; o3++) {
        const r4 = L2.x + 10 * o3, s3 = e3;
        n2 += F2(r4, s3, o3 % 5 == 0 ? 2 : 0.75) + " ", t3 = r4 + L2.x, o3 === i3 && (a3 = `<path d="M${r4} ${s3 - 4} l2 3 l-2 -1 l-2 1 z"/>`);
      }
      o2(7, A2 = `<svg width="${t3}" height="${r3}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 ${t3} ${r3}" aria-hidden="true" focusable="false">
        ${a3}
        <rect rx="4" ry="4" y="${e3 - 4}"" height="8"/>
        <path fill-rule="evenodd" d="${n2.trim()}"/></svg>`), o2(31, E2 = { x: t3 - 2 * L2.x, y: r3 });
    }
    16 & e2.$$.dirty[0] | 1 & e2.$$.dirty[1] && (s2 = I2 && E2), 6291456 & e2.$$.dirty[0] | 12 & e2.$$.dirty[1] && o2(5, c2 = r2 !== g2 || a2 !== $2), 32 & e2.$$.dirty[0] | 12 & e2.$$.dirty[1] && o2(8, d2 = c2 ? function(e3, t3) {
      const o3 = 1 / 40, i3 = Ou(e3, g2, $2), n2 = Ou(t3, g2, $2);
      return `--range-mask-from:${100 * re(R2(i3, o3, 0) - 0.0125)}%;--range-mask-to:${100 * re(R2(n2, o3, 0) - 0.0125)}%`;
    }(r2, a2) : ""), 1048657 & e2.$$.dirty[0] | 2 & e2.$$.dirty[1] && i2 && I2 && I2.x && I2.y && _2.set(V2(y2, m2), { hard: false === u2 });
  }, [y2, p2, f2, b2, I2, c2, u2, A2, d2, h2, P2, L2, () => {
    O2 = false, B2 = jn(_2), z2 = [V2(null != x2 ? x2 : g2, m2), V2(null != v2 ? v2 : $2, m2)], w2();
  }, () => {
    O2 = true;
  }, ({ detail: e3 }) => {
    D2.snap = !O2, D2.elastic = !O2, W2(B2, e3.translation, D2);
  }, ({ detail: e3 }) => {
    D2.snap = false, D2.elastic = false;
    const t3 = W2(B2, e3.translation, D2);
    if (B2 = void 0, z2 = void 0, Math.abs(t3 - f2) < 0.01)
      return k2(f2);
    k2(t3);
  }, () => {
    o2(0, y2 = Ua(f2, r2, a2)), w2(), k2(y2);
  }, _2, (e3) => {
    e3.preventDefault(), e3.stopPropagation();
    const t3 = id(e3) * T2;
    j2(t3);
  }, ({ detail: e3 }) => {
    j2(e3[m2] * Math.abs(M2 || 8));
  }, m2, g2, $2, x2, v2, w2, S2, k2, C2, M2, T2, E2, i2, a2, r2, l2, (e3) => o2(4, I2 = ((e4) => ce(e4.width, e4.height))(e3.detail))];
}
var Qg = class extends wa {
  constructor(e2) {
    super(), va(this, e2, Jg, Kg, Nn, { labelReset: 1, direction: 20, min: 21, max: 22, base: 2, value: 0, valueLabel: 3, valueMin: 23, valueMax: 24, oninputstart: 25, oninputmove: 26, oninputend: 27, elasticity: 28, nudgeMultiplier: 29, step: 30 }, null, [-1, -1]);
  }
};
function e$(e2) {
  let t2, o2, i2, n2, r2;
  const a2 = e2[7].default, s2 = Zn(a2, e2, e2[6], null);
  return { c() {
    t2 = hr("div"), o2 = hr("div"), s2 && s2.c(), xr(o2, "class", "PinturaToolbarInner"), xr(t2, "class", "PinturaToolbar"), xr(t2, "data-layout", e2[1]), xr(t2, "data-overflow", e2[0]);
  }, m(a3, l2) {
    dr(a3, t2, l2), sr(t2, o2), s2 && s2.m(o2, null), i2 = true, n2 || (r2 = [fr(o2, "measure", e2[3]), er(oc.call(null, o2)), fr(t2, "measure", e2[2]), er(oc.call(null, t2))], n2 = true);
  }, p(e3, [o3]) {
    s2 && s2.p && (!i2 || 64 & o3) && Yn(s2, a2, e3, e3[6], i2 ? Gn(a2, e3[6], o3, null) : qn(e3[6]), null), (!i2 || 2 & o3) && xr(t2, "data-layout", e3[1]), (!i2 || 1 & o3) && xr(t2, "data-overflow", e3[0]);
  }, i(e3) {
    i2 || (sa(s2, e3), i2 = true);
  }, o(e3) {
    la(s2, e3), i2 = false;
  }, d(e3) {
    e3 && ur(t2), s2 && s2.d(e3), n2 = false, _n(r2);
  } };
}
function t$(e2, t2, o2) {
  let i2, n2, { $$slots: r2 = {}, $$scope: a2 } = t2, s2 = 0, l2 = 0, c2 = 0;
  const d2 = () => {
    o2(0, n2 = "compact" === i2 && s2 > c2 ? "overflow" : void 0);
  };
  return e2.$$set = (e3) => {
    "$$scope" in e3 && o2(6, a2 = e3.$$scope);
  }, e2.$$.update = () => {
    48 & e2.$$.dirty && o2(1, i2 = l2 > c2 ? "compact" : "default");
  }, [n2, i2, ({ detail: e3 }) => {
    const { width: t3 } = e3;
    o2(5, c2 = t3), d2();
  }, ({ detail: e3 }) => {
    const { width: t3 } = e3;
    t3 > l2 && o2(4, l2 = t3), s2 = t3, n2 || d2();
  }, l2, c2, a2, r2];
}
var o$ = class extends wa {
  constructor(e2) {
    super(), va(this, e2, t$, e$, Nn, {});
  }
};
var i$ = { [q]: (e2) => ({ x: e2.x, y: e2.y }), [te]: (e2) => ({ x: e2.x + e2.width, y: e2.y }), [K]: (e2) => ({ x: e2.x + e2.width, y: e2.y }), [oe]: (e2) => ({ x: e2.x + e2.width, y: e2.y + e2.height }), [J]: (e2) => ({ x: e2.x, y: e2.y + e2.height }), [ie]: (e2) => ({ x: e2.x, y: e2.y + e2.height }), [Q]: (e2) => ({ x: e2.x, y: e2.y }), [ee]: (e2) => ({ x: e2.x, y: e2.y }) };
function n$(e2, t2, o2) {
  const i2 = e2.slice();
  return i2[14] = t2[o2].key, i2[15] = t2[o2].translate, i2[16] = t2[o2].scale, i2[17] = t2[o2].type, i2[18] = t2[o2].opacity, i2;
}
function r$(e2, t2) {
  let o2, i2, n2, r2, a2, s2, l2, c2;
  return { key: e2, first: null, c() {
    o2 = hr("div"), xr(o2, "role", "button"), xr(o2, "aria-label", i2 = `Drag ${t2[17]} ${t2[14]}`), xr(o2, "tabindex", n2 = "edge" === t2[17] ? -1 : 0), xr(o2, "class", "PinturaRectManipulator"), xr(o2, "data-direction", r2 = t2[14]), xr(o2, "data-shape", a2 = "edge" === t2[17] ? "edge" : "" + t2[0]), xr(o2, "style", s2 = `--tx:${t2[15].x};--ty:${t2[15].y};--sx:${t2[16].x};--sy:${t2[16].y};opacity:${t2[18]}`), this.first = o2;
  }, m(e3, i3) {
    dr(e3, o2, i3), l2 || (c2 = [fr(o2, "nudge", function() {
      Vn(t2[6](t2[14])) && t2[6](t2[14]).apply(this, arguments);
    }), er(Jc.call(null, o2, { preventDefault: true })), fr(o2, "interactionstart", function() {
      Vn(t2[5]("resizestart", t2[14])) && t2[5]("resizestart", t2[14]).apply(this, arguments);
    }), fr(o2, "interactionupdate", function() {
      Vn(t2[5]("resizemove", t2[14])) && t2[5]("resizemove", t2[14]).apply(this, arguments);
    }), fr(o2, "interactionend", function() {
      Vn(t2[5]("resizeend", t2[14])) && t2[5]("resizeend", t2[14]).apply(this, arguments);
    }), er(Kc.call(null, o2))], l2 = true);
  }, p(e3, l3) {
    t2 = e3, 2 & l3 && i2 !== (i2 = `Drag ${t2[17]} ${t2[14]}`) && xr(o2, "aria-label", i2), 2 & l3 && n2 !== (n2 = "edge" === t2[17] ? -1 : 0) && xr(o2, "tabindex", n2), 2 & l3 && r2 !== (r2 = t2[14]) && xr(o2, "data-direction", r2), 3 & l3 && a2 !== (a2 = "edge" === t2[17] ? "edge" : "" + t2[0]) && xr(o2, "data-shape", a2), 2 & l3 && s2 !== (s2 = `--tx:${t2[15].x};--ty:${t2[15].y};--sx:${t2[16].x};--sy:${t2[16].y};opacity:${t2[18]}`) && xr(o2, "style", s2);
  }, d(e3) {
    e3 && ur(o2), l2 = false, _n(c2);
  } };
}
function a$(e2) {
  let t2, o2 = [], i2 = /* @__PURE__ */ new Map(), n2 = e2[1];
  const r2 = (e3) => e3[14];
  for (let t3 = 0; t3 < n2.length; t3 += 1) {
    let a2 = n$(e2, n2, t3), s2 = r2(a2);
    i2.set(s2, o2[t3] = r$(s2, a2));
  }
  return { c() {
    for (let e3 = 0; e3 < o2.length; e3 += 1)
      o2[e3].c();
    t2 = $r();
  }, m(e3, i3) {
    for (let t3 = 0; t3 < o2.length; t3 += 1)
      o2[t3].m(e3, i3);
    dr(e3, t2, i3);
  }, p(e3, [a2]) {
    99 & a2 && (n2 = e3[1], o2 = ma(o2, a2, r2, 1, e3, n2, i2, t2.parentNode, ha, r$, t2, n$));
  }, i: zn, o: zn, d(e3) {
    for (let t3 = 0; t3 < o2.length; t3 += 1)
      o2[t3].d(e3);
    e3 && ur(t2);
  } };
}
function s$(e2, t2, o2) {
  let i2, n2, r2, a2, { rect: s2 = null } = t2, { visible: l2 = false } = t2, { style: c2 } = t2;
  const d2 = Wr("isAnimated");
  Un(e2, d2, (e3) => o2(11, a2 = e3));
  const u2 = _l(void 0, { precision: 1e-4, stiffness: 0.2, damping: 0.4 });
  Un(e2, u2, (e3) => o2(10, r2 = e3));
  const h2 = _l(0, { precision: 1e-3 });
  let p2;
  Un(e2, h2, (e3) => o2(9, n2 = e3));
  const m2 = Or();
  return e2.$$set = (e3) => {
    "rect" in e3 && o2(7, s2 = e3.rect), "visible" in e3 && o2(8, l2 = e3.visible), "style" in e3 && o2(0, c2 = e3.style);
  }, e2.$$.update = () => {
    2304 & e2.$$.dirty && u2.set(l2 ? 1 : 0.5, { hard: false === a2 }), 2304 & e2.$$.dirty && h2.set(l2 ? 1 : 0, { hard: false === a2 }), 1664 & e2.$$.dirty && o2(1, i2 = Object.keys(Y).map((e3, t3) => {
      const o3 = Y[e3], i3 = i$[o3](s2), a3 = 1 === o3.length ? "edge" : "corner", l3 = "corner" === a3;
      return { key: o3, type: a3, scale: { x: /^(t|b)$/.test(o3) ? s2.width : l3 ? Ua(r2, 0.5, 1.25) : 1, y: /^(r|l)$/.test(o3) ? s2.height : l3 ? Ua(r2, 0.5, 1.25) : 1 }, translate: { x: i3.x, y: i3.y }, opacity: n2 };
    }));
  }, [c2, i2, d2, u2, h2, (e3, t3) => ({ detail: o3 }) => {
    p2 && t3 !== p2 || "resizestart" !== e3 && void 0 === p2 || ("resizestart" === e3 && (p2 = t3), "resizeend" === e3 && (p2 = void 0), m2(e3, { direction: t3, translation: o3 && o3.translation }));
  }, (e3) => ({ detail: t3 }) => {
    m2("resizestart", { direction: e3, translation: { x: 0, y: 0 } }), m2("resizemove", { direction: e3, translation: t3 }), m2("resizeend", { direction: e3, translation: { x: 0, y: 0 } });
  }, s2, l2, n2, r2, a2];
}
var l$ = class extends wa {
  constructor(e2) {
    super(), va(this, e2, s$, a$, Nn, { rect: 7, visible: 8, style: 0 });
  }
};
var c$ = (e2) => {
  function t2(t3, o3) {
    e2.dispatchEvent(new CustomEvent(t3, { detail: o3 }));
  }
  const o2 = (o3) => {
    o3.preventDefault(), e2.addEventListener("gesturechange", i2), e2.addEventListener("gestureend", n2), t2("gesturedown");
  }, i2 = (e3) => {
    e3.preventDefault(), t2("gestureupdate", e3.scale);
  }, n2 = (e3) => {
    t2("gestureup", e3.scale), e3.preventDefault(), r2();
  }, r2 = () => {
    e2.removeEventListener("gesturechange", i2), e2.removeEventListener("gestureend", n2);
  };
  return e2.addEventListener("gesturestart", o2), { destroy: () => {
    r2(), e2.removeEventListener("gesturestart", o2);
  } };
};
var d$ = { [q]: J, [K]: Q, [J]: q, [Q]: K, [ee]: oe, [te]: ie, [oe]: ee, [ie]: te };
var u$ = (e2) => {
  const t2 = e2 === Q || e2 === K, o2 = e2 === q || e2 === J;
  return [e2 === K || e2 === te || e2 === oe, e2 === Q || e2 === ie || e2 === ee, e2 === q || e2 === te || e2 === ee, e2 === J || e2 === oe || e2 === ie, t2, o2, t2 || o2];
};
var h$ = (e2, t2, o2, i2 = {}) => {
  const { target: n2, translate: r2 } = t2, { aspectRatio: a2, minSize: s2, maxSize: l2 } = i2, c2 = ne[d$[n2]], d2 = be(ce(e2.x, e2.y), ce(c2[0] * e2.width, c2[1] * e2.height)), u2 = ne[n2], h2 = be(Ye(e2), ce(u2[0] * e2.width, u2[1] * e2.height)), [p2, m2, g2, $2, f2, y2, b2] = u$(n2);
  let x2 = r2.x, v2 = r2.y;
  f2 ? v2 = 0 : y2 && (x2 = 0);
  const { inner: w2, outer: S2 } = p$(d2, n2, o2, { aspectRatio: a2, minSize: s2, maxSize: l2 });
  let [k2, C2, M2, T2] = yt(e2);
  if (p2 ? T2 = d2.x : m2 && (C2 = d2.x), $2 ? k2 = d2.y : g2 && (M2 = d2.y), p2) {
    const e3 = w2.x + w2.width, t3 = S2.x + S2.width;
    C2 = Ua(h2.x + x2, e3, t3);
  } else if (m2) {
    const e3 = S2.x, t3 = w2.x;
    T2 = Ua(h2.x + x2, e3, t3);
  }
  if ($2) {
    const e3 = w2.y + w2.height, t3 = S2.y + S2.height;
    M2 = Ua(h2.y + v2, e3, t3);
  } else if (g2) {
    const e3 = S2.y, t3 = w2.y;
    k2 = Ua(h2.y + v2, e3, t3);
  }
  if (T2 > w2.x && (T2 = w2.x), C2 < w2.x + w2.width && (C2 = w2.x + w2.width), k2 > w2.y && (k2 = w2.y), M2 < w2.y + w2.height && (M2 = w2.y + w2.height), T2 < S2.x) {
    const e3 = S2.x - T2;
    T2 = S2.x, C2 += e3;
  }
  if (C2 > S2.x + S2.width) {
    const e3 = C2 - (S2.x + S2.width);
    C2 = S2.x + S2.width, T2 -= e3;
  }
  if (k2 < S2.y) {
    const e3 = S2.y - k2;
    k2 = S2.y, M2 += e3;
  }
  if (M2 > S2.y + S2.height) {
    const e3 = M2 - (S2.y + S2.height);
    M2 = S2.y + S2.height, k2 -= e3;
  }
  if (a2)
    if (b2) {
      let e3 = C2 - T2, t3 = M2 - k2;
      f2 ? (t3 = e3 / a2, k2 = d2.y - 0.5 * t3, M2 = d2.y + 0.5 * t3) : y2 && (e3 = t3 * a2, T2 = d2.x - 0.5 * e3, C2 = d2.x + 0.5 * e3);
    } else {
      const e3 = ce(h2.x + x2 - d2.x, h2.y + v2 - d2.y);
      n2 === te ? (e3.x = Math.max(0, e3.x), e3.y = Math.min(0, e3.y)) : n2 === oe ? (e3.x = Math.max(0, e3.x), e3.y = Math.max(0, e3.y)) : n2 === ie ? (e3.x = Math.min(0, e3.x), e3.y = Math.max(0, e3.y)) : n2 === ee && (e3.x = Math.min(0, e3.x), e3.y = Math.min(0, e3.y));
      const t3 = me(e3), o3 = me(ce(w2.width, w2.height)), i3 = me(ce(S2.width, S2.height)), r3 = Ua(t3, o3, i3), s3 = ce(a2, 1), l3 = we(ge(s3), r3);
      n2 === te ? (C2 = d2.x + l3.x, k2 = d2.y - l3.y) : n2 === oe ? (C2 = d2.x + l3.x, M2 = d2.y + l3.y) : n2 === ie ? (T2 = d2.x - l3.x, M2 = d2.y + l3.y) : n2 === ee && (T2 = d2.x - l3.x, k2 = d2.y - l3.y);
    }
  return ot(T2, k2, C2 - T2, M2 - k2);
};
var p$ = (e2, t2, o2, i2) => {
  const { aspectRatio: n2, minSize: r2, maxSize: a2 } = i2, s2 = t2 === K || t2 === te || t2 === oe, l2 = t2 === Q || t2 === ie || t2 === ee, c2 = t2 === q || t2 === te || t2 === ee, d2 = t2 === J || t2 === oe || t2 === ie, u2 = t2 === Q || t2 === K, h2 = t2 === q || t2 === J, p2 = Ye(o2);
  s2 ? (p2.x = e2.x, p2.width -= e2.x) : l2 && (p2.width = e2.x), d2 ? (p2.y = e2.y, p2.height -= e2.y) : c2 && (p2.height = e2.y);
  const m2 = ((e3, t3) => Ge(0, 0, e3, t3))(Math.min(p2.width, a2.width), Math.min(p2.height, a2.height));
  if (n2) {
    if (u2) {
      const t3 = Math.min(e2.y, o2.height - e2.y);
      m2.height = Math.min(2 * t3, m2.height);
    } else if (h2) {
      const t3 = Math.min(e2.x, o2.width - e2.x);
      m2.width = Math.min(2 * t3, m2.width);
    }
  }
  const g2 = n2 ? Fe($t(Ke(r2), n2)) : r2, $2 = n2 ? Fe(ft(m2, n2)) : m2;
  let f2, y2, b2, x2;
  s2 ? f2 = e2.x : l2 && (y2 = e2.x), d2 ? b2 = e2.y : c2 && (x2 = e2.y), s2 ? y2 = f2 + g2.width : l2 && (f2 = y2 - g2.width), d2 ? x2 = b2 + g2.height : c2 && (b2 = x2 - g2.height), u2 ? (b2 = e2.y - 0.5 * g2.height, x2 = e2.y + 0.5 * g2.height) : h2 && (f2 = e2.x - 0.5 * g2.width, y2 = e2.x + 0.5 * g2.width);
  const v2 = Qe([ce(f2, b2), ce(y2, x2)]);
  s2 ? y2 = f2 + $2.width : l2 && (f2 = y2 - $2.width), d2 ? x2 = b2 + $2.height : c2 && (b2 = x2 - $2.height), u2 ? (b2 = e2.y - 0.5 * $2.height, x2 = e2.y + 0.5 * $2.height) : h2 && (f2 = e2.x - 0.5 * $2.width, y2 = e2.x + 0.5 * $2.width), f2 = Math.max(o2.x, f2), y2 = Math.min(o2.x + o2.width, y2), b2 = Math.max(o2.y, b2), x2 = Math.min(o2.y + o2.height, x2);
  return { inner: v2, outer: Qe([ce(f2, b2), ce(y2, x2)]) };
};
var m$ = (e2) => 180 * e2 / Math.PI;
function g$(e2) {
  let t2, o2, i2;
  return o2 = new Qg({ props: { elasticity: e2[5], min: e2[9], max: e2[10], value: e2[11], valueMin: Math.max(e2[9], e2[0]), valueMax: Math.min(e2[10], e2[1]), labelReset: e2[6], base: e2[12], valueLabel: Math.round(m$(e2[11])) + "&deg;", oninputstart: e2[2], oninputmove: e2[17], oninputend: e2[18] } }), { c() {
    t2 = hr("div"), ya(o2.$$.fragment), xr(t2, "class", "PinturaImageRotator");
  }, m(e3, n2) {
    dr(e3, t2, n2), ba(o2, t2, null), i2 = true;
  }, p(e3, [t3]) {
    const i3 = {};
    32 & t3 && (i3.elasticity = e3[5]), 512 & t3 && (i3.min = e3[9]), 1024 & t3 && (i3.max = e3[10]), 2048 & t3 && (i3.value = e3[11]), 513 & t3 && (i3.valueMin = Math.max(e3[9], e3[0])), 1026 & t3 && (i3.valueMax = Math.min(e3[10], e3[1])), 64 & t3 && (i3.labelReset = e3[6]), 4096 & t3 && (i3.base = e3[12]), 2048 & t3 && (i3.valueLabel = Math.round(m$(e3[11])) + "&deg;"), 4 & t3 && (i3.oninputstart = e3[2]), 392 & t3 && (i3.oninputmove = e3[17]), 400 & t3 && (i3.oninputend = e3[18]), o2.$set(i3);
  }, i(e3) {
    i2 || (sa(o2.$$.fragment, e3), i2 = true);
  }, o(e3) {
    la(o2.$$.fragment, e3), i2 = false;
  }, d(e3) {
    e3 && ur(t2), xa(o2);
  } };
}
function $$(e2, t2, o2) {
  let i2, r2, a2, s2, l2, c2, d2, { rotation: u2 } = t2, { valueMin: h2 } = t2, { valueMax: p2 } = t2, { oninputstart: m2 = n } = t2, { oninputmove: g2 = n } = t2, { oninputend: $2 = n } = t2, { elasticity: f2 = 0 } = t2, { labelReset: y2 } = t2, { rotationMin: b2 } = t2, { rotationMax: x2 } = t2;
  return e2.$$set = (e3) => {
    "rotation" in e3 && o2(13, u2 = e3.rotation), "valueMin" in e3 && o2(0, h2 = e3.valueMin), "valueMax" in e3 && o2(1, p2 = e3.valueMax), "oninputstart" in e3 && o2(2, m2 = e3.oninputstart), "oninputmove" in e3 && o2(3, g2 = e3.oninputmove), "oninputend" in e3 && o2(4, $2 = e3.oninputend), "elasticity" in e3 && o2(5, f2 = e3.elasticity), "labelReset" in e3 && o2(6, y2 = e3.labelReset), "rotationMin" in e3 && o2(14, b2 = e3.rotationMin), "rotationMax" in e3 && o2(15, x2 = e3.rotationMax);
  }, e2.$$.update = () => {
    16384 & e2.$$.dirty && o2(9, i2 = b2 + 1e-9), 32768 & e2.$$.dirty && o2(10, r2 = x2 - 1e-9), 1536 & e2.$$.dirty && o2(12, a2 = i2 + 0.5 * (r2 - i2)), 32768 & e2.$$.dirty && o2(16, s2 = 2 * x2), 8192 & e2.$$.dirty && o2(8, l2 = Math.sign(u2)), 73728 & e2.$$.dirty && o2(7, c2 = Math.round(Math.abs(u2) / s2) * s2), 8576 & e2.$$.dirty && o2(11, d2 = u2 - l2 * c2);
  }, [h2, p2, m2, g2, $2, f2, y2, c2, l2, i2, r2, d2, a2, u2, b2, x2, s2, (e3) => g2(l2 * c2 + e3), (e3) => $2(l2 * c2 + e3)];
}
var f$ = class extends wa {
  constructor(e2) {
    super(), va(this, e2, $$, g$, Nn, { rotation: 13, valueMin: 0, valueMax: 1, oninputstart: 2, oninputmove: 3, oninputend: 4, elasticity: 5, labelReset: 6, rotationMin: 14, rotationMax: 15 });
  }
};
function y$(e2) {
  let t2, o2, i2, n2, r2;
  return { c() {
    t2 = hr("div"), o2 = hr("p"), i2 = mr(e2[0]), n2 = mr(" Ã "), r2 = mr(e2[1]), xr(t2, "class", "PinturaImageInfo");
  }, m(e3, a2) {
    dr(e3, t2, a2), sr(t2, o2), sr(o2, i2), sr(o2, n2), sr(o2, r2);
  }, p(e3, [t3]) {
    1 & t3 && wr(i2, e3[0]), 2 & t3 && wr(r2, e3[1]);
  }, i: zn, o: zn, d(e3) {
    e3 && ur(t2);
  } };
}
function b$(e2, t2, o2) {
  let { width: i2 } = t2, { height: n2 } = t2;
  return e2.$$set = (e3) => {
    "width" in e3 && o2(0, i2 = e3.width), "height" in e3 && o2(1, n2 = e3.height);
  }, [i2, n2];
}
var x$ = class extends wa {
  constructor(e2) {
    super(), va(this, e2, b$, y$, Nn, { width: 0, height: 1 });
  }
};
function v$(e2) {
  let t2, o2;
  return t2 = new yu({ props: { class: "PinturaPresetListFilter", layout: "row", options: e2[8], selectedIndex: e2[7], onchange: e2[10] } }), { c() {
    ya(t2.$$.fragment);
  }, m(e3, i2) {
    ba(t2, e3, i2), o2 = true;
  }, p(e3, o3) {
    const i2 = {};
    256 & o3 && (i2.options = e3[8]), 128 & o3 && (i2.selectedIndex = e3[7]), t2.$set(i2);
  }, i(e3) {
    o2 || (sa(t2.$$.fragment, e3), o2 = true);
  }, o(e3) {
    la(t2.$$.fragment, e3), o2 = false;
  }, d(e3) {
    xa(t2, e3);
  } };
}
function w$(e2) {
  let t2, o2;
  return t2 = new Eu({ props: { icon: e2[0], label: e2[1], labelClass: e2[2], hideLabel: e2[3], options: e2[9], selectedIndex: e2[4], onchange: e2[5], optionMapper: e2[6], $$slots: { controls: [v$] }, $$scope: { ctx: e2 } } }), { c() {
    ya(t2.$$.fragment);
  }, m(e3, i2) {
    ba(t2, e3, i2), o2 = true;
  }, p(e3, [o3]) {
    const i2 = {};
    1 & o3 && (i2.icon = e3[0]), 2 & o3 && (i2.label = e3[1]), 4 & o3 && (i2.labelClass = e3[2]), 8 & o3 && (i2.hideLabel = e3[3]), 512 & o3 && (i2.options = e3[9]), 16 & o3 && (i2.selectedIndex = e3[4]), 32 & o3 && (i2.onchange = e3[5]), 64 & o3 && (i2.optionMapper = e3[6]), 262528 & o3 && (i2.$$scope = { dirty: o3, ctx: e3 }), t2.$set(i2);
  }, i(e3) {
    o2 || (sa(t2.$$.fragment, e3), o2 = true);
  }, o(e3) {
    la(t2.$$.fragment, e3), o2 = false;
  }, d(e3) {
    xa(t2, e3);
  } };
}
var S$ = 'fill="none" stroke="currentColor"';
function k$(e2, t2, o2) {
  let i2, r2, a2, { icon: s2 } = t2, { label: l2 } = t2, { labelClass: c2 } = t2, { hideLabel: d2 } = t2, { options: u2 } = t2, { selectedIndex: h2 } = t2, { onchange: p2 } = t2, { optionMapper: m2 } = t2, { filter: g2 = "landscape" } = t2, { onfilterchange: $2 = n } = t2;
  const f2 = (e3, t3, o3, i3, n2) => `
    <rect ${S$} x="${e3}" y="${t3}" width="${o3}" height="${i3}" rx="${n2}"/>`, y2 = (e3, t3) => `<path ${S$} d="M${e3} ${t3} l2 2 l3 -4"/>`;
  return e2.$$set = (e3) => {
    "icon" in e3 && o2(0, s2 = e3.icon), "label" in e3 && o2(1, l2 = e3.label), "labelClass" in e3 && o2(2, c2 = e3.labelClass), "hideLabel" in e3 && o2(3, d2 = e3.hideLabel), "options" in e3 && o2(12, u2 = e3.options), "selectedIndex" in e3 && o2(4, h2 = e3.selectedIndex), "onchange" in e3 && o2(5, p2 = e3.onchange), "optionMapper" in e3 && o2(6, m2 = e3.optionMapper), "filter" in e3 && o2(11, g2 = e3.filter), "onfilterchange" in e3 && o2(13, $2 = e3.onfilterchange);
  }, e2.$$.update = () => {
    6144 & e2.$$.dirty && o2(9, i2 = ((e3, t3) => (e3 || []).map((e4) => M(e4[0]) ? (e4[1] = e4[1].map(t3), e4) : t3(e4)))(u2, ((e3) => (t3) => {
      const [o3, i3, n2 = {}] = t3;
      return ko(o3) && (n2.hidden = "landscape" === e3 ? o3 < 1 : o3 > 1), [o3, i3, n2];
    })(g2))), 2048 & e2.$$.dirty && o2(7, r2 = "landscape" === g2 ? 0 : 1), 128 & e2.$$.dirty && o2(8, a2 = [["landscape", "Landscape", { hideLabel: true, icon: f2(2, 6, 19, 12, 2) + (0 === r2 ? y2(9, 12) : "") }], ["portrait", "Portrait", { hideLabel: true, icon: f2(5, 3, 13, 18, 2) + (1 === r2 ? y2(9, 12) : "") }]]);
  }, [s2, l2, c2, d2, h2, p2, m2, r2, a2, i2, (e3) => {
    o2(11, g2 = e3.value), $2(e3.value);
  }, g2, u2, $2];
}
var C$ = class extends wa {
  constructor(e2) {
    super(), va(this, e2, k$, w$, Nn, { icon: 0, label: 1, labelClass: 2, hideLabel: 3, options: 12, selectedIndex: 4, onchange: 5, optionMapper: 6, filter: 11, onfilterchange: 13 });
  }
};
var M$ = (e2) => ye(e2, (e3) => re(e3, 6));
var T$ = (e2) => xt(e2, (e3) => re(e3, 6));
var P$ = (e2, t2, o2 = 1e-4) => Math.abs(e2 - t2) < o2;
var R$ = (e2, t2, o2, i2, n2 = {}) => {
  const { aspectRatio: r2 } = n2;
  e2 = T$(e2), i2 = i2.map(M$);
  const a2 = st(e2, d$[o2.target]), s2 = ye(a2, (e3) => re(e3, 6)), l2 = r2 ? $t(n2.minSize, r2) : n2.minSize, c2 = r2 ? ft(n2.maxSize, r2) : n2.maxSize, d2 = st(t2, o2.target);
  if (Me(d2, a2) < 1) {
    t2 = Ye(e2);
    const o3 = Math.min(l2.width / e2.width, l2.height / e2.height);
    rt(t2, o3, a2);
  }
  t2 = at(Ye(t2), l2, c2, a2);
  let u2 = Ye(t2);
  t2 = T$(t2);
  const h2 = Rt(i2, 1), p2 = bt(e2), m2 = bt(t2), g2 = p2.findIndex((e3) => fe(ye(e3, (e4) => re(e4, 6)), s2)), $2 = (e3) => h2.map((t3) => kt(t3, e3)).filter(Boolean).pop();
  if (r2) {
    const t3 = m2.map((e3, t4) => {
      if (t4 === g2)
        return;
      const o3 = ce(a2.x - e3.x, a2.y - e3.y);
      ge(o3), we(o3, 0.5);
      const i3 = ce(a2.x - o3.x, a2.y - o3.y), n3 = je(i3, M$(e3)), r3 = $2(n3);
      if (!r3)
        return;
      const s3 = p2[t4];
      return { intersection: r3, cornerDist: Me(a2, s3), intersectionDist: Me(a2, r3) };
    }).filter(Boolean);
    if (t3.length) {
      const o3 = t3.reduce((e3, t4) => {
        const o4 = t4.intersectionDist / t4.cornerDist;
        return o4 < e3 ? o4 : e3;
      }, Number.MAX_SAFE_INTEGER);
      u2 = Ye(e2), rt(u2, o3, a2);
    }
  } else {
    const e3 = 1 === o2.target.length, n3 = !(i2[0].y === i2[1].y || i2[0].x === i2[1].x), r3 = p2.map((t3, o3) => {
      if (o3 === g2)
        return;
      const i3 = m2[o3], r4 = !P$(i3.x, s2.x) && !P$(i3.y, s2.y);
      if (!e3 && !n3 && r4)
        return;
      if (e3 && (P$(i3.x, s2.x) || P$(i3.y, s2.y)))
        return;
      const l3 = ue(e3 ? t3 : a2), c3 = xe(ue(l3), i3);
      ge(c3), we(c3, 0.5), e3 ? be(l3, c3) : xe(l3, c3);
      const d3 = je(l3, i3), u3 = $2(d3);
      return u3 || void 0;
    }).filter(Boolean);
    if (r3.length) {
      const [e4, i3, n4, l3] = u$(o2.target);
      let [c3, d3, h3, p3] = yt(t2);
      r3.forEach(({ x: t3, y: o3 }) => {
        const r4 = re(t3, 6), a3 = re(o3, 6);
        n4 && !P$(a3, s2.y) && (c3 = Math.max(c3, o3)), e4 && !P$(r4, s2.x) && (d3 = Math.min(d3, t3)), l3 && !P$(a3, s2.y) && (h3 = Math.min(h3, o3)), i3 && !P$(r4, s2.x) && (p3 = Math.max(p3, t3));
      }), u2 = Ge((f2 = [c3, d3, h3, p3])[3], f2[0], f2[1] - f2[3], f2[2] - f2[0]), rt(u2, 0.9999, a2);
    }
  }
  var f2;
  return at(u2, l2, c2, a2), u2;
};
function I$(e2) {
  let t2, o2;
  return t2 = new ch({ props: { items: e2[11] } }), { c() {
    ya(t2.$$.fragment);
  }, m(e3, i2) {
    ba(t2, e3, i2), o2 = true;
  }, p(e3, o3) {
    const i2 = {};
    2048 & o3[0] && (i2.items = e3[11]), t2.$set(i2);
  }, i(e3) {
    o2 || (sa(t2.$$.fragment, e3), o2 = true);
  }, o(e3) {
    la(t2.$$.fragment, e3), o2 = false;
  }, d(e3) {
    xa(t2, e3);
  } };
}
function A$(e2) {
  let t2, o2, i2;
  return o2 = new o$({ props: { $$slots: { default: [I$] }, $$scope: { ctx: e2 } } }), { c() {
    t2 = hr("div"), ya(o2.$$.fragment), xr(t2, "slot", "header");
  }, m(e3, n2) {
    dr(e3, t2, n2), ba(o2, t2, null), i2 = true;
  }, p(e3, t3) {
    const i3 = {};
    2048 & t3[0] | 1 & t3[7] && (i3.$$scope = { dirty: t3, ctx: e3 }), o2.$set(i3);
  }, i(e3) {
    i2 || (sa(o2.$$.fragment, e3), i2 = true);
  }, o(e3) {
    la(o2.$$.fragment, e3), i2 = false;
  }, d(e3) {
    e3 && ur(t2), xa(o2);
  } };
}
function E$(e2) {
  let t2, o2;
  return t2 = new Gc({ props: { onclick: e2[88], label: e2[4].cropLabelButtonRecenter, icon: e2[4].cropIconButtonRecenter, class: "PinturaButtonCenter", disabled: !e2[9], hideLabel: true, style: `opacity: ${e2[29]}; transform: translate3d(${e2[30].x}px, ${e2[30].y}px, 0)` } }), { c() {
    ya(t2.$$.fragment);
  }, m(e3, i2) {
    ba(t2, e3, i2), o2 = true;
  }, p(e3, o3) {
    const i2 = {};
    16 & o3[0] && (i2.label = e3[4].cropLabelButtonRecenter), 16 & o3[0] && (i2.icon = e3[4].cropIconButtonRecenter), 512 & o3[0] && (i2.disabled = !e3[9]), 1610612736 & o3[0] && (i2.style = `opacity: ${e3[29]}; transform: translate3d(${e3[30].x}px, ${e3[30].y}px, 0)`), t2.$set(i2);
  }, i(e3) {
    o2 || (sa(t2.$$.fragment, e3), o2 = true);
  }, o(e3) {
    la(t2.$$.fragment, e3), o2 = false;
  }, d(e3) {
    xa(t2, e3);
  } };
}
function L$(e2) {
  let t2, o2;
  return t2 = new l$({ props: { rect: e2[8], visible: e2[12], style: e2[1] } }), t2.$on("resizestart", e2[68]), t2.$on("resizemove", e2[69]), t2.$on("resizeend", e2[70]), { c() {
    ya(t2.$$.fragment);
  }, m(e3, i2) {
    ba(t2, e3, i2), o2 = true;
  }, p(e3, o3) {
    const i2 = {};
    256 & o3[0] && (i2.rect = e3[8]), 4096 & o3[0] && (i2.visible = e3[12]), 2 & o3[0] && (i2.style = e3[1]), t2.$set(i2);
  }, i(e3) {
    o2 || (sa(t2.$$.fragment, e3), o2 = true);
  }, o(e3) {
    la(t2.$$.fragment, e3), o2 = false;
  }, d(e3) {
    xa(t2, e3);
  } };
}
function F$(e2) {
  let t2, o2;
  return t2 = new x$({ props: { width: Math.round(e2[13].width), height: Math.round(e2[13].height) } }), { c() {
    ya(t2.$$.fragment);
  }, m(e3, i2) {
    ba(t2, e3, i2), o2 = true;
  }, p(e3, o3) {
    const i2 = {};
    8192 & o3[0] && (i2.width = Math.round(e3[13].width)), 8192 & o3[0] && (i2.height = Math.round(e3[13].height)), t2.$set(i2);
  }, i(e3) {
    o2 || (sa(t2.$$.fragment, e3), o2 = true);
  }, o(e3) {
    la(t2.$$.fragment, e3), o2 = false;
  }, d(e3) {
    xa(t2, e3);
  } };
}
function z$(e2) {
  let t2, o2, i2, n2, r2, a2, s2, l2, c2 = e2[21] && e2[10] && E$(e2), d2 = e2[21] && L$(e2), u2 = e2[22] && F$(e2);
  return { c() {
    t2 = hr("div"), o2 = hr("div"), c2 && c2.c(), i2 = gr(), d2 && d2.c(), r2 = gr(), u2 && u2.c(), xr(o2, "class", "PinturaStage"), xr(t2, "slot", "main");
  }, m(h2, p2) {
    dr(h2, t2, p2), sr(t2, o2), c2 && c2.m(o2, null), sr(o2, i2), d2 && d2.m(o2, null), e2[162](o2), sr(t2, r2), u2 && u2.m(t2, null), a2 = true, s2 || (l2 = [er(oc.call(null, o2)), fr(o2, "measure", e2[160]), fr(o2, "wheel", function() {
      Vn(e2[2] && e2[87]) && (e2[2] && e2[87]).apply(this, arguments);
    }, { passive: false }), fr(o2, "interactionstart", e2[74]), fr(o2, "interactionupdate", e2[75]), fr(o2, "interactionrelease", e2[77]), fr(o2, "interactionend", e2[76]), er(n2 = Kc.call(null, o2, { drag: true, inertia: true, pinch: e2[2], shouldStartInteraction: U$, getEventPosition: e2[163] })), fr(o2, "gesturedown", e2[84]), fr(o2, "gestureupdate", e2[85]), fr(o2, "gestureup", e2[86]), er(c$.call(null, o2))], s2 = true);
  }, p(r3, a3) {
    (e2 = r3)[21] && e2[10] ? c2 ? (c2.p(e2, a3), 2098176 & a3[0] && sa(c2, 1)) : (c2 = E$(e2), c2.c(), sa(c2, 1), c2.m(o2, i2)) : c2 && (ra(), la(c2, 1, 1, () => {
      c2 = null;
    }), aa()), e2[21] ? d2 ? (d2.p(e2, a3), 2097152 & a3[0] && sa(d2, 1)) : (d2 = L$(e2), d2.c(), sa(d2, 1), d2.m(o2, null)) : d2 && (ra(), la(d2, 1, 1, () => {
      d2 = null;
    }), aa()), n2 && Vn(n2.update) && 16777220 & a3[0] && n2.update.call(null, { drag: true, inertia: true, pinch: e2[2], shouldStartInteraction: U$, getEventPosition: e2[163] }), e2[22] ? u2 ? (u2.p(e2, a3), 4194304 & a3[0] && sa(u2, 1)) : (u2 = F$(e2), u2.c(), sa(u2, 1), u2.m(t2, null)) : u2 && (ra(), la(u2, 1, 1, () => {
      u2 = null;
    }), aa());
  }, i(e3) {
    a2 || (sa(c2), sa(d2), sa(u2), a2 = true);
  }, o(e3) {
    la(c2), la(d2), la(u2), a2 = false;
  }, d(o3) {
    o3 && ur(t2), c2 && c2.d(), d2 && d2.d(), e2[162](null), u2 && u2.d(), s2 = false, _n(l2);
  } };
}
function B$(e2) {
  let t2, o2, i2, n2;
  const r2 = [{ class: "PinturaControlList" }, { tabs: e2[7] }, e2[18]];
  let a2 = { $$slots: { default: [O$, ({ tab: e3 }) => ({ 216: e3 }), ({ tab: e3 }) => [0, 0, 0, 0, 0, 0, e3 ? 1073741824 : 0]] }, $$scope: { ctx: e2 } };
  for (let e3 = 0; e3 < r2.length; e3 += 1)
    a2 = On(a2, r2[e3]);
  t2 = new xc({ props: a2 }), t2.$on("select", e2[161]);
  const s2 = [{ class: "PinturaControlPanels" }, { panelClass: "PinturaControlPanel" }, { panels: e2[17] }, e2[18]];
  let l2 = { $$slots: { default: [_$, ({ panel: e3 }) => ({ 215: e3 }), ({ panel: e3 }) => [0, 0, 0, 0, 0, 0, e3 ? 536870912 : 0]] }, $$scope: { ctx: e2 } };
  for (let e3 = 0; e3 < s2.length; e3 += 1)
    l2 = On(l2, s2[e3]);
  return i2 = new Ec({ props: l2 }), { c() {
    ya(t2.$$.fragment), o2 = gr(), ya(i2.$$.fragment);
  }, m(e3, r3) {
    ba(t2, e3, r3), dr(e3, o2, r3), ba(i2, e3, r3), n2 = true;
  }, p(e3, o3) {
    const n3 = 262272 & o3[0] ? ga(r2, [r2[0], 128 & o3[0] && { tabs: e3[7] }, 262144 & o3[0] && $a(e3[18])]) : {};
    1073741824 & o3[6] | 1 & o3[7] && (n3.$$scope = { dirty: o3, ctx: e3 }), t2.$set(n3);
    const a3 = 393216 & o3[0] ? ga(s2, [s2[0], s2[1], 131072 & o3[0] && { panels: e3[17] }, 262144 & o3[0] && $a(e3[18])]) : {};
    511721496 & o3[0] | 536870912 & o3[6] | 1 & o3[7] && (a3.$$scope = { dirty: o3, ctx: e3 }), i2.$set(a3);
  }, i(e3) {
    n2 || (sa(t2.$$.fragment, e3), sa(i2.$$.fragment, e3), n2 = true);
  }, o(e3) {
    la(t2.$$.fragment, e3), la(i2.$$.fragment, e3), n2 = false;
  }, d(e3) {
    xa(t2, e3), e3 && ur(o2), xa(i2, e3);
  } };
}
function O$(e2) {
  let t2, o2, i2 = e2[216].label + "";
  return { c() {
    t2 = hr("span"), o2 = mr(i2);
  }, m(e3, i3) {
    dr(e3, t2, i3), sr(t2, o2);
  }, p(e3, t3) {
    1073741824 & t3[6] && i2 !== (i2 = e3[216].label + "") && wr(o2, i2);
  }, d(e3) {
    e3 && ur(t2);
  } };
}
function D$(e2) {
  let t2, o2;
  return t2 = new Qg({ props: { elasticity: e2[25] * e2[43], base: j$, min: e2[23], max: H$, valueMin: e2[27][0], valueMax: e2[27][1], value: e2[28], labelReset: e2[4].labelReset, valueLabel: Math.round(100 * e2[28]) + "%", oninputstart: e2[81], oninputmove: e2[82], oninputend: e2[83] } }), { c() {
    ya(t2.$$.fragment);
  }, m(e3, i2) {
    ba(t2, e3, i2), o2 = true;
  }, p(e3, o3) {
    const i2 = {};
    33554432 & o3[0] && (i2.elasticity = e3[25] * e3[43]), 8388608 & o3[0] && (i2.min = e3[23]), 134217728 & o3[0] && (i2.valueMin = e3[27][0]), 134217728 & o3[0] && (i2.valueMax = e3[27][1]), 268435456 & o3[0] && (i2.value = e3[28]), 16 & o3[0] && (i2.labelReset = e3[4].labelReset), 268435456 & o3[0] && (i2.valueLabel = Math.round(100 * e3[28]) + "%"), t2.$set(i2);
  }, i(e3) {
    o2 || (sa(t2.$$.fragment, e3), o2 = true);
  }, o(e3) {
    la(t2.$$.fragment, e3), o2 = false;
  }, d(e3) {
    xa(t2, e3);
  } };
}
function W$(e2) {
  let t2, o2;
  return t2 = new f$({ props: { elasticity: e2[25] * e2[43], rotation: e2[14], labelReset: e2[4].labelReset, valueMin: e2[26][0], valueMax: e2[26][1], rotationMin: -e2[3], rotationMax: e2[3], oninputstart: e2[71], oninputmove: e2[72], oninputend: e2[73] } }), { c() {
    ya(t2.$$.fragment);
  }, m(e3, i2) {
    ba(t2, e3, i2), o2 = true;
  }, p(e3, o3) {
    const i2 = {};
    33554432 & o3[0] && (i2.elasticity = e3[25] * e3[43]), 16384 & o3[0] && (i2.rotation = e3[14]), 16 & o3[0] && (i2.labelReset = e3[4].labelReset), 67108864 & o3[0] && (i2.valueMin = e3[26][0]), 67108864 & o3[0] && (i2.valueMax = e3[26][1]), 8 & o3[0] && (i2.rotationMin = -e3[3]), 8 & o3[0] && (i2.rotationMax = e3[3]), t2.$set(i2);
  }, i(e3) {
    o2 || (sa(t2.$$.fragment, e3), o2 = true);
  }, o(e3) {
    la(t2.$$.fragment, e3), o2 = false;
  }, d(e3) {
    xa(t2, e3);
  } };
}
function _$(e2) {
  let t2, o2, i2, n2;
  const r2 = [W$, D$], a2 = [];
  function s2(e3, t3) {
    return e3[215] === e3[93] + "-rotation" ? 0 : e3[215] === e3[93] + "-zoom" ? 1 : -1;
  }
  return ~(t2 = s2(e2)) && (o2 = a2[t2] = r2[t2](e2)), { c() {
    o2 && o2.c(), i2 = $r();
  }, m(e3, o3) {
    ~t2 && a2[t2].m(e3, o3), dr(e3, i2, o3), n2 = true;
  }, p(e3, n3) {
    let l2 = t2;
    t2 = s2(e3), t2 === l2 ? ~t2 && a2[t2].p(e3, n3) : (o2 && (ra(), la(a2[l2], 1, 1, () => {
      a2[l2] = null;
    }), aa()), ~t2 ? (o2 = a2[t2], o2 ? o2.p(e3, n3) : (o2 = a2[t2] = r2[t2](e3), o2.c()), sa(o2, 1), o2.m(i2.parentNode, i2)) : o2 = null);
  }, i(e3) {
    n2 || (sa(o2), n2 = true);
  }, o(e3) {
    la(o2), n2 = false;
  }, d(e3) {
    ~t2 && a2[t2].d(e3), e3 && ur(i2);
  } };
}
function V$(e2) {
  let t2, o2, i2 = e2[19] && B$(e2);
  return { c() {
    t2 = hr("div"), i2 && i2.c(), xr(t2, "slot", "footer"), xr(t2, "style", e2[16]);
  }, m(e3, n2) {
    dr(e3, t2, n2), i2 && i2.m(t2, null), o2 = true;
  }, p(e3, n2) {
    e3[19] ? i2 ? (i2.p(e3, n2), 524288 & n2[0] && sa(i2, 1)) : (i2 = B$(e3), i2.c(), sa(i2, 1), i2.m(t2, null)) : i2 && (ra(), la(i2, 1, 1, () => {
      i2 = null;
    }), aa()), (!o2 || 65536 & n2[0]) && xr(t2, "style", e3[16]);
  }, i(e3) {
    o2 || (sa(i2), o2 = true);
  }, o(e3) {
    la(i2), o2 = false;
  }, d(e3) {
    e3 && ur(t2), i2 && i2.d();
  } };
}
function N$(e2) {
  let t2, o2, i2;
  function n2(t3) {
    e2[164](t3);
  }
  let r2 = { hasHeader: e2[20], $$slots: { footer: [V$], main: [z$], header: [A$] }, $$scope: { ctx: e2 } };
  return void 0 !== e2[15] && (r2.root = e2[15]), t2 = new Yg({ props: r2 }), Nr.push(() => fa(t2, "root", n2)), t2.$on("measure", e2[165]), { c() {
    ya(t2.$$.fragment);
  }, m(e3, o3) {
    ba(t2, e3, o3), i2 = true;
  }, p(e3, i3) {
    const n3 = {};
    1048576 & i3[0] && (n3.hasHeader = e3[20]), 2146402302 & i3[0] | 1 & i3[7] && (n3.$$scope = { dirty: i3, ctx: e3 }), !o2 && 32768 & i3[0] && (o2 = true, n3.root = e3[15], qr(() => o2 = false)), t2.$set(n3);
  }, i(e3) {
    i2 || (sa(t2.$$.fragment, e3), i2 = true);
  }, o(e3) {
    la(t2.$$.fragment, e3), i2 = false;
  }, d(e3) {
    xa(t2, e3);
  } };
}
var H$ = 1;
var j$ = 0;
var U$ = (e2, t2) => e2.target === t2;
function Z$(e2, t2, o2) {
  let i2, n2, r2, a2, s2, l2, c2, d2, u2, h2, p2, m2, g2, $2, f2, y2, b2, x2, v2, w2, S2, k2, C2, M2, T2, P2, R2, I2, E2, L2, F2, z2, B2, O2, D2, W2, _2, V2, N2, U2, Z2, Y2, q2, K2, J2, Q2, ae2, se2, le2, de2, pe2, $e2, ye2, ve2, Se2, ke2, Ce2, Me2, Te2, Pe2, Re2, Ie2, Ae2, Le2, Be2, De2, je2, Ue2, Ze2, Xe2, Ge2, qe2, Je2 = zn, Qe2 = () => (Je2(), Je2 = Hn(et2, (e3) => o2(12, E2 = e3)), et2);
  e2.$$.on_destroy.push(() => Je2());
  let { isActive: et2 } = t2;
  Qe2();
  let { stores: at2 } = t2, { cropImageSelectionCornerStyle: st2 = "circle" } = t2, { cropWillRenderImageSelectionGuides: ut2 = (e3, t3) => {
    const o3 = "rotate" == e3;
    return { rows: o3 ? 5 : 3, cols: o3 ? 5 : 3, opacity: 0.25 * t3 };
  } } = t2, { cropAutoCenterImageSelectionTimeout: ht2 } = t2, { cropEnableZoomMatchImageAspectRatio: pt2 = true } = t2, { cropEnableRotateMatchImageAspectRatio: bt2 = "never" } = t2, { cropEnableRotationInput: vt2 = true } = t2, { cropEnableZoom: wt2 = true } = t2, { cropEnableZoomInput: St2 = true } = t2, { cropEnableZoomAutoHide: kt2 = true } = t2, { cropEnableImageSelection: Ct2 = true } = t2, { cropEnableInfoIndicator: Mt2 = false } = t2, { cropEnableZoomTowardsWheelPosition: Tt2 = true } = t2, { cropEnableLimitWheelInputToCropSelection: Pt2 = true } = t2, { cropEnableCenterImageSelection: Rt2 = true } = t2, { cropEnableButtonRotateLeft: It2 = true } = t2, { cropEnableButtonRotateRight: At2 = false } = t2, { cropEnableButtonFlipHorizontal: Et2 = true } = t2, { cropEnableButtonFlipVertical: Lt2 = false } = t2, { cropSelectPresetOptions: Ft2 } = t2, { cropEnableSelectPreset: zt2 = true } = t2, { cropEnableFilterMatchAspectRatio: Bt2 = true } = t2, { cropSelectPresetFilter: Ot2 = false } = t2, { cropEnableButtonToggleCropLimit: Dt2 = false } = t2, { cropWillRenderTools: Wt2 = j } = t2, { cropActiveTransformTool: _t2 = "rotation" } = t2, { cropMinimizeToolbar: Vt2 = "auto" } = t2, { cropInteractionFocus: Nt2 = "image" } = t2, { cropRotationRange: Ht2 = X } = t2, { cropMaskOpacity: jt2 = 0.85 } = t2, { locale: Ut2 = {} } = t2;
  const Zt2 = Wr("isAnimated");
  Un(e2, Zt2, (e3) => o2(139, L2 = e3));
  const Xt2 = Wr("elasticityMultiplier");
  Un(e2, Xt2, (e3) => o2(25, je2 = e3));
  const Gt2 = Wr("redrawTrigger");
  Un(e2, Gt2, (e3) => o2(159, De2 = e3));
  const Yt2 = Wr("imageIsStatic");
  Un(e2, Yt2, (e3) => o2(145, V2 = e3));
  const qt2 = Wr("imageStaticVisualCorners");
  Un(e2, qt2, (e3) => o2(181, Me2 = e3));
  let Kt2 = "idle";
  const Jt2 = Ca();
  Un(e2, Jt2, (e3) => o2(156, Ae2 = e3));
  const Qt2 = () => void 0 === ke2, eo2 = (e3) => 1 / e3, to2 = (e3) => {
    Bt2 && Ot2 !== e3 && (o2(95, Ot2 = e3), ke2 && 1 !== ke2 && oo2() && Qn(_o2, ke2 = eo2(ke2), ke2));
  }, oo2 = () => {
    if (1 === ke2 || !i2)
      return false;
    const e3 = eo2(ke2);
    return !!Nd(Ae2).find(([t3]) => t3 === e3);
  }, io2 = (e3, t3, o3) => G(o3) ? t3.width === Math.round(e3.height) || t3.height === Math.round(e3.width) : t3.width === Math.round(e3.width) || t3.height === Math.round(e3.height), no2 = () => (Qt2() || "always" === bt2 && oo2()) && ((e3, t3, o3) => {
    const i3 = He(Ve(Ee(t3), o3), (e4) => Math.abs(Math.round(e4))), n3 = _e(i3), r3 = it(e3);
    return fe(n3, r3);
  })(N2, se2, le2) && io2(N2, se2, le2), ro2 = (e3) => {
    if ("never" !== bt2 && no2()) {
      Qn(Mo2, le2 += e3, le2);
      const t3 = G(le2), o3 = t3 ? se2.height : se2.width, i3 = t3 ? se2.width : se2.height;
      Qn(Bo2, N2 = ot(0, 0, o3, i3), N2), Qt2() || Qn(_o2, ke2 = H(o3, i3), ke2);
    } else
      Qn(Mo2, le2 += e3, le2);
  }, { history: ao2, env: so2, isInteracting: lo2, isInteractingFraction: co2, isTransformingImage: uo2, rootRect: ho2, stageRect: po2, utilRect: mo2, utilRectPadded: go2, rootLineColor: $o2, allowPan: fo2, allowZoom: yo2, rangeInputElasticity: bo2, presentationScalar: xo2, utilTools: vo2, imagePreviewModifiers: wo2, imageOutlineOpacity: So2, imageFlipX: ko2, imageFlipY: Co2, imageRotation: Mo2, imageRotationRange: Po2, imageOutputSize: Ro2, imageSelectionRect: Io2, imageSelectionRectSnapshot: Ao2, imageSelectionRectIntent: Eo2, imageSelectionRectPresentation: Lo2, imageCropRectIntent: Fo2, imageCropRectOrigin: zo2, imageCropRect: Bo2, imageCropMinSize: Oo2, imageCropMaxSize: Do2, imageCropRange: Wo2, imageCropAspectRatio: _o2, imageCropLimitToImage: Vo2, imageSize: No2, imageScalar: Ho2, imageOverlayMarkup: jo2, stagePadded: Uo2, stageRecenter: Zo2 } = at2;
  let Xo2;
  Un(e2, so2, (e3) => o2(140, F2 = e3)), Un(e2, lo2, (e3) => o2(144, _2 = e3)), Un(e2, uo2, (e3) => o2(174, Q2 = e3)), Un(e2, ho2, (e3) => o2(24, $e2 = e3)), Un(e2, po2, (e3) => o2(151, J2 = e3)), Un(e2, go2, (e3) => o2(148, Y2 = e3)), Un(e2, xo2, (e3) => o2(147, Z2 = e3)), Un(e2, vo2, (e3) => o2(183, Pe2 = e3)), Un(e2, wo2, (e3) => o2(173, D2 = e3)), Un(e2, ko2, (e3) => o2(158, Be2 = e3)), Un(e2, Co2, (e3) => o2(157, Le2 = e3)), Un(e2, Mo2, (e3) => o2(14, le2 = e3)), Un(e2, Po2, (e3) => o2(26, Ue2 = e3)), Un(e2, Ro2, (e3) => o2(184, Re2 = e3)), Un(e2, Io2, (e3) => o2(150, K2 = e3)), Un(e2, Ao2, (e3) => o2(149, q2 = e3)), Un(e2, Eo2, (e3) => o2(182, Te2 = e3)), Un(e2, Lo2, (e3) => o2(143, W2 = e3)), Un(e2, Fo2, (e3) => o2(176, ye2 = e3)), Un(e2, zo2, (e3) => o2(178, Se2 = e3)), Un(e2, Bo2, (e3) => o2(13, N2 = e3)), Un(e2, Oo2, (e3) => o2(154, pe2 = e3)), Un(e2, Do2, (e3) => o2(180, Ce2 = e3)), Un(e2, Wo2, (e3) => o2(177, ve2 = e3)), Un(e2, _o2, (e3) => o2(179, ke2 = e3)), Un(e2, Vo2, (e3) => o2(153, de2 = e3)), Un(e2, No2, (e3) => o2(152, se2 = e3)), Un(e2, Ho2, (e3) => o2(146, U2 = e3)), Un(e2, jo2, (e3) => o2(172, B2 = e3)), Un(e2, Uo2, (e3) => o2(142, O2 = e3));
  const Go2 = (e3, t3) => {
    const o3 = { target: e3, translate: t3 }, i3 = We(Ee(pe2), Z2), n3 = We(Ee(Ce2), Z2);
    let r3 = h$(q2, o3, { ...Y2, x: 0, y: 0 }, { aspectRatio: ke2, minSize: i3, maxSize: n3 });
    if (r3 = ((e4, t4, o4) => {
      const [i4, n4, r4, a4] = yt(e4), s3 = { ...e4 };
      if (i4 < t4.y && (e4.height = e4.height - (t4.y - i4), e4.y = t4.y), n4 > t4.x + t4.width && (e4.width = t4.x + t4.width - e4.x), r4 > t4.y + t4.height && (e4.height = t4.y + t4.height - e4.y), a4 < t4.x && (e4.width = e4.width - (t4.x - a4), e4.x = t4.x), o4) {
        const t5 = Math.min(1, s3.width / e4.width, s3.height / e4.height);
        return lt(s3, t5);
      }
      return e4;
    })(r3, { ...Y2, x: 0, y: 0 }, ke2), !de2)
      return { boundsLimited: r3, boundsIntent: r3 };
    let a3 = R$(q2, r3, o3, Me2, { aspectRatio: ke2, minSize: i3, maxSize: n3 });
    return { boundsLimited: a3, boundsIntent: a3 };
  }, Yo2 = (e3, t3) => {
    const o3 = { target: e3, translate: t3 }, i3 = We(Ee(pe2), Z2), n3 = We(Ee(Ce2), Z2), r3 = ((e4, t4, o4 = {}) => {
      const { target: i4, translate: n4 } = t4, { aspectRatio: r4, minSize: a3 } = o4, s3 = ne[d$[i4]], l3 = be(Ye(e4), ce(s3[0] * e4.width, s3[1] * e4.height)), c3 = ne[i4], d3 = be(Ye(e4), ce(c3[0] * e4.width, c3[1] * e4.height)), [u3, h3, p3, m3, g3, $3, f3] = u$(i4);
      let y3 = n4.x, b3 = n4.y;
      g3 ? b3 = 0 : $3 && (y3 = 0);
      let [x3, v3, w3, S3] = yt(e4);
      if (u3 ? S3 = l3.x : h3 && (v3 = l3.x), m3 ? x3 = l3.y : p3 && (w3 = l3.y), u3 ? v3 = d3.x + y3 : h3 && (S3 = d3.x + y3), m3 ? w3 = d3.y + b3 : p3 && (x3 = d3.y + b3), a3 && g3 && w3 - x3 < a3.height) {
        const e5 = a3.height - (w3 - x3);
        x3 -= 0.5 * e5, w3 += 0.5 * e5;
      }
      if (a3 && $3 && v3 - S3 < a3.width) {
        const e5 = a3.width - (v3 - S3);
        S3 -= 0.5 * e5, v3 += 0.5 * e5;
      }
      if (r4)
        if (f3) {
          let e5 = v3 - S3, t5 = w3 - x3;
          g3 ? (t5 = e5 / r4, x3 = l3.y - 0.5 * t5, w3 = l3.y + 0.5 * t5) : $3 && (e5 = t5 * r4, S3 = l3.x - 0.5 * e5, v3 = l3.x + 0.5 * e5);
        } else {
          const e5 = ce(d3.x + y3 - l3.x, d3.y + b3 - l3.y);
          i4 === te ? (e5.x = Math.max(0, e5.x), e5.y = Math.min(0, e5.y)) : i4 === oe ? (e5.x = Math.max(0, e5.x), e5.y = Math.max(0, e5.y)) : i4 === ie ? (e5.x = Math.min(0, e5.x), e5.y = Math.max(0, e5.y)) : i4 === ee && (e5.x = Math.min(0, e5.x), e5.y = Math.min(0, e5.y));
          const t5 = me(e5), o5 = ce(r4, 1), n5 = we(ge(o5), t5);
          i4 === te ? (v3 = l3.x + n5.x, x3 = l3.y - n5.y) : i4 === oe ? (v3 = l3.x + n5.x, w3 = l3.y + n5.y) : i4 === ie ? (S3 = l3.x - n5.x, w3 = l3.y + n5.y) : i4 === ee && (S3 = l3.x - n5.x, x3 = l3.y - n5.y);
        }
      return ot(S3, x3, v3 - S3, w3 - x3);
    })(q2, o3, { aspectRatio: ke2, minSize: i3 });
    return { boundsLimited: h$(q2, o3, { ...Y2, x: 0, y: 0 }, { aspectRatio: ke2, minSize: i3, maxSize: n3 }), boundsIntent: r3 };
  };
  let qo2 = void 0, Ko2 = void 0;
  const Jo2 = ({ translation: e3, scalar: t3 }) => {
    V2 && (t3 = 1, e3 = he(ue(e3)));
    const o3 = Math.min(K2.width / N2.width, K2.height / N2.height), i3 = we(ue(e3), 1 / o3);
    let n3;
    if (Ko2) {
      const t4 = xe(ue(Ko2), e3);
      Ko2 = e3, n3 = nt(Ye(N2), t4);
    } else
      n3 = nt(Ye(qo2), he(ue(i3))), void 0 !== t3 && rt(n3, 1 / t3);
    Qn(Fo2, ye2 = n3, ye2), Qn(Bo2, N2 = n3, N2);
  }, Qo2 = Ma([Wo2, Bo2], ([e3, t3], o3) => {
    if (!t3)
      return;
    const [i3, n3] = e3, r3 = dt(t3);
    o3([Fe(xt($t(i3, r3), re)), Fe(xt(ft(n3, r3), re))]);
  });
  Un(e2, Qo2, (e3) => o2(175, ae2 = e3));
  const ei2 = Ma([No2, Vo2, Oo2, Do2, Wo2, Mo2], ([e3, t3, o3, i3, n3, r3], a3) => {
    if (!e3)
      return;
    const s3 = n3[0], l3 = n3[1];
    let c3, d3;
    t3 ? (c3 = ((e4, t4, o4) => G(o4) ? 1 - 1 / Math.min(e4.height / t4.width, e4.width / t4.height) : 1 - 1 / Math.min(e4.width / t4.width, e4.height / t4.height))(e3, l3, r3), d3 = Math.min(s3.width / o3.width, s3.height / o3.height)) : (c3 = -1, d3 = 1);
    a3([c3, d3].map((e4) => re(e4)));
  });
  Un(e2, ei2, (e3) => o2(27, Ze2 = e3));
  const ti2 = Ma([No2, Bo2, Wo2, Mo2], ([e3, t3, o3, i3], n3) => {
    if (!e3 || !t3)
      return n3(0);
    let r3;
    const a3 = o3[0], s3 = o3[1], l3 = t3.width, c3 = t3.height, d3 = dt(t3), u3 = G(i3) ? Oe(e3.height, e3.width) : e3, h3 = ft(u3, d3);
    if (l3 <= h3.width || c3 <= h3.height) {
      const e4 = h3.width - a3.width, t4 = h3.height - a3.height;
      r3 = 0 === e4 || 0 === t4 ? 1 : 1 - Math.min((l3 - a3.width) / e4, (c3 - a3.height) / t4);
    } else {
      const e4 = s3.width - h3.width, t4 = s3.height - h3.height, o4 = ft({ width: e4, height: t4 }, d3);
      r3 = -Math.min((l3 - h3.width) / o4.width, (c3 - h3.height) / o4.height);
    }
    n3(r3);
  });
  Un(e2, ti2, (e3) => o2(28, Xe2 = e3));
  const oi2 = (e3) => {
    const t3 = dt(qo2);
    let o3, i3, n3;
    const r3 = G(le2) ? Oe(se2.height, se2.width) : se2, a3 = ft(r3, t3);
    if (e3 >= 0) {
      const r4 = a3.width - ve2[0].width, s4 = a3.height - ve2[0].height;
      o3 = a3.width - r4 * e3, i3 = a3.height - s4 * e3, n3 = $t({ width: o3, height: i3 }, t3);
    } else {
      const r4 = ve2[1].width - a3.width, s4 = ve2[1].height - a3.height;
      o3 = a3.width + r4 * -e3, i3 = a3.height + s4 * -e3, n3 = ft({ width: o3, height: i3 }, t3);
    }
    o3 = n3.width, i3 = n3.height;
    const s3 = qo2.x + 0.5 * qo2.width - 0.5 * o3, l3 = qo2.y + 0.5 * qo2.height - 0.5 * i3;
    Qn(Bo2, N2 = { x: s3, y: l3, width: o3, height: i3 }, N2);
  };
  let ii2;
  const ni2 = (e3) => {
    const t3 = rt(Ye(ii2), 1 / e3);
    Qn(Fo2, ye2 = t3, ye2), Qn(Bo2, N2 = t3, N2);
  };
  let ri2;
  const ai2 = () => {
    Zo2.set({});
  };
  let si2;
  const li2 = _l(0, { precision: 1e-4 });
  Un(e2, li2, (e3) => o2(29, Ge2 = e3));
  const ci2 = _l();
  Un(e2, ci2, (e3) => o2(30, qe2 = e3));
  const di2 = Ma([_o2, Ro2, Jt2], ([e3, t3, o3], n3) => {
    if (!i2)
      return;
    const r3 = Nd(o3), a3 = [...r3].map((e4) => e4[0]).sort((e4, t4) => To(e4[0]) && !To(t4[0]) ? 1 : -1).find((o4) => {
      if (To(o4) && t3) {
        const [i3, n4] = o4, r4 = t3.width === i3 && t3.height === n4, a4 = e3 === H(i3, n4);
        return r4 && a4;
      }
      return o4 === e3;
    });
    if (!a3)
      return n3(void 0);
    n3(r3.map((e4) => e4[0]).findIndex((e4) => To(e4) ? qa(e4, a3) : e4 === a3));
  });
  Un(e2, di2, (e3) => o2(155, Ie2 = e3));
  const ui2 = (e3, t3) => {
    if (!i2 || -1 === e3 || void 0 === e3)
      return;
    const o3 = Nd(t3)[e3][0];
    return o3 ? To(o3) ? H(o3[0], o3[1]) : o3 : void 0;
  }, hi2 = Ma([$o2, Lo2, co2], ([e3, t3, o3], i3) => {
    const { rows: n3, cols: r3, opacity: a3 } = ut2(Kt2, o3);
    if (!t3 || a3 <= 0)
      return i3([]);
    const { x: s3, y: l3, width: c3, height: d3 } = t3, u3 = c3 / r3, h3 = d3 / n3, p3 = [];
    for (let t4 = 1; t4 <= n3 - 1; t4++) {
      const o4 = l3 + h3 * t4;
      p3.push({ id: "image-selection-guide-row-" + t4, points: [ce(s3, o4), ce(s3 + c3, o4)], opacity: a3, strokeWidth: 1, strokeColor: e3 });
    }
    for (let t4 = 1; t4 <= r3 - 1; t4++) {
      const o4 = s3 + u3 * t4;
      p3.push({ id: "image-selection-guide-col-" + t4, points: [ce(o4, l3), ce(o4, l3 + d3)], opacity: a3, strokeWidth: 1, strokeColor: e3 });
    }
    i3(p3);
  });
  Un(e2, hi2, (e3) => o2(141, z2 = e3));
  const pi2 = "crop-" + A();
  let mi2, gi2 = pi2 + "-" + (vt2 ? _t2 : "zoom"), $i2 = gi2, fi2 = void 0;
  const yi2 = _l(L2 ? 20 : 0);
  Un(e2, yi2, (e3) => o2(138, I2 = e3));
  return e2.$$set = (e3) => {
    "isActive" in e3 && Qe2(o2(0, et2 = e3.isActive)), "stores" in e3 && o2(97, at2 = e3.stores), "cropImageSelectionCornerStyle" in e3 && o2(1, st2 = e3.cropImageSelectionCornerStyle), "cropWillRenderImageSelectionGuides" in e3 && o2(98, ut2 = e3.cropWillRenderImageSelectionGuides), "cropAutoCenterImageSelectionTimeout" in e3 && o2(99, ht2 = e3.cropAutoCenterImageSelectionTimeout), "cropEnableZoomMatchImageAspectRatio" in e3 && o2(100, pt2 = e3.cropEnableZoomMatchImageAspectRatio), "cropEnableRotateMatchImageAspectRatio" in e3 && o2(101, bt2 = e3.cropEnableRotateMatchImageAspectRatio), "cropEnableRotationInput" in e3 && o2(102, vt2 = e3.cropEnableRotationInput), "cropEnableZoom" in e3 && o2(2, wt2 = e3.cropEnableZoom), "cropEnableZoomInput" in e3 && o2(103, St2 = e3.cropEnableZoomInput), "cropEnableZoomAutoHide" in e3 && o2(104, kt2 = e3.cropEnableZoomAutoHide), "cropEnableImageSelection" in e3 && o2(105, Ct2 = e3.cropEnableImageSelection), "cropEnableInfoIndicator" in e3 && o2(106, Mt2 = e3.cropEnableInfoIndicator), "cropEnableZoomTowardsWheelPosition" in e3 && o2(107, Tt2 = e3.cropEnableZoomTowardsWheelPosition), "cropEnableLimitWheelInputToCropSelection" in e3 && o2(108, Pt2 = e3.cropEnableLimitWheelInputToCropSelection), "cropEnableCenterImageSelection" in e3 && o2(109, Rt2 = e3.cropEnableCenterImageSelection), "cropEnableButtonRotateLeft" in e3 && o2(110, It2 = e3.cropEnableButtonRotateLeft), "cropEnableButtonRotateRight" in e3 && o2(111, At2 = e3.cropEnableButtonRotateRight), "cropEnableButtonFlipHorizontal" in e3 && o2(112, Et2 = e3.cropEnableButtonFlipHorizontal), "cropEnableButtonFlipVertical" in e3 && o2(113, Lt2 = e3.cropEnableButtonFlipVertical), "cropSelectPresetOptions" in e3 && o2(114, Ft2 = e3.cropSelectPresetOptions), "cropEnableSelectPreset" in e3 && o2(115, zt2 = e3.cropEnableSelectPreset), "cropEnableFilterMatchAspectRatio" in e3 && o2(116, Bt2 = e3.cropEnableFilterMatchAspectRatio), "cropSelectPresetFilter" in e3 && o2(95, Ot2 = e3.cropSelectPresetFilter), "cropEnableButtonToggleCropLimit" in e3 && o2(117, Dt2 = e3.cropEnableButtonToggleCropLimit), "cropWillRenderTools" in e3 && o2(118, Wt2 = e3.cropWillRenderTools), "cropActiveTransformTool" in e3 && o2(119, _t2 = e3.cropActiveTransformTool), "cropMinimizeToolbar" in e3 && o2(120, Vt2 = e3.cropMinimizeToolbar), "cropInteractionFocus" in e3 && o2(121, Nt2 = e3.cropInteractionFocus), "cropRotationRange" in e3 && o2(3, Ht2 = e3.cropRotationRange), "cropMaskOpacity" in e3 && o2(122, jt2 = e3.cropMaskOpacity), "locale" in e3 && o2(4, Ut2 = e3.locale);
  }, e2.$$.update = () => {
    4096 & e2.$$.dirty[0] | 268435456 & e2.$$.dirty[3] && Yt2.set("selection" === Nt2 && E2), 2097152 & e2.$$.dirty[3] && o2(129, i2 = Ft2 && Array.isArray(Ft2) && Ft2.length), 2097152 & e2.$$.dirty[3] | 32 & e2.$$.dirty[4] && Jt2.set(i2 ? Ft2 : []), 4096 & e2.$$.dirty[0] && E2 && So2.set(1), 4096 & e2.$$.dirty[0] && fo2.set(!E2), 4096 & e2.$$.dirty[0] && yo2.set(!E2), 65536 & e2.$$.dirty[4] && o2(124, p2 = "overlay" === F2.layoutMode), 4194304 & e2.$$.dirty[3] | 1 & e2.$$.dirty[4] && o2(128, v2 = zt2 && !p2), 83886080 & e2.$$.dirty[4] && o2(137, l2 = Y2 && K2 && mt(Y2, K2)), 67117056 & e2.$$.dirty[4] && o2(135, c2 = !(!K2 || !l2)), 67119104 & e2.$$.dirty[4] && o2(133, d2 = c2 && ct(K2, l2, (e3) => re(e3, 5))), 16400 & e2.$$.dirty[0] | 52297732 & e2.$$.dirty[3] | 1879114288 & e2.$$.dirty[4] | 31 & e2.$$.dirty[5] && o2(11, n2 = De2 && Wt2([It2 && ["Button", "rotate-left", { label: Ut2.cropLabelButtonRotateLeft, labelClass: "PinturaToolbarContentWide", icon: Ut2.cropIconButtonRotateLeft, onclick: () => {
      ro2(-Math.PI / 2), ao2.write();
    } }], At2 && ["Button", "rotate-right", { label: Ut2.cropLabelButtonRotateRight, labelClass: "PinturaToolbarContentWide", icon: Ut2.cropIconButtonRotateRight, onclick: () => {
      ro2(Math.PI / 2), ao2.write();
    } }], Et2 && ["Button", "flip-horizontal", { label: Ut2.cropLabelButtonFlipHorizontal, labelClass: "PinturaToolbarContentWide", icon: Ut2.cropIconButtonFlipHorizontal, onclick: () => {
      G(le2) ? Qn(Co2, Le2 = !Le2, Le2) : Qn(ko2, Be2 = !Be2, Be2), ao2.write();
    } }], Lt2 && ["Button", "flip-vertical", { label: Ut2.cropLabelButtonFlipVertical, labelClass: "PinturaToolbarContentWide", icon: Ut2.cropIconButtonFlipVertical, onclick: () => {
      G(le2) ? Qn(ko2, Be2 = !Be2, Be2) : Qn(Co2, Le2 = !Le2, Le2), ao2.write();
    } }], v2 && i2 && [false === Ot2 ? "Dropdown" : C$, "select-preset", { icon: jd(Ut2.cropIconSelectPreset, Ut2, ui2(Ie2, Ae2)), label: jd(Ut2.cropLabelSelectPreset, Ut2, ui2(Ie2, Ae2)), labelClass: "PinturaToolbarContentWide", options: Ae2, filter: Ot2, onfilterchange: to2, selectedIndex: Ie2, onchange: ({ value: e3 }) => {
      To(e3) ? (Qn(_o2, ke2 = H(e3[0], e3[1]), ke2), Qn(Ro2, Re2 = ze(e3), Re2)) : Qn(_o2, ke2 = e3, ke2), d2 && ai2(), ao2.write();
    }, optionMapper: (e3) => {
      let t3 = false;
      const o3 = To(e3.value) ? e3.value[0] / e3.value[1] : e3.value;
      if (o3) {
        const e4 = Na(se2, le2, o3);
        t3 = e4.width < pe2.width || e4.height < pe2.height;
      }
      return e3.icon = ((e4, t4 = {}) => {
        const { width: o4 = 24, height: i3 = 24, bounds: n3 = 16, radius: r3 = 3 } = t4;
        let a3, s3, l3, c3, d3 = To(e4) ? H(e4[0], e4[1]) : e4, u3 = !!d3;
        return d3 = u3 ? d3 : 1, l3 = d3 > 1 ? n3 : d3 * n3, c3 = l3 / d3, a3 = Math.round(0.5 * (o4 - l3)), s3 = Math.round(0.5 * (i3 - c3)), `<rect fill="${u3 ? "currentColor" : "none"}" stroke="${u3 ? "none" : "currentColor"}" stroke-width="${o4 / 16}" stroke-dasharray="${[o4 / 12, o4 / 6].join(" ")}" x="${a3}" y="${s3}" width="${l3}" height="${c3}" rx="${r3}"/>`;
      })(e3.value, { bounds: 14 }), { ...e3, disabled: t3 };
    } }], Dt2 && ["Dropdown", "select-crop-limit", { icon: jd(Ut2.cropIconCropBoundary, Ut2, de2), label: Ut2.cropLabelCropBoundary, labelClass: "PinturaToolbarContentWide", onchange: ({ value: e3 }) => {
      Qn(Vo2, de2 = e3, de2), ao2.write();
    }, options: [[true, Ut2.cropLabelCropBoundaryEdge, { icon: jd(Ut2.cropIconCropBoundary, Ut2, true) }], [false, Ut2.cropLabelCropBoundaryNone, { icon: jd(Ut2.cropIconCropBoundary, Ut2, false) }]] }]].filter(Boolean), F2, () => Gt2.set({})).filter(Boolean)), 6144 & e2.$$.dirty[0] | 134217728 & e2.$$.dirty[3] | 65537 & e2.$$.dirty[4] && Qn(vo2, Pe2 = E2 && "never" !== Vt2 && ("always" === Vt2 || "short" === F2.verticalSpace || p2) ? n2.map(([e3, t3, o3]) => Array.isArray(o3) ? [e3, t3, o3] : [e3, t3, { ...o3, hideLabel: true }]) : [], Pe2), 536870912 & e2.$$.dirty[4] && o2(23, r2 = de2 ? 0 : -1), 150994944 & e2.$$.dirty[4] && o2(130, a2 = Y2 && ce(-(J2.x - Y2.x), -(J2.y - Y2.y))), 524352 & e2.$$.dirty[4] && o2(131, s2 = W2 && ce(Cd(W2.x + 0.5 * W2.width + a2.x), Cd(W2.y + 0.5 * W2.height + a2.y))), 33554432 & e2.$$.dirty[4] && o2(134, u2 = null != q2), 16785408 & e2.$$.dirty[4] && o2(136, h2 = Y2 && l2 && (l2.height === Y2.height || l2.width === Y2.width)), 12587008 & e2.$$.dirty[4] && o2(132, m2 = !h2 && Z2 < 1 && U2 < 1), 3840 & e2.$$.dirty[4] && o2(9, g2 = c2 && !u2 && (!d2 || m2)), 8192 & e2.$$.dirty[0] | 8192 & e2.$$.dirty[3] | 1 & e2.$$.dirty[4] && o2(22, $2 = Mt2 && !!N2 && !p2), 524352 & e2.$$.dirty[4] && o2(8, b2 = W2 && a2 && { x: W2.x + a2.x, y: W2.y + a2.y, width: W2.width, height: W2.height }), 256 & e2.$$.dirty[0] | 4096 & e2.$$.dirty[3] | 1 & e2.$$.dirty[4] && o2(21, f2 = Ct2 && !!b2 && !p2), 65600 & e2.$$.dirty[3] | 2097280 & e2.$$.dirty[4] && o2(10, y2 = Rt2 && !!s2 && !ht2 && !V2), 512 & e2.$$.dirty[0] | 1073741888 & e2.$$.dirty[3] | 1048576 & e2.$$.dirty[4] && g2 && ht2 && !_2 && (clearTimeout(si2), o2(123, si2 = setTimeout(ai2, ht2))), 1073741824 & e2.$$.dirty[3] | 1048576 & e2.$$.dirty[4] && _2 && clearTimeout(si2), 1536 & e2.$$.dirty[0] | 32768 & e2.$$.dirty[4] && li2.set(y2 && g2 ? 1 : 0, { hard: false === L2 }), 32896 & e2.$$.dirty[4] && ci2.set(s2, { hard: false === L2 }), 4096 & e2.$$.dirty[0] | 262144 & e2.$$.dirty[4] && (E2 && !O2 ? (Qn(wo2, D2.crop = { maskOpacity: jt2, maskMarkupOpacity: jt2 }, D2), wo2.set(D2)) : (delete D2.crop, wo2.set(D2))), 131072 & e2.$$.dirty[4] && z2 && (() => {
      const e3 = B2.filter((e4) => !/^image\-selection\-guide/.test(e4.id));
      Qn(jo2, B2 = E2 ? [...e3, ...z2] : e3, B2);
    })(), 65536 & e2.$$.dirty[4] && o2(127, x2 = "short" !== F2.verticalSpace), 134217728 & e2.$$.dirty[3] | 9 & e2.$$.dirty[4] && o2(20, w2 = "never" === Vt2 && !p2 || x2 && "always" !== Vt2), 4 & e2.$$.dirty[0] | 1024 & e2.$$.dirty[3] && o2(126, S2 = wt2 && St2), 2048 & e2.$$.dirty[3] | 12 & e2.$$.dirty[4] && o2(125, k2 = kt2 ? x2 && S2 : S2), 512 & e2.$$.dirty[3] | 2 & e2.$$.dirty[4] && o2(19, C2 = vt2 || k2), 2 & e2.$$.dirty[4] && (k2 || o2(5, $i2 = gi2)), 32 & e2.$$.dirty[0] && o2(18, M2 = { name: pi2, selected: $i2 }), 16 & e2.$$.dirty[0] | 512 & e2.$$.dirty[3] | 2 & e2.$$.dirty[4] && o2(7, T2 = [vt2 && { id: pi2 + "-rotation", label: Ut2.cropLabelTabRotation }, k2 && { id: pi2 + "-zoom", label: Ut2.cropLabelTabZoom }].filter(Boolean)), 128 & e2.$$.dirty[0] && o2(17, P2 = T2.map((e3) => e3.id)), 64 & e2.$$.dirty[0] | 1 & e2.$$.dirty[4] && mi2 && !mi2.children.length && p2 && mi2.dispatchEvent(new CustomEvent("measure", { detail: mi2.rect })), 4096 & e2.$$.dirty[0] | 32768 & e2.$$.dirty[4] && L2 && yi2.set(E2 ? 0 : 20), 16384 & e2.$$.dirty[4] && o2(16, R2 = I2 ? `transform: translateY(${I2}px)` : void 0);
  }, [et2, st2, wt2, Ht2, Ut2, $i2, mi2, T2, b2, g2, y2, n2, E2, N2, le2, fi2, R2, P2, M2, C2, w2, f2, $2, r2, $e2, je2, Ue2, Ze2, Xe2, Ge2, qe2, Zt2, Xt2, Gt2, Yt2, qt2, Jt2, so2, lo2, uo2, ho2, po2, go2, bo2, xo2, vo2, wo2, ko2, Co2, Mo2, Po2, Ro2, Io2, Ao2, Eo2, Lo2, Fo2, zo2, Bo2, Oo2, Do2, Wo2, _o2, Vo2, No2, Ho2, jo2, Uo2, () => {
    Kt2 = "select", Qn(lo2, _2 = true, _2), Qn(Ao2, q2 = Ye(K2), q2), Xo2 = V2 ? Go2 : Yo2;
  }, ({ detail: e3 }) => {
    const { boundsLimited: t3, boundsIntent: o3 } = Xo2(e3.direction, e3.translation);
    Qn(uo2, Q2 = true, Q2), Qn(Eo2, Te2 = o3, Te2), Qn(Io2, K2 = t3, K2);
  }, ({ detail: e3 }) => {
    const { boundsLimited: t3 } = Xo2(e3.direction, e3.translation);
    Qn(uo2, Q2 = false, Q2), Qn(lo2, _2 = false, _2), Qn(Eo2, Te2 = void 0, Te2), me(e3.translation) && (Qn(Io2, K2 = t3, K2), ao2.write()), Qn(Ao2, q2 = void 0, q2), Kt2 = void 0;
  }, () => {
    Kt2 = "rotate", Qn(lo2, _2 = true, _2), Qn(zo2, Se2 = Ye(N2), Se2);
  }, (e3) => {
    Qn(uo2, Q2 = true, Q2), Qn(Mo2, le2 = e3, le2);
  }, (e3) => {
    Qn(uo2, Q2 = false, Q2), Qn(lo2, _2 = false, _2), Qn(Mo2, le2 = e3, le2), ao2.write(), Qn(zo2, Se2 = void 0, Se2);
  }, () => {
    Kt2 = "pan", Ko2 = void 0, Qn(lo2, _2 = true, _2), qo2 = Ye(N2);
  }, ({ detail: e3 }) => {
    Qn(uo2, Q2 = true, Q2), Jo2(e3);
  }, ({ detail: e3 }) => {
    Qn(uo2, Q2 = false, Q2), Qn(lo2, _2 = false, _2), (me(e3.translation) > 0 || 0 !== e3.scalar) && (Jo2(e3), ao2.write()), Qn(Fo2, ye2 = void 0, ye2), qo2 = void 0;
  }, ({ detail: { translation: e3 } }) => {
    V2 && (e3 = he(ue(e3))), Ko2 = e3, Qn(lo2, _2 = false, _2);
  }, Qo2, ei2, ti2, () => {
    Kt2 = "zoom", Qn(lo2, _2 = true, _2), qo2 = Ye(N2);
  }, (e3) => {
    Qn(uo2, Q2 = false, Q2), oi2(e3);
  }, (e3) => {
    oi2(e3), ao2.write(), Qn(uo2, Q2 = false, Q2), Qn(lo2, _2 = false, _2), qo2 = void 0;
  }, () => {
    Kt2 = "zoom", qo2 || (ii2 = Ye(N2), Qn(lo2, _2 = true, _2));
  }, ({ detail: e3 }) => {
    ii2 && (Qn(uo2, Q2 = true, Q2), ni2(e3));
  }, ({ detail: e3 }) => {
    ii2 && (Qn(uo2, Q2 = false, Q2), Qn(lo2, _2 = false, _2), ni2(e3), Qn(Fo2, ye2 = void 0, ye2), ii2 = void 0, ao2.write());
  }, (e3) => {
    const t3 = Eh(e3, $e2, J2);
    if (Pt2 && !gt(K2, t3))
      return;
    Kt2 = "zoom", Qn(lo2, _2 = true, _2), Qn(uo2, Q2 = true, Q2), e3.preventDefault(), e3.stopPropagation();
    const o3 = id(e3), i3 = 1 + o3 / 100, n3 = Ye(N2), r3 = 1 === Math.min(N2.width / pe2.width, N2.height / pe2.height);
    if (pt2 && de2) {
      const e4 = io2(N2, se2, le2);
      if (Qt2() && e4 && o3 > 0 && d2) {
        Qn(lo2, _2 = false, _2), Qn(uo2, Q2 = false, Q2);
        const e5 = G(le2) ? Ke({ height: se2.width, width: se2.height }) : Ke(se2);
        if (ct(n3, e5))
          return;
        if (clearTimeout(ri2), ct(ao2.state.crop, e5))
          return;
        return Qn(Bo2, N2 = e5, N2), void ao2.write();
      }
    }
    let a3 = it(N2);
    if (Tt2 && "selection" !== Nt2 && o3 < 0 && !r3) {
      const e4 = xe(ue(t3), K2), o4 = Math.min(K2.width / N2.width, K2.height / N2.height), i4 = rt(Ye(K2), 1.1);
      a3 = gt(i4, t3) ? be(Ye(N2), we(e4, 1 / o4)) : a3;
    }
    let s3 = rt(Ye(N2), i3, a3);
    if (Ne(ae2[1], s3) || (s3 = tt(it(s3), ae2[1])), Ne(s3, ae2[0]) || (s3 = tt(it(s3), ae2[0])), ct(n3, s3, re))
      return Qn(lo2, _2 = false, _2), void Qn(uo2, Q2 = false, Q2);
    Qn(Bo2, N2 = xt(s3, (e4) => re(e4, 5)), N2), Qn(lo2, _2 = false, _2), Qn(uo2, Q2 = false, Q2), clearTimeout(ri2), ri2 = setTimeout(() => {
      ao2.write();
    }, 500);
  }, ai2, li2, ci2, di2, hi2, pi2, yi2, Ot2, "crop", at2, ut2, ht2, pt2, bt2, vt2, St2, kt2, Ct2, Mt2, Tt2, Pt2, Rt2, It2, At2, Et2, Lt2, Ft2, zt2, Bt2, Dt2, Wt2, _t2, Vt2, Nt2, jt2, si2, p2, k2, S2, x2, v2, i2, a2, s2, m2, d2, u2, c2, h2, l2, I2, L2, F2, z2, O2, W2, _2, V2, U2, Z2, Y2, q2, K2, J2, se2, de2, pe2, Ie2, Ae2, Le2, Be2, De2, function(t3) {
    _r.call(this, e2, t3);
  }, ({ detail: e3 }) => o2(5, $i2 = e3), function(e3) {
    Nr[e3 ? "unshift" : "push"](() => {
      mi2 = e3, o2(6, mi2);
    });
  }, (e3) => Ah(e3), function(e3) {
    fi2 = e3, o2(15, fi2);
  }, function(t3) {
    _r.call(this, e2, t3);
  }];
}
var X$ = { util: ["crop", class extends wa {
  constructor(e2) {
    super(), va(this, e2, Z$, N$, Nn, { name: 96, isActive: 0, stores: 97, cropImageSelectionCornerStyle: 1, cropWillRenderImageSelectionGuides: 98, cropAutoCenterImageSelectionTimeout: 99, cropEnableZoomMatchImageAspectRatio: 100, cropEnableRotateMatchImageAspectRatio: 101, cropEnableRotationInput: 102, cropEnableZoom: 2, cropEnableZoomInput: 103, cropEnableZoomAutoHide: 104, cropEnableImageSelection: 105, cropEnableInfoIndicator: 106, cropEnableZoomTowardsWheelPosition: 107, cropEnableLimitWheelInputToCropSelection: 108, cropEnableCenterImageSelection: 109, cropEnableButtonRotateLeft: 110, cropEnableButtonRotateRight: 111, cropEnableButtonFlipHorizontal: 112, cropEnableButtonFlipVertical: 113, cropSelectPresetOptions: 114, cropEnableSelectPreset: 115, cropEnableFilterMatchAspectRatio: 116, cropSelectPresetFilter: 95, cropEnableButtonToggleCropLimit: 117, cropWillRenderTools: 118, cropActiveTransformTool: 119, cropMinimizeToolbar: 120, cropInteractionFocus: 121, cropRotationRange: 3, cropMaskOpacity: 122, locale: 4 }, null, [-1, -1, -1, -1, -1, -1, -1, -1]);
  }
  get name() {
    return this.$$.ctx[96];
  }
  get isActive() {
    return this.$$.ctx[0];
  }
  set isActive(e2) {
    this.$$set({ isActive: e2 }), ea();
  }
  get stores() {
    return this.$$.ctx[97];
  }
  set stores(e2) {
    this.$$set({ stores: e2 }), ea();
  }
  get cropImageSelectionCornerStyle() {
    return this.$$.ctx[1];
  }
  set cropImageSelectionCornerStyle(e2) {
    this.$$set({ cropImageSelectionCornerStyle: e2 }), ea();
  }
  get cropWillRenderImageSelectionGuides() {
    return this.$$.ctx[98];
  }
  set cropWillRenderImageSelectionGuides(e2) {
    this.$$set({ cropWillRenderImageSelectionGuides: e2 }), ea();
  }
  get cropAutoCenterImageSelectionTimeout() {
    return this.$$.ctx[99];
  }
  set cropAutoCenterImageSelectionTimeout(e2) {
    this.$$set({ cropAutoCenterImageSelectionTimeout: e2 }), ea();
  }
  get cropEnableZoomMatchImageAspectRatio() {
    return this.$$.ctx[100];
  }
  set cropEnableZoomMatchImageAspectRatio(e2) {
    this.$$set({ cropEnableZoomMatchImageAspectRatio: e2 }), ea();
  }
  get cropEnableRotateMatchImageAspectRatio() {
    return this.$$.ctx[101];
  }
  set cropEnableRotateMatchImageAspectRatio(e2) {
    this.$$set({ cropEnableRotateMatchImageAspectRatio: e2 }), ea();
  }
  get cropEnableRotationInput() {
    return this.$$.ctx[102];
  }
  set cropEnableRotationInput(e2) {
    this.$$set({ cropEnableRotationInput: e2 }), ea();
  }
  get cropEnableZoom() {
    return this.$$.ctx[2];
  }
  set cropEnableZoom(e2) {
    this.$$set({ cropEnableZoom: e2 }), ea();
  }
  get cropEnableZoomInput() {
    return this.$$.ctx[103];
  }
  set cropEnableZoomInput(e2) {
    this.$$set({ cropEnableZoomInput: e2 }), ea();
  }
  get cropEnableZoomAutoHide() {
    return this.$$.ctx[104];
  }
  set cropEnableZoomAutoHide(e2) {
    this.$$set({ cropEnableZoomAutoHide: e2 }), ea();
  }
  get cropEnableImageSelection() {
    return this.$$.ctx[105];
  }
  set cropEnableImageSelection(e2) {
    this.$$set({ cropEnableImageSelection: e2 }), ea();
  }
  get cropEnableInfoIndicator() {
    return this.$$.ctx[106];
  }
  set cropEnableInfoIndicator(e2) {
    this.$$set({ cropEnableInfoIndicator: e2 }), ea();
  }
  get cropEnableZoomTowardsWheelPosition() {
    return this.$$.ctx[107];
  }
  set cropEnableZoomTowardsWheelPosition(e2) {
    this.$$set({ cropEnableZoomTowardsWheelPosition: e2 }), ea();
  }
  get cropEnableLimitWheelInputToCropSelection() {
    return this.$$.ctx[108];
  }
  set cropEnableLimitWheelInputToCropSelection(e2) {
    this.$$set({ cropEnableLimitWheelInputToCropSelection: e2 }), ea();
  }
  get cropEnableCenterImageSelection() {
    return this.$$.ctx[109];
  }
  set cropEnableCenterImageSelection(e2) {
    this.$$set({ cropEnableCenterImageSelection: e2 }), ea();
  }
  get cropEnableButtonRotateLeft() {
    return this.$$.ctx[110];
  }
  set cropEnableButtonRotateLeft(e2) {
    this.$$set({ cropEnableButtonRotateLeft: e2 }), ea();
  }
  get cropEnableButtonRotateRight() {
    return this.$$.ctx[111];
  }
  set cropEnableButtonRotateRight(e2) {
    this.$$set({ cropEnableButtonRotateRight: e2 }), ea();
  }
  get cropEnableButtonFlipHorizontal() {
    return this.$$.ctx[112];
  }
  set cropEnableButtonFlipHorizontal(e2) {
    this.$$set({ cropEnableButtonFlipHorizontal: e2 }), ea();
  }
  get cropEnableButtonFlipVertical() {
    return this.$$.ctx[113];
  }
  set cropEnableButtonFlipVertical(e2) {
    this.$$set({ cropEnableButtonFlipVertical: e2 }), ea();
  }
  get cropSelectPresetOptions() {
    return this.$$.ctx[114];
  }
  set cropSelectPresetOptions(e2) {
    this.$$set({ cropSelectPresetOptions: e2 }), ea();
  }
  get cropEnableSelectPreset() {
    return this.$$.ctx[115];
  }
  set cropEnableSelectPreset(e2) {
    this.$$set({ cropEnableSelectPreset: e2 }), ea();
  }
  get cropEnableFilterMatchAspectRatio() {
    return this.$$.ctx[116];
  }
  set cropEnableFilterMatchAspectRatio(e2) {
    this.$$set({ cropEnableFilterMatchAspectRatio: e2 }), ea();
  }
  get cropSelectPresetFilter() {
    return this.$$.ctx[95];
  }
  set cropSelectPresetFilter(e2) {
    this.$$set({ cropSelectPresetFilter: e2 }), ea();
  }
  get cropEnableButtonToggleCropLimit() {
    return this.$$.ctx[117];
  }
  set cropEnableButtonToggleCropLimit(e2) {
    this.$$set({ cropEnableButtonToggleCropLimit: e2 }), ea();
  }
  get cropWillRenderTools() {
    return this.$$.ctx[118];
  }
  set cropWillRenderTools(e2) {
    this.$$set({ cropWillRenderTools: e2 }), ea();
  }
  get cropActiveTransformTool() {
    return this.$$.ctx[119];
  }
  set cropActiveTransformTool(e2) {
    this.$$set({ cropActiveTransformTool: e2 }), ea();
  }
  get cropMinimizeToolbar() {
    return this.$$.ctx[120];
  }
  set cropMinimizeToolbar(e2) {
    this.$$set({ cropMinimizeToolbar: e2 }), ea();
  }
  get cropInteractionFocus() {
    return this.$$.ctx[121];
  }
  set cropInteractionFocus(e2) {
    this.$$set({ cropInteractionFocus: e2 }), ea();
  }
  get cropRotationRange() {
    return this.$$.ctx[3];
  }
  set cropRotationRange(e2) {
    this.$$set({ cropRotationRange: e2 }), ea();
  }
  get cropMaskOpacity() {
    return this.$$.ctx[122];
  }
  set cropMaskOpacity(e2) {
    this.$$set({ cropMaskOpacity: e2 }), ea();
  }
  get locale() {
    return this.$$.ctx[4];
  }
  set locale(e2) {
    this.$$set({ locale: e2 }), ea();
  }
}] };
function G$(e2) {
  let t2, o2, i2, n2, r2, a2, s2, l2 = e2[76], c2 = (T(e2[76].label) ? e2[76].label(e2[2]) : e2[76].label) + "";
  function d2(...t3) {
    return e2[51](e2[76], ...t3);
  }
  const u2 = () => e2[52](o2, l2), h2 = () => e2[52](null, l2);
  return { c() {
    t2 = hr("div"), o2 = hr("div"), i2 = gr(), n2 = hr("span"), r2 = mr(c2), xr(o2, "class", J$), xr(t2, "slot", "option"), xr(t2, "class", "PinturaFilterOption");
  }, m(e3, l3) {
    dr(e3, t2, l3), sr(t2, o2), u2(), sr(t2, i2), sr(t2, n2), sr(n2, r2), a2 || (s2 = [fr(o2, "measure", d2), er(oc.call(null, o2))], a2 = true);
  }, p(t3, o3) {
    l2 !== (e2 = t3)[76] && (h2(), l2 = e2[76], u2()), 4 & o3[0] | 16384 & o3[2] && c2 !== (c2 = (T(e2[76].label) ? e2[76].label(e2[2]) : e2[76].label) + "") && wr(r2, c2);
  }, d(e3) {
    e3 && ur(t2), h2(), a2 = false, _n(s2);
  } };
}
function Y$(e2) {
  let t2, o2;
  return t2 = new yu({ props: { locale: e2[2], layout: "row", options: e2[3], selectedIndex: e2[12], onchange: e2[32], $$slots: { option: [G$, ({ option: e3 }) => ({ 76: e3 }), ({ option: e3 }) => [0, 0, e3 ? 16384 : 0]] }, $$scope: { ctx: e2 } } }), { c() {
    ya(t2.$$.fragment);
  }, m(e3, i2) {
    ba(t2, e3, i2), o2 = true;
  }, p(e3, o3) {
    const i2 = {};
    4 & o3[0] && (i2.locale = e3[2]), 8 & o3[0] && (i2.options = e3[3]), 4096 & o3[0] && (i2.selectedIndex = e3[12]), 1028 & o3[0] | 49152 & o3[2] && (i2.$$scope = { dirty: o3, ctx: e3 }), t2.$set(i2);
  }, i(e3) {
    o2 || (sa(t2.$$.fragment, e3), o2 = true);
  }, o(e3) {
    la(t2.$$.fragment, e3), o2 = false;
  }, d(e3) {
    xa(t2, e3);
  } };
}
function q$(e2) {
  let t2, o2, i2, n2, r2, a2, s2, l2;
  function c2(t3) {
    e2[54](t3);
  }
  function d2(t3) {
    e2[55](t3);
  }
  function u2(t3) {
    e2[56](t3);
  }
  let h2 = { elasticity: e2[13] * e2[19], onscroll: e2[53], $$slots: { default: [Y$] }, $$scope: { ctx: e2 } };
  return void 0 !== e2[4] && (h2.maskFeatherStartOpacity = e2[4]), void 0 !== e2[5] && (h2.maskFeatherEndOpacity = e2[5]), void 0 !== e2[6] && (h2.maskFeatherSize = e2[6]), o2 = new ad({ props: h2 }), Nr.push(() => fa(o2, "maskFeatherStartOpacity", c2)), Nr.push(() => fa(o2, "maskFeatherEndOpacity", d2)), Nr.push(() => fa(o2, "maskFeatherSize", u2)), o2.$on("measure", e2[57]), { c() {
    t2 = hr("div"), ya(o2.$$.fragment), xr(t2, "slot", "footer"), xr(t2, "style", e2[11]);
  }, m(i3, n3) {
    dr(i3, t2, n3), ba(o2, t2, null), a2 = true, s2 || (l2 = [fr(t2, "transitionend", e2[30]), fr(t2, "measure", e2[58]), er(oc.call(null, t2, { observePosition: true }))], s2 = true);
  }, p(e3, s3) {
    const l3 = {};
    8192 & s3[0] && (l3.elasticity = e3[13] * e3[19]), 128 & s3[0] && (l3.onscroll = e3[53]), 5132 & s3[0] | 32768 & s3[2] && (l3.$$scope = { dirty: s3, ctx: e3 }), !i2 && 16 & s3[0] && (i2 = true, l3.maskFeatherStartOpacity = e3[4], qr(() => i2 = false)), !n2 && 32 & s3[0] && (n2 = true, l3.maskFeatherEndOpacity = e3[5], qr(() => n2 = false)), !r2 && 64 & s3[0] && (r2 = true, l3.maskFeatherSize = e3[6], qr(() => r2 = false)), o2.$set(l3), (!a2 || 2048 & s3[0]) && xr(t2, "style", e3[11]);
  }, i(e3) {
    a2 || (sa(o2.$$.fragment, e3), a2 = true);
  }, o(e3) {
    la(o2.$$.fragment, e3), a2 = false;
  }, d(e3) {
    e3 && ur(t2), xa(o2), s2 = false, _n(l2);
  } };
}
function K$(e2) {
  let t2, o2;
  return t2 = new Yg({ props: { $$slots: { footer: [q$] }, $$scope: { ctx: e2 } } }), t2.$on("measure", e2[59]), { c() {
    ya(t2.$$.fragment);
  }, m(e3, i2) {
    ba(t2, e3, i2), o2 = true;
  }, p(e3, o3) {
    const i2 = {};
    16380 & o3[0] | 32768 & o3[2] && (i2.$$scope = { dirty: o3, ctx: e3 }), t2.$set(i2);
  }, i(e3) {
    o2 || (sa(t2.$$.fragment, e3), o2 = true);
  }, o(e3) {
    la(t2.$$.fragment, e3), o2 = false;
  }, d(e3) {
    xa(t2, e3);
  } };
}
var J$ = "PinturaFilterPreview";
function Q$(e2, t2, o2) {
  let i2, n2, r2, a2, s2, l2, c2, d2, u2, h2, p2, m2, g2, $2, f2, y2, b2, x2, v2, w2, S2 = zn, k2 = () => (S2(), S2 = Hn(R2, (e3) => o2(43, d2 = e3)), R2), C2 = zn, M2 = () => (C2(), C2 = Hn(P2, (e3) => o2(49, b2 = e3)), P2);
  e2.$$.on_destroy.push(() => S2()), e2.$$.on_destroy.push(() => C2());
  let { isActive: P2 } = t2;
  M2();
  let { isActiveFraction: R2 } = t2;
  k2();
  let { stores: I2 } = t2, { locale: A2 } = t2, { filterFunctions: E2 } = t2, { filterOptions: L2 } = t2;
  const F2 = Wr("elasticityMultiplier");
  Un(e2, F2, (e3) => o2(13, w2 = e3));
  const { history: z2, interfaceImages: B2, stageRectBase: O2, utilRect: D2, animation: W2, scrollElasticity: _2, imageSize: V2, imagePreview: N2, imageCropRect: H2, imageRotation: j2, imageFlipX: U2, imageFlipY: Z2, imageBackgroundColor: X2, imageGamma: G2, imageColorMatrix: Y2, allowPan: q2, allowZoom: K2, allowZoomControls: J2 } = I2;
  Un(e2, B2, (e3) => o2(60, u2 = e3)), Un(e2, O2, (e3) => o2(48, y2 = e3)), Un(e2, D2, (e3) => o2(47, f2 = e3)), Un(e2, W2, (e3) => o2(50, x2 = e3)), Un(e2, V2, (e3) => o2(62, p2 = e3)), Un(e2, N2, (e3) => o2(42, c2 = e3)), Un(e2, X2, (e3) => o2(61, h2 = e3)), Un(e2, G2, (e3) => o2(44, m2 = e3)), Un(e2, Y2, (e3) => o2(40, s2 = e3));
  const Q2 = Ca({});
  Un(e2, Q2, (e3) => o2(46, $2 = e3));
  const ee2 = (e3, t3) => Qn(Q2, $2[e3.value] = t3, $2), te2 = Ma(Q2, (e3) => {
    if (!e3[void 0])
      return;
    const t3 = e3[void 0];
    return v2 && De(v2, t3) ? v2 : Ee(t3);
  });
  Un(e2, te2, (e3) => o2(63, v2 = e3));
  const oe2 = Ma([P2, te2, H2, V2, j2, U2, Z2], ([e3, t3, o3, i3, n3, r3, a3], s3) => {
    if (!e3 || !t3 || !i3)
      return g2;
    const l3 = Ke(i3), c3 = it(l3), d3 = ja(i3, o3, n3), u3 = it(d3), h3 = xe(ue(c3), u3), p3 = he(ue(h3)), m3 = Math.max(t3.width / o3.width, t3.height / o3.height);
    s3({ origin: p3, translation: h3, rotation: { x: a3 ? Math.PI : 0, y: r3 ? Math.PI : 0, z: n3 }, scale: m3 });
  });
  Un(e2, oe2, (e3) => o2(45, g2 = e3));
  const ie2 = _l(x2 ? 20 : 0);
  let ne2;
  Un(e2, ie2, (e3) => o2(39, a2 = e3));
  const re2 = {};
  let ae2, se2, le2, de2, pe2, me2, ge2 = { x: 0, y: 0 };
  const $e2 = Ca([]);
  Un(e2, $e2, (e3) => o2(41, l2 = e3));
  const fe2 = (e3) => {
    const t3 = { ...e3, data: c2, size: p2, offset: { ...e3.offset }, mask: { ...e3.mask }, backgroundColor: h2 };
    return t3.opacity = d2, t3.offset.y += a2, t3.mask.y += a2, t3.id = "filter", t3;
  }, ye2 = () => u2.filter((e3) => "filter" !== e3.id);
  Br(() => {
    B2.set([]);
  });
  return e2.$$set = (e3) => {
    "isActive" in e3 && M2(o2(0, P2 = e3.isActive)), "isActiveFraction" in e3 && k2(o2(1, R2 = e3.isActiveFraction)), "stores" in e3 && o2(34, I2 = e3.stores), "locale" in e3 && o2(2, A2 = e3.locale), "filterFunctions" in e3 && o2(35, E2 = e3.filterFunctions), "filterOptions" in e3 && o2(3, L2 = e3.filterOptions);
  }, e2.$$.update = () => {
    if (262144 & e2.$$.dirty[1] && q2.set(b2), 262144 & e2.$$.dirty[1] && K2.set(b2), 262144 & e2.$$.dirty[1] && J2.set(b2), 8 & e2.$$.dirty[0] && o2(38, i2 = Nd(L2)), 640 & e2.$$.dirty[1] && o2(12, n2 = ((e3, t3) => {
      if (!e3 || !e3.filter || !t3)
        return 0;
      const o3 = e3.filter;
      return t3.findIndex(([e4]) => {
        if (!E2[e4])
          return false;
        const t4 = E2[e4]();
        return qa(t4, o3);
      });
    })(s2, i2)), 786432 & e2.$$.dirty[1] && x2 && ie2.set(b2 ? 0 : 20), 512 & e2.$$.dirty[0] | 458752 & e2.$$.dirty[1] && b2 && f2 && y2 && me2 && o2(37, pe2 = { x: y2.x - f2.x, y: y2.y - f2.y + me2.y }), 496 & e2.$$.dirty[0] | 58096 & e2.$$.dirty[1] && g2 && pe2 && ge2 && de2 && ne2) {
      const e3 = pe2.x + de2.x + ge2.x, t3 = pe2.y, o3 = de2.x + pe2.x, n3 = o3 + de2.width;
      $e2.set(i2.map(([i3], r3) => {
        const a3 = $2[i3], l3 = ge2.x + a3.x, c3 = l3 + a3.width;
        if (c3 < 0 || l3 > de2.width)
          return false;
        const d3 = e3 + a3.x, u3 = t3 + a3.y, h3 = ((e4) => ({ origin: ue(e4.origin), translation: ue(e4.translation), rotation: { ...e4.rotation }, scale: e4.scale }))(g2);
        h3.offset = ce(0.5 * a3.width + d3, 0.5 * a3.height + u3);
        h3.maskOpacity = 1, h3.mask = ot(d3 + 0, u3, a3.width + 0, a3.height), h3.maskFeather = [1, 0, 1, 0, 1, n3, 1, n3], l3 < le2 && ae2 < 1 && (h3.maskFeather[0] = ae2, h3.maskFeather[1] = o3, h3.maskFeather[2] = 1, h3.maskFeather[3] = o3 + le2), c3 > de2.width - le2 && se2 < 1 && (h3.maskFeather[4] = se2, h3.maskFeather[5] = n3 - le2, h3.maskFeather[6] = 1, h3.maskFeather[7] = n3), h3.maskCornerRadius = ne2[i3];
        let p3 = s2 && Object.keys(s2).filter((e4) => "filter" != e4).map((e4) => s2[e4]) || [];
        return T(E2[i3]) && p3.push(E2[i3]()), h3.colorMatrix = p3.length ? Ln(p3) : void 0, h3.gamma = m2, h3;
      }).filter(Boolean));
    }
    if (7424 & e2.$$.dirty[1])
      if (d2 > 0 && l2) {
        const e3 = [...ye2(), ...l2.map(fe2)];
        B2.set(e3);
      } else
        B2.set(ye2());
    256 & e2.$$.dirty[1] && o2(11, r2 = a2 ? `transform: translateY(${a2}px)` : void 0);
  }, [P2, R2, A2, L2, ae2, se2, le2, ge2, de2, me2, re2, r2, n2, w2, F2, B2, O2, D2, W2, _2, V2, N2, X2, G2, Y2, Q2, ee2, te2, oe2, ie2, (e3) => {
    e3.target.className === J$ && o2(36, ne2 = Object.keys(re2).reduce((e4, t3) => {
      const o3 = re2[t3], i3 = getComputedStyle(o3), n3 = ["top-left", "top-right", "bottom-left", "bottom-right"].map((e5) => i3.getPropertyValue(`border-${e5}-radius`)).map(od).map((e5) => 1.25 * e5);
      return e4[t3] = n3, e4;
    }, {}));
  }, $e2, ({ value: e3 }) => {
    Qn(Y2, s2 = { ...s2, filter: T(E2[e3]) ? E2[e3]() : void 0 }, s2), z2.write();
  }, "filter", I2, E2, ne2, pe2, i2, a2, s2, l2, c2, d2, m2, g2, $2, f2, y2, b2, x2, (e3, t3) => ee2(e3, t3.detail), function(e3, t3) {
    Nr[e3 ? "unshift" : "push"](() => {
      re2[t3.value] = e3, o2(10, re2);
    });
  }, (e3) => o2(7, ge2 = e3), function(e3) {
    ae2 = e3, o2(4, ae2);
  }, function(e3) {
    se2 = e3, o2(5, se2);
  }, function(e3) {
    le2 = e3, o2(6, le2);
  }, (e3) => o2(8, de2 = e3.detail), (e3) => o2(9, me2 = e3.detail), function(t3) {
    _r.call(this, e2, t3);
  }];
}
var ef = { util: ["filter", class extends wa {
  constructor(e2) {
    super(), va(this, e2, Q$, K$, Nn, { name: 33, isActive: 0, isActiveFraction: 1, stores: 34, locale: 2, filterFunctions: 35, filterOptions: 3 }, null, [-1, -1, -1]);
  }
  get name() {
    return this.$$.ctx[33];
  }
  get isActive() {
    return this.$$.ctx[0];
  }
  set isActive(e2) {
    this.$$set({ isActive: e2 }), ea();
  }
  get isActiveFraction() {
    return this.$$.ctx[1];
  }
  set isActiveFraction(e2) {
    this.$$set({ isActiveFraction: e2 }), ea();
  }
  get stores() {
    return this.$$.ctx[34];
  }
  set stores(e2) {
    this.$$set({ stores: e2 }), ea();
  }
  get locale() {
    return this.$$.ctx[2];
  }
  set locale(e2) {
    this.$$set({ locale: e2 }), ea();
  }
  get filterFunctions() {
    return this.$$.ctx[35];
  }
  set filterFunctions(e2) {
    this.$$set({ filterFunctions: e2 }), ea();
  }
  get filterOptions() {
    return this.$$.ctx[3];
  }
  set filterOptions(e2) {
    this.$$set({ filterOptions: e2 }), ea();
  }
}] };
function tf(e2) {
  let t2, o2, i2 = e2[42].label + "";
  return { c() {
    t2 = hr("span"), o2 = mr(i2);
  }, m(e3, i3) {
    dr(e3, t2, i3), sr(t2, o2);
  }, p(e3, t3) {
    2048 & t3[1] && i2 !== (i2 = e3[42].label + "") && wr(o2, i2);
  }, d(e3) {
    e3 && ur(t2);
  } };
}
function of(e2) {
  let t2, o2;
  const i2 = [{ class: "PinturaControlList" }, { tabs: e2[1] }, e2[5]];
  let n2 = { $$slots: { default: [tf, ({ tab: e3 }) => ({ 42: e3 }), ({ tab: e3 }) => [0, e3 ? 2048 : 0]] }, $$scope: { ctx: e2 } };
  for (let e3 = 0; e3 < i2.length; e3 += 1)
    n2 = On(n2, i2[e3]);
  return t2 = new xc({ props: n2 }), t2.$on("select", e2[24]), { c() {
    ya(t2.$$.fragment);
  }, m(e3, i3) {
    ba(t2, e3, i3), o2 = true;
  }, p(e3, o3) {
    const n3 = 34 & o3[0] ? ga(i2, [i2[0], 2 & o3[0] && { tabs: e3[1] }, 32 & o3[0] && $a(e3[5])]) : {};
    6144 & o3[1] && (n3.$$scope = { dirty: o3, ctx: e3 }), t2.$set(n3);
  }, i(e3) {
    o2 || (sa(t2.$$.fragment, e3), o2 = true);
  }, o(e3) {
    la(t2.$$.fragment, e3), o2 = false;
  }, d(e3) {
    xa(t2, e3);
  } };
}
function nf(e2) {
  let t2, o2;
  const i2 = [e2[7][e2[41]]];
  let n2 = {};
  for (let e3 = 0; e3 < i2.length; e3 += 1)
    n2 = On(n2, i2[e3]);
  return t2 = new Qg({ props: n2 }), { c() {
    ya(t2.$$.fragment);
  }, m(e3, i3) {
    ba(t2, e3, i3), o2 = true;
  }, p(e3, o3) {
    const n3 = 128 & o3[0] | 1024 & o3[1] ? ga(i2, [$a(e3[7][e3[41]])]) : {};
    t2.$set(n3);
  }, i(e3) {
    o2 || (sa(t2.$$.fragment, e3), o2 = true);
  }, o(e3) {
    la(t2.$$.fragment, e3), o2 = false;
  }, d(e3) {
    xa(t2, e3);
  } };
}
function rf(e2) {
  let t2, o2, i2, n2, r2;
  o2 = new ad({ props: { elasticity: e2[6] * e2[9], class: "PinturaControlListScroller", $$slots: { default: [of] }, $$scope: { ctx: e2 } } });
  const a2 = [{ class: "PinturaControlPanels" }, { panelClass: "PinturaControlPanel" }, { panels: e2[4] }, e2[5]];
  let s2 = { $$slots: { default: [nf, ({ panel: e3 }) => ({ 41: e3 }), ({ panel: e3 }) => [0, e3 ? 1024 : 0]] }, $$scope: { ctx: e2 } };
  for (let e3 = 0; e3 < a2.length; e3 += 1)
    s2 = On(s2, a2[e3]);
  return n2 = new Ec({ props: s2 }), { c() {
    t2 = hr("div"), ya(o2.$$.fragment), i2 = gr(), ya(n2.$$.fragment), xr(t2, "slot", "footer"), xr(t2, "style", e2[3]);
  }, m(e3, a3) {
    dr(e3, t2, a3), ba(o2, t2, null), sr(t2, i2), ba(n2, t2, null), r2 = true;
  }, p(e3, i3) {
    const s3 = {};
    64 & i3[0] && (s3.elasticity = e3[6] * e3[9]), 38 & i3[0] | 4096 & i3[1] && (s3.$$scope = { dirty: i3, ctx: e3 }), o2.$set(s3);
    const l2 = 48 & i3[0] ? ga(a2, [a2[0], a2[1], 16 & i3[0] && { panels: e3[4] }, 32 & i3[0] && $a(e3[5])]) : {};
    128 & i3[0] | 5120 & i3[1] && (l2.$$scope = { dirty: i3, ctx: e3 }), n2.$set(l2), (!r2 || 8 & i3[0]) && xr(t2, "style", e3[3]);
  }, i(e3) {
    r2 || (sa(o2.$$.fragment, e3), sa(n2.$$.fragment, e3), r2 = true);
  }, o(e3) {
    la(o2.$$.fragment, e3), la(n2.$$.fragment, e3), r2 = false;
  }, d(e3) {
    e3 && ur(t2), xa(o2), xa(n2);
  } };
}
function af(e2) {
  let t2, o2;
  return t2 = new Yg({ props: { $$slots: { footer: [rf] }, $$scope: { ctx: e2 } } }), t2.$on("measure", e2[25]), { c() {
    ya(t2.$$.fragment);
  }, m(e3, i2) {
    ba(t2, e3, i2), o2 = true;
  }, p(e3, o3) {
    const i2 = {};
    254 & o3[0] | 4096 & o3[1] && (i2.$$scope = { dirty: o3, ctx: e3 }), t2.$set(i2);
  }, i(e3) {
    o2 || (sa(t2.$$.fragment, e3), o2 = true);
  }, o(e3) {
    la(t2.$$.fragment, e3), o2 = false;
  }, d(e3) {
    xa(t2, e3);
  } };
}
function sf(e2, t2, o2) {
  let i2, n2, r2, a2, s2, l2, c2, d2, u2, h2, p2, m2 = zn, g2 = () => (m2(), m2 = Hn(f2, (e3) => o2(21, c2 = e3)), f2);
  e2.$$.on_destroy.push(() => m2());
  let { stores: $2 } = t2, { isActive: f2 } = t2;
  g2();
  let { locale: y2 = {} } = t2, { finetuneControlConfiguration: b2 } = t2, { finetuneOptions: x2 } = t2, { finetuneNudgePrecision: v2 } = t2;
  const { history: w2, animation: S2, scrollElasticity: k2, rangeInputElasticity: C2, imageColorMatrix: M2, imageConvolutionMatrix: P2, imageGamma: R2, imageVignette: I2, imageNoise: E2, allowPan: L2, allowZoom: F2, allowZoomControls: z2 } = $2;
  Un(e2, S2, (e3) => o2(22, d2 = e3));
  const B2 = { imageColorMatrix: M2, imageConvolutionMatrix: P2, imageGamma: R2, imageVignette: I2, imageNoise: E2 }, O2 = Wr("elasticityMultiplier");
  Un(e2, O2, (e3) => o2(6, h2 = e3));
  const D2 = "finetune-" + A(), W2 = Ca({});
  Un(e2, W2, (e3) => o2(23, u2 = e3));
  const _2 = Ca({});
  Un(e2, _2, (e3) => o2(7, p2 = e3));
  let V2 = [];
  const N2 = _l(d2 ? 20 : 0);
  Un(e2, N2, (e3) => o2(20, l2 = e3));
  return e2.$$set = (e3) => {
    "stores" in e3 && o2(15, $2 = e3.stores), "isActive" in e3 && g2(o2(0, f2 = e3.isActive)), "locale" in e3 && o2(16, y2 = e3.locale), "finetuneControlConfiguration" in e3 && o2(17, b2 = e3.finetuneControlConfiguration), "finetuneOptions" in e3 && o2(18, x2 = e3.finetuneOptions), "finetuneNudgePrecision" in e3 && o2(19, v2 = e3.finetuneNudgePrecision);
  }, e2.$$.update = () => {
    var t3;
    2097152 & e2.$$.dirty[0] && L2.set(c2), 2097152 & e2.$$.dirty[0] && F2.set(c2), 2097152 & e2.$$.dirty[0] && z2.set(c2), 327680 & e2.$$.dirty[0] && o2(1, i2 = x2 ? x2.map(([e3, t4]) => ({ id: e3, label: T(t4) ? t4(y2) : t4 })) : []), 2 & e2.$$.dirty[0] && o2(2, n2 = i2.length && i2[0].id), 4 & e2.$$.dirty[0] && o2(5, r2 = { name: D2, selected: n2 }), 2 & e2.$$.dirty[0] && o2(4, a2 = i2.map((e3) => e3.id)), 131072 & e2.$$.dirty[0] && b2 && (t3 = b2, V2 && V2.forEach((e3) => e3()), V2 = a2.map((e3) => {
      const { getStore: o3, getValue: i3 = j } = t3[e3];
      return o3(B2).subscribe((t4) => {
        const o4 = null != t4 ? i3(t4) : t4;
        Qn(W2, u2 = { ...u2, [e3]: o4 }, u2);
      });
    })), 8519680 & e2.$$.dirty[0] && b2 && u2 && Qn(_2, p2 = Object.keys(u2).reduce((e3, t4) => {
      const { base: o3, min: i3, max: n3, getLabel: r3, getStore: a3, setValue: s3 = (e4, t5) => e4.set(t5) } = b2[t4], l3 = a3(B2), c3 = null != u2[t4] ? u2[t4] : o3;
      return e3[t4] = { base: o3, min: i3, max: n3, value: c3, valueLabel: r3 ? r3(c3, i3, n3, n3 - i3) : Math.round(100 * c3), oninputmove: (e4) => {
        s3(l3, e4);
      }, oninputend: (e4) => {
        s3(l3, e4), w2.write();
      }, elasticity: h2 * C2, labelReset: y2.labelReset, nudgeMultiplier: v2 }, e3;
    }, {}), p2), 6291456 & e2.$$.dirty[0] && d2 && N2.set(c2 ? 0 : 20), 1048576 & e2.$$.dirty[0] && o2(3, s2 = l2 ? `transform: translateY(${l2}px)` : void 0);
  }, [f2, i2, n2, s2, a2, r2, h2, p2, S2, k2, O2, W2, _2, N2, "finetune", $2, y2, b2, x2, v2, l2, c2, d2, u2, ({ detail: e3 }) => o2(2, n2 = e3), function(t3) {
    _r.call(this, e2, t3);
  }];
}
var lf = { util: ["finetune", class extends wa {
  constructor(e2) {
    super(), va(this, e2, sf, af, Nn, { name: 14, stores: 15, isActive: 0, locale: 16, finetuneControlConfiguration: 17, finetuneOptions: 18, finetuneNudgePrecision: 19 }, null, [-1, -1]);
  }
  get name() {
    return this.$$.ctx[14];
  }
  get stores() {
    return this.$$.ctx[15];
  }
  set stores(e2) {
    this.$$set({ stores: e2 }), ea();
  }
  get isActive() {
    return this.$$.ctx[0];
  }
  set isActive(e2) {
    this.$$set({ isActive: e2 }), ea();
  }
  get locale() {
    return this.$$.ctx[16];
  }
  set locale(e2) {
    this.$$set({ locale: e2 }), ea();
  }
  get finetuneControlConfiguration() {
    return this.$$.ctx[17];
  }
  set finetuneControlConfiguration(e2) {
    this.$$set({ finetuneControlConfiguration: e2 }), ea();
  }
  get finetuneOptions() {
    return this.$$.ctx[18];
  }
  set finetuneOptions(e2) {
    this.$$set({ finetuneOptions: e2 }), ea();
  }
  get finetuneNudgePrecision() {
    return this.$$.ctx[19];
  }
  set finetuneNudgePrecision(e2) {
    this.$$set({ finetuneNudgePrecision: e2 }), ea();
  }
}] };
var cf = (e2, t2) => {
  const o2 = t2.length;
  return e2 < 0 ? e2 % o2 + o2 : e2 >= o2 ? e2 % o2 : e2;
};
function df(e2, t2, o2) {
  const i2 = e2.slice();
  return i2[48] = t2[o2].key, i2[49] = t2[o2].index, i2[50] = t2[o2].translate, i2[51] = t2[o2].scale, i2[14] = t2[o2].rotate, i2[52] = t2[o2].dir, i2[53] = t2[o2].center, i2[54] = t2[o2].type, i2[2] = t2[o2].visible, i2;
}
function uf(e2) {
  let t2, o2;
  return { c() {
    t2 = hr("div"), xr(t2, "class", "PinturaShapeManipulator"), xr(t2, "data-control", "point"), xr(t2, "style", o2 = `pointer-events:none;transform: translate3d(${e2[53].x}px, ${e2[53].y}px, 0) scale(${e2[5]}, ${e2[5]}); opacity: ${e2[4]}`);
  }, m(e3, o3) {
    dr(e3, t2, o3);
  }, p(e3, i2) {
    56 & i2[0] && o2 !== (o2 = `pointer-events:none;transform: translate3d(${e3[53].x}px, ${e3[53].y}px, 0) scale(${e3[5]}, ${e3[5]}); opacity: ${e3[4]}`) && xr(t2, "style", o2);
  }, d(e3) {
    e3 && ur(t2);
  } };
}
function hf(e2, t2) {
  let o2, i2, n2, r2, a2, s2, l2, c2, d2;
  function u2(...e3) {
    return t2[19](t2[49], ...e3);
  }
  let h2 = "edge" === t2[54] && t2[2] && uf(t2);
  return { key: e2, first: null, c() {
    o2 = hr("div"), s2 = gr(), h2 && h2.c(), l2 = $r(), xr(o2, "role", "button"), xr(o2, "aria-label", i2 = `Drag ${t2[54]} ${t2[48]}`), xr(o2, "tabindex", n2 = "edge" === t2[54] ? -1 : 0), xr(o2, "class", "PinturaShapeManipulator"), xr(o2, "data-control", r2 = t2[54]), xr(o2, "style", a2 = `cursor:${t2[52] ? t2[52] + "-resize" : "move"};opacity:${t2[4]};--tx:${t2[50].x};--ty:${t2[50].y};--r:${"edge" === t2[54] ? t2[14] : 0}rad;--sx:${"point" === t2[54] ? t2[5] : t2[51].x};--sy:${"point" === t2[54] ? t2[5] : t2[51].y};`), this.first = o2;
  }, m(e3, i3) {
    dr(e3, o2, i3), dr(e3, s2, i3), h2 && h2.m(e3, i3), dr(e3, l2, i3), c2 || (d2 = [fr(o2, "keydown", t2[7]), fr(o2, "keyup", t2[8]), fr(o2, "nudge", u2), er(Jc.call(null, o2, { preventDefault: true })), fr(o2, "interactionstart", function() {
      Vn(t2[11]("start", t2[49])) && t2[11]("start", t2[49]).apply(this, arguments);
    }), fr(o2, "interactionupdate", function() {
      Vn(t2[11]("move", t2[49])) && t2[11]("move", t2[49]).apply(this, arguments);
    }), fr(o2, "interactionend", function() {
      Vn(t2[11]("end", t2[49])) && t2[11]("end", t2[49]).apply(this, arguments);
    }), er(Kc.call(null, o2))], c2 = true);
  }, p(e3, s3) {
    t2 = e3, 8 & s3[0] && i2 !== (i2 = `Drag ${t2[54]} ${t2[48]}`) && xr(o2, "aria-label", i2), 8 & s3[0] && n2 !== (n2 = "edge" === t2[54] ? -1 : 0) && xr(o2, "tabindex", n2), 8 & s3[0] && r2 !== (r2 = t2[54]) && xr(o2, "data-control", r2), 56 & s3[0] && a2 !== (a2 = `cursor:${t2[52] ? t2[52] + "-resize" : "move"};opacity:${t2[4]};--tx:${t2[50].x};--ty:${t2[50].y};--r:${"edge" === t2[54] ? t2[14] : 0}rad;--sx:${"point" === t2[54] ? t2[5] : t2[51].x};--sy:${"point" === t2[54] ? t2[5] : t2[51].y};`) && xr(o2, "style", a2), "edge" === t2[54] && t2[2] ? h2 ? h2.p(t2, s3) : (h2 = uf(t2), h2.c(), h2.m(l2.parentNode, l2)) : h2 && (h2.d(1), h2 = null);
  }, d(e3) {
    e3 && ur(o2), e3 && ur(s2), h2 && h2.d(e3), e3 && ur(l2), c2 = false, _n(d2);
  } };
}
function pf(e2) {
  let t2, o2, i2, n2;
  return { c() {
    t2 = hr("div"), xr(t2, "role", "button"), xr(t2, "aria-label", "Drag rotator"), xr(t2, "tabindex", "0"), xr(t2, "class", "PinturaShapeManipulator"), xr(t2, "data-control", "rotate"), xr(t2, "style", o2 = `transform: translate3d(${e2[0].x}px, ${e2[0].y}px, 0) scale(${e2[5]}, ${e2[5]}); opacity: ${e2[4]}`);
  }, m(o3, r2) {
    dr(o3, t2, r2), i2 || (n2 = [fr(t2, "keydown", e2[7]), fr(t2, "keyup", e2[8]), fr(t2, "nudge", e2[13]), er(Jc.call(null, t2, { preventDefault: true })), fr(t2, "interactionstart", e2[14]("start")), fr(t2, "interactionupdate", e2[14]("move")), fr(t2, "interactionend", e2[14]("end")), er(Kc.call(null, t2))], i2 = true);
  }, p(e3, i3) {
    49 & i3[0] && o2 !== (o2 = `transform: translate3d(${e3[0].x}px, ${e3[0].y}px, 0) scale(${e3[5]}, ${e3[5]}); opacity: ${e3[4]}`) && xr(t2, "style", o2);
  }, d(e3) {
    e3 && ur(t2), i2 = false, _n(n2);
  } };
}
function mf(e2) {
  let t2, o2, i2 = [], n2 = /* @__PURE__ */ new Map(), r2 = e2[3];
  const a2 = (e3) => e3[48];
  for (let t3 = 0; t3 < r2.length; t3 += 1) {
    let o3 = df(e2, r2, t3), s3 = a2(o3);
    n2.set(s3, i2[t3] = hf(s3, o3));
  }
  let s2 = e2[1] && pf(e2);
  return { c() {
    for (let e3 = 0; e3 < i2.length; e3 += 1)
      i2[e3].c();
    t2 = gr(), s2 && s2.c(), o2 = $r();
  }, m(e3, n3) {
    for (let t3 = 0; t3 < i2.length; t3 += 1)
      i2[t3].m(e3, n3);
    dr(e3, t2, n3), s2 && s2.m(e3, n3), dr(e3, o2, n3);
  }, p(e3, l2) {
    6584 & l2[0] && (r2 = e3[3], i2 = ma(i2, l2, a2, 1, e3, r2, n2, t2.parentNode, ha, hf, t2, df)), e3[1] ? s2 ? s2.p(e3, l2) : (s2 = pf(e3), s2.c(), s2.m(o2.parentNode, o2)) : s2 && (s2.d(1), s2 = null);
  }, i: zn, o: zn, d(e3) {
    for (let t3 = 0; t3 < i2.length; t3 += 1)
      i2[t3].d(e3);
    e3 && ur(t2), s2 && s2.d(e3), e3 && ur(o2);
  } };
}
function gf(e2, t2, o2) {
  let i2, n2, r2, a2;
  const s2 = Or(), l2 = 0.5 * X, c2 = Z - l2, d2 = Z + l2, u2 = -Z, h2 = u2 - l2, p2 = u2 + l2, m2 = U - l2, g2 = -U + l2, $2 = l2, f2 = -l2, y2 = Z - X, b2 = y2 - l2, x2 = y2 + l2, v2 = U - X, w2 = v2 - l2, S2 = v2 + l2, k2 = u2 - X, C2 = k2 + l2, M2 = k2 - l2, T2 = u2 + X, P2 = T2 + l2, R2 = T2 - l2;
  let { visible: I2 = false } = t2, { points: A2 = [] } = t2, { rotatorPoint: E2 } = t2, { enableDragEdges: L2 = true } = t2, { enableDragPoints: F2 = true } = t2, { enableRotatePoints: z2 = true } = t2;
  const B2 = Wr("isAnimated");
  Un(e2, B2, (e3) => o2(18, n2 = e3));
  let O2 = false;
  const D2 = _l(0.5, { precision: 1e-4, stiffness: 0.3, damping: 0.7 });
  Un(e2, D2, (e3) => o2(5, a2 = e3));
  const W2 = _l(0, { precision: 1e-3, stiffness: 0.3, damping: 0.7 });
  Un(e2, W2, (e3) => o2(4, r2 = e3));
  const _2 = (e3) => {
    let t3 = "";
    return (e3 <= d2 && e3 >= c2 || e3 >= h2 && e3 <= p2) && (t3 = "ns"), (e3 <= g2 || e3 >= m2 || e3 >= f2 && e3 <= $2) && (t3 = "ew"), (e3 >= w2 && e3 <= S2 || e3 <= P2 && e3 >= R2) && (t3 = "nesw"), (e3 >= b2 && e3 <= x2 || e3 <= C2 && e3 >= M2) && (t3 = "nwse"), t3;
  }, V2 = (e3, t3) => {
    s2("resizestart", { indexes: e3, translation: le() }), s2("resizemove", { indexes: e3, translation: t3 }), s2("resizeend", { indexes: e3, translation: le() });
  };
  return e2.$$set = (e3) => {
    "visible" in e3 && o2(2, I2 = e3.visible), "points" in e3 && o2(15, A2 = e3.points), "rotatorPoint" in e3 && o2(0, E2 = e3.rotatorPoint), "enableDragEdges" in e3 && o2(16, L2 = e3.enableDragEdges), "enableDragPoints" in e3 && o2(17, F2 = e3.enableDragPoints), "enableRotatePoints" in e3 && o2(1, z2 = e3.enableRotatePoints);
  }, e2.$$.update = () => {
    262148 & e2.$$.dirty[0] && D2.set(I2 ? 1 : 0.5, { hard: false === n2 }), 262148 & e2.$$.dirty[0] && W2.set(I2 ? 1 : 0, { hard: false === n2 }), 32768 & e2.$$.dirty[0] && o2(3, i2 = ((e3, t3) => {
      let o3 = 0;
      const i3 = Pe(e3), n3 = [], r3 = e3.length;
      for (; o3 < r3; o3++) {
        const t4 = cf(o3 - 1, e3), r4 = cf(o3 + 1, e3), a3 = e3[t4], s3 = e3[o3], l3 = e3[r4], c3 = Math.atan2(l3.y - s3.y, l3.x - s3.x);
        if (F2) {
          const e4 = ge(ce(a3.x - s3.x, a3.y - s3.y)), t5 = ge(ce(l3.x - s3.x, l3.y - s3.y)), i4 = ce(e4.x + t5.x, e4.y + t5.y), r5 = L2 ? F2 && _2(Math.atan2(i4.y, i4.x)) : void 0;
          n3.push({ index: [o3], key: "point-" + o3, type: "point", scale: { x: 1, y: 1 }, translate: { x: s3.x, y: s3.y }, angle: void 0, rotate: z2, center: s3, dir: r5 });
        }
        if (!L2)
          continue;
        if (Array.isArray(L2) && !L2.some(([e4, t5]) => o3 === e4 && r4 === t5))
          continue;
        const d3 = ce(s3.x + 0.5 * (l3.x - s3.x), s3.y + 0.5 * (l3.y - s3.y));
        n3.push({ index: [o3, r4], key: "edge-" + o3, type: "edge", scale: { x: Me(s3, l3), y: 1 }, translate: { x: s3.x, y: s3.y }, angle: c3, rotate: c3, center: d3, visible: Array.isArray(L2), dir: _2(Math.atan2(i3.y - d3.y, i3.x - d3.x)) });
      }
      return n3;
    })(A2));
  }, [E2, z2, I2, i2, r2, a2, B2, (e3) => O2 = e3.shiftKey, (e3) => O2 = false, D2, W2, (e3, t3) => ({ detail: o3 }) => {
    const i3 = o3 && o3.translation ? o3.translation : ce(0, 0);
    s2("resize" + e3, { ...o3, indexes: t3, translation: i3, shiftKey: O2 });
  }, V2, ({ detail: e3 }) => {
    s2("rotatestart", { translation: le() }), s2("rotatemove", { translation: e3 }), s2("rotateend", { translation: le() });
  }, (e3) => ({ detail: t3 }) => {
    const o3 = t3 && t3.translation ? t3.translation : ce(0, 0);
    s2("rotate" + e3, { translation: o3, shiftKey: O2 });
  }, A2, L2, F2, n2, (e3, { detail: t3 }) => V2(e3, t3)];
}
var $f = class extends wa {
  constructor(e2) {
    super(), va(this, e2, gf, mf, Nn, { visible: 2, points: 15, rotatorPoint: 0, enableDragEdges: 16, enableDragPoints: 17, enableRotatePoints: 1 }, null, [-1, -1]);
  }
};
var ff = (e2, t2) => {
  const o2 = Ah(e2);
  return xe(o2, t2);
};
var yf = null;
var bf = (e2) => {
  if (null === yf && (yf = c() && "visualViewport" in window), !yf)
    return false;
  const t2 = visualViewport.height, o2 = () => {
    e2(visualViewport.height < t2 ? "visible" : "hidden");
  };
  return visualViewport.addEventListener("resize", o2), () => visualViewport.removeEventListener("resize", o2);
};
function xf(e2) {
  let t2, o2, i2, n2, r2, a2, s2, l2, c2, d2;
  i2 = new Gc({ props: { onclick: e2[1], label: e2[5], icon: e2[7], hideLabel: !e2[6] } });
  const u2 = e2[20].default, h2 = Zn(u2, e2, e2[19], null);
  return s2 = new Gc({ props: { onclick: e2[0], label: e2[2], icon: e2[4], hideLabel: !e2[3], class: "PinturaInputFormButtonConfirm" } }), { c() {
    t2 = hr("div"), o2 = hr("div"), ya(i2.$$.fragment), n2 = gr(), r2 = hr("div"), h2 && h2.c(), a2 = gr(), ya(s2.$$.fragment), xr(r2, "class", "PinturaInputFormFields"), xr(o2, "class", "PinturaInputFormInner"), xr(t2, "class", "PinturaInputForm"), xr(t2, "style", e2[9]);
  }, m(u3, p2) {
    dr(u3, t2, p2), sr(t2, o2), ba(i2, o2, null), sr(o2, n2), sr(o2, r2), h2 && h2.m(r2, null), sr(o2, a2), ba(s2, o2, null), e2[21](t2), l2 = true, c2 || (d2 = [fr(t2, "focusin", e2[10]), fr(t2, "focusout", e2[11]), fr(t2, "measure", e2[12]), er(oc.call(null, t2))], c2 = true);
  }, p(e3, o3) {
    const n3 = {};
    2 & o3[0] && (n3.onclick = e3[1]), 32 & o3[0] && (n3.label = e3[5]), 128 & o3[0] && (n3.icon = e3[7]), 64 & o3[0] && (n3.hideLabel = !e3[6]), i2.$set(n3), h2 && h2.p && (!l2 || 524288 & o3[0]) && Yn(h2, u2, e3, e3[19], l2 ? Gn(u2, e3[19], o3, null) : qn(e3[19]), null);
    const r3 = {};
    1 & o3[0] && (r3.onclick = e3[0]), 4 & o3[0] && (r3.label = e3[2]), 16 & o3[0] && (r3.icon = e3[4]), 8 & o3[0] && (r3.hideLabel = !e3[3]), s2.$set(r3), (!l2 || 512 & o3[0]) && xr(t2, "style", e3[9]);
  }, i(e3) {
    l2 || (sa(i2.$$.fragment, e3), sa(h2, e3), sa(s2.$$.fragment, e3), l2 = true);
  }, o(e3) {
    la(i2.$$.fragment, e3), la(h2, e3), la(s2.$$.fragment, e3), l2 = false;
  }, d(o3) {
    o3 && ur(t2), xa(i2), h2 && h2.d(o3), xa(s2), e2[21](null), c2 = false, _n(d2);
  } };
}
function vf(e2, t2, o2) {
  let i2, n2, r2, a2, { $$slots: s2 = {}, $$scope: l2 } = t2, { onconfirm: c2 } = t2, { oncancel: d2 } = t2, { autoFocus: u2 = true } = t2, { autoPositionCursor: h2 = true } = t2, { labelConfirm: p2 } = t2, { labelConfirmShow: m2 = true } = t2, { iconConfirm: g2 } = t2, { labelCancel: $2 } = t2, { labelCancelShow: f2 = false } = t2, { iconCancel: y2 } = t2, { panelOffset: x2 = le() } = t2, v2 = false, w2 = void 0, S2 = void 0, k2 = "", C2 = 0;
  const M2 = () => {
    const e3 = a2.querySelector("input, textarea");
    e3.focus(), C2 >= 1 || e3.select();
  }, T2 = () => {
    v2 = true, R2 || !lo() && !b() || o2(16, k2 = "top:1em;bottom:auto;"), lo() && ((e3) => {
      let t3;
      const o3 = (e4) => t3 = e4.touches[0].screenY, i3 = (e4) => {
        const o4 = e4.touches[0].screenY, i4 = e4.target;
        /textarea/i.test(i4.nodeName) ? (o4 > t3 ? 0 == i4.scrollTop && e4.preventDefault() : o4 < t3 ? i4.scrollTop + i4.offsetHeight == i4.scrollHeight && e4.preventDefault() : e4.preventDefault(), t3 = o4) : e4.preventDefault();
      };
      e3.addEventListener("touchstart", o3), e3.addEventListener("touchmove", i3);
    })(a2), o2(17, C2 = 1);
  };
  let P2;
  const R2 = bf((e3) => {
    n2 ? "hidden" !== e3 || v2 ? (clearTimeout(S2), S2 = void 0, o2(16, k2 = `top:${visualViewport.height - w2 - x2.y}px`), "visible" === e3 ? (o2(8, a2.dataset.layout = "stick", a2), M2(), T2()) : (v2 = false, o2(17, C2 = 0))) : M2() : o2(16, k2 = "top: 4.5em; bottom: auto");
  });
  return Fr(() => {
    u2 && M2();
  }), Br(() => {
    R2 && R2();
  }), e2.$$set = (e3) => {
    "onconfirm" in e3 && o2(0, c2 = e3.onconfirm), "oncancel" in e3 && o2(1, d2 = e3.oncancel), "autoFocus" in e3 && o2(13, u2 = e3.autoFocus), "autoPositionCursor" in e3 && o2(14, h2 = e3.autoPositionCursor), "labelConfirm" in e3 && o2(2, p2 = e3.labelConfirm), "labelConfirmShow" in e3 && o2(3, m2 = e3.labelConfirmShow), "iconConfirm" in e3 && o2(4, g2 = e3.iconConfirm), "labelCancel" in e3 && o2(5, $2 = e3.labelCancel), "labelCancelShow" in e3 && o2(6, f2 = e3.labelCancelShow), "iconCancel" in e3 && o2(7, y2 = e3.iconCancel), "panelOffset" in e3 && o2(15, x2 = e3.panelOffset), "$$scope" in e3 && o2(19, l2 = e3.$$scope);
  }, e2.$$.update = () => {
    256 & e2.$$.dirty[0] && o2(18, i2 = a2 && getComputedStyle(a2)), 262144 & e2.$$.dirty[0] && (n2 = i2 && "1" === i2.getPropertyValue("--editor-modal")), 196608 & e2.$$.dirty[0] && o2(9, r2 = `opacity:${C2};${k2}`);
  }, [c2, d2, p2, m2, g2, $2, f2, y2, a2, r2, (e3) => {
    var t3;
    ((e4) => /textarea/i.test(e4))(e3.target) && (P2 = Date.now(), h2 && ((t3 = e3.target).selectionStart = t3.selectionEnd = t3.value.length), clearTimeout(S2), S2 = setTimeout(T2, 200));
  }, (e3) => {
    Date.now() - P2 > 50 || (e3.stopPropagation(), M2());
  }, ({ detail: e3 }) => {
    w2 = e3.height;
  }, u2, h2, x2, k2, C2, i2, l2, s2, function(e3) {
    Nr[e3 ? "unshift" : "push"](() => {
      a2 = e3, o2(8, a2);
    });
  }];
}
var wf = class extends wa {
  constructor(e2) {
    super(), va(this, e2, vf, xf, Nn, { onconfirm: 0, oncancel: 1, autoFocus: 13, autoPositionCursor: 14, labelConfirm: 2, labelConfirmShow: 3, iconConfirm: 4, labelCancel: 5, labelCancelShow: 6, iconCancel: 7, panelOffset: 15 }, null, [-1, -1]);
  }
};
var Sf = (e2) => document.createTextNode(e2);
var kf = (e2) => (Vt() && e2.endsWith("<div><br></div>") ? e2.replace(/<div><br><\/div>$/, "<br><br>") : e2).replace(/<div><br><\/div>/g, "<br>").replace(/<\/div>/g, "").replace(/<div>/g, "<br>");
function Cf(e2) {
  let t2, o2, i2, n2;
  return { c() {
    t2 = hr("pre"), xr(t2, "class", "PinturaContentEditable"), xr(t2, "data-wrap-content", o2 = e2[3] || e2[4] ? "wrap" : "nowrap"), xr(t2, "contenteditable", ""), xr(t2, "spellcheck", e2[0]), xr(t2, "autocorrect", e2[1]), xr(t2, "autocapitalize", e2[2]), xr(t2, "style", e2[6]);
  }, m(o3, r2) {
    dr(o3, t2, r2), e2[24](t2), i2 || (n2 = [fr(t2, "input", e2[11]), fr(t2, "compositionend", e2[10]), fr(t2, "paste", e2[12]), fr(t2, "keydown", e2[8]), fr(t2, "keyup", e2[9]), fr(t2, "blur", e2[7])], i2 = true);
  }, p(e3, i3) {
    24 & i3[0] && o2 !== (o2 = e3[3] || e3[4] ? "wrap" : "nowrap") && xr(t2, "data-wrap-content", o2), 1 & i3[0] && xr(t2, "spellcheck", e3[0]), 2 & i3[0] && xr(t2, "autocorrect", e3[1]), 4 & i3[0] && xr(t2, "autocapitalize", e3[2]), 64 & i3[0] && xr(t2, "style", e3[6]);
  }, i: zn, o: zn, d(o3) {
    o3 && ur(t2), e2[24](null), i2 = false, _n(n2);
  } };
}
function Mf(e2, t2, o2) {
  let i2, { spellcheck: r2 = "false" } = t2, { autocorrect: a2 = "off" } = t2, { autocapitalize: s2 = "off" } = t2, { wrapLines: l2 = true } = t2, { allowNewline: c2 = true } = t2, { textFormat: d2 = "text" } = t2, { formatInput: u2 = j } = t2, { formatPaste: h2 = j } = t2, { style: m2 } = t2, { innerHTML: g2 } = t2, { oninput: $2 = n } = t2, { enableTextStyleShortcuts: f2 = false } = t2;
  const y2 = () => {
    if (!x2)
      return;
    const e3 = document.createRange();
    e3.selectNodeContents(x2);
    const t3 = T2();
    t3.removeAllRanges(), t3.addRange(e3);
  }, b2 = Or();
  let x2;
  document.execCommand("defaultParagraphSeparator", false, "br");
  const v2 = (e3) => e3.replace(/<\/?(?:i|b|em|u|s|strike|strong|font)>/, "").replace(/style=".*?"/g, "").replace(/\n/gim, "<br>"), w2 = () => {
    o2(13, g2 = x2.innerHTML);
    const e3 = kf(g2);
    b2("input", e3), $2(e3), requestAnimationFrame(() => x2 && x2.scrollTo(0, 0));
  }, S2 = () => {
    P2(x2);
    const e3 = "html" === d2 ? x2.innerHTML : v2(x2.innerHTML);
    o2(5, x2.innerHTML = u2(e3), x2), R2(x2), w2();
  }, k2 = { b: "bold", i: "italic", u: "underline", s: "strikethrough" }, C2 = (e3) => {
    const t3 = p("span");
    return t3.dataset.bookmark = e3, t3;
  }, M2 = (e3, t3, o3) => {
    const i3 = C2(o3);
    if (e3.nodeType === Node.TEXT_NODE) {
      const n2 = e3.textContent;
      if ("start" === o3) {
        const o4 = Sf(n2.substr(0, t3)), r3 = Sf(n2.substr(t3));
        e3.replaceWith(o4, i3, r3);
      } else {
        const o4 = Sf(n2.substr(0, t3)), r3 = Sf(n2.substr(t3));
        e3.replaceWith(o4, i3, r3);
      }
    } else
      e3.nodeType === Node.ELEMENT_NODE && e3.insertBefore(i3, e3.childNodes[t3]);
  }, T2 = () => {
    const e3 = x2.getRootNode();
    return "getSelection" in e3 ? e3.getSelection() : document.getSelection();
  }, P2 = (e3) => {
    const t3 = T2();
    if (!t3.getRangeAt || !t3.rangeCount)
      return;
    const o3 = t3.getRangeAt(0), { startOffset: i3, endOffset: n2, startContainer: r3, endContainer: a3 } = o3;
    if (e3.contains(o3.startContainer) && e3.contains(o3.endContainer))
      if (r3.nodeType === Node.TEXT_NODE && r3 === a3) {
        const e4 = r3.textContent, t4 = e4.substr(0, i3), o4 = C2("start"), a4 = n2 - i3 > 0 ? e4.substr(i3, n2) : "", s3 = C2("end"), l3 = e4.substr(n2);
        r3.replaceWith(t4, o4, a4, s3, l3);
      } else
        M2(r3, i3, "start"), M2(a3, n2 + (r3 === a3 ? 1 : 0), "end");
  }, R2 = (e3) => {
    const t3 = I2(e3, "start"), o3 = I2(e3, "end");
    if (!t3 || !o3)
      return;
    const i3 = document.createRange();
    i3.setStart(t3, 0), i3.setEnd(o3, 0);
    const n2 = T2();
    n2.removeAllRanges(), n2.addRange(i3), t3.remove(), o3.remove();
  }, I2 = (e3, t3) => {
    const o3 = e3.children;
    for (let e4 = 0; e4 < o3.length; e4++) {
      const i3 = o3[e4];
      if (i3.dataset.bookmark === t3)
        return i3;
      if (i3.children.length) {
        const e5 = I2(i3, t3);
        if (e5)
          return e5;
      }
    }
  };
  let A2;
  return e2.$$set = (e3) => {
    "spellcheck" in e3 && o2(0, r2 = e3.spellcheck), "autocorrect" in e3 && o2(1, a2 = e3.autocorrect), "autocapitalize" in e3 && o2(2, s2 = e3.autocapitalize), "wrapLines" in e3 && o2(3, l2 = e3.wrapLines), "allowNewline" in e3 && o2(4, c2 = e3.allowNewline), "textFormat" in e3 && o2(14, d2 = e3.textFormat), "formatInput" in e3 && o2(15, u2 = e3.formatInput), "formatPaste" in e3 && o2(16, h2 = e3.formatPaste), "style" in e3 && o2(17, m2 = e3.style), "innerHTML" in e3 && o2(13, g2 = e3.innerHTML), "oninput" in e3 && o2(18, $2 = e3.oninput), "enableTextStyleShortcuts" in e3 && o2(19, f2 = e3.enableTextStyleShortcuts);
  }, e2.$$.update = () => {
    var t3;
    if (32 & e2.$$.dirty[0] && o2(23, i2 = !!x2), 8396800 & e2.$$.dirty[0] && i2 && g2 && (t3 = g2) !== x2.innerHTML && (o2(5, x2.innerHTML = t3, x2), x2 === document.activeElement && y2()), 131096 & e2.$$.dirty[0])
      if (!l2 && c2) {
        const e3 = m2.includes(":right") ? "text-indent:-100px!important" : m2.includes(":center") ? "" : "min-width:calc(100% + 100px)!important";
        o2(6, A2 = m2 + ";overflow:visible;" + e3);
      } else
        o2(6, A2 = m2);
  }, [r2, a2, s2, l2, c2, x2, A2, () => {
    b2("blur");
  }, (e3) => {
    if (/escape/i.test(e3.code))
      return e3.stopPropagation(), void b2("cancel");
    const t3 = e3.ctrlKey || e3.metaKey;
    if ("html" === d2 && t3 && /b|i|u|s/.test(e3.key))
      return f2 && ((e4) => {
        const t4 = k2[e4];
        t4 && document.execCommand(t4);
      })(e3.key), void e3.preventDefault();
    /enter/i.test(e3.code) && (e3.stopPropagation(), t3 ? b2("confirm") : (c2 || e3.preventDefault(), document.execCommand("insertLineBreak"), e3.preventDefault()));
  }, () => {
  }, (e3) => {
    "" !== e3.data && S2();
  }, (e3) => {
    const { inputType: t3 } = e3;
    "insertCompositionText" !== t3 && "deleteCompositionText" !== t3 && S2();
  }, (e3) => {
    e3.preventDefault();
    const t3 = e3.clipboardData.getData("text/plain"), o3 = "html" === d2 ? t3 : v2(t3), i3 = h2(o3);
    if (!i3.length)
      return;
    const n2 = T2().getRangeAt(0);
    n2.deleteContents(), n2.insertNode(document.createTextNode(i3)), w2();
  }, g2, d2, u2, h2, m2, $2, f2, () => S2(), () => x2 && x2.focus(), y2, i2, function(e3) {
    Nr[e3 ? "unshift" : "push"](() => {
      x2 = e3, o2(5, x2);
    });
  }];
}
var Tf = class extends wa {
  constructor(e2) {
    super(), va(this, e2, Mf, Cf, Nn, { spellcheck: 0, autocorrect: 1, autocapitalize: 2, wrapLines: 3, allowNewline: 4, textFormat: 14, formatInput: 15, formatPaste: 16, style: 17, innerHTML: 13, oninput: 18, enableTextStyleShortcuts: 19, confirm: 20, focus: 21, select: 22 }, null, [-1, -1]);
  }
  get spellcheck() {
    return this.$$.ctx[0];
  }
  set spellcheck(e2) {
    this.$$set({ spellcheck: e2 }), ea();
  }
  get autocorrect() {
    return this.$$.ctx[1];
  }
  set autocorrect(e2) {
    this.$$set({ autocorrect: e2 }), ea();
  }
  get autocapitalize() {
    return this.$$.ctx[2];
  }
  set autocapitalize(e2) {
    this.$$set({ autocapitalize: e2 }), ea();
  }
  get wrapLines() {
    return this.$$.ctx[3];
  }
  set wrapLines(e2) {
    this.$$set({ wrapLines: e2 }), ea();
  }
  get allowNewline() {
    return this.$$.ctx[4];
  }
  set allowNewline(e2) {
    this.$$set({ allowNewline: e2 }), ea();
  }
  get textFormat() {
    return this.$$.ctx[14];
  }
  set textFormat(e2) {
    this.$$set({ textFormat: e2 }), ea();
  }
  get formatInput() {
    return this.$$.ctx[15];
  }
  set formatInput(e2) {
    this.$$set({ formatInput: e2 }), ea();
  }
  get formatPaste() {
    return this.$$.ctx[16];
  }
  set formatPaste(e2) {
    this.$$set({ formatPaste: e2 }), ea();
  }
  get style() {
    return this.$$.ctx[17];
  }
  set style(e2) {
    this.$$set({ style: e2 }), ea();
  }
  get innerHTML() {
    return this.$$.ctx[13];
  }
  set innerHTML(e2) {
    this.$$set({ innerHTML: e2 }), ea();
  }
  get oninput() {
    return this.$$.ctx[18];
  }
  set oninput(e2) {
    this.$$set({ oninput: e2 }), ea();
  }
  get enableTextStyleShortcuts() {
    return this.$$.ctx[19];
  }
  set enableTextStyleShortcuts(e2) {
    this.$$set({ enableTextStyleShortcuts: e2 }), ea();
  }
  get confirm() {
    return this.$$.ctx[20];
  }
  get focus() {
    return this.$$.ctx[21];
  }
  get select() {
    return this.$$.ctx[22];
  }
};
var Pf = ["i", "b", "u", "strike"].map((e2) => ({ tag: e2, tagOpen: new RegExp(`<${e2}>`, "g"), tagClose: new RegExp(`</${e2}>`, "g"), placeholderOpen: new RegExp(`___${e2}O___`, "g"), placeholderClose: new RegExp(`___${e2}C___`, "g") }));
var Rf = (e2) => e2 = ((e3, t2 = Pf) => (t2.forEach(({ tag: t3, placeholderOpen: o2, placeholderClose: i2 }) => {
  e3 = e3.replace(o2, `<${t3}>`).replace(i2, `</${t3}>`);
}), e3))(e2 = (e2 = ((e3, t2 = Pf) => (t2.forEach(({ tag: t3, tagOpen: o2, tagClose: i2 }) => {
  e3 = e3.replace(o2, `___${t3}O___`).replace(i2, `___${t3}C___`);
}), e3))(e2)).replace(/ {2,}/g, " ").replace(/\u00a0/g, "&nbsp;").split("\n").join("<br>"));
var If = (e2, t2) => M(e2) ? parseFloat(e2) / 100 * t2 : e2;
var Af = (e2, t2) => ({ x: Fo(e2.x, t2.width), y: Fo(e2.y, t2.height) });
function Ef(e2, t2, o2) {
  const i2 = e2.slice();
  return i2[224] = t2[o2], i2[226] = o2, i2;
}
function Lf(e2, t2) {
  let o2, i2, n2, r2, a2, s2, l2, c2, d2, u2, h2, p2 = t2[224].name + "";
  function m2() {
    return t2[152](t2[226]);
  }
  return n2 = new Cm({ props: { color: t2[224].color } }), { key: e2, first: null, c() {
    o2 = hr("li"), i2 = hr("button"), ya(n2.$$.fragment), r2 = gr(), a2 = hr("span"), s2 = mr(p2), c2 = gr(), xr(i2, "class", "PinturaShapeListItem"), xr(i2, "type", "button"), xr(i2, "aria-label", l2 = "Select shape " + t2[224].name), this.first = o2;
  }, m(e3, t3) {
    dr(e3, o2, t3), sr(o2, i2), ba(n2, i2, null), sr(i2, r2), sr(i2, a2), sr(a2, s2), sr(o2, c2), d2 = true, u2 || (h2 = fr(i2, "click", m2), u2 = true);
  }, p(e3, o3) {
    t2 = e3;
    const r3 = {};
    1048576 & o3[0] && (r3.color = t2[224].color), n2.$set(r3), (!d2 || 1048576 & o3[0]) && p2 !== (p2 = t2[224].name + "") && wr(s2, p2), (!d2 || 1048576 & o3[0] && l2 !== (l2 = "Select shape " + t2[224].name)) && xr(i2, "aria-label", l2);
  }, i(e3) {
    d2 || (sa(n2.$$.fragment, e3), d2 = true);
  }, o(e3) {
    la(n2.$$.fragment, e3), d2 = false;
  }, d(e3) {
    e3 && ur(o2), xa(n2), u2 = false, h2();
  } };
}
function Ff(e2) {
  let t2, o2;
  return t2 = new $f({ props: { visible: true, points: e2[12], rotatorPoint: e2[26], enableDragEdges: e2[16], enableDragPoints: e2[28], enableRotatePoints: e2[14] } }), t2.$on("resizestart", e2[36]), t2.$on("resizemove", e2[37]), t2.$on("resizeend", e2[38]), t2.$on("rotatestart", e2[39]), t2.$on("rotatemove", e2[40]), t2.$on("rotateend", e2[41]), { c() {
    ya(t2.$$.fragment);
  }, m(e3, i2) {
    ba(t2, e3, i2), o2 = true;
  }, p(e3, o3) {
    const i2 = {};
    4096 & o3[0] && (i2.points = e3[12]), 67108864 & o3[0] && (i2.rotatorPoint = e3[26]), 65536 & o3[0] && (i2.enableDragEdges = e3[16]), 268435456 & o3[0] && (i2.enableDragPoints = e3[28]), 16384 & o3[0] && (i2.enableRotatePoints = e3[14]), t2.$set(i2);
  }, i(e3) {
    o2 || (sa(t2.$$.fragment, e3), o2 = true);
  }, o(e3) {
    la(t2.$$.fragment, e3), o2 = false;
  }, d(e3) {
    xa(t2, e3);
  } };
}
function zf(e2) {
  let t2, o2, i2, n2;
  const r2 = [Of, Bf], a2 = [];
  function s2(e3, t3) {
    return "modal" === e3[4] ? 0 : "inline" === e3[4] ? 1 : -1;
  }
  return ~(t2 = s2(e2)) && (o2 = a2[t2] = r2[t2](e2)), { c() {
    o2 && o2.c(), i2 = $r();
  }, m(e3, o3) {
    ~t2 && a2[t2].m(e3, o3), dr(e3, i2, o3), n2 = true;
  }, p(e3, n3) {
    let l2 = t2;
    t2 = s2(e3), t2 === l2 ? ~t2 && a2[t2].p(e3, n3) : (o2 && (ra(), la(a2[l2], 1, 1, () => {
      a2[l2] = null;
    }), aa()), ~t2 ? (o2 = a2[t2], o2 ? o2.p(e3, n3) : (o2 = a2[t2] = r2[t2](e3), o2.c()), sa(o2, 1), o2.m(i2.parentNode, i2)) : o2 = null);
  }, i(e3) {
    n2 || (sa(o2), n2 = true);
  }, o(e3) {
    la(o2), n2 = false;
  }, d(e3) {
    ~t2 && a2[t2].d(e3), e3 && ur(i2);
  } };
}
function Bf(e2) {
  let t2, o2, i2, n2, r2, a2 = { formatInput: e2[43], wrapLines: !!e2[13].width, textFormat: e2[13].format, enableTextStyleShortcuts: e2[5], allowNewline: e2[27], style: e2[25] };
  return o2 = new Tf({ props: a2 }), e2[155](o2), o2.$on("input", e2[44]), o2.$on("keyup", e2[47]), o2.$on("cancel", e2[49]), o2.$on("confirm", e2[48]), { c() {
    t2 = hr("div"), ya(o2.$$.fragment), xr(t2, "class", "PinturaInlineInput"), xr(t2, "style", e2[24]);
  }, m(a3, s2) {
    dr(a3, t2, s2), ba(o2, t2, null), i2 = true, n2 || (r2 = fr(t2, "focusout", e2[156]), n2 = true);
  }, p(e3, n3) {
    const r3 = {};
    8192 & n3[0] && (r3.wrapLines = !!e3[13].width), 8192 & n3[0] && (r3.textFormat = e3[13].format), 32 & n3[0] && (r3.enableTextStyleShortcuts = e3[5]), 134217728 & n3[0] && (r3.allowNewline = e3[27]), 33554432 & n3[0] && (r3.style = e3[25]), o2.$set(r3), (!i2 || 16777216 & n3[0]) && xr(t2, "style", e3[24]);
  }, i(e3) {
    i2 || (sa(o2.$$.fragment, e3), i2 = true);
  }, o(e3) {
    la(o2.$$.fragment, e3), i2 = false;
  }, d(i3) {
    i3 && ur(t2), e2[155](null), xa(o2), n2 = false, r2();
  } };
}
function Of(e2) {
  let t2, o2;
  return t2 = new wf({ props: { panelOffset: e2[2], onconfirm: e2[48], oncancel: e2[49], labelCancel: e2[6].shapeLabelInputCancel, iconCancel: e2[6].shapeIconInputCancel, labelConfirm: e2[6].shapeLabelInputConfirm, iconConfirm: e2[6].shapeIconInputConfirm, $$slots: { default: [Df] }, $$scope: { ctx: e2 } } }), { c() {
    ya(t2.$$.fragment);
  }, m(e3, i2) {
    ba(t2, e3, i2), o2 = true;
  }, p(e3, o3) {
    const i2 = {};
    4 & o3[0] && (i2.panelOffset = e3[2]), 64 & o3[0] && (i2.labelCancel = e3[6].shapeLabelInputCancel), 64 & o3[0] && (i2.iconCancel = e3[6].shapeIconInputCancel), 64 & o3[0] && (i2.labelConfirm = e3[6].shapeLabelInputConfirm), 64 & o3[0] && (i2.iconConfirm = e3[6].shapeIconInputConfirm), 41943296 & o3[0] | 1024 & o3[7] && (i2.$$scope = { dirty: o3, ctx: e3 }), t2.$set(i2);
  }, i(e3) {
    o2 || (sa(t2.$$.fragment, e3), o2 = true);
  }, o(e3) {
    la(t2.$$.fragment, e3), o2 = false;
  }, d(e3) {
    xa(t2, e3);
  } };
}
function Df(e2) {
  let t2, o2, i2;
  return { c() {
    t2 = hr("textarea"), xr(t2, "spellcheck", "false"), xr(t2, "autocorrect", "off"), xr(t2, "autocapitalize", "off"), xr(t2, "style", e2[25]);
  }, m(n2, r2) {
    dr(n2, t2, r2), e2[153](t2), Sr(t2, e2[23]), o2 || (i2 = [fr(t2, "keydown", e2[46]), fr(t2, "keypress", e2[45]), fr(t2, "keyup", e2[47]), fr(t2, "input", e2[44]), fr(t2, "input", e2[154])], o2 = true);
  }, p(e3, o3) {
    33554432 & o3[0] && xr(t2, "style", e3[25]), 8388608 & o3[0] && Sr(t2, e3[23]);
  }, d(n2) {
    n2 && ur(t2), e2[153](null), o2 = false, _n(i2);
  } };
}
function Wf(e2) {
  let t2, o2, i2, n2, r2;
  return o2 = new ch({ props: { items: e2[21], key: e2[10] } }), { c() {
    t2 = hr("div"), ya(o2.$$.fragment), xr(t2, "class", "PinturaShapeControls"), xr(t2, "style", e2[22]);
  }, m(a2, s2) {
    dr(a2, t2, s2), ba(o2, t2, null), i2 = true, n2 || (r2 = [fr(t2, "measure", e2[157]), er(oc.call(null, t2))], n2 = true);
  }, p(e3, n3) {
    const r3 = {};
    2097152 & n3[0] && (r3.items = e3[21]), 1024 & n3[0] && (r3.key = e3[10]), o2.$set(r3), (!i2 || 4194304 & n3[0]) && xr(t2, "style", e3[22]);
  }, i(e3) {
    i2 || (sa(o2.$$.fragment, e3), i2 = true);
  }, o(e3) {
    la(o2.$$.fragment, e3), i2 = false;
  }, d(e3) {
    e3 && ur(t2), xa(o2), n2 = false, _n(r2);
  } };
}
function _f(e2) {
  let t2, o2, i2, r2, a2, s2, l2, c2, d2, u2, h2 = [], p2 = /* @__PURE__ */ new Map(), m2 = e2[20];
  const g2 = (e3) => e3[224].id;
  for (let t3 = 0; t3 < m2.length; t3 += 1) {
    let o3 = Ef(e2, m2, t3), i3 = g2(o3);
    p2.set(i3, h2[t3] = Lf(i3, o3));
  }
  let $2 = e2[15] && Ff(e2), f2 = e2[11] && zf(e2), y2 = e2[17] > 0 && Wf(e2);
  return { c() {
    t2 = hr("div"), o2 = hr("nav"), i2 = hr("ul");
    for (let e3 = 0; e3 < h2.length; e3 += 1)
      h2[e3].c();
    r2 = gr(), $2 && $2.c(), a2 = gr(), f2 && f2.c(), s2 = gr(), y2 && y2.c(), xr(o2, "class", "PinturaShapeList"), xr(o2, "data-visible", e2[18]), xr(t2, "class", "PinturaShapeEditor"), xr(t2, "tabindex", "0");
  }, m(p3, m3) {
    dr(p3, t2, m3), sr(t2, o2), sr(o2, i2);
    for (let e3 = 0; e3 < h2.length; e3 += 1)
      h2[e3].m(i2, null);
    sr(t2, r2), $2 && $2.m(t2, null), sr(t2, a2), f2 && f2.m(t2, null), sr(t2, s2), y2 && y2.m(t2, null), e2[158](t2), c2 = true, d2 || (u2 = [fr(o2, "focusin", e2[52]), fr(o2, "focusout", e2[53]), fr(t2, "keydown", function() {
      Vn(e2[1] ? n : e2[42]) && (e2[1] ? n : e2[42]).apply(this, arguments);
    }), fr(t2, "nudge", function() {
      Vn(e2[1] ? n : e2[51]) && (e2[1] ? n : e2[51]).apply(this, arguments);
    }), fr(t2, "measure", e2[151]), fr(t2, "pointermove", function() {
      Vn(e2[1] ? n : e2[54]) && (e2[1] ? n : e2[54]).apply(this, arguments);
    }), fr(t2, "interactionstart", function() {
      Vn(e2[1] ? n : e2[31]) && (e2[1] ? n : e2[31]).apply(this, arguments);
    }), fr(t2, "interactionupdate", function() {
      Vn(e2[1] ? n : e2[33]) && (e2[1] ? n : e2[33]).apply(this, arguments);
    }), fr(t2, "interactioncancel", function() {
      Vn(e2[1] ? n : e2[32]) && (e2[1] ? n : e2[32]).apply(this, arguments);
    }), fr(t2, "interactionrelease", function() {
      Vn(e2[1] ? n : e2[34]) && (e2[1] ? n : e2[34]).apply(this, arguments);
    }), fr(t2, "interactionend", function() {
      Vn(e2[1] ? n : e2[35]) && (e2[1] ? n : e2[35]).apply(this, arguments);
    }), er(oc.call(null, t2)), er(Jc.call(null, t2)), er(l2 = Kc.call(null, t2, { drag: true, inertia: true, multiTouch: false, shouldStartInteraction: Vf, getEventPosition: e2[159] }))], d2 = true);
  }, p(n2, r3) {
    e2 = n2, 1048705 & r3[0] && (m2 = e2[20], ra(), h2 = ma(h2, r3, g2, 1, e2, m2, p2, i2, pa, Lf, null, Ef), aa()), (!c2 || 262144 & r3[0]) && xr(o2, "data-visible", e2[18]), e2[15] ? $2 ? ($2.p(e2, r3), 32768 & r3[0] && sa($2, 1)) : ($2 = Ff(e2), $2.c(), sa($2, 1), $2.m(t2, a2)) : $2 && (ra(), la($2, 1, 1, () => {
      $2 = null;
    }), aa()), e2[11] ? f2 ? (f2.p(e2, r3), 2048 & r3[0] && sa(f2, 1)) : (f2 = zf(e2), f2.c(), sa(f2, 1), f2.m(t2, s2)) : f2 && (ra(), la(f2, 1, 1, () => {
      f2 = null;
    }), aa()), e2[17] > 0 ? y2 ? (y2.p(e2, r3), 131072 & r3[0] && sa(y2, 1)) : (y2 = Wf(e2), y2.c(), sa(y2, 1), y2.m(t2, null)) : y2 && (ra(), la(y2, 1, 1, () => {
      y2 = null;
    }), aa()), l2 && Vn(l2.update) && 8 & r3[0] && l2.update.call(null, { drag: true, inertia: true, multiTouch: false, shouldStartInteraction: Vf, getEventPosition: e2[159] });
  }, i(e3) {
    if (!c2) {
      for (let e4 = 0; e4 < m2.length; e4 += 1)
        sa(h2[e4]);
      sa($2), sa(f2), sa(y2), c2 = true;
    }
  }, o(e3) {
    for (let e4 = 0; e4 < h2.length; e4 += 1)
      la(h2[e4]);
    la($2), la(f2), la(y2), c2 = false;
  }, d(o3) {
    o3 && ur(t2);
    for (let e3 = 0; e3 < h2.length; e3 += 1)
      h2[e3].d();
    $2 && $2.d(), f2 && f2.d(), y2 && y2.d(), e2[158](null), d2 = false, _n(u2);
  } };
}
var Vf = (e2, t2) => e2.target === t2;
function Nf(e2, t2, o2) {
  let i2, r2, a2, s2, l2, c2, d2, u2, h2, p2, m2, g2, $2, f2, y2, b2, x2, v2, w2, S2, k2, C2, T2, P2, R2, I2, E2, L2, F2, z2, B2, O2, D2, W2, _2, V2, N2, H2, U2, Z2, X2, G2, Y2, q2, K2, J2, Q2, { uid: ee2 = A() } = t2, { ui: te2 } = t2, { disabled: oe2 = false } = t2, { markup: ie2 } = t2, { offset: ne2 } = t2, { contextRotation: ae2 = 0 } = t2, { contextFlipX: de2 = false } = t2, { contextFlipY: he2 = false } = t2, { contextZoom: me2 = 1 } = t2, { active: ve2 = false } = t2, { opacity: ke2 = 1 } = t2, { parentRect: Te2 } = t2, { rootRect: Ae2 } = t2, { utilRect: Ee2 } = t2, { hoverColor: Fe2 } = t2, { textInputMode: ze2 = "inline" } = t2, { oninteractionstart: Be2 = n } = t2, { oninteractionupdate: De2 = n } = t2, { oninteractionrelease: We2 = n } = t2, { oninteractionend: _e2 = n } = t2, { oninteractioncancel: Ve2 = n } = t2, { onaddshape: Ne2 = n } = t2, { onupdateshape: Ue2 = n } = t2, { onselectshape: Xe2 = n } = t2, { onremoveshape: Ge2 = n } = t2, { ontapshape: Ye2 = n } = t2, { onhovershape: qe2 = n } = t2, { onhovercanvas: Ke2 = n } = t2, { ontapcanvas: tt2 = n } = t2, { beforeSelectShape: nt2 = () => true } = t2, { beforeDeselectShape: rt2 = () => true } = t2, { beforeRemoveShape: at2 = () => true } = t2, { beforeUpdateShape: st2 = (e3, t3) => t3 } = t2, { willRenderShapeControls: lt2 = j } = t2, { willRenderShapeTextControls: ct2 = j } = t2, { willStartInteraction: dt2 = (e3, t3) => true } = t2, { mapEditorPointToImagePoint: ut2 } = t2, { mapImagePointToEditorPoint: ht2 } = t2, { eraseRadius: mt2 } = t2, { selectRadius: gt2 } = t2, { enableButtonFlipVertical: $t2 = false } = t2, { enableTapToAddText: xt2 = true } = t2, { enableTextStyleControls: vt2 = true } = t2, { locale: wt2 } = t2;
  const St2 = Wr("isAnimated");
  Un(e2, St2, (e3) => o2(150, J2 = e3));
  const kt2 = (e3, t3, o3) => {
    let i3 = st2({ ...e3 }, t3, { ...o3 });
    an(e3, i3, o3);
  }, Ct2 = (e3, t3) => {
    const o3 = Me(e3, t3), i3 = $e(e3, t3), n2 = Math.PI / 8, r3 = n2 * Math.round(i3 / n2) - ae2 % n2;
    t3.x = e3.x + o3 * Math.cos(r3), t3.y = e3.y + o3 * Math.sin(r3);
  }, Pt2 = (e3, t3, o3, i3) => {
    const n2 = ce(e3.x - o3.x, e3.y - o3.y), r3 = ce(i3.x - o3.x, i3.y - o3.y), a3 = Se(r3, r3);
    let s3 = Se(n2, r3) / a3;
    s3 = s3 < 0 ? 0 : s3, s3 = s3 > 1 ? 1 : s3;
    const l3 = ce(r3.x * s3 + o3.x - e3.x, r3.y * s3 + o3.y - e3.y);
    return Se(l3, l3) <= t3 * t3;
  }, Rt2 = (e3, t3, o3) => {
    const i3 = o3.length;
    for (let n2 = 0; n2 < i3 - 1; n2++)
      if (Pt2(e3, t3, o3[n2], o3[n2 + 1]))
        return true;
    return false;
  }, At2 = (e3, t3, o3) => !!Tt(e3, o3) || (!!Rt2(e3, t3, o3) || Pt2(e3, t3, o3[0], o3[o3.length - 1])), Et2 = (e3, t3, o3, i3, n2) => At2(e3, t3, pt(o3, i3, n2 || it(o3))), Lt2 = Wr("keysPressed");
  Un(e2, Lt2, (e3) => o2(172, Q2 = e3));
  const Ft2 = (e3, t3, o3) => 0 === e3 || t3 && o3 ? e3 : t3 || o3 ? -e3 : e3, zt2 = (e3, t3) => {
    const o3 = ht2(e3);
    return ut2(be(o3, t3));
  }, Bt2 = (e3, t3, o3) => {
    if (vi(e3)) {
      const i3 = zt2(mi(t3), o3), n2 = zt2(gi(t3), o3);
      kt2(e3, { x1: i3.x, y1: i3.y, x2: n2.x, y2: n2.y }, Te2);
    } else if (e3.points)
      kt2(e3, { points: t3.points.map((e4) => zt2(e4, o3)) }, Te2);
    else if (bi(e3) || $i(e3) || xi(e3)) {
      const i3 = zt2(t3, o3);
      kt2(e3, i3, Te2);
    }
    Ut2();
  }, Ot2 = { 0: 1, 1: 0, 2: 3, 3: 2 }, Dt2 = { 0: 3, 1: 2, 2: 1, 3: 0 };
  let Wt2;
  const _t2 = () => {
    if (ie2.length)
      return ie2.find(Ti);
  }, Vt2 = () => {
    if (ie2.length)
      return ie2.findIndex(Ti);
  }, Nt2 = (e3, t3 = true) => {
    if (!_t2())
      return Ei(e3), Zt2(e3, t3);
  }, Ht2 = () => {
    const e3 = _t2();
    if (e3)
      return e3._isDraft = false, Ut2(), e3;
  }, jt2 = () => {
    _t2() && (ie2.splice(Vt2(), 1), Ut2());
  }, Ut2 = () => o2(0, ie2), Zt2 = (e3, t3 = true) => (ie2.push(e3), t3 && Ut2(), e3), Xt2 = (e3, t3 = [], o3 = true) => {
    t3.filter(Boolean).forEach((t4) => delete e3[t4]), o3 && Ut2();
  }, Gt2 = (e3, t3, o3 = true) => {
    e3 = Object.assign(e3, t3), o3 && Ut2();
  }, Yt2 = (e3, t3, o3, i3 = true) => {
    e3[t3] = o3, i3 && Ut2();
  }, qt2 = (e3, t3 = true) => {
    ie2.forEach((t4) => Gt2(t4, e3, false)), t3 && Ut2();
  }, Kt2 = () => [...ie2].reverse().find(Ci), Jt2 = () => !!Kt2(), Qt2 = (e3) => {
    if (!at2(e3))
      return false;
    o2(0, ie2 = ie2.filter((t3) => t3 !== e3)), Ge2(e3);
  }, eo2 = () => {
    const e3 = Kt2();
    if (!e3)
      return;
    const t3 = ie2.filter((e4) => zi(e4) && Fi(e4)), o3 = t3.findIndex((t4) => t4 === e3);
    if (false === Qt2(e3))
      return;
    if (to2 = e3, t3.length - 1 <= 0)
      return oo2();
    const i3 = o3 - 1 < 0 ? t3.length - 1 : o3 - 1;
    no2(t3[i3]);
  };
  let to2 = void 0;
  const oo2 = (e3 = {}) => {
    const { storePrevious: t3 = true } = e3;
    Object.keys(Ho2).forEach((e4) => Ho2[e4] = {}), t3 && (to2 = io2()), qt2({ isSelected: false, isEditing: false, _prerender: false });
  }, io2 = () => ie2.find(Ci), no2 = (e3, t3 = true) => {
    if (Ti(e3))
      return;
    const o3 = io2() || to2, i3 = Ci(e3);
    to2 = void 0, nt2(o3, e3) && (oo2(), ((e4) => {
      e4.isSelected = true;
    })(e3), !i3 && Xe2(e3), t3 && Ut2());
  }, ro2 = (e3) => {
    Eo2 && Eo2.confirm && e3.isEditing && Eo2.confirm(), Gt2(e3, { isSelected: false, isEditing: false, _prerender: false });
  }, ao2 = (e3) => {
    Gt2(e3, { isSelected: true, isEditing: true, _prerender: "inline" === ze2 });
  }, so2 = (e3) => {
    Gt2(e3, { isSelected: true, isEditing: false, _prerender: false });
  }, lo2 = (e3) => {
    if (!e3.length)
      return [];
    const t3 = e3.filter(at2);
    return o2(0, ie2 = ie2.filter((e4) => !t3.includes(e4))), t3;
  }, co2 = (e3) => {
    const t3 = Ko(e3.text, e3);
    return ot(e3.x, e3.y, e3.width ? Math.min(e3.width, t3.width) : t3.width, e3.height ? Math.min(e3.height, t3.height) : t3.height);
  }, uo2 = (e3) => {
    if (Pi(e3))
      return Je(e3);
    if (xi(e3))
      return et(e3);
    const t3 = co2(e3);
    return t3.width = Math.max(10, e3.width || t3.width), t3;
  }, ho2 = (e3, t3 = 0, o3 = () => true) => [...ie2].reverse().filter(o3).map((e4) => ({ shape: e4, priority: 1 })).filter((o4) => {
    const { shape: i3 } = o4, n2 = tn(ci(i3), Te2), r3 = t3 + (n2.strokeWidth || 0);
    if (bi(n2))
      return Et2(e3, r3, n2, i3.rotation);
    if ($i(n2)) {
      const t4 = uo2(n2), a3 = Et2(e3, r3, t4, i3.rotation);
      let s3 = false;
      if (a3 && !Ci(i3)) {
        const a4 = co2(n2);
        "right" !== i3.textAlign || i3.flipX || (a4.x = t4.x + t4.width - a4.width), "center" === i3.textAlign && (a4.x = t4.x + 0.5 * t4.width - 0.5 * a4.width), s3 = Et2(e3, r3, a4, i3.rotation, it(t4)), s3 || (o4.priority = -1);
      }
      return a3;
    }
    return xi(n2) ? ((e4, t4, o5, i4, n3, r4) => {
      const a3 = It(ce(o5.x, o5.y), o5.rx, o5.ry, i4, n3, r4, 12);
      return At2(e4, t4, a3);
    })(e3, r3, n2, i3.rotation, i3.flipX, i3.flipY) : vi(n2) ? Pt2(e3, Math.max(16, r3), mi(n2), gi(n2)) : wi(n2) && n2.pathClose ? At2(e3, r3, n2.points) : !!wi(n2) && Rt2(e3, Math.max(16, r3), n2.points);
  }).sort((e4, t4) => e4.priority < t4.priority ? 1 : e4.priority > t4.priority ? -1 : 0).map((e4) => e4.shape), po2 = (e3, t3, o3, i3 = 0) => {
    const n2 = Math.abs(i3), r3 = je(t3, o3), a3 = Ze(r3, n2), s3 = (({ start: e4, end: t4 }, o4) => {
      if (0 === o4)
        return [ce(e4.x, e4.y), ce(e4.x, e4.y), ce(t4.x, t4.y), ce(t4.x, t4.y)];
      const i4 = Math.atan2(t4.y - e4.y, t4.x - e4.x), n3 = Math.sin(i4) * o4, r4 = Math.cos(i4) * o4;
      return [ce(n3 + e4.x, -r4 + e4.y), ce(-n3 + e4.x, r4 + e4.y), ce(-n3 + t4.x, r4 + t4.y), ce(n3 + t4.x, -r4 + t4.y)];
    })(a3, n2);
    return e3.filter((e4) => {
      const t4 = tn(ci(e4), Te2);
      if (vi(t4) || wi(t4)) {
        const e5 = t4.points ? [...t4.points] : [mi(t4), gi(t4)];
        return !!Mt(a3, e5);
      }
      return ((e5, t5) => !!e5.find((e6) => Tt(e6, t5)) || !!t5.find((t6) => Tt(t6, e5)))(s3, ((e5, t5 = 12) => {
        if (bi(e5))
          return pt(e5, e5.rotation, it(e5));
        if ($i(e5)) {
          const t6 = uo2(e5);
          return pt(t6, e5.rotation, it(t6));
        }
        return xi(e5) ? It(ce(e5.x, e5.y), e5.rx, e5.ry, e5.rotation, e5.flipX, e5.flipY, t5) : [];
      })(t4));
    });
  };
  let mo2 = void 0, go2 = void 0, $o2 = void 0, fo2 = void 0, yo2 = void 0, bo2 = void 0, xo2 = false, vo2 = false;
  const wo2 = () => {
    clearTimeout(go2), go2 = void 0, o2(120, vo2 = false);
  }, So2 = (e3) => {
    if (bi(e3)) {
      if (e3.width < 1 && e3.height < 1)
        return;
      const t3 = it(e3), o3 = bt(e3);
      return (e3.flipX || e3.flipY) && Re(o3, e3.flipX, e3.flipY, t3.x, t3.y), Ie(o3, e3.rotation, t3.x, t3.y);
    }
    if (xi(e3)) {
      if (e3.rx < 1 && e3.ry < 1)
        return;
      const t3 = e3, o3 = bt(et(e3));
      return (e3.flipX || e3.flipY) && Re(o3, e3.flipX, e3.flipY, t3.x, t3.y), Ie(o3, e3.rotation, t3.x, t3.y);
    }
    if (vi(e3))
      return [mi(e3), gi(e3)];
    if (wi(e3))
      return [...e3.points];
    if ($i(e3)) {
      if (e3.width < 5 && e3.height < 5)
        return;
      const t3 = uo2(e3);
      t3.width = Math.max(10, t3.width);
      const o3 = it(t3), i3 = bt(t3);
      return (e3.flipX || e3.flipY) && Re(i3, e3.flipX, e3.flipY, o3.x, o3.y), Ie(i3, e3.rotation, o3.x, o3.y);
    }
    return [];
  }, Co2 = (e3) => {
    const t3 = So2(e3);
    let o3, i3;
    return e3.flipY ? (o3 = Pe([t3[0], t3[1]]), i3 = ge(ce(t3[1].x - t3[2].x, t3[1].y - t3[2].y))) : (o3 = Pe([t3[2], t3[3]]), i3 = ge(ce(t3[2].x - t3[1].x, t3[2].y - t3[1].y))), we(i3, 20 / me2), { origin: o3, dir: i3 };
  }, To2 = () => {
    const e3 = te2.filter((e4) => "markup-hover" !== e4.id);
    e3.length !== te2.length && o2(55, te2 = e3);
  };
  let Po2;
  const Ro2 = "markup-manipulator-segment-" + ee2, Io2 = () => {
    o2(55, te2 = te2.filter((e3) => e3.id !== Ro2));
  }, Ao2 = (e3) => e3.isContentEditable || /input|textarea/i.test(e3.nodeName);
  let Eo2;
  const Lo2 = (e3) => {
    o2(8, Eo2.innerHTML = Rf(e3), Eo2);
  }, Bo2 = (e3) => {
    const t3 = void 0 === e3.value ? e3.innerHTML : e3.value, o3 = "text" === i2.format ? kf(t3).split(/<br>|<br\/>/g).join("\n").replace(/&nbsp;/g, String.fromCharCode(160)).replace(/&amp;/g, "&") : t3;
    return fi(i2) && false !== i2.disableNewline ? ((e4) => {
      const t4 = e4.split(/[\n\r]/g);
      return t4.length > 1 ? t4.map((e5) => e5.trim()).filter((e5) => e5.length).join(" ") : t4[0];
    })(o3) : o3;
  }, Oo2 = () => {
    const e3 = Bo2(Eo2), t3 = Oi(i2, e3), o3 = true === t3 ? e3 : t3;
    let n2 = C2.x, r3 = C2.y;
    if (!i2.height) {
      const e4 = pt({ ...P2 }, i2.rotation), t4 = Ko(o3, l2), a3 = pt({ x: n2, y: r3, ...t4 }, i2.rotation), [s3, , c3] = e4, [d3, , u3] = a3;
      let h3 = s3, p3 = d3;
      i2.flipX && (h3 = c3, p3 = u3);
      const m3 = xe(ue(h3), p3);
      n2 += m3.x, r3 += m3.y;
    }
    Gt2(i2, { x: M(k2.x) ? Fo(n2, Te2.width) : n2, y: M(k2.y) ? Fo(r3, Te2.height) : r3, text: o3 });
  }, Do2 = () => {
    let e3 = a2;
    a2 && Ht2(), Eo2 && Eo2.confirm && Eo2.confirm(), Oo2(), so2(i2), e3 ? Ne2(i2) : Ue2(i2);
  }, Wo2 = () => {
    a2 ? jt2() : (Gt2(i2, { text: k2.text, x: k2.x, y: k2.y }), so2(i2));
  }, _o2 = (e3, t3, { flipX: o3, flipY: i3, rotation: n2 }, r3 = "top left") => {
    let a3, s3;
    const [l3, c3, d3, u3] = pt(e3, n2), [h3, p3, m3, g3] = pt(t3, n2);
    if ("top center" === r3) {
      a3 = Pe(i3 ? [u3, d3] : [l3, c3]), s3 = Pe(i3 ? [g3, m3] : [h3, p3]);
    } else
      "top right" === r3 && !o3 || "top left" === r3 && o3 ? (a3 = i3 ? d3 : c3, s3 = i3 ? m3 : p3) : (a3 = i3 ? u3 : l3, s3 = i3 ? g3 : h3);
    return xe(ue(a3), s3);
  }, Vo2 = (e3, t3, o3) => ce(M(e3.x) ? Fo(t3.x + o3.x, Te2.width) : t3.x + o3.x, M(e3.y) ? Fo(t3.y + o3.y, Te2.height) : t3.y + o3.y), Ho2 = {}, jo2 = () => ao2(i2), Uo2 = () => {
    const e3 = He(Ko(i2.text, l2), (e4) => Math.ceil(e4)), t3 = Mo(i2, "height"), o3 = !t3 && Mo(i2, "width"), n2 = i2.id;
    let r3 = Ho2[n2];
    r3 || (Ho2[n2] = {}, r3 = Ho2[n2]);
    const a3 = (e4) => {
      const { width: t4, ...o4 } = l2, n3 = Ko(i2.text, o4), r4 = _o2(ot(l2.x, l2.y, e4.width, e4.height), ot(l2.x, l2.y, n3.width, n3.height), l2, "top " + i2.textAlign), a4 = false !== l2.disableNewline;
      Xt2(i2, ["width", "height", a4 && "textAlign"]), Gt2(i2, { ...Vo2(i2, l2, r4) });
    }, s3 = (t4) => {
      const o4 = Oe(r3.width || l2.width || e3.width, e3.height), n3 = r3.textAlign || "left", a4 = _o2(ot(l2.x, l2.y, t4.width, t4.height), ot(l2.x, l2.y, o4.width, o4.height), l2, "top " + n3);
      Xt2(i2, ["height"]), Gt2(i2, { ...Vo2(i2, l2, a4), width: M(i2.width) ? Fo(o4.width, Te2.width) : o4.width, textAlign: n3 });
    }, c3 = (t4) => {
      const o4 = Oe(r3.width || e3.width, r3.height || e3.height), n3 = r3.textAlign || "left", a4 = _o2(ot(l2.x, l2.y, t4.width, t4.height), ot(l2.x, l2.y, o4.width, o4.height), l2, "top " + n3);
      Gt2(i2, { ...Vo2(i2, l2, a4), width: M(i2.width) ? Fo(o4.width, Te2.width) : o4.width, height: M(i2.width) ? Fo(o4.height, Te2.height) : o4.height, textAlign: n3 });
    };
    if (t3) {
      r3.textAlign = i2.textAlign, r3.width = l2.width, r3.height = l2.height;
      const e4 = Oe(l2.width, l2.height);
      Di(i2, "auto-height") ? s3(e4) : Di(i2, "auto-width") && a3(e4);
    } else if (o3) {
      r3.textAlign = i2.textAlign, r3.width = l2.width;
      const t4 = Oe(l2.width, e3.height);
      Di(i2, "auto-width") ? a3(t4) : Di(i2, "fixed-size") && c3(t4);
    } else {
      r3.textAlign = i2.textAlign;
      const t4 = Oe(Math.ceil(e3.width), Math.ceil(e3.height));
      Di(i2, "fixed-size") ? c3(t4) : Di(i2, "auto-height") && s3(t4);
    }
  }, Zo2 = (e3) => {
    e3.stopPropagation();
    const t3 = i2.flipX || false;
    Yt2(i2, "flipX", !t3), Ue2(i2);
  }, Xo2 = (e3) => {
    e3.stopPropagation();
    const t3 = i2.flipY || false;
    Yt2(i2, "flipY", !t3), Ue2(i2);
  }, Go2 = (e3) => {
    Yt2(i2, "opacity", e3);
  }, Yo2 = (e3) => {
    Go2(e3), Ue2(i2);
  }, qo2 = (e3) => {
    e3.stopPropagation(), e3.target.blur(), eo2();
  }, Jo2 = (e3) => {
    e3.stopPropagation();
    ie2.findIndex((e4) => e4 === i2) !== ie2.length - 1 && (o2(0, ie2 = ie2.filter((e4) => e4 !== i2).concat([i2])), Ue2(i2));
  }, Qo2 = (e3) => {
    e3.stopPropagation(), ei2();
  }, ei2 = () => {
    const e3 = ci(i2);
    e3.id = A();
    const t3 = ce(50, -50);
    if (Mo(e3, "points")) {
      const o3 = rn(e3, ["points"], Te2);
      o3.points.forEach((e4) => {
        e4.x += t3.x, e4.y += t3.y;
      }), an(e3, o3, Te2);
    } else if (vi(e3)) {
      const o3 = rn(e3, ["x1", "y1", "x2", "y2"], Te2);
      o3.x1 += t3.x, o3.y1 += t3.y, o3.x2 += t3.x, o3.y2 += t3.y, an(e3, o3, Te2);
    } else {
      const t4 = rn(e3, ["x", "y"], Te2);
      t4.x += 50, t4.y -= 50, an(e3, t4, Te2);
    }
    ie2.push(e3), Ne2(e3), no2(e3);
  }, ti2 = _l(0, { stiffness: 0.2, damping: 0.7 });
  let oi2;
  Un(e2, ti2, (e3) => o2(17, K2 = e3));
  const ii2 = (e3, t3) => {
    const { disableTextLayout: o3 = [] } = t3;
    return "height" in t3 ? o3.includes("auto-height") ? e3.shapeIconButtonTextLayoutAutoWidth : e3.shapeIconButtonTextLayoutAutoHeight : "width" in t3 ? o3.includes("auto-width") ? e3.shapeIconButtonTextLayoutFixedSize : e3.shapeIconButtonTextLayoutAutoWidth : o3.includes("fixed-size") ? e3.shapeIconButtonTextLayoutAutoHeight : e3.shapeIconButtonTextLayoutFixedSize;
  }, ni2 = (e3, t3) => {
    const { disableTextLayout: o3 = [] } = t3;
    return "height" in t3 ? o3.includes("auto-height") ? e3.shapeTitleButtonTextLayoutAutoWidth : e3.shapeTitleButtonTextLayoutAutoHeight : "width" in t3 ? o3.includes("auto-width") ? e3.shapeTitleButtonTextLayoutFixedSize : e3.shapeTitleButtonTextLayoutAutoWidth : o3.includes("fixed-size") ? e3.shapeTitleButtonTextLayoutAutoHeight : e3.shapeTitleButtonTextLayoutFixedSize;
  };
  let ri2 = false;
  let ai2 = le(), si2 = void 0;
  const li2 = (e3) => {
    qe2(e3), o2(121, Po2 = e3);
  };
  let di2;
  Br(() => {
    Io2(), To2();
  });
  return e2.$$set = (e3) => {
    "uid" in e3 && o2(56, ee2 = e3.uid), "ui" in e3 && o2(55, te2 = e3.ui), "disabled" in e3 && o2(1, oe2 = e3.disabled), "markup" in e3 && o2(0, ie2 = e3.markup), "offset" in e3 && o2(2, ne2 = e3.offset), "contextRotation" in e3 && o2(57, ae2 = e3.contextRotation), "contextFlipX" in e3 && o2(58, de2 = e3.contextFlipX), "contextFlipY" in e3 && o2(59, he2 = e3.contextFlipY), "contextZoom" in e3 && o2(60, me2 = e3.contextZoom), "active" in e3 && o2(61, ve2 = e3.active), "opacity" in e3 && o2(62, ke2 = e3.opacity), "parentRect" in e3 && o2(63, Te2 = e3.parentRect), "rootRect" in e3 && o2(3, Ae2 = e3.rootRect), "utilRect" in e3 && o2(64, Ee2 = e3.utilRect), "hoverColor" in e3 && o2(65, Fe2 = e3.hoverColor), "textInputMode" in e3 && o2(4, ze2 = e3.textInputMode), "oninteractionstart" in e3 && o2(66, Be2 = e3.oninteractionstart), "oninteractionupdate" in e3 && o2(67, De2 = e3.oninteractionupdate), "oninteractionrelease" in e3 && o2(68, We2 = e3.oninteractionrelease), "oninteractionend" in e3 && o2(69, _e2 = e3.oninteractionend), "oninteractioncancel" in e3 && o2(70, Ve2 = e3.oninteractioncancel), "onaddshape" in e3 && o2(71, Ne2 = e3.onaddshape), "onupdateshape" in e3 && o2(72, Ue2 = e3.onupdateshape), "onselectshape" in e3 && o2(73, Xe2 = e3.onselectshape), "onremoveshape" in e3 && o2(74, Ge2 = e3.onremoveshape), "ontapshape" in e3 && o2(75, Ye2 = e3.ontapshape), "onhovershape" in e3 && o2(76, qe2 = e3.onhovershape), "onhovercanvas" in e3 && o2(77, Ke2 = e3.onhovercanvas), "ontapcanvas" in e3 && o2(78, tt2 = e3.ontapcanvas), "beforeSelectShape" in e3 && o2(79, nt2 = e3.beforeSelectShape), "beforeDeselectShape" in e3 && o2(80, rt2 = e3.beforeDeselectShape), "beforeRemoveShape" in e3 && o2(81, at2 = e3.beforeRemoveShape), "beforeUpdateShape" in e3 && o2(82, st2 = e3.beforeUpdateShape), "willRenderShapeControls" in e3 && o2(83, lt2 = e3.willRenderShapeControls), "willRenderShapeTextControls" in e3 && o2(84, ct2 = e3.willRenderShapeTextControls), "willStartInteraction" in e3 && o2(85, dt2 = e3.willStartInteraction), "mapEditorPointToImagePoint" in e3 && o2(86, ut2 = e3.mapEditorPointToImagePoint), "mapImagePointToEditorPoint" in e3 && o2(87, ht2 = e3.mapImagePointToEditorPoint), "eraseRadius" in e3 && o2(88, mt2 = e3.eraseRadius), "selectRadius" in e3 && o2(89, gt2 = e3.selectRadius), "enableButtonFlipVertical" in e3 && o2(90, $t2 = e3.enableButtonFlipVertical), "enableTapToAddText" in e3 && o2(91, xt2 = e3.enableTapToAddText), "enableTextStyleControls" in e3 && o2(5, vt2 = e3.enableTextStyleControls), "locale" in e3 && o2(6, wt2 = e3.locale);
  }, e2.$$.update = () => {
    var t3, n2;
    3 & e2.$$.dirty[0] && o2(125, i2 = !oe2 && ie2 && (_t2() || Kt2())), 2 & e2.$$.dirty[4] && o2(148, r2 = !!i2), 2 & e2.$$.dirty[4] && o2(139, a2 = i2 && Ti(i2)), 32770 & e2.$$.dirty[4] && o2(10, s2 = i2 && !a2 ? i2.id : void 0), 8 & e2.$$.dirty[0] | 2 & e2.$$.dirty[2] | 2 & e2.$$.dirty[4] && o2(13, l2 = Ae2 && i2 && tn(ci(i2), Te2)), 32770 & e2.$$.dirty[4] && o2(123, c2 = !(!i2 || !a2)), 8192 & e2.$$.dirty[0] | 1 & e2.$$.dirty[2] | 2 & e2.$$.dirty[4] && o2(147, d2 = i2 && ke2 && So2(l2) || []), 2 & e2.$$.dirty[4] && o2(149, u2 = i2 && (Wi(t3 = i2) && _i(t3) && true !== t3.disableResize && (Pi(t3) || yi(t3) || xi(t3) || vi(t3) || wi(t3) && Mo(t3, "pathClose"))) && !Si(i2)), 2 & e2.$$.dirty[4] && o2(14, h2 = i2 && ((e3) => Wi(e3) && true !== e3.disableRotate && (Pi(e3) || Mo(e3, "text") || xi(e3)))(i2) && !Si(i2)), 33554434 & e2.$$.dirty[4] && o2(16, p2 = u2 && Mo(i2, "text") && !i2.height ? [[1, 2], [3, 0]] : (!i2 || !vi(i2) && !wi(i2)) && u2), 65536 & e2.$$.dirty[0] | 33554434 & e2.$$.dirty[4] && o2(28, m2 = !!i2 && (!Array.isArray(p2) && u2)), 8388610 & e2.$$.dirty[4] && o2(15, g2 = i2 && d2.length > 1), 33554432 & e2.$$.dirty[2] | 8388608 & e2.$$.dirty[4] && o2(145, $2 = d2.map(ht2)), 4 & e2.$$.dirty[0] | 2097152 & e2.$$.dirty[4] && o2(12, f2 = $2.map((e3) => ce(e3.x - ne2.x, e3.y - ne2.y))), 16777218 & e2.$$.dirty[4] && o2(27, y2 = r2 && (yi(i2) ? !Mo(i2, "disableNewline") || !i2.disableNewline : false === i2.disableNewline)), 33554432 & e2.$$.dirty[2] | 268435456 & e2.$$.dirty[3] && (Po2 && ht2 && !Ci(Po2) && Fi(Po2) ? ((e3) => {
      const t4 = So2(tn(ci(e3), Te2));
      if (!t4)
        return;
      const i3 = t4.map(ht2), n3 = !!e3.pathClose || !wi(e3) && !vi(e3), r3 = { id: "markup-hover", points: i3.map((e4) => ce(e4.x + 1, e4.y + 1)), strokeColor: [0, 0, 0, 0.1], strokeWidth: 2, pathClose: n3 }, a3 = { id: "markup-hover", points: i3, strokeColor: Fe2, strokeWidth: 2, pathClose: n3 }, s3 = te2.filter((e4) => "markup-hover" !== e4.id);
      o2(55, te2 = [...s3, r3, a3]);
    })(Po2) : To2()), 61440 & e2.$$.dirty[0] | 1 & e2.$$.dirty[2] && o2(146, b2 = g2 && h2 && ke2 && f2 && ((e3) => {
      const t4 = Co2(e3), o3 = ht2({ x: t4.origin.x + t4.dir.x, y: t4.origin.y + t4.dir.y });
      return { origin: ht2(t4.origin), position: o3 };
    })(l2)), 4 & e2.$$.dirty[0] | 4194304 & e2.$$.dirty[4] && o2(26, x2 = b2 && ce(b2.position.x - ne2.x, b2.position.y - ne2.y)), 536870912 & e2.$$.dirty[3] | 32770 & e2.$$.dirty[4] && o2(144, v2 = a2 && wi(i2) && si2), 1 & e2.$$.dirty[2] | 3145730 & e2.$$.dirty[4] && i2 && $2 && ke2 > 0 && ((e3, t4, i3) => {
      const n3 = wi(t4), r3 = n3 && Mo(t4, "pathClose"), a3 = r3 && ((e4) => e4.strokeWidth && ((e5, t5) => {
        const o3 = e5.strokeColor;
        return !!o3 && (3 === o3.length || o3[3] > 0);
      })(e4))(t4), s3 = Ti(t4), l3 = Si(t4);
      if (s3 && n3 && !r3)
        return;
      const c3 = [], u3 = [...$2], h3 = u3[u3.length - 1], p3 = u3[0], m3 = (l3 ? 0.05 : 0.1) * e3, g3 = (l3 ? 0.5 : 1) * e3, f3 = [0, 0, 0], y3 = [1, 1, 1], x3 = l3 ? 1 : 1.5;
      Q2.includes(16) && h3 && i3 && Ct2(h3, i3);
      const v3 = (u3.length && r3 && s3 && i3 ? Ce(p3, i3) : 1 / 0) <= 256, w3 = (u3.length && r3 && s3 && i3 ? Ce(h3, i3) : 1 / 0) <= 256;
      !v3 && i3 && u3.push(i3);
      const S3 = u3.length > 1, k3 = !!t4.pathClose || !wi(t4) && !vi(t4) || u3.length > 2 && v3;
      S3 && c3.push({ id: Ro2, points: u3.map((e4) => ce(e4.x + 1, e4.y + 1)), pathClose: k3, strokeColor: f3, strokeWidth: 2, opacity: m3 }), r3 && c3.push(...u3.map((e4) => ({ id: Ro2, ...e4, rx: 2 * x3, ry: 2 * x3, backgroundColor: f3, opacity: m3 }))), b2 && c3.push({ id: Ro2, points: [ce(b2.origin.x + 1, b2.origin.y + 1), ce(b2.position.x + 1, b2.position.y + 1)], strokeColor: f3, strokeWidth: 2, opacity: m3 }), S3 && c3.push({ id: Ro2, points: u3, pathClose: k3, strokeColor: y3, strokeWidth: x3, backgroundColor: s3 && r3 && t4.backgroundColor && t4.backgroundColor[3] > 0 ? t4.backgroundColor : [0, 0, 0, 0], opacity: g3 }), r3 && c3.push(...u3.map((e4) => ({ id: Ro2, ...e4, rx: 3 * x3, ry: 3 * x3, backgroundColor: [0.5, 0.5, 0.5], strokeWidth: x3, strokeColor: y3 }))), r3 && s3 && $2.length >= 3 && c3.push({ ...p3, id: Ro2, rx: x3 * (v3 ? 5 : 4), ry: x3 * (v3 ? 5 : 4), backgroundColor: v3 ? Fe2 : [0.5, 0.5, 0.5], strokeWidth: x3, strokeColor: y3 }), r3 && s3 && a3 && !v3 && d2.length >= 2 && c3.push({ ...h3, id: Ro2, rx: x3 * (w3 ? 5 : 4), ry: x3 * (w3 ? 5 : 4), backgroundColor: w3 ? Fe2 : [0.5, 0.5, 0.5], strokeWidth: x3, strokeColor: y3 }), b2 && c3.push({ id: Ro2, points: [{ x: b2.origin.x, y: b2.origin.y }, { x: b2.position.x, y: b2.position.y }], strokeColor: y3, strokeWidth: x3, opacity: g3 }), o2(55, te2 = te2.filter((e4) => e4.id !== Ro2).concat(c3));
    })(ke2, i2, v2), 2 & e2.$$.dirty[4] && (i2 || Io2()), 1073741824 & e2.$$.dirty[1] && ((e3) => {
      if (!e3)
        return qt2({ _prerender: false });
      const t4 = ie2.find((e4) => e4.isEditing);
      t4 && Gt2(t4, { _prerender: "inline" === ze2 });
    })(ve2), 272 & e2.$$.dirty[0] && Eo2 && "inline" === ze2 && Eo2.focus(), 2 & e2.$$.dirty[4] && o2(143, w2 = i2 && $i(i2)), 524290 & e2.$$.dirty[4] && o2(11, S2 = w2 && false !== Oi(i2) && Si(i2)), 2048 & e2.$$.dirty[0] && o2(138, k2 = S2 ? { ...i2 } : void 0), 2 & e2.$$.dirty[2] | 16384 & e2.$$.dirty[4] && o2(140, C2 = k2 && tn({ ...k2 }, Te2)), 65536 & e2.$$.dirty[4] && o2(142, T2 = C2 && Ko(C2.text, C2)), 327680 & e2.$$.dirty[4] && (P2 = C2 && ot(C2.x, C2.y, T2.width, T2.height)), 2048 & e2.$$.dirty[0] | 2 & e2.$$.dirty[4] && o2(23, R2 = S2 ? i2.text : ""), 2056 & e2.$$.dirty[0] | 2 & e2.$$.dirty[2] | 2 & e2.$$.dirty[4] && o2(141, I2 = Ae2 && i2 && S2 && tn({ ...ci(i2), width: ko(i2.width) ? Math.floor(i2.width) : void 0, height: ko(i2.height) ? Math.floor(i2.height) : void 0 }, Te2)), 2064 & e2.$$.dirty[0] | 131072 & e2.$$.dirty[4] && o2(25, E2 = S2 && ((e3, t4) => {
      const { textAlign: o3 = "left", fontFamily: i3 = "sans-serif", fontWeight: n3 = "normal", fontStyle: r3 = "normal" } = e3, a3 = "!important", s3 = `text-align:${o3}${a3};font-family:${i3}${a3};font-weight:${n3}${a3};font-style:${r3}${a3};`;
      if ("modal" === t4)
        return s3;
      let l3 = e3.fontSize, c3 = 1, d3 = "";
      l3 > 1e3 && No() && (c3 = l3 / 1e3, d3 = `transform-origin:0 0;transform:scale(${c3})`, l3 = 1e3);
      let u3 = e3.lineHeight / c3;
      const h3 = zo(e3.color), p3 = 0.5 * Math.max(0, l3 - u3);
      return `--font-scalar:${c3};--bottom-inset:${p3}px;padding:${p3}px 0 0${a3};color:${h3}${a3};font-size:${l3}px${a3};line-height:${u3}px${a3};${s3};${d3}`;
    })(I2, ze2)), 2052 & e2.$$.dirty[0] | 603979776 & e2.$$.dirty[1] | 131072 & e2.$$.dirty[4] && o2(24, L2 = S2 && ((e3, t4, o3, n3) => {
      let r3, a3;
      e3.width && e3.height ? (r3 = it(e3), a3 = Le(e3)) : (a3 = Ko(i2.text, l2), a3.width = l2.width || a3.width, r3 = ce(e3.x + 0.5 * a3.width, e3.y + 0.5 * a3.height));
      const s3 = Math.max(0, e3.fontSize - e3.lineHeight) + e3.lineHeight, c3 = ht2(r3);
      let d3 = c3.x - t4.x - 0.5 * a3.width, u3 = c3.y - t4.y - 0.5 * a3.height, h3 = e3.flipX, p3 = e3.flipY, m3 = e3.rotation;
      de2 && he2 ? (h3 = !h3, p3 = !p3) : de2 ? (h3 = !h3, m3 = -m3) : he2 && (p3 = !p3, m3 = -m3), m3 += n3;
      const g3 = o3 * (h3 ? -1 : 1), $3 = o3 * (p3 ? -1 : 1);
      return `--line-height:${s3}px;width:${a3.width}px;height:${a3.height}px;transform:translate(${d3}px,${u3}px) rotate(${m3}rad) scale(${g3}, ${$3})`;
    })(I2, ne2, me2, ae2)), 2320 & e2.$$.dirty[0] && S2 && Eo2 && "inline" === ze2 && Lo2(R2), 1073741824 & e2.$$.dirty[3] | 34 & e2.$$.dirty[4] && o2(129, F2 = i2 && !c2 ? i2 : F2), 32 & e2.$$.dirty[4] && o2(131, z2 = F2 && Bi(F2)), 32 & e2.$$.dirty[4] && o2(126, B2 = F2 && Di(F2)), 32 & e2.$$.dirty[4] && o2(128, O2 = F2 && ((e3) => true !== e3.disableDuplicate && _i(e3))(F2)), 32 & e2.$$.dirty[4] && o2(127, D2 = F2 && zi(F2)), 32 & e2.$$.dirty[4] && o2(130, W2 = F2 && ((e3) => true !== e3.disableReorder)(F2)), 32 & e2.$$.dirty[4] && o2(124, _2 = F2 && false !== Oi(F2)), 32 & e2.$$.dirty[4] && o2(132, V2 = F2 && Mo(F2, "backgroundImage") && Li(F2, "opacity")), 2 & e2.$$.dirty[4] && o2(134, N2 = i2 && "html" === i2.format), 1073741824 & e2.$$.dirty[3] | 1026 & e2.$$.dirty[4] && o2(137, H2 = i2 && (!c2 || N2)), 134217728 & e2.$$.dirty[3] | 67117056 & e2.$$.dirty[4] && ti2.set(H2 && !vo2 ? 1 : 0, { hard: false === J2 }), 4096 & e2.$$.dirty[0] | 12288 & e2.$$.dirty[4] && o2(136, U2 = H2 && f2.length ? (n2 = Qe(f2), ye(ce(n2.x + 0.5 * n2.width, n2.y), Cd)) : U2), 512 & e2.$$.dirty[0] | 4 & e2.$$.dirty[2] | 4096 & e2.$$.dirty[4] && o2(135, Z2 = U2 && oi2 && Ee2 && ((e3) => {
      const t4 = Ee2.x, o3 = Ee2.y, i3 = t4 + Ee2.width;
      let n3 = Math.max(e3.x - 0.5 * oi2.width, t4), r3 = Math.max(e3.y - oi2.height - 16, o3);
      return n3 + oi2.width > i3 && (n3 = i3 - oi2.width), ce(n3, r3);
    })(U2)), 131072 & e2.$$.dirty[0] | 2048 & e2.$$.dirty[4] && o2(22, X2 = Z2 && `transform: translate(${Z2.x}px, ${Z2.y}px);opacity:${K2}`), 2048 & e2.$$.dirty[0] && o2(133, G2 = S2 ? "text" : "shape"), 1089 & e2.$$.dirty[0] | 274726912 & e2.$$.dirty[2] | 2047 & e2.$$.dirty[4] && o2(21, Y2 = "text" === G2 && ct2 && N2 ? Ph(() => ct2([["div", "text-styles", { class: "PinturaShapeControlsGroup" }, [...[["bold", { label: "B", style: "font-weight:900;", title: "Bold", shortcut: ["CMD", "B"] }], ["italic", { label: "I", style: "font-family:Times New Roman;font-style:italic;", title: "Italic", shortcut: ["CMD", "I"] }], ["underline", { label: "U", style: "text-decoration:underline;", title: "Underline", shortcut: ["CMD", "U"] }], ["strikeThrough", { label: "S", style: "text-decoration:line-through;", title: "Strikethrough", shortcut: ["CMD", "S"] }]].map(([e3, t4]) => ["Button", "style-" + e3, { onclick: () => document.execCommand(e3), ...t4, style: "font-size:1.25em;text-underline-offset:1px;text-decoration-thickness:1.5px;font-weight:400;" + t4.style }])]], ["div", "text-reset", { class: "PinturaShapeControlsGroup" }, [["Button", "style-reset", { onclick: () => document.execCommand("removeFormat"), style: "font-weight:400;", label: '<span style="font-size:1.25em;font-style:italic;font-family:Times New Roman;text-decoration:underline;">T</span><span style="position:relative;top:.175rem;">&times;</span>', title: "Remove styles" }]]]], s2)) : "shape" === G2 && lt2 && s2 ? Ph(() => lt2([V2 && ["div", "alpha", { class: "PinturaShapeControlsGroup" }, [["Slider", "adjust-opacity", { onrelease: Yo2, onchange: Go2, step: 0.01, value: Mo(i2, "opacity") ? i2.opacity : 1, label: (e3, t4, o3) => Math.round(e3 / o3 * 100) + "%", min: 0, max: 1, direction: "x" }]]], ["div", "beta", { class: "PinturaShapeControlsGroup" }, [z2 && ["Button", "flip-horizontal", { onclick: Zo2, label: wt2.shapeTitleButtonFlipHorizontal, icon: wt2.shapeIconButtonFlipHorizontal, hideLabel: true }], z2 && $t2 && ["Button", "flip-vertical", { onclick: Xo2, label: wt2.shapeTitleButtonFlipVertical, icon: wt2.shapeIconButtonFlipVertical, hideLabel: true }], W2 && ["Button", "to-front", { onclick: Jo2, label: wt2.shapeTitleButtonMoveToFront, icon: wt2.shapeIconButtonMoveToFront, hideLabel: true, disabled: ie2[ie2.length - 1] === F2 }], O2 && ["Button", "duplicate", { onclick: Qo2, label: wt2.shapeTitleButtonDuplicate, icon: wt2.shapeIconButtonDuplicate, shortcut: ["CMD", "D"], hideLabel: true }], D2 && ["Button", "remove", { onclick: qo2, label: wt2.shapeTitleButtonRemove, icon: wt2.shapeIconButtonRemove, shortcut: ["Backspace"], hideLabel: true }]].filter(Boolean)], _2 && B2 && ["div", "gamma", { class: "PinturaShapeControlsGroup" }, [["Button", "text-layout", { onclick: Uo2, label: jd(ni2, wt2, i2), icon: jd(ii2, wt2, i2), hideLabel: true }]]], _2 && ["div", "delta", { class: "PinturaShapeControlsGroup" }, [["Button", "edit-text", { label: wt2.shapeLabelInputText, onclick: jo2 }]]]].filter(Boolean), s2)) : []), 65 & e2.$$.dirty[0] && o2(20, q2 = ie2.filter(Fi).filter((e3) => !Ti(e3)).map((e3) => ({ id: e3.id, color: $i(e3) ? e3.color : vi(e3) ? e3.strokeColor : e3.backgroundColor, name: e3.name || wt2["shapeLabelTool" + Ba(qi(e3))] })));
  }, [ie2, oe2, ne2, Ae2, ze2, vt2, wt2, no2, Eo2, oi2, s2, S2, f2, l2, h2, g2, p2, K2, ri2, di2, q2, Y2, X2, R2, L2, E2, x2, y2, m2, St2, Lt2, (e3) => {
    const { origin: t3 } = e3.detail;
    fo2 = void 0, yo2 = void 0, bo2 = void 0, xo2 = false, $o2 = void 0, clearTimeout(go2), go2 = setTimeout(() => o2(120, vo2 = true), 250);
    const n2 = _t2();
    !n2 || wi(n2) && Mo(n2, "pathClose") || Ht2(), mo2 = ut2(ue(t3));
    const r3 = ho2(mo2, gt2, (e4) => Fi(e4)), a3 = r3.length && r3.shift();
    if (i2 && Si(i2) && Do2(), !a3 && i2 && Si(i2) && ro2(i2), !dt2(t3))
      return;
    if (a3 && Ci(a3))
      return xo2 = true, fo2 = a3, yo2 = ci(fo2), void (bo2 = tn(ci(fo2), Te2));
    $o2 = a3 || void 0;
    !Be2(e3) && a3 && (no2(a3), fo2 = a3, yo2 = ci(fo2), bo2 = tn(ci(fo2), Te2));
  }, (e3) => {
    wo2(), Ve2(e3);
  }, (e3) => {
    const { translation: t3 } = e3.detail;
    if (fo2) {
      if (!_i(fo2))
        return;
      if (Si(fo2))
        return;
      return Bt2(fo2, bo2, t3);
    }
    De2(e3);
  }, (e3) => {
    wo2(), fo2 ? Si(fo2) ? Wo2() : e3.detail.isTap && xo2 && $i(fo2) && false !== Oi(fo2) && ao2(fo2) : We2(e3);
  }, (e3) => {
    const t3 = $o2 && e3.detail.isTap;
    if (e3.detail.isTap && tt2({ target: fo2 || $o2, position: mo2 }), fo2)
      return Ye2(fo2), o3 = fo2, i3 = yo2, JSON.stringify(o3) !== JSON.stringify(i3) && Ue2(fo2), void (fo2 = void 0);
    var o3, i3;
    const n2 = io2(), r3 = !n2 || rt2(n2, $o2 || void 0);
    r3 && oo2({ storePrevious: false }), _e2(e3), r3 && t3 && no2($o2);
  }, (e3) => {
    o2(120, vo2 = true), fo2 = i2, bo2 = l2;
  }, (e3) => {
    if (!fo2)
      return void o2(120, vo2 = false);
    const { translation: t3, indexes: i3, shiftKey: n2 } = e3.detail;
    ((e4, t4, o3, i4, n3) => {
      if (vi(e4) || wi(e4) && Mo(e4, "pathClose")) {
        const [n4] = o3, r3 = Q2.includes(16) ? Ct2 : (e5, t5) => t5;
        let a3, s3, l3;
        if (vi(e4))
          0 === n4 ? (a3 = () => mi(t4), s3 = (e5) => r3(gi(t4), e5), l3 = (e5, t5) => {
            e5.x1 = t5.x, e5.y1 = t5.y;
          }) : 1 === n4 && (a3 = () => gi(t4), s3 = (e5) => r3(mi(t4), e5), l3 = (e5, t5) => {
            e5.x2 = t5.x, e5.y2 = t5.y;
          });
        else {
          const e5 = t4.points;
          a3 = () => e5[n4], s3 = (t5) => {
            const o4 = e5[cf(n4 - 1, e5)], i5 = e5[cf(n4 + 1, e5)];
            r3(o4, t5), r3(i5, t5);
          }, l3 = (e6, t5) => e6.points[n4] = t5;
        }
        const c3 = zt2(a3(), i4);
        s3(c3), l3(e4, c3);
      } else if (Pi(e4) || xi(e4) || yi(e4)) {
        let r3, a3, s3 = false;
        if (xi(e4))
          r3 = et(t4);
        else if (Pi(e4))
          r3 = Je(t4);
        else {
          s3 = true, r3 = Je(t4);
          const e5 = Ko(t4.text, t4);
          r3.height = e5.height;
        }
        e4.aspectRatio ? a3 = e4.aspectRatio : n3.shiftKey && !s3 && (a3 = r3.width / r3.height);
        const l3 = Je(r3), c3 = it(l3), d3 = e4.rotation, u3 = bt(l3), h3 = pt(l3, d3);
        if (1 === o3.length) {
          let t5 = o3[0];
          e4.flipX && (t5 = Ot2[t5]), e4.flipY && (t5 = Dt2[t5]);
          const [n4, r4, s4, l4] = u3, p3 = ht2(h3[t5]);
          be(p3, i4);
          const m3 = ut2(p3), g3 = ce(m3.x - h3[t5].x, m3.y - h3[t5].y), $3 = pe(ue(g3), -d3), f3 = ce(u3[t5].x + $3.x, u3[t5].y + $3.y);
          let y3;
          0 === t5 && (y3 = s4), 1 === t5 && (y3 = l4), 2 === t5 && (y3 = n4), 3 === t5 && (y3 = r4);
          const b3 = Qe([y3, f3]);
          if (a3) {
            const { width: e5, height: t6 } = ft(b3, a3), [o4, i5, n5, r5] = yt(b3);
            b3.width = e5, b3.height = t6, f3.y < y3.y && (b3.y = n5 - t6), f3.x < y3.x && (b3.x = i5 - e5);
          }
          const x3 = pt(b3, d3, c3), v3 = Pe(x3), w3 = pe(x3[0], -d3, v3), S3 = pe(x3[2], -d3, v3), k3 = Qe([w3, S3]);
          kt2(e4, xi(e4) ? se(k3) : k3, Te2);
        } else {
          o3 = o3.map((t6) => (e4.flipX && (t6 = Ot2[t6]), e4.flipY && (t6 = Dt2[t6]), t6));
          const [t5, n4] = o3.map((e5) => h3[e5]), r4 = { x: t5.x + 0.5 * (n4.x - t5.x), y: t5.y + 0.5 * (n4.y - t5.y) }, [l4, p3] = o3.map((e5) => u3[e5]), [m3, g3] = o3.map((e5) => {
            const t6 = e5 + 2;
            return t6 < 4 ? u3[t6] : u3[t6 - 4];
          }), $3 = { x: m3.x + 0.5 * (g3.x - m3.x), y: m3.y + 0.5 * (g3.y - m3.y) }, f3 = ht2(r4);
          be(f3, i4);
          const y3 = ut2(f3), b3 = ce(y3.x - r4.x, y3.y - r4.y), x3 = pe(ue(b3), -d3), v3 = xe(ue(l4), p3), w3 = ye(v3, (e5) => 1 - Math.abs(Math.sign(e5))), S3 = ce(x3.x * w3.x, x3.y * w3.y);
          be(l4, S3), be(p3, S3);
          const k3 = Qe(u3);
          if (a3) {
            let e5 = k3.width, t6 = k3.height;
            0 === w3.y ? t6 = e5 / a3 : e5 = t6 * a3, k3.width = e5, k3.height = t6, 0 === w3.y ? k3.y = $3.y - 0.5 * t6 : k3.x = $3.x - 0.5 * e5;
          }
          const C3 = pt(k3, d3, c3), M2 = Pe(C3), T3 = pe(C3[0], -d3, M2), P3 = pe(C3[2], -d3, M2), R3 = Qe([T3, P3]);
          let I3;
          xi(e4) ? I3 = se(R3) : Pi(e4) ? I3 = R3 : s3 && (I3 = { x: R3.x, y: R3.y, width: R3.width }), kt2(e4, I3, Te2);
        }
      }
      Ut2();
    })(fo2, bo2, i3, t3, { shiftKey: n2 });
  }, (e3) => {
    if (!fo2)
      return void o2(120, vo2 = false);
    no2(fo2);
    const { isTap: t3 } = e3.detail;
    t3 && Ye2(fo2), fo2 = void 0, o2(120, vo2 = false), Ue2(i2);
  }, (e3) => {
    Wt2 = Co2(l2).origin, o2(120, vo2 = true), fo2 = i2, bo2 = l2;
  }, (e3) => {
    if (!fo2)
      return void o2(120, vo2 = false);
    const { translation: t3, shiftKey: i3 } = e3.detail;
    ((e4, t4, o3, i4) => {
      const n2 = uo2(tn(ci(e4), Te2)), r3 = it(n2), a3 = zt2(Wt2, o3);
      let s3 = $e(a3, r3) + Math.PI / 2;
      if (i4.shiftKey) {
        const e5 = Math.PI / 16;
        s3 = e5 * Math.round(s3 / e5) - ae2 % e5;
      }
      kt2(e4, { rotation: s3 }, Te2), Ut2();
    })(fo2, 0, t3, { shiftKey: i3 });
  }, () => {
    fo2 ? (no2(fo2), fo2 = void 0, o2(120, vo2 = false), Ue2(i2)) : o2(120, vo2 = false);
  }, (e3) => {
    const { key: t3 } = e3, o3 = /escape/i.test(t3);
    if (Jt2()) {
      if (o3)
        return e3.preventDefault(), e3.stopPropagation(), ro2(i2);
      /backspace|delete/i.test(t3) && !Ao2(e3.target) && (e3.preventDefault(), eo2()), O2 && "d" === t3 && (e3.metaKey || e3.ctrlKey) && (e3.preventDefault(), e3.stopPropagation(), ei2());
    }
  }, (e3) => {
    const t3 = Oi(i2, e3);
    return true === t3 ? e3 : t3;
  }, Oo2, (e3) => {
    const { target: t3, key: o3 } = e3, n2 = t3.value || t3.innerText, r3 = t3.selectionStart || 0, a3 = t3.selectionEnd || n2.length, s3 = n2.substring(0, r3) + o3 + n2.substring(a3);
    if (Oi(i2, s3) !== s3)
      return e3.preventDefault();
  }, (e3) => fi(i2) && /enter/i.test(e3.code) && false !== i2.disableNewline ? e3.preventDefault() : /arrow/i.test(e3.code) ? e3.stopPropagation() : /escape/i.test(e3.key) ? Wo2() : void 0, (e3) => {
    const { key: t3, ctrlKey: o3, altKey: i3 } = e3;
    if (/enter/i.test(t3) && (o3 || i3))
      return Do2();
  }, Do2, Wo2, ti2, (e3) => {
    const t3 = Kt2();
    t3 && (Si(t3) || _i(t3) && (fo2 = t3, bo2 = tn(ci(fo2), Te2), Bt2(fo2, bo2, e3.detail)));
  }, (e3) => {
    o2(18, ri2 = true);
  }, ({ relatedTarget: e3 }) => {
    e3 && e3.classList.contains("shape-selector__button") || o2(18, ri2 = false);
  }, (e3) => {
    if ("touch" === e3.pointerType)
      return;
    (vo2 || go2) && li2(void 0);
    const t3 = ff(e3, Ae2), i3 = ye(ut2(t3), (e4) => Math.round(e4));
    if (fe(i3, ai2))
      return;
    if (ai2 = ue(i3), o2(122, si2 = t3), vo2 || go2)
      return;
    if (Ke2(t3, i3), c2)
      return;
    const [n2] = ho2(i3, 0, Fi);
    n2 && Ti(n2) || li2(n2);
  }, te2, ee2, ae2, de2, he2, me2, ve2, ke2, Te2, Ee2, Fe2, Be2, De2, We2, _e2, Ve2, Ne2, Ue2, Xe2, Ge2, Ye2, qe2, Ke2, tt2, nt2, rt2, at2, st2, lt2, ct2, dt2, ut2, ht2, mt2, gt2, $t2, xt2, (e3, t3 = {}) => {
    let o3, i3, n2, r3 = xi(e3), a3 = $i(e3), s3 = "relative" === t3.position;
    const l3 = "step" === t3.inputMode;
    if (wi(e3)) {
      if (l3) {
        let t4 = false;
        const r4 = (e4, o4) => {
          const i4 = _t2(), n3 = e4 && ce(If(e4.x, Te2.width), If(e4.y, Te2.height)), r5 = n3 && ht2(n3);
          Q2.includes(16) && r5 && Ct2(r5, o4);
          const a4 = ut2(o4), l4 = i4.points.length ? i4.points[0] : a4, c3 = ce(If(l4.x, Te2.width), If(l4.y, Te2.height)), d3 = ht2(c3), u3 = Ce(d3, o4);
          if (!t4 && 1 === i4.points.length && u3 < 36)
            return jt2();
          if (i4.points.length > 2 && u3 <= 256) {
            i4.pathClose = true, no2(i4);
            const e5 = Ht2();
            return void Ne2(e5);
          }
          const h3 = i4.strokeWidth && i4.strokeColor && (void 0 === i4.strokeColor[3] || i4.strokeColor[3] > 0), p3 = Ce(r5, o4);
          if (h3 && i4.points.length > 1 && p3 < 256) {
            i4.pathClose = false, i4.backgroundColor = [0, 0, 0, 0], no2(i4);
            const e5 = Ht2();
            Ne2(e5);
          } else if (!(i4.points.length > 0 && p3 < 100))
            return s3 ? Af(a4, Te2) : a4;
        };
        return { start: (e4) => {
          const { origin: a4 } = e4.detail;
          i3 = 4, o3 = ue(a4), n2 = ue(a4);
          const s4 = _t2();
          if (s4) {
            const e5 = s4.points[s4.points.length - 1], t5 = r4(e5, o3);
            return t5 && (s4.points = [...s4.points, t5]), Ut2();
          }
          t4 = true;
        }, update: (e4) => {
          if (!t4)
            return;
          const i4 = _t2();
          if (!i4)
            return;
          const n3 = i4.points[0], a4 = r4(n3, ce(o3.x + e4.detail.translation.x, o3.y + e4.detail.translation.y));
          a4 && (i4.points[1] = a4, Ut2());
        }, release: (e4) => e4.detail.preventInertia(), cancel: (e4) => jt2(), end: (i4) => {
          if (!t4)
            return;
          const n3 = ut2(o3), r5 = s3 ? Af(n3, Te2) : n3, { isTap: a4 } = i4.detail;
          if (a4) {
            if (ho2(n3, 0, Fi).length)
              return jt2();
          }
          Nt2({ ...e3, points: [r5] });
        } };
      }
      return { start: (t4) => {
        const { origin: r4 } = t4.detail;
        i3 = 4, o3 = ue(r4), n2 = ue(r4);
        const a4 = ut2(r4), l4 = s3 ? Af(a4, Te2) : a4;
        Nt2({ ...e3, points: [l4] });
      }, update: (e4) => {
        const t4 = _t2(), { translation: r4 } = e4.detail, a4 = ce(o3.x + r4.x, o3.y + r4.y), l4 = Me(n2, a4);
        if (re(l4, 5) <= i3)
          return;
        const c3 = $e(a4, n2), d3 = i3 - l4;
        n2.x += d3 * Math.cos(c3), n2.y += d3 * Math.sin(c3);
        const u3 = ut2(n2), h3 = s3 ? Af(u3, Te2) : u3;
        t4.points = t4.points.concat(h3), Ut2();
      }, release: (e4) => e4.detail.preventInertia(), cancel: () => {
        jt2();
      }, end: (e4) => {
        if (e4.detail.isTap)
          return jt2();
        const t4 = Ht2();
        Ne2(t4);
      } };
    }
    return r3 || a3 || bi(e3) ? { start: (t4) => {
      const { origin: i4 } = t4.detail;
      o3 = ue(i4);
      const n3 = ut2(o3), a4 = s3 ? Af(n3, Te2) : n3, l4 = -1 * Ft2(ae2, de2, he2), c3 = { ...e3, rotation: l4, ...a4 };
      c3.flipX = de2, c3.flipY = he2, delete c3.position, c3.opacity = 0;
      (r3 ? ["rx", "ry"] : ["width", "height"]).forEach((e4) => {
        c3[e4] = s3 ? "0%" : 0;
      }), Nt2(c3);
    }, update: (e4) => {
      const t4 = _t2();
      t4.opacity = 1;
      const { aspectRatio: i4 } = t4;
      let { translation: n3 } = e4.detail;
      if (i4) {
        const e5 = Math.abs(n3.x) * i4;
        n3.x = n3.x, n3.y = e5 * Math.sign(n3.y);
      }
      const a4 = ce(o3.x + n3.x, o3.y + n3.y), s4 = ut2(o3), l4 = ut2(a4), c3 = { x: s4.x + 0.5 * (l4.x - s4.x), y: s4.y + 0.5 * (l4.y - s4.y) }, d3 = Ft2(ae2, de2, he2);
      pe(s4, d3, c3), pe(l4, d3, c3);
      const u3 = Math.min(s4.x, l4.x), h3 = Math.min(s4.y, l4.y);
      let p3 = Math.max(s4.x, l4.x) - u3, m3 = Math.max(s4.y, l4.y) - h3, g3 = {};
      r3 ? (g3.x = u3 + 0.5 * p3, g3.y = h3 + 0.5 * m3, g3.rx = 0.5 * p3, g3.ry = 0.5 * m3) : (g3.x = u3, g3.y = h3, g3.width = p3, g3.height = m3), kt2(t4, g3, Te2), Ut2();
    }, release: (e4) => {
      e4.detail.preventInertia();
    }, cancel: (e4) => {
      jt2();
    }, end: (e4) => {
      const t4 = _t2();
      if (e4.detail.isTap) {
        if (!$i(t4) || !xt2 || $o2)
          return jt2();
        delete t4.width, delete t4.height, false !== t4.disableNewline && delete t4.textAlign;
        const e5 = tn({ ...t4 }, Te2), i4 = Ko(t4.text, e5), n3 = ut2({ x: o3.x, y: o3.y - 0.5 * i4.height }), r4 = ut2({ x: o3.x + i4.width, y: o3.y + 0.5 * i4.height }), a4 = { x: n3.x + 0.5 * (r4.x - n3.x), y: n3.y + 0.5 * (r4.y - n3.y) }, s4 = Ft2(ae2, de2, he2);
        pe(n3, s4, a4), pe(r4, s4, a4);
        let l4 = Math.min(n3.x, r4.x), c3 = Math.min(n3.y, r4.y);
        l4 < 0 && (l4 = 0), c3 < 0 && (c3 = 0), l4 + i4.width > Te2.width && (l4 = Te2.width - i4.width), c3 + i4.height > Te2.height && (c3 = Te2.height - i4.height), t4.x = M(t4.x) ? Fo(l4, Te2.width) : l4, t4.y = M(t4.y) ? Fo(c3, Te2.height) : c3;
      }
      if (t4.opacity = 1, !$i(t4)) {
        const e5 = Ht2();
        Ne2(e5);
      }
      no2(t4), $i(t4) && ao2(t4);
    } } : vi(e3) ? { start: (t4) => {
      const { origin: i4 } = t4.detail, n3 = ut2(i4), r4 = ye(n3, Cd);
      o3 = ue(i4), Nt2({ ...e3, x1: s3 ? Fo(r4.x, Te2.width) : r4.x, y1: s3 ? Fo(r4.y, Te2.height) : r4.y, x2: s3 ? Fo(r4.x, Te2.width) : r4.x, y2: s3 ? Fo(r4.y, Te2.height) : r4.y, opacity: 0 });
    }, update: (e4) => {
      const t4 = _t2(), { translation: i4 } = e4.detail, n3 = be(ue(o3), i4);
      if (Q2.includes(16)) {
        const e5 = Me(o3, n3), t5 = $e(o3, n3), i5 = Math.PI / 4, r5 = i5 * Math.round(t5 / i5);
        n3.x = o3.x + e5 * Math.cos(r5), n3.y = o3.y + e5 * Math.sin(r5);
      }
      const r4 = ut2(n3);
      Gt2(t4, { x2: s3 ? Fo(r4.x, Te2.width) : r4.x, y2: s3 ? Fo(r4.y, Te2.height) : r4.y, opacity: 1 }), Ut2();
    }, release: (e4) => e4.detail.preventInertia(), cancel: (e4) => {
      jt2();
    }, end: (e4) => {
      const t4 = _t2();
      if (e4.detail.isTap)
        return jt2();
      t4.opacity = 1;
      const o4 = Ht2();
      Ne2(o4), no2(o4);
    } } : void 0;
  }, () => {
    let e3, t3;
    const o3 = mt2 * mt2, i3 = (e4, t4, i4 = false) => {
      const n2 = Ce(e4, t4);
      if (!i4 && n2 < 2)
        return false;
      const r3 = ie2.filter((e5) => !e5.disableErase);
      let a3;
      a3 = n2 < o3 ? ho2(ut2(t4), mt2) : po2(r3, ut2(e4), ut2(t4), mt2);
      return lo2(a3).forEach(Ge2), true;
    };
    return { start: (o4) => {
      e3 = ce(Math.round(o4.detail.origin.x), Math.round(o4.detail.origin.y)), i3(e3, e3, true), t3 = e3;
    }, update: (o4) => {
      const { translation: n2 } = o4.detail, r3 = ce(Math.round(e3.x + n2.x), Math.round(e3.y + n2.y));
      i3(t3, r3) && (t3 = ue(r3));
    }, release: (e4) => e4.detail.preventInertia(), end: () => {
    } };
  }, _t2, Vt2, Nt2, Ht2, jt2, (e3 = {}) => ({ id: A(), ...e3 }), Ut2, Zt2, Xt2, Gt2, Yt2, (e3, t3, o3 = true) => {
    ie2.forEach((o4) => Yt2(o4, e3, t3, false)), o3 && Ut2();
  }, qt2, Kt2, Jt2, Qt2, eo2, oo2, ro2, ao2, so2, lo2, co2, uo2, ho2, po2, vo2, Po2, si2, c2, _2, i2, B2, D2, O2, F2, W2, z2, V2, G2, N2, Z2, U2, H2, k2, a2, C2, I2, T2, w2, v2, $2, b2, d2, r2, u2, J2, function(t3) {
    _r.call(this, e2, t3);
  }, (e3) => no2(ie2[e3]), function(e3) {
    Nr[e3 ? "unshift" : "push"](() => {
      Eo2 = e3, o2(8, Eo2);
    });
  }, function() {
    R2 = this.value, o2(23, R2), o2(11, S2), o2(125, i2), o2(143, w2), o2(1, oe2), o2(0, ie2);
  }, function(e3) {
    Nr[e3 ? "unshift" : "push"](() => {
      Eo2 = e3, o2(8, Eo2);
    });
  }, () => {
    di2 && di2.focus();
  }, (e3) => o2(9, oi2 = e3.detail), function(e3) {
    Nr[e3 ? "unshift" : "push"](() => {
      di2 = e3, o2(19, di2);
    });
  }, (e3) => ff(e3, Ae2)];
}
var Hf = class extends wa {
  constructor(e2) {
    super(), va(this, e2, Nf, _f, Nn, { uid: 56, ui: 55, disabled: 1, markup: 0, offset: 2, contextRotation: 57, contextFlipX: 58, contextFlipY: 59, contextZoom: 60, active: 61, opacity: 62, parentRect: 63, rootRect: 3, utilRect: 64, hoverColor: 65, textInputMode: 4, oninteractionstart: 66, oninteractionupdate: 67, oninteractionrelease: 68, oninteractionend: 69, oninteractioncancel: 70, onaddshape: 71, onupdateshape: 72, onselectshape: 73, onremoveshape: 74, ontapshape: 75, onhovershape: 76, onhovercanvas: 77, ontapcanvas: 78, beforeSelectShape: 79, beforeDeselectShape: 80, beforeRemoveShape: 81, beforeUpdateShape: 82, willRenderShapeControls: 83, willRenderShapeTextControls: 84, willStartInteraction: 85, mapEditorPointToImagePoint: 86, mapImagePointToEditorPoint: 87, eraseRadius: 88, selectRadius: 89, enableButtonFlipVertical: 90, enableTapToAddText: 91, enableTextStyleControls: 5, locale: 6, createShape: 92, eraseShape: 93, getMarkupItemDraft: 94, getMarkupItemDraftIndex: 95, addMarkupItemDraft: 96, confirmMarkupItemDraft: 97, discardMarkupItemDraft: 98, createMarkupItem: 99, syncShapes: 100, addShape: 101, removeMarkupShapeProps: 102, updateMarkupShape: 103, updateMarkupShapeProperty: 104, updateMarkupItemsShapeProperty: 105, updateMarkupShapeItems: 106, getActiveMarkupItem: 107, hasActiveMarkupItem: 108, removeShape: 109, removeActiveMarkupItem: 110, blurShapes: 111, selectShape: 7, deselectMarkupItem: 112, editMarkupItem: 113, finishEditMarkupItem: 114, removeMarkupItems: 115, getTextShapeRect: 116, getMarkupShapeRect: 117, getShapesNearPosition: 118, getShapesBetweenPoints: 119 }, null, [-1, -1, -1, -1, -1, -1, -1, -1]);
  }
  get createShape() {
    return this.$$.ctx[92];
  }
  get eraseShape() {
    return this.$$.ctx[93];
  }
  get getMarkupItemDraft() {
    return this.$$.ctx[94];
  }
  get getMarkupItemDraftIndex() {
    return this.$$.ctx[95];
  }
  get addMarkupItemDraft() {
    return this.$$.ctx[96];
  }
  get confirmMarkupItemDraft() {
    return this.$$.ctx[97];
  }
  get discardMarkupItemDraft() {
    return this.$$.ctx[98];
  }
  get createMarkupItem() {
    return this.$$.ctx[99];
  }
  get syncShapes() {
    return this.$$.ctx[100];
  }
  get addShape() {
    return this.$$.ctx[101];
  }
  get removeMarkupShapeProps() {
    return this.$$.ctx[102];
  }
  get updateMarkupShape() {
    return this.$$.ctx[103];
  }
  get updateMarkupShapeProperty() {
    return this.$$.ctx[104];
  }
  get updateMarkupItemsShapeProperty() {
    return this.$$.ctx[105];
  }
  get updateMarkupShapeItems() {
    return this.$$.ctx[106];
  }
  get getActiveMarkupItem() {
    return this.$$.ctx[107];
  }
  get hasActiveMarkupItem() {
    return this.$$.ctx[108];
  }
  get removeShape() {
    return this.$$.ctx[109];
  }
  get removeActiveMarkupItem() {
    return this.$$.ctx[110];
  }
  get blurShapes() {
    return this.$$.ctx[111];
  }
  get selectShape() {
    return this.$$.ctx[7];
  }
  get deselectMarkupItem() {
    return this.$$.ctx[112];
  }
  get editMarkupItem() {
    return this.$$.ctx[113];
  }
  get finishEditMarkupItem() {
    return this.$$.ctx[114];
  }
  get removeMarkupItems() {
    return this.$$.ctx[115];
  }
  get getTextShapeRect() {
    return this.$$.ctx[116];
  }
  get getMarkupShapeRect() {
    return this.$$.ctx[117];
  }
  get getShapesNearPosition() {
    return this.$$.ctx[118];
  }
  get getShapesBetweenPoints() {
    return this.$$.ctx[119];
  }
};
function jf(e2, t2, o2) {
  const i2 = e2.slice();
  return i2[9] = t2[o2], i2;
}
function Uf(e2, t2) {
  let o2, i2, n2, r2, a2, s2, l2, c2 = jd(t2[9].componentProps.title, t2[1]) + "";
  const d2 = [t2[9].componentProps];
  var u2 = t2[9].component;
  function h2(e3) {
    let t3 = {};
    for (let e4 = 0; e4 < d2.length; e4 += 1)
      t3 = On(t3, d2[e4]);
    return { props: t3 };
  }
  return u2 && (a2 = Mr(u2, h2())), { key: e2, first: null, c() {
    o2 = hr("li"), i2 = hr("span"), n2 = mr(c2), r2 = gr(), a2 && ya(a2.$$.fragment), s2 = gr(), xr(i2, "class", "PinturaShapeStyleLabel"), xr(o2, "class", "PinturaShapeStyle"), this.first = o2;
  }, m(e3, t3) {
    dr(e3, o2, t3), sr(o2, i2), sr(i2, n2), sr(o2, r2), a2 && ba(a2, o2, null), sr(o2, s2), l2 = true;
  }, p(e3, i3) {
    t2 = e3, (!l2 || 3 & i3) && c2 !== (c2 = jd(t2[9].componentProps.title, t2[1]) + "") && wr(n2, c2);
    const r3 = 1 & i3 ? ga(d2, [$a(t2[9].componentProps)]) : {};
    if (u2 !== (u2 = t2[9].component)) {
      if (a2) {
        ra();
        const e4 = a2;
        la(e4.$$.fragment, 1, 0, () => {
          xa(e4, 1);
        }), aa();
      }
      u2 ? (a2 = Mr(u2, h2()), ya(a2.$$.fragment), sa(a2.$$.fragment, 1), ba(a2, o2, s2)) : a2 = null;
    } else
      u2 && a2.$set(r3);
  }, i(e3) {
    l2 || (a2 && sa(a2.$$.fragment, e3), l2 = true);
  }, o(e3) {
    a2 && la(a2.$$.fragment, e3), l2 = false;
  }, d(e3) {
    e3 && ur(o2), a2 && xa(a2);
  } };
}
function Zf(e2) {
  let t2, o2, i2 = [], n2 = /* @__PURE__ */ new Map(), r2 = e2[0];
  const a2 = (e3) => e3[9].id;
  for (let t3 = 0; t3 < r2.length; t3 += 1) {
    let o3 = jf(e2, r2, t3), s2 = a2(o3);
    n2.set(s2, i2[t3] = Uf(s2, o3));
  }
  return { c() {
    t2 = hr("ul");
    for (let e3 = 0; e3 < i2.length; e3 += 1)
      i2[e3].c();
    xr(t2, "class", "PinturaShapeStyleList");
  }, m(e3, n3) {
    dr(e3, t2, n3);
    for (let e4 = 0; e4 < i2.length; e4 += 1)
      i2[e4].m(t2, null);
    o2 = true;
  }, p(e3, o3) {
    3 & o3 && (r2 = e3[0], ra(), i2 = ma(i2, o3, a2, 1, e3, r2, n2, t2, pa, Uf, null, jf), aa());
  }, i(e3) {
    if (!o2) {
      for (let e4 = 0; e4 < r2.length; e4 += 1)
        sa(i2[e4]);
      o2 = true;
    }
  }, o(e3) {
    for (let e4 = 0; e4 < i2.length; e4 += 1)
      la(i2[e4]);
    o2 = false;
  }, d(e3) {
    e3 && ur(t2);
    for (let e4 = 0; e4 < i2.length; e4 += 1)
      i2[e4].d();
  } };
}
function Xf(e2) {
  let t2, o2, i2;
  return o2 = new ad({ props: { class: "PinturaShapeStyles", elasticity: e2[2], $$slots: { default: [Zf] }, $$scope: { ctx: e2 } } }), { c() {
    t2 = hr("div"), ya(o2.$$.fragment), xr(t2, "style", e2[3]);
  }, m(e3, n2) {
    dr(e3, t2, n2), ba(o2, t2, null), i2 = true;
  }, p(e3, [n2]) {
    const r2 = {};
    4 & n2 && (r2.elasticity = e3[2]), 4099 & n2 && (r2.$$scope = { dirty: n2, ctx: e3 }), o2.$set(r2), (!i2 || 8 & n2) && xr(t2, "style", e3[3]);
  }, i(e3) {
    i2 || (sa(o2.$$.fragment, e3), i2 = true);
  }, o(e3) {
    la(o2.$$.fragment, e3), i2 = false;
  }, d(e3) {
    e3 && ur(t2), xa(o2);
  } };
}
function Gf(e2, t2, o2) {
  let i2, n2, r2, { isActive: a2 = false } = t2, { controls: s2 = [] } = t2, { locale: l2 } = t2, { scrollElasticity: c2 } = t2;
  const d2 = Wr("isAnimated");
  Un(e2, d2, (e3) => o2(8, r2 = e3));
  const u2 = _l(0, { stiffness: 0.25, damping: 0.9 });
  return Un(e2, u2, (e3) => o2(7, n2 = e3)), e2.$$set = (e3) => {
    "isActive" in e3 && o2(6, a2 = e3.isActive), "controls" in e3 && o2(0, s2 = e3.controls), "locale" in e3 && o2(1, l2 = e3.locale), "scrollElasticity" in e3 && o2(2, c2 = e3.scrollElasticity);
  }, e2.$$.update = () => {
    320 & e2.$$.dirty && u2.set(a2 ? 1 : 0, { hard: false === r2 }), 192 & e2.$$.dirty && o2(3, i2 = `opacity:${n2};${a2 ? "" : "pointer-events:none;"}${n2 <= 0 ? "visibility:hidden" : ""}`);
  }, [s2, l2, c2, i2, d2, u2, a2, n2, r2];
}
var Yf = class extends wa {
  constructor(e2) {
    super(), va(this, e2, Gf, Xf, Nn, { isActive: 6, controls: 0, locale: 1, scrollElasticity: 2 });
  }
};
function qf(e2, t2, o2) {
  const i2 = e2.slice();
  return i2[12] = t2[o2].key, i2[3] = t2[o2].controls, i2[13] = t2[o2].isActive, i2;
}
function Kf(e2, t2) {
  let o2, i2, n2;
  return i2 = new Yf({ props: { isActive: t2[13], controls: t2[3], locale: t2[1], scrollElasticity: t2[2] } }), { key: e2, first: null, c() {
    o2 = $r(), ya(i2.$$.fragment), this.first = o2;
  }, m(e3, t3) {
    dr(e3, o2, t3), ba(i2, e3, t3), n2 = true;
  }, p(e3, o3) {
    t2 = e3;
    const n3 = {};
    16 & o3 && (n3.isActive = t2[13]), 16 & o3 && (n3.controls = t2[3]), 2 & o3 && (n3.locale = t2[1]), 4 & o3 && (n3.scrollElasticity = t2[2]), i2.$set(n3);
  }, i(e3) {
    n2 || (sa(i2.$$.fragment, e3), n2 = true);
  }, o(e3) {
    la(i2.$$.fragment, e3), n2 = false;
  }, d(e3) {
    e3 && ur(o2), xa(i2, e3);
  } };
}
function Jf(e2) {
  let t2, o2, i2, n2 = [], r2 = /* @__PURE__ */ new Map(), a2 = e2[4];
  const s2 = (e3) => e3[12];
  for (let t3 = 0; t3 < a2.length; t3 += 1) {
    let o3 = qf(e2, a2, t3), i3 = s2(o3);
    r2.set(i3, n2[t3] = Kf(i3, o3));
  }
  return { c() {
    t2 = hr("div");
    for (let e3 = 0; e3 < n2.length; e3 += 1)
      n2[e3].c();
    xr(t2, "class", o2 = hc(["PinturaShapeStyleEditor", e2[0]]));
  }, m(e3, o3) {
    dr(e3, t2, o3);
    for (let e4 = 0; e4 < n2.length; e4 += 1)
      n2[e4].m(t2, null);
    i2 = true;
  }, p(e3, [l2]) {
    22 & l2 && (a2 = e3[4], ra(), n2 = ma(n2, l2, s2, 1, e3, a2, r2, t2, pa, Kf, null, qf), aa()), (!i2 || 1 & l2 && o2 !== (o2 = hc(["PinturaShapeStyleEditor", e3[0]]))) && xr(t2, "class", o2);
  }, i(e3) {
    if (!i2) {
      for (let e4 = 0; e4 < a2.length; e4 += 1)
        sa(n2[e4]);
      i2 = true;
    }
  }, o(e3) {
    for (let e4 = 0; e4 < n2.length; e4 += 1)
      la(n2[e4]);
    i2 = false;
  }, d(e3) {
    e3 && ur(t2);
    for (let e4 = 0; e4 < n2.length; e4 += 1)
      n2[e4].d();
  } };
}
function Qf(e2, t2, o2) {
  let i2, n2, r2, { class: a2 } = t2, { controls: s2 = {} } = t2, { shape: l2 } = t2, { onchange: c2 } = t2, { locale: d2 } = t2, { scrollElasticity: u2 } = t2;
  const h2 = [];
  return e2.$$set = (e3) => {
    "class" in e3 && o2(0, a2 = e3.class), "controls" in e3 && o2(3, s2 = e3.controls), "shape" in e3 && o2(5, l2 = e3.shape), "onchange" in e3 && o2(6, c2 = e3.onchange), "locale" in e3 && o2(1, d2 = e3.locale), "scrollElasticity" in e3 && o2(2, u2 = e3.scrollElasticity);
  }, e2.$$.update = () => {
    8 & e2.$$.dirty && o2(8, i2 = Object.keys(s2).filter((e3) => s2[e3])), 288 & e2.$$.dirty && o2(7, n2 = l2 && Object.keys(l2).length && i2 && Li(l2) ? ((e3) => i2.filter((t3) => t3.split("_").every((t4) => Mo(e3, t4) && Li(e3, t4))).map((t3) => {
      const o3 = t3.split("_"), i3 = o3.length > 1 ? o3.map((t4) => e3[t4]) : e3[t3];
      let [n3, r3] = s2[t3];
      if (M(n3))
        if (s2[n3]) {
          const e4 = { ...r3 };
          [n3, r3] = s2[n3], r3 = { ...r3, ...e4 };
        } else {
          if ("Dropdown" !== n3)
            return;
          n3 = Eu;
        }
      const a3 = T(r3.options) ? r3.options(e3) : r3.options;
      return { id: t3, component: n3, componentProps: { ...r3, options: a3, locale: d2, value: i3, optionLabelClass: "PinturaButtonLabel", onchange: (i4) => {
        const n4 = S(i4) && !To(i4) ? i4.value : i4;
        r3.onchange && r3.onchange(n4, e3);
        const a4 = o3.length > 1 ? o3.reduce((e4, t4, o4) => ({ ...e4, [t4]: Array.isArray(n4) ? n4[o4] : n4 }), {}) : { [t3]: n4 };
        c2(a4);
      } } };
    }).filter(Boolean))(l2) : []), 160 & e2.$$.dirty && o2(4, r2 = ((e3, t3) => {
      let o3 = h2.find((t4) => t4.key === e3);
      return o3 || (o3 = { key: e3, controls: t3 }, h2.push(o3)), h2.forEach((e4) => e4.isActive = false), o3.controls = t3, o3.isActive = true, h2;
    })(l2 && Object.keys(l2).length ? Object.keys(l2).join("_") : "none", n2 || []));
  }, [a2, d2, u2, s2, r2, l2, c2, n2, i2];
}
var ey = class extends wa {
  constructor(e2) {
    super(), va(this, e2, Qf, Jf, Nn, { class: 0, controls: 3, shape: 5, onchange: 6, locale: 1, scrollElasticity: 2 });
  }
};
var { document: ty } = ua;
function oy(e2) {
  let t2, o2, i2, n2;
  return { c() {
    t2 = gr(), o2 = hr("button"), xr(o2, "class", "PinturaDragButton"), xr(o2, "type", "button"), xr(o2, "title", e2[1]), o2.disabled = e2[2];
  }, m(r2, a2) {
    dr(r2, t2, a2), dr(r2, o2, a2), o2.innerHTML = e2[0], e2[11](o2), i2 || (n2 = [fr(ty.body, "load", e2[5], true), fr(ty.body, "error", e2[6], true), fr(o2, "pointerdown", e2[4])], i2 = true);
  }, p(e3, [t3]) {
    1 & t3 && (o2.innerHTML = e3[0]), 2 & t3 && xr(o2, "title", e3[1]), 4 & t3 && (o2.disabled = e3[2]);
  }, i: zn, o: zn, d(r2) {
    r2 && ur(t2), r2 && ur(o2), e2[11](null), i2 = false, _n(n2);
  } };
}
function iy(e2, t2, o2) {
  let i2, { html: r2 } = t2, { title: a2 } = t2, { onclick: s2 } = t2, { disabled: l2 = false } = t2, { ongrab: c2 = n } = t2, { ondrag: d2 = n } = t2, { ondrop: u2 = n } = t2;
  const h2 = (e3) => Ce(p2, ce(e3.pageX, e3.pageY)) < 256;
  let p2;
  const m2 = (e3) => {
    document.documentElement.removeEventListener("pointermove", g2), document.documentElement.removeEventListener("pointerup", m2);
    const t3 = ce(e3.pageX, e3.pageY);
    if (Ce(p2, t3) < 32)
      return s2(e3);
    h2(e3) || u2(e3);
  }, g2 = (e3) => {
    h2(e3) || d2(e3);
  }, $2 = (e3) => i2 && i2.contains(e3) && "IMG" === e3.nodeName;
  return e2.$$set = (e3) => {
    "html" in e3 && o2(0, r2 = e3.html), "title" in e3 && o2(1, a2 = e3.title), "onclick" in e3 && o2(7, s2 = e3.onclick), "disabled" in e3 && o2(2, l2 = e3.disabled), "ongrab" in e3 && o2(8, c2 = e3.ongrab), "ondrag" in e3 && o2(9, d2 = e3.ondrag), "ondrop" in e3 && o2(10, u2 = e3.ondrop);
  }, e2.$$.update = () => {
    8 & e2.$$.dirty && i2 && i2.querySelector("img") && o2(3, i2.dataset.loader = true, i2);
  }, [r2, a2, l2, i2, (e3) => {
    p2 = ce(e3.pageX, e3.pageY), c2(e3), document.documentElement.addEventListener("pointermove", g2), document.documentElement.addEventListener("pointerup", m2);
  }, ({ target: e3 }) => {
    $2(e3) && o2(3, i2.dataset.load = true, i2);
  }, ({ target: e3 }) => {
    $2(e3) && o2(3, i2.dataset.error = true, i2);
  }, s2, c2, d2, u2, function(e3) {
    Nr[e3 ? "unshift" : "push"](() => {
      i2 = e3, o2(3, i2);
    });
  }];
}
var ny = class extends wa {
  constructor(e2) {
    super(), va(this, e2, iy, oy, Nn, { html: 0, title: 1, onclick: 7, disabled: 2, ongrab: 8, ondrag: 9, ondrop: 10 });
  }
};
function ry(e2, t2, o2) {
  const i2 = e2.slice();
  return i2[14] = t2[o2], i2;
}
function ay(e2, t2) {
  let o2, i2, n2, r2, a2, s2, l2;
  function c2() {
    return t2[10](t2[14]);
  }
  function d2(...e3) {
    return t2[11](t2[14], ...e3);
  }
  function u2(...e3) {
    return t2[12](t2[14], ...e3);
  }
  function h2(...e3) {
    return t2[13](t2[14], ...e3);
  }
  return i2 = new ny({ props: { onclick: c2, ongrab: d2, ondrag: u2, ondrop: h2, disabled: t2[1] || t2[14].disabled, title: t2[14].title, html: t2[14].thumb } }), { key: e2, first: null, c() {
    o2 = hr("li"), ya(i2.$$.fragment), n2 = gr(), xr(o2, "class", "PinturaShapePreset"), xr(o2, "style", t2[6]), this.first = o2;
  }, m(e3, c3) {
    dr(e3, o2, c3), ba(i2, o2, null), sr(o2, n2), a2 = true, s2 || (l2 = er(r2 = t2[8].call(null, o2, t2[14])), s2 = true);
  }, p(e3, n3) {
    t2 = e3;
    const s3 = {};
    5 & n3 && (s3.onclick = c2), 9 & n3 && (s3.ongrab = d2), 17 & n3 && (s3.ondrag = u2), 33 & n3 && (s3.ondrop = h2), 3 & n3 && (s3.disabled = t2[1] || t2[14].disabled), 1 & n3 && (s3.title = t2[14].title), 1 & n3 && (s3.html = t2[14].thumb), i2.$set(s3), (!a2 || 64 & n3) && xr(o2, "style", t2[6]), r2 && Vn(r2.update) && 1 & n3 && r2.update.call(null, t2[14]);
  }, i(e3) {
    a2 || (sa(i2.$$.fragment, e3), a2 = true);
  }, o(e3) {
    la(i2.$$.fragment, e3), a2 = false;
  }, d(e3) {
    e3 && ur(o2), xa(i2), s2 = false, l2();
  } };
}
function sy(e2) {
  let t2, o2, i2 = [], n2 = /* @__PURE__ */ new Map(), r2 = e2[0];
  const a2 = (e3) => e3[14].id;
  for (let t3 = 0; t3 < r2.length; t3 += 1) {
    let o3 = ry(e2, r2, t3), s2 = a2(o3);
    n2.set(s2, i2[t3] = ay(s2, o3));
  }
  return { c() {
    t2 = hr("ul");
    for (let e3 = 0; e3 < i2.length; e3 += 1)
      i2[e3].c();
    xr(t2, "class", "PinturaShapePresetsList");
  }, m(e3, n3) {
    dr(e3, t2, n3);
    for (let e4 = 0; e4 < i2.length; e4 += 1)
      i2[e4].m(t2, null);
    o2 = true;
  }, p(e3, [o3]) {
    127 & o3 && (r2 = e3[0], ra(), i2 = ma(i2, o3, a2, 1, e3, r2, n2, t2, pa, ay, null, ry), aa());
  }, i(e3) {
    if (!o2) {
      for (let e4 = 0; e4 < r2.length; e4 += 1)
        sa(i2[e4]);
      o2 = true;
    }
  }, o(e3) {
    for (let e4 = 0; e4 < i2.length; e4 += 1)
      la(i2[e4]);
    o2 = false;
  }, d(e3) {
    e3 && ur(t2);
    for (let e4 = 0; e4 < i2.length; e4 += 1)
      i2[e4].d();
  } };
}
function ly(e2, t2, o2) {
  let i2, n2, { presets: r2 } = t2, { disabled: a2 } = t2, { onclickpreset: s2 } = t2, { ongrabpreset: l2 } = t2, { ondragpreset: c2 } = t2, { ondroppreset: d2 } = t2;
  const u2 = _l(0, { stiffness: 0.25, damping: 0.9 });
  Un(e2, u2, (e3) => o2(9, n2 = e3));
  Fr(() => u2.set(1));
  return e2.$$set = (e3) => {
    "presets" in e3 && o2(0, r2 = e3.presets), "disabled" in e3 && o2(1, a2 = e3.disabled), "onclickpreset" in e3 && o2(2, s2 = e3.onclickpreset), "ongrabpreset" in e3 && o2(3, l2 = e3.ongrabpreset), "ondragpreset" in e3 && o2(4, c2 = e3.ondragpreset), "ondroppreset" in e3 && o2(5, d2 = e3.ondroppreset);
  }, e2.$$.update = () => {
    512 & e2.$$.dirty && o2(6, i2 = "opacity:" + n2);
  }, [r2, a2, s2, l2, c2, d2, i2, u2, (e3, t3) => t3.mount && t3.mount(e3.firstChild, t3), n2, (e3) => s2(e3.id), (e3, t3) => l2 && l2(e3.id, t3), (e3, t3) => c2 && c2(e3.id, t3), (e3, t3) => d2 && d2(e3.id, t3)];
}
var cy = class extends wa {
  constructor(e2) {
    super(), va(this, e2, ly, sy, Nn, { presets: 0, disabled: 1, onclickpreset: 2, ongrabpreset: 3, ondragpreset: 4, ondroppreset: 5 });
  }
};
var dy = (e2) => /<svg /.test(e2);
function uy(e2) {
  let t2, o2;
  return t2 = new ch({ props: { items: e2[10] } }), { c() {
    ya(t2.$$.fragment);
  }, m(e3, i2) {
    ba(t2, e3, i2), o2 = true;
  }, p(e3, o3) {
    const i2 = {};
    1024 & o3 && (i2.items = e3[10]), t2.$set(i2);
  }, i(e3) {
    o2 || (sa(t2.$$.fragment, e3), o2 = true);
  }, o(e3) {
    la(t2.$$.fragment, e3), o2 = false;
  }, d(e3) {
    xa(t2, e3);
  } };
}
function hy(e2) {
  let t2, o2, i2, n2;
  const r2 = [my, py], a2 = [];
  function s2(e3, t3) {
    return e3[8] ? 0 : 1;
  }
  return t2 = s2(e2), o2 = a2[t2] = r2[t2](e2), { c() {
    o2.c(), i2 = $r();
  }, m(e3, o3) {
    a2[t2].m(e3, o3), dr(e3, i2, o3), n2 = true;
  }, p(e3, n3) {
    let l2 = t2;
    t2 = s2(e3), t2 === l2 ? a2[t2].p(e3, n3) : (ra(), la(a2[l2], 1, 1, () => {
      a2[l2] = null;
    }), aa(), o2 = a2[t2], o2 ? o2.p(e3, n3) : (o2 = a2[t2] = r2[t2](e3), o2.c()), sa(o2, 1), o2.m(i2.parentNode, i2));
  }, i(e3) {
    n2 || (sa(o2), n2 = true);
  }, o(e3) {
    la(o2), n2 = false;
  }, d(e3) {
    a2[t2].d(e3), e3 && ur(i2);
  } };
}
function py(e2) {
  let t2, o2, i2, n2, r2 = e2[10] && gy(e2);
  return i2 = new ad({ props: { scrollAutoCancel: e2[9], elasticity: e2[0], $$slots: { default: [$y] }, $$scope: { ctx: e2 } } }), { c() {
    t2 = hr("div"), r2 && r2.c(), o2 = gr(), ya(i2.$$.fragment), xr(t2, "class", "PinturaShapePresetsFlat");
  }, m(e3, a2) {
    dr(e3, t2, a2), r2 && r2.m(t2, null), sr(t2, o2), ba(i2, t2, null), n2 = true;
  }, p(e3, n3) {
    e3[10] ? r2 ? (r2.p(e3, n3), 1024 & n3 && sa(r2, 1)) : (r2 = gy(e3), r2.c(), sa(r2, 1), r2.m(t2, o2)) : r2 && (ra(), la(r2, 1, 1, () => {
      r2 = null;
    }), aa());
    const a2 = {};
    512 & n3 && (a2.scrollAutoCancel = e3[9]), 1 & n3 && (a2.elasticity = e3[0]), 536871070 & n3 && (a2.$$scope = { dirty: n3, ctx: e3 }), i2.$set(a2);
  }, i(e3) {
    n2 || (sa(r2), sa(i2.$$.fragment, e3), n2 = true);
  }, o(e3) {
    la(r2), la(i2.$$.fragment, e3), n2 = false;
  }, d(e3) {
    e3 && ur(t2), r2 && r2.d(), xa(i2);
  } };
}
function my(e2) {
  let t2, o2, i2, n2, r2;
  o2 = new ad({ props: { elasticity: e2[0], class: "PinturaShapePresetsGroups", $$slots: { default: [wy] }, $$scope: { ctx: e2 } } });
  const a2 = [{ class: "PinturaControlPanels" }, { panelClass: "PinturaControlPanel" }, { panels: e2[11] }, e2[12]];
  let s2 = { $$slots: { default: [ky, ({ panel: e3, panelIsActive: t3 }) => ({ 26: e3, 27: t3 }), ({ panel: e3, panelIsActive: t3 }) => (e3 ? 67108864 : 0) | (t3 ? 134217728 : 0)] }, $$scope: { ctx: e2 } };
  for (let e3 = 0; e3 < a2.length; e3 += 1)
    s2 = On(s2, a2[e3]);
  return n2 = new Ec({ props: s2 }), { c() {
    t2 = hr("div"), ya(o2.$$.fragment), i2 = gr(), ya(n2.$$.fragment), xr(t2, "class", "PinturaShapePresetsGrouped");
  }, m(e3, a3) {
    dr(e3, t2, a3), ba(o2, t2, null), sr(t2, i2), ba(n2, t2, null), r2 = true;
  }, p(e3, t3) {
    const i3 = {};
    1 & t3 && (i3.elasticity = e3[0]), 536876128 & t3 && (i3.$$scope = { dirty: t3, ctx: e3 }), o2.$set(i3);
    const r3 = 6144 & t3 ? ga(a2, [a2[0], a2[1], 2048 & t3 && { panels: e3[11] }, 4096 & t3 && $a(e3[12])]) : {};
    738206239 & t3 && (r3.$$scope = { dirty: t3, ctx: e3 }), n2.$set(r3);
  }, i(e3) {
    r2 || (sa(o2.$$.fragment, e3), sa(n2.$$.fragment, e3), r2 = true);
  }, o(e3) {
    la(o2.$$.fragment, e3), la(n2.$$.fragment, e3), r2 = false;
  }, d(e3) {
    e3 && ur(t2), xa(o2), xa(n2);
  } };
}
function gy(e2) {
  let t2, o2;
  return t2 = new ch({ props: { items: e2[10] } }), { c() {
    ya(t2.$$.fragment);
  }, m(e3, i2) {
    ba(t2, e3, i2), o2 = true;
  }, p(e3, o3) {
    const i2 = {};
    1024 & o3 && (i2.items = e3[10]), t2.$set(i2);
  }, i(e3) {
    o2 || (sa(t2.$$.fragment, e3), o2 = true);
  }, o(e3) {
    la(t2.$$.fragment, e3), o2 = false;
  }, d(e3) {
    xa(t2, e3);
  } };
}
function $y(e2) {
  let t2, o2;
  return t2 = new cy({ props: { presets: e2[7], onclickpreset: e2[1], ongrabpreset: e2[2], ondragpreset: e2[3], ondroppreset: e2[4] } }), { c() {
    ya(t2.$$.fragment);
  }, m(e3, i2) {
    ba(t2, e3, i2), o2 = true;
  }, p(e3, o3) {
    const i2 = {};
    128 & o3 && (i2.presets = e3[7]), 2 & o3 && (i2.onclickpreset = e3[1]), 4 & o3 && (i2.ongrabpreset = e3[2]), 8 & o3 && (i2.ondragpreset = e3[3]), 16 & o3 && (i2.ondroppreset = e3[4]), t2.$set(i2);
  }, i(e3) {
    o2 || (sa(t2.$$.fragment, e3), o2 = true);
  }, o(e3) {
    la(t2.$$.fragment, e3), o2 = false;
  }, d(e3) {
    xa(t2, e3);
  } };
}
function fy(e2) {
  let t2, o2;
  return t2 = new ch({ props: { items: e2[10] } }), { c() {
    ya(t2.$$.fragment);
  }, m(e3, i2) {
    ba(t2, e3, i2), o2 = true;
  }, p(e3, o3) {
    const i2 = {};
    1024 & o3 && (i2.items = e3[10]), t2.$set(i2);
  }, i(e3) {
    o2 || (sa(t2.$$.fragment, e3), o2 = true);
  }, o(e3) {
    la(t2.$$.fragment, e3), o2 = false;
  }, d(e3) {
    xa(t2, e3);
  } };
}
function yy(e2) {
  let t2, o2;
  return t2 = new _c({ props: { $$slots: { default: [by] }, $$scope: { ctx: e2 } } }), { c() {
    ya(t2.$$.fragment);
  }, m(e3, i2) {
    ba(t2, e3, i2), o2 = true;
  }, p(e3, o3) {
    const i2 = {};
    805306368 & o3 && (i2.$$scope = { dirty: o3, ctx: e3 }), t2.$set(i2);
  }, i(e3) {
    o2 || (sa(t2.$$.fragment, e3), o2 = true);
  }, o(e3) {
    la(t2.$$.fragment, e3), o2 = false;
  }, d(e3) {
    xa(t2, e3);
  } };
}
function by(e2) {
  let t2, o2 = e2[28].icon + "";
  return { c() {
    t2 = pr("g");
  }, m(e3, i2) {
    dr(e3, t2, i2), t2.innerHTML = o2;
  }, p(e3, i2) {
    268435456 & i2 && o2 !== (o2 = e3[28].icon + "") && (t2.innerHTML = o2);
  }, d(e3) {
    e3 && ur(t2);
  } };
}
function xy(e2) {
  let t2, o2, i2 = e2[28].label + "";
  return { c() {
    t2 = hr("span"), o2 = mr(i2);
  }, m(e3, i3) {
    dr(e3, t2, i3), sr(t2, o2);
  }, p(e3, t3) {
    268435456 & t3 && i2 !== (i2 = e3[28].label + "") && wr(o2, i2);
  }, d(e3) {
    e3 && ur(t2);
  } };
}
function vy(e2) {
  let t2, o2, i2, n2 = e2[28].icon && yy(e2), r2 = !e2[28].hideLabel && xy(e2);
  return { c() {
    n2 && n2.c(), t2 = gr(), r2 && r2.c(), o2 = $r();
  }, m(e3, a2) {
    n2 && n2.m(e3, a2), dr(e3, t2, a2), r2 && r2.m(e3, a2), dr(e3, o2, a2), i2 = true;
  }, p(e3, i3) {
    e3[28].icon ? n2 ? (n2.p(e3, i3), 268435456 & i3 && sa(n2, 1)) : (n2 = yy(e3), n2.c(), sa(n2, 1), n2.m(t2.parentNode, t2)) : n2 && (ra(), la(n2, 1, 1, () => {
      n2 = null;
    }), aa()), e3[28].hideLabel ? r2 && (r2.d(1), r2 = null) : r2 ? r2.p(e3, i3) : (r2 = xy(e3), r2.c(), r2.m(o2.parentNode, o2));
  }, i(e3) {
    i2 || (sa(n2), i2 = true);
  }, o(e3) {
    la(n2), i2 = false;
  }, d(e3) {
    n2 && n2.d(e3), e3 && ur(t2), r2 && r2.d(e3), e3 && ur(o2);
  } };
}
function wy(e2) {
  let t2, o2, i2, n2 = e2[10] && fy(e2);
  const r2 = [{ class: "PinturaControlList" }, { tabs: e2[5] }, e2[12], { layout: "compact" }];
  let a2 = { $$slots: { default: [vy, ({ tab: e3 }) => ({ 28: e3 }), ({ tab: e3 }) => e3 ? 268435456 : 0] }, $$scope: { ctx: e2 } };
  for (let e3 = 0; e3 < r2.length; e3 += 1)
    a2 = On(a2, r2[e3]);
  return o2 = new xc({ props: a2 }), o2.$on("select", e2[18]), { c() {
    n2 && n2.c(), t2 = gr(), ya(o2.$$.fragment);
  }, m(e3, r3) {
    n2 && n2.m(e3, r3), dr(e3, t2, r3), ba(o2, e3, r3), i2 = true;
  }, p(e3, i3) {
    e3[10] ? n2 ? (n2.p(e3, i3), 1024 & i3 && sa(n2, 1)) : (n2 = fy(e3), n2.c(), sa(n2, 1), n2.m(t2.parentNode, t2)) : n2 && (ra(), la(n2, 1, 1, () => {
      n2 = null;
    }), aa());
    const a3 = 4128 & i3 ? ga(r2, [r2[0], 32 & i3 && { tabs: e3[5] }, 4096 & i3 && $a(e3[12]), r2[3]]) : {};
    805306368 & i3 && (a3.$$scope = { dirty: i3, ctx: e3 }), o2.$set(a3);
  }, i(e3) {
    i2 || (sa(n2), sa(o2.$$.fragment, e3), i2 = true);
  }, o(e3) {
    la(n2), la(o2.$$.fragment, e3), i2 = false;
  }, d(e3) {
    n2 && n2.d(e3), e3 && ur(t2), xa(o2, e3);
  } };
}
function Sy(e2) {
  let t2, o2;
  return t2 = new cy({ props: { presets: e2[13][e2[26]].items, disabled: e2[13][e2[26]].disabled, onclickpreset: e2[1], ongrabpreset: e2[2], ondragpreset: e2[3], ondroppreset: e2[4] } }), { c() {
    ya(t2.$$.fragment);
  }, m(e3, i2) {
    ba(t2, e3, i2), o2 = true;
  }, p(e3, o3) {
    const i2 = {};
    67117056 & o3 && (i2.presets = e3[13][e3[26]].items), 67117056 & o3 && (i2.disabled = e3[13][e3[26]].disabled), 2 & o3 && (i2.onclickpreset = e3[1]), 4 & o3 && (i2.ongrabpreset = e3[2]), 8 & o3 && (i2.ondragpreset = e3[3]), 16 & o3 && (i2.ondroppreset = e3[4]), t2.$set(i2);
  }, i(e3) {
    o2 || (sa(t2.$$.fragment, e3), o2 = true);
  }, o(e3) {
    la(t2.$$.fragment, e3), o2 = false;
  }, d(e3) {
    xa(t2, e3);
  } };
}
function ky(e2) {
  let t2, o2;
  return t2 = new ad({ props: { scroll: e2[27] ? { scrollOffset: 0, animate: false } : void 0, scrollAutoCancel: e2[9], elasticity: e2[0], $$slots: { default: [Sy] }, $$scope: { ctx: e2 } } }), { c() {
    ya(t2.$$.fragment);
  }, m(e3, i2) {
    ba(t2, e3, i2), o2 = true;
  }, p(e3, o3) {
    const i2 = {};
    134217728 & o3 && (i2.scroll = e3[27] ? { scrollOffset: 0, animate: false } : void 0), 512 & o3 && (i2.scrollAutoCancel = e3[9]), 1 & o3 && (i2.elasticity = e3[0]), 603987998 & o3 && (i2.$$scope = { dirty: o3, ctx: e3 }), t2.$set(i2);
  }, i(e3) {
    o2 || (sa(t2.$$.fragment, e3), o2 = true);
  }, o(e3) {
    la(t2.$$.fragment, e3), o2 = false;
  }, d(e3) {
    xa(t2, e3);
  } };
}
function Cy(e2) {
  let t2, o2, i2, n2;
  const r2 = [hy, uy], a2 = [];
  function s2(e3, t3) {
    return e3[9] ? 0 : e3[10] ? 1 : -1;
  }
  return ~(o2 = s2(e2)) && (i2 = a2[o2] = r2[o2](e2)), { c() {
    t2 = hr("div"), i2 && i2.c(), xr(t2, "class", "PinturaShapePresetsPalette");
  }, m(e3, i3) {
    dr(e3, t2, i3), ~o2 && a2[o2].m(t2, null), n2 = true;
  }, p(e3, [n3]) {
    let l2 = o2;
    o2 = s2(e3), o2 === l2 ? ~o2 && a2[o2].p(e3, n3) : (i2 && (ra(), la(a2[l2], 1, 1, () => {
      a2[l2] = null;
    }), aa()), ~o2 ? (i2 = a2[o2], i2 ? i2.p(e3, n3) : (i2 = a2[o2] = r2[o2](e3), i2.c()), sa(i2, 1), i2.m(t2, null)) : i2 = null);
  }, i(e3) {
    n2 || (sa(i2), n2 = true);
  }, o(e3) {
    la(i2), n2 = false;
  }, d(e3) {
    e3 && ur(t2), ~o2 && a2[o2].d();
  } };
}
function My(e2, t2, o2) {
  let i2, r2, a2, s2, l2, c2, d2, u2, h2, { locale: p2 } = t2, { presets: m2 } = t2, { scrollElasticity: g2 } = t2, { enableSelectImage: $2 = true } = t2, { willRenderPresetToolbar: f2 = j } = t2, { onaddpreset: y2 = n } = t2, { ongrabpreset: b2 } = t2, { ondragpreset: x2 } = t2, { ondroppreset: v2 } = t2;
  const w2 = "presets-" + A(), S2 = (e3, t3 = "") => dy(e3) ? e3 : Co(e3) ? Eo(e3, t3) : `<img src="${e3}" alt="${t3}"/>`, k2 = (e3) => W(zt(e3)), C2 = ["src", "alt", "thumb", "shape", "id", "mount", "disabled"], T2 = (e3) => e3.map((e4) => ((e5) => To(e5) && M(e5[0]) && To(e5[1]))(e4) ? { ...e4[2], id: `${w2}-${e4[0].toLowerCase()}`, label: e4[0], items: T2(e4[1]) } : ((e5) => {
    let t3, o3, i3, n2, r3, a3, s3, l3 = e5;
    return M(e5) ? Co(e5) ? (t3 = e5, r3 = e5, n2 = S2(t3, r3)) : (t3 = e5, r3 = k2(t3), n2 = S2(t3, r3)) : (t3 = e5.src, r3 = e5.alt || (M(t3) ? k2(t3) : M(e5.thumb) ? k2(e5.thumb) : void 0), n2 = S2(e5.thumb || t3, r3), o3 = e5.shape, a3 = e5.mount, s3 = e5.disabled, i3 = Object.keys(e5).reduce((t4, o4) => (C2.includes(o4) || (t4[o4] = e5[o4]), t4), {})), { id: l3, src: t3, thumb: n2, shape: o3, shapeProps: i3, alt: r3, title: r3, mount: a3, disabled: s3 };
  })(e4));
  return e2.$$set = (e3) => {
    "locale" in e3 && o2(14, p2 = e3.locale), "presets" in e3 && o2(15, m2 = e3.presets), "scrollElasticity" in e3 && o2(0, g2 = e3.scrollElasticity), "enableSelectImage" in e3 && o2(16, $2 = e3.enableSelectImage), "willRenderPresetToolbar" in e3 && o2(17, f2 = e3.willRenderPresetToolbar), "onaddpreset" in e3 && o2(1, y2 = e3.onaddpreset), "ongrabpreset" in e3 && o2(2, b2 = e3.ongrabpreset), "ondragpreset" in e3 && o2(3, x2 = e3.ondragpreset), "ondroppreset" in e3 && o2(4, v2 = e3.ondroppreset);
  }, e2.$$.update = () => {
    32768 & e2.$$.dirty && o2(7, i2 = T2(m2)), 128 & e2.$$.dirty && o2(9, r2 = i2.length), 640 & e2.$$.dirty && o2(8, a2 = r2 && i2.some((e3) => !!e3.items)), 384 & e2.$$.dirty && o2(5, s2 = a2 && i2), 384 & e2.$$.dirty && o2(13, l2 = a2 && i2.reduce((e3, t3) => (e3[t3.id] = t3, e3), {})), 96 & e2.$$.dirty && o2(6, c2 = c2 || s2 && (s2.find((e3) => !e3.disabled) || {}).id), 64 & e2.$$.dirty && o2(12, d2 = { name: w2, selected: c2 }), 32 & e2.$$.dirty && o2(11, u2 = s2 && s2.map((e3) => e3.id)), 212994 & e2.$$.dirty && o2(10, h2 = p2 && f2([$2 && ["Button", "browse", { label: p2.shapeLabelButtonSelectSticker, icon: p2.shapeIconButtonSelectSticker, onclick: () => {
      Th().then((e3) => {
        e3 && y2(e3);
      });
    } }]]));
  }, [g2, y2, b2, x2, v2, s2, c2, i2, a2, r2, h2, u2, d2, l2, p2, m2, $2, f2, ({ detail: e3 }) => o2(6, c2 = e3)];
}
var Ty = class extends wa {
  constructor(e2) {
    super(), va(this, e2, My, Cy, Nn, { locale: 14, presets: 15, scrollElasticity: 0, enableSelectImage: 16, willRenderPresetToolbar: 17, onaddpreset: 1, ongrabpreset: 2, ondragpreset: 3, ondroppreset: 4 });
  }
};
function Py(e2) {
  let t2, o2, i2, n2;
  const r2 = [{ locale: e2[4] }, { uid: e2[14] }, { parentRect: e2[29] }, { rootRect: e2[43] }, { utilRect: e2[30] }, { offset: e2[38] }, { disabled: e2[28] }, { contextRotation: e2[17] }, { contextFlipX: e2[18] }, { contextFlipY: e2[19] }, { contextZoom: e2[42] }, { active: e2[26] }, { opacity: e2[45] }, { hoverColor: e2[46] }, { eraseRadius: e2[37] }, { selectRadius: e2[6] }, { enableButtonFlipVertical: e2[9] }, { mapEditorPointToImagePoint: e2[15] }, { mapImagePointToEditorPoint: e2[16] }, { enableTapToAddText: e2[12] }, { textInputMode: e2[7] }, { willStartInteraction: e2[80] }, { oninteractionstart: e2[66] }, { oninteractionupdate: e2[67] }, { oninteractionrelease: e2[68] }, { oninteractionend: e2[70] }, { oninteractioncancel: e2[69] }, { onhovershape: e2[74] }, { ontapcanvas: e2[73] }, { onaddshape: e2[123] }, { onselectshape: e2[124] }, { ontapshape: e2[125] }, { onupdateshape: e2[126] }, { onremoveshape: e2[127] }, e2[32]];
  function a2(t3) {
    e2[129](t3);
  }
  function s2(t3) {
    e2[130](t3);
  }
  let l2 = {};
  for (let e3 = 0; e3 < r2.length; e3 += 1)
    l2 = On(l2, r2[e3]);
  return void 0 !== e2[27] && (l2.markup = e2[27]), void 0 !== e2[44] && (l2.ui = e2[44]), t2 = new Hf({ props: l2 }), e2[128](t2), Nr.push(() => fa(t2, "markup", a2)), Nr.push(() => fa(t2, "ui", s2)), { c() {
    ya(t2.$$.fragment);
  }, m(e3, o3) {
    ba(t2, e3, o3), n2 = true;
  }, p(e3, n3) {
    const a3 = 1955582672 & n3[0] | 55490 & n3[1] | 793072 & n3[2] ? ga(r2, [16 & n3[0] && { locale: e3[4] }, 16384 & n3[0] && { uid: e3[14] }, 536870912 & n3[0] && { parentRect: e3[29] }, 4096 & n3[1] && { rootRect: e3[43] }, 1073741824 & n3[0] && { utilRect: e3[30] }, 128 & n3[1] && { offset: e3[38] }, 268435456 & n3[0] && { disabled: e3[28] }, 131072 & n3[0] && { contextRotation: e3[17] }, 262144 & n3[0] && { contextFlipX: e3[18] }, 524288 & n3[0] && { contextFlipY: e3[19] }, 2048 & n3[1] && { contextZoom: e3[42] }, 67108864 & n3[0] && { active: e3[26] }, 16384 & n3[1] && { opacity: e3[45] }, 32768 & n3[1] && { hoverColor: e3[46] }, 64 & n3[1] && { eraseRadius: e3[37] }, 64 & n3[0] && { selectRadius: e3[6] }, 512 & n3[0] && { enableButtonFlipVertical: e3[9] }, 32768 & n3[0] && { mapEditorPointToImagePoint: e3[15] }, 65536 & n3[0] && { mapImagePointToEditorPoint: e3[16] }, 4096 & n3[0] && { enableTapToAddText: e3[12] }, 128 & n3[0] && { textInputMode: e3[7] }, 262144 & n3[2] && { willStartInteraction: e3[80] }, 16 & n3[2] && { oninteractionstart: e3[66] }, 32 & n3[2] && { oninteractionupdate: e3[67] }, 64 & n3[2] && { oninteractionrelease: e3[68] }, 256 & n3[2] && { oninteractionend: e3[70] }, 128 & n3[2] && { oninteractioncancel: e3[69] }, 4096 & n3[2] && { onhovershape: e3[74] }, 2048 & n3[2] && { ontapcanvas: e3[73] }, 8388608 & n3[0] | 524288 & n3[2] && { onaddshape: e3[123] }, 8388608 & n3[0] && { onselectshape: e3[124] }, 8388608 & n3[0] && { ontapshape: e3[125] }, 8388608 & n3[0] | 524288 & n3[2] && { onupdateshape: e3[126] }, 8388608 & n3[0] | 524288 & n3[2] && { onremoveshape: e3[127] }, 2 & n3[1] && $a(e3[32])]) : {};
    !o2 && 134217728 & n3[0] && (o2 = true, a3.markup = e3[27], qr(() => o2 = false)), !i2 && 8192 & n3[1] && (i2 = true, a3.ui = e3[44], qr(() => i2 = false)), t2.$set(a3);
  }, i(e3) {
    n2 || (sa(t2.$$.fragment, e3), n2 = true);
  }, o(e3) {
    la(t2.$$.fragment, e3), n2 = false;
  }, d(o3) {
    e2[128](null), xa(t2, o3);
  } };
}
function Ry(e2) {
  let t2, o2, i2, r2, a2, s2 = e2[39] && Py(e2);
  return { c() {
    t2 = hr("div"), s2 && s2.c(), xr(t2, "slot", "main"), xr(t2, "style", o2 = "cursor:" + e2[35]);
  }, m(o3, l2) {
    dr(o3, t2, l2), s2 && s2.m(t2, null), e2[131](t2), i2 = true, r2 || (a2 = [fr(t2, "keydown", e2[71]), er(rc.call(null, t2)), fr(t2, "dropfiles", function() {
      Vn(e2[11] ? e2[79] : n) && (e2[11] ? e2[79] : n).apply(this, arguments);
    }), er(oc.call(null, t2)), fr(t2, "measure", e2[121])], r2 = true);
  }, p(n2, r3) {
    (e2 = n2)[39] ? s2 ? (s2.p(e2, r3), 256 & r3[1] && sa(s2, 1)) : (s2 = Py(e2), s2.c(), sa(s2, 1), s2.m(t2, null)) : s2 && (ra(), la(s2, 1, 1, () => {
      s2 = null;
    }), aa()), (!i2 || 16 & r3[1] && o2 !== (o2 = "cursor:" + e2[35])) && xr(t2, "style", o2);
  }, i(e3) {
    i2 || (sa(s2), i2 = true);
  }, o(e3) {
    la(s2), i2 = false;
  }, d(o3) {
    o3 && ur(t2), s2 && s2.d(), e2[131](null), r2 = false, _n(a2);
  } };
}
function Iy(e2) {
  let t2, o2;
  return t2 = new Ty({ props: { locale: e2[4], presets: e2[13], enableSelectImage: e2[10], willRenderPresetToolbar: e2[33], onaddpreset: e2[78], ongrabpreset: e2[75], ondragpreset: e2[76], ondroppreset: e2[77], scrollElasticity: e2[34] } }), { c() {
    ya(t2.$$.fragment);
  }, m(e3, i2) {
    ba(t2, e3, i2), o2 = true;
  }, p(e3, o3) {
    const i2 = {};
    16 & o3[0] && (i2.locale = e3[4]), 8192 & o3[0] && (i2.presets = e3[13]), 1024 & o3[0] && (i2.enableSelectImage = e3[10]), 4 & o3[1] && (i2.willRenderPresetToolbar = e3[33]), 8 & o3[1] && (i2.scrollElasticity = e3[34]), t2.$set(i2);
  }, i(e3) {
    o2 || (sa(t2.$$.fragment, e3), o2 = true);
  }, o(e3) {
    la(t2.$$.fragment, e3), o2 = false;
  }, d(e3) {
    xa(t2, e3);
  } };
}
function Ay(e2) {
  let t2, o2, i2, n2, r2, a2;
  const s2 = [Ly, Ey], l2 = [];
  function c2(e3, t3) {
    return e3[36] ? 0 : 1;
  }
  o2 = c2(e2), i2 = l2[o2] = s2[o2](e2);
  let d2 = e2[41] && Fy(e2);
  return { c() {
    t2 = hr("div"), i2.c(), n2 = gr(), d2 && d2.c(), r2 = $r(), xr(t2, "class", "PinturaControlPanels");
  }, m(e3, i3) {
    dr(e3, t2, i3), l2[o2].m(t2, null), dr(e3, n2, i3), d2 && d2.m(e3, i3), dr(e3, r2, i3), a2 = true;
  }, p(e3, n3) {
    let a3 = o2;
    o2 = c2(e3), o2 === a3 ? l2[o2].p(e3, n3) : (ra(), la(l2[a3], 1, 1, () => {
      l2[a3] = null;
    }), aa(), i2 = l2[o2], i2 ? i2.p(e3, n3) : (i2 = l2[o2] = s2[o2](e3), i2.c()), sa(i2, 1), i2.m(t2, null)), e3[41] ? d2 ? (d2.p(e3, n3), 1024 & n3[1] && sa(d2, 1)) : (d2 = Fy(e3), d2.c(), sa(d2, 1), d2.m(r2.parentNode, r2)) : d2 && (ra(), la(d2, 1, 1, () => {
      d2 = null;
    }), aa());
  }, i(e3) {
    a2 || (sa(i2), sa(d2), a2 = true);
  }, o(e3) {
    la(i2), la(d2), a2 = false;
  }, d(e3) {
    e3 && ur(t2), l2[o2].d(), e3 && ur(n2), d2 && d2.d(e3), e3 && ur(r2);
  } };
}
function Ey(e2) {
  let t2, o2, i2;
  return o2 = new ey({ props: { locale: e2[4], shape: e2[24], onchange: e2[72], controls: e2[8], scrollElasticity: e2[34] } }), { c() {
    t2 = hr("div"), ya(o2.$$.fragment), xr(t2, "class", "PinturaControlPanel");
  }, m(e3, n2) {
    dr(e3, t2, n2), ba(o2, t2, null), i2 = true;
  }, p(e3, t3) {
    const i3 = {};
    16 & t3[0] && (i3.locale = e3[4]), 16777216 & t3[0] && (i3.shape = e3[24]), 256 & t3[0] && (i3.controls = e3[8]), 8 & t3[1] && (i3.scrollElasticity = e3[34]), o2.$set(i3);
  }, i(e3) {
    i2 || (sa(o2.$$.fragment, e3), i2 = true);
  }, o(e3) {
    la(o2.$$.fragment, e3), i2 = false;
  }, d(e3) {
    e3 && ur(t2), xa(o2);
  } };
}
function Ly(e2) {
  let t2, o2, i2;
  return o2 = new Ty({ props: { locale: e2[4], presets: e2[13], enableSelectImage: e2[10], willRenderPresetToolbar: e2[33], onaddpreset: e2[78], ongrabpreset: e2[75], ondragpreset: e2[76], ondroppreset: e2[77], scrollElasticity: e2[34] } }), { c() {
    t2 = hr("div"), ya(o2.$$.fragment), xr(t2, "class", "PinturaControlPanel");
  }, m(e3, n2) {
    dr(e3, t2, n2), ba(o2, t2, null), i2 = true;
  }, p(e3, t3) {
    const i3 = {};
    16 & t3[0] && (i3.locale = e3[4]), 8192 & t3[0] && (i3.presets = e3[13]), 1024 & t3[0] && (i3.enableSelectImage = e3[10]), 4 & t3[1] && (i3.willRenderPresetToolbar = e3[33]), 8 & t3[1] && (i3.scrollElasticity = e3[34]), o2.$set(i3);
  }, i(e3) {
    i2 || (sa(o2.$$.fragment, e3), i2 = true);
  }, o(e3) {
    la(o2.$$.fragment, e3), i2 = false;
  }, d(e3) {
    e3 && ur(t2), xa(o2);
  } };
}
function Fy(e2) {
  let t2, o2;
  return t2 = new ad({ props: { class: "PinturaControlListScroller", elasticity: e2[34], $$slots: { default: [Dy] }, $$scope: { ctx: e2 } } }), { c() {
    ya(t2.$$.fragment);
  }, m(e3, i2) {
    ba(t2, e3, i2), o2 = true;
  }, p(e3, o3) {
    const i2 = {};
    8 & o3[1] && (i2.elasticity = e3[34]), 33554449 & o3[0] | 1024 & o3[5] && (i2.$$scope = { dirty: o3, ctx: e3 }), t2.$set(i2);
  }, i(e3) {
    o2 || (sa(t2.$$.fragment, e3), o2 = true);
  }, o(e3) {
    la(t2.$$.fragment, e3), o2 = false;
  }, d(e3) {
    xa(t2, e3);
  } };
}
function zy(e2) {
  let t2, o2;
  return t2 = new _c({ props: { $$slots: { default: [By] }, $$scope: { ctx: e2 } } }), { c() {
    ya(t2.$$.fragment);
  }, m(e3, i2) {
    ba(t2, e3, i2), o2 = true;
  }, p(e3, o3) {
    const i2 = {};
    16 & o3[0] | 1536 & o3[5] && (i2.$$scope = { dirty: o3, ctx: e3 }), t2.$set(i2);
  }, i(e3) {
    o2 || (sa(t2.$$.fragment, e3), o2 = true);
  }, o(e3) {
    la(t2.$$.fragment, e3), o2 = false;
  }, d(e3) {
    xa(t2, e3);
  } };
}
function By(e2) {
  let t2, o2 = (T(e2[164].icon) ? e2[164].icon(e2[4]) : e2[164].icon) + "";
  return { c() {
    t2 = pr("g");
  }, m(e3, i2) {
    dr(e3, t2, i2), t2.innerHTML = o2;
  }, p(e3, i2) {
    16 & i2[0] | 512 & i2[5] && o2 !== (o2 = (T(e3[164].icon) ? e3[164].icon(e3[4]) : e3[164].icon) + "") && (t2.innerHTML = o2);
  }, d(e3) {
    e3 && ur(t2);
  } };
}
function Oy(e2) {
  let t2, o2, i2, n2, r2, a2 = (T(e2[164].label) ? e2[164].label(e2[4]) : e2[164].label) + "", s2 = e2[164].icon && zy(e2);
  return { c() {
    t2 = hr("div"), s2 && s2.c(), o2 = gr(), i2 = hr("span"), n2 = mr(a2), xr(t2, "slot", "option");
  }, m(e3, a3) {
    dr(e3, t2, a3), s2 && s2.m(t2, null), sr(t2, o2), sr(t2, i2), sr(i2, n2), r2 = true;
  }, p(e3, i3) {
    e3[164].icon ? s2 ? (s2.p(e3, i3), 512 & i3[5] && sa(s2, 1)) : (s2 = zy(e3), s2.c(), sa(s2, 1), s2.m(t2, o2)) : s2 && (ra(), la(s2, 1, 1, () => {
      s2 = null;
    }), aa()), (!r2 || 16 & i3[0] | 512 & i3[5]) && a2 !== (a2 = (T(e3[164].label) ? e3[164].label(e3[4]) : e3[164].label) + "") && wr(n2, a2);
  }, i(e3) {
    r2 || (sa(s2), r2 = true);
  }, o(e3) {
    la(s2), r2 = false;
  }, d(e3) {
    e3 && ur(t2), s2 && s2.d();
  } };
}
function Dy(e2) {
  let t2, o2;
  return t2 = new yu({ props: { locale: e2[4], class: "PinturaControlList", optionClass: "PinturaControlListOption", layout: "row", options: e2[25], selectedIndex: e2[25].findIndex(e2[122]), onchange: e2[65], $$slots: { option: [Oy, ({ option: e3 }) => ({ 164: e3 }), ({ option: e3 }) => [0, 0, 0, 0, 0, e3 ? 512 : 0]] }, $$scope: { ctx: e2 } } }), { c() {
    ya(t2.$$.fragment);
  }, m(e3, i2) {
    ba(t2, e3, i2), o2 = true;
  }, p(e3, o3) {
    const i2 = {};
    16 & o3[0] && (i2.locale = e3[4]), 33554432 & o3[0] && (i2.options = e3[25]), 33554433 & o3[0] && (i2.selectedIndex = e3[25].findIndex(e3[122])), 16 & o3[0] | 1536 & o3[5] && (i2.$$scope = { dirty: o3, ctx: e3 }), t2.$set(i2);
  }, i(e3) {
    o2 || (sa(t2.$$.fragment, e3), o2 = true);
  }, o(e3) {
    la(t2.$$.fragment, e3), o2 = false;
  }, d(e3) {
    xa(t2, e3);
  } };
}
function Wy(e2) {
  let t2, o2, i2, n2;
  const r2 = [Ay, Iy], a2 = [];
  function s2(e3, t3) {
    return e3[40] ? 0 : e3[36] ? 1 : -1;
  }
  return ~(o2 = s2(e2)) && (i2 = a2[o2] = r2[o2](e2)), { c() {
    t2 = hr("div"), i2 && i2.c(), xr(t2, "slot", "footer"), xr(t2, "style", e2[31]);
  }, m(e3, i3) {
    dr(e3, t2, i3), ~o2 && a2[o2].m(t2, null), n2 = true;
  }, p(e3, l2) {
    let c2 = o2;
    o2 = s2(e3), o2 === c2 ? ~o2 && a2[o2].p(e3, l2) : (i2 && (ra(), la(a2[c2], 1, 1, () => {
      a2[c2] = null;
    }), aa()), ~o2 ? (i2 = a2[o2], i2 ? i2.p(e3, l2) : (i2 = a2[o2] = r2[o2](e3), i2.c()), sa(i2, 1), i2.m(t2, null)) : i2 = null), (!n2 || 1 & l2[1]) && xr(t2, "style", e3[31]);
  }, i(e3) {
    n2 || (sa(i2), n2 = true);
  }, o(e3) {
    la(i2), n2 = false;
  }, d(e3) {
    e3 && ur(t2), ~o2 && a2[o2].d();
  } };
}
function _y(e2) {
  let t2, o2;
  return t2 = new Yg({ props: { $$slots: { footer: [Wy], main: [Ry] }, $$scope: { ctx: e2 } } }), t2.$on("measure", e2[132]), { c() {
    ya(t2.$$.fragment);
  }, m(e3, i2) {
    ba(t2, e3, i2), o2 = true;
  }, p(e3, o3) {
    const i2 = {};
    2146435025 & o3[0] | 65535 & o3[1] | 1024 & o3[5] && (i2.$$scope = { dirty: o3, ctx: e3 }), t2.$set(i2);
  }, i(e3) {
    o2 || (sa(t2.$$.fragment, e3), o2 = true);
  }, o(e3) {
    la(t2.$$.fragment, e3), o2 = false;
  }, d(e3) {
    xa(t2, e3);
  } };
}
function Vy(e2, t2, o2) {
  let i2, n2, r2, a2, s2, l2, c2, d2, u2, h2, p2, m2, g2, $2, f2, y2, b2, x2, v2, w2, S2, k2, C2, T2, P2, R2, I2, A2, E2, L2, F2, z2, B2, O2, D2, W2, _2, V2, N2, H2, U2, Z2, X2, G2, Y2, q2, K2, J2, Q2, ee2, te2, oe2, ie2 = zn, ne2 = () => (ie2(), ie2 = Hn(me2, (e3) => o2(26, E2 = e3)), me2), re2 = zn, ae2 = () => (re2(), re2 = Hn(be2, (e3) => o2(27, F2 = e3)), be2), se2 = zn, le2 = () => (se2(), se2 = Hn(Xe2, (e3) => o2(29, Z2 = e3)), Xe2), de2 = zn, ue2 = () => (de2(), de2 = Hn($e2, (e3) => o2(119, K2 = e3)), $e2), he2 = zn, pe2 = () => (he2(), he2 = Hn(ge2, (e3) => o2(45, te2 = e3)), ge2);
  e2.$$.on_destroy.push(() => ie2()), e2.$$.on_destroy.push(() => re2()), e2.$$.on_destroy.push(() => se2()), e2.$$.on_destroy.push(() => de2()), e2.$$.on_destroy.push(() => he2());
  let { isActive: me2 } = t2;
  ne2();
  let { isActiveFraction: ge2 } = t2;
  pe2();
  let { isVisible: $e2 } = t2;
  ue2();
  let { stores: fe2 } = t2, { locale: ye2 = {} } = t2, { shapes: be2 } = t2;
  ae2();
  let { toolbar: xe2 = [] } = t2, { toolShapes: ve2 = {} } = t2, { toolActive: we2 } = t2, { toolSelectRadius: Se2 } = t2, { toolRetainStyles: ke2 = false } = t2, { textInputMode: Ce2 } = t2, { shapeControls: Te2 = {} } = t2, { enableButtonFlipVertical: Re2 = false } = t2, { enablePresetSelectImage: Ie2 = true } = t2, { enablePresetDropImage: Ae2 = true } = t2, { enableSelectToolToAddShape: Ee2 = false } = t2, { enableAutoSelectMoveTool: Le2 = ["line", "arrow", "path", "rectangle", "ellipse", "text"] } = t2, { enableTapToAddText: Fe2 = false } = t2, { enableMoveTool: ze2 = false } = t2, { enableViewTool: Be2 = false } = t2, { enableToolShareStyles: Oe2 = true } = t2, { willRenderPresetToolbar: De2 } = t2, { willStartInteraction: We2 } = t2, { shapePresets: _e2 = [] } = t2, { utilKey: Ve2 } = t2, { mapScreenPointToImagePoint: Ne2 } = t2, { mapImagePointToScreenPoint: He2 } = t2, { imageRotation: je2 = 0 } = t2, { imageFlipX: Ue2 = false } = t2, { imageFlipY: Ze2 = false } = t2, { parentRect: Xe2 } = t2;
  le2();
  let { hooks: Ge2 = {} } = t2;
  const Ye2 = Wr("isAnimated");
  Un(e2, Ye2, (e3) => o2(112, L2 = e3));
  const qe2 = Wr("elasticityMultiplier");
  Un(e2, qe2, (e3) => o2(115, O2 = e3));
  const Ke2 = Wr("ui");
  let Je2;
  Un(e2, Ke2, (e3) => o2(141, Y2 = e3));
  const { env: Qe2, history: et2, rootRect: tt2, rootColorSecondary: ot2, enablePanInput: nt2, enablePanInputStatus: rt2, enableZoomInput: at2, stageRect: st2, utilRectPadded: lt2, scrollElasticity: ct2, imageOverlayMarkup: dt2, imagePreviewModifiers: ut2, imageCropRect: ht2, shapePreprocessor: pt2, stageScalar: mt2, imageSelectionRect: $t2, imageSelectionZoomCurrent: ft2, imageSelectionPan: yt2, allowPan: bt2, allowZoom: xt2, allowZoomControls: vt2 } = fe2;
  Un(e2, Qe2, (e3) => o2(113, z2 = e3)), Un(e2, tt2, (e3) => o2(43, Q2 = e3)), Un(e2, ot2, (e3) => o2(46, oe2 = e3)), Un(e2, rt2, (e3) => o2(28, H2 = e3)), Un(e2, st2, (e3) => o2(116, D2 = e3)), Un(e2, lt2, (e3) => o2(30, q2 = e3)), Un(e2, dt2, (e3) => o2(44, ee2 = e3)), Un(e2, ut2, (e3) => o2(120, J2 = e3)), Un(e2, ht2, (e3) => o2(140, X2 = e3)), Un(e2, pt2, (e3) => o2(118, G2 = e3)), Un(e2, mt2, (e3) => o2(138, V2 = e3)), Un(e2, $t2, (e3) => o2(139, N2 = e3)), Un(e2, ft2, (e3) => o2(42, W2 = e3)), Un(e2, yt2, (e3) => o2(137, _2 = e3));
  const wt2 = Wr("keysPressed");
  Un(e2, wt2, (e3) => o2(117, U2 = e3));
  const St2 = (e3) => {
    const [t3, o3] = Je2[e3];
    let i3, n3, r3 = "relative" === o3.position;
    const a3 = r3 ? "0%" : 0, s3 = r3 ? "0%" : 0;
    bi(t3) || $i(t3) ? (n3 = r3 ? "20%" : 0.2 * Z2.width, i3 = ci(t3), i3.x = a3, i3.y = s3, an(i3, { width: n3, height: n3 }, Z2)) : xi(t3) ? (n3 = r3 ? "10%" : 0.1 * Z2.width, i3 = ci(t3), i3.x = a3, i3.y = s3, an(i3, { rx: n3, ry: n3 }, Z2)) : vi(t3) && (n3 = r3 ? "10%" : 0.1 * Z2.width, i3 = ci(t3), i3.x1 = a3, i3.y1 = s3, i3.x2 = a3, i3.y2 = s3), i3 && Promise.resolve().then(() => {
      Lt2(At2(i3, void 0, n3));
    });
  }, kt2 = (e3) => Ne2(ff(e3, Q2));
  let Ct2, Mt2, Tt2 = {};
  const Pt2 = (e3) => {
    if (!(wi(e3) && Mo(e3, "pathClose")))
      return;
    const t3 = [...e3.strokeColor];
    t3[3] = 1, Ct2.updateMarkupShape(e3, { pathClose: false, strokeColor: t3 }, false), Ct2.removeMarkupShapeProps(e3, ["backgroundColor"], false), Ct2.confirmMarkupItemDraft(), Ct2.selectShape(e3);
  };
  let Rt2, It2;
  const At2 = (e3, t3, o3) => {
    let i3 = false;
    t3 || (i3 = true, t3 = b2 ? Ne2(it(D2)) : it(X2)), t3.x -= Z2.x || 0, t3.y -= Z2.y || 0, (Ue2 || Ze2) && (e3.flipX = Ue2, e3.flipY = Ze2);
    const n3 = Ct2.getShapesNearPosition(t3);
    if (i3 && n3.length) {
      const e4 = 0.1 * Math.min(X2.width, X2.height);
      t3.x += Math.round(-e4 + Math.random() * e4 * 2), t3.y += Math.round(-e4 + Math.random() * e4 * 2);
    }
    if (0 !== je2 && (e3.rotation = Ue2 && Ze2 ? -je2 : Ue2 || Ze2 ? je2 : -je2), Mo(e3, "width") && Mo(e3, "height")) {
      const { width: o4, height: i4 } = rn(e3, ["width", "height"], Z2);
      an(e3, { x: t3.x - 0.5 * o4, y: t3.y - 0.5 * i4 }, Z2);
    } else if (xi(e3))
      an(e3, { x: t3.x, y: t3.y }, Z2);
    else if (vi(e3)) {
      const { x1: i4, y1: n4, x2: r3, y2: a3 } = rn(e3, ["x1", "y1", "x2", "y2"], Z2), s3 = Me(ce(i4, n4), ce(r3, a3)), l3 = M(o3) ? Ki(o3, Z2.width) : s3;
      an(e3, { x1: t3.x - l3, y1: t3.y + l3, x2: t3.x + l3, y2: t3.y - l3 }, Z2);
    } else if (wi(e3)) {
      const { points: o4 } = rn(e3, ["points"], Z2), i4 = Pe(o4);
      an(e3, { points: o4.map((e4) => ({ x: e4.x + t3.x - i4.x, y: e4.y + t3.y - i4.y })) }, Z2);
    }
    return e3;
  }, Et2 = (e3, t3) => {
    const o3 = At2(pi(e3, X2), t3);
    return e3.shape && (Mo(e3.shape, "x") && (o3.x = e3.shape.x), Mo(e3.shape, "y") && (o3.y = e3.shape.y)), Lt2(o3);
  }, Lt2 = (e3) => {
    const { beforeAddShape: t3 = () => true } = Ge2;
    if (t3(e3))
      return Ct2.addShape(e3), Ct2.selectShape(e3), et2.write(), C2("addshape", e3), e3;
  };
  let Ft2 = false;
  const zt2 = () => {
    et2.write();
  };
  let Bt2;
  const Ot2 = Wr("redrawTrigger");
  Un(e2, Ot2, (e3) => o2(114, B2 = e3));
  const Dt2 = _l(L2 ? 20 : 0);
  Un(e2, Dt2, (e3) => o2(111, A2 = e3));
  return e2.$$set = (e3) => {
    "isActive" in e3 && ne2(o2(1, me2 = e3.isActive)), "isActiveFraction" in e3 && pe2(o2(2, ge2 = e3.isActiveFraction)), "isVisible" in e3 && ue2(o2(3, $e2 = e3.isVisible)), "stores" in e3 && o2(84, fe2 = e3.stores), "locale" in e3 && o2(4, ye2 = e3.locale), "shapes" in e3 && ae2(o2(5, be2 = e3.shapes)), "toolbar" in e3 && o2(85, xe2 = e3.toolbar), "toolShapes" in e3 && o2(86, ve2 = e3.toolShapes), "toolActive" in e3 && o2(0, we2 = e3.toolActive), "toolSelectRadius" in e3 && o2(6, Se2 = e3.toolSelectRadius), "toolRetainStyles" in e3 && o2(87, ke2 = e3.toolRetainStyles), "textInputMode" in e3 && o2(7, Ce2 = e3.textInputMode), "shapeControls" in e3 && o2(8, Te2 = e3.shapeControls), "enableButtonFlipVertical" in e3 && o2(9, Re2 = e3.enableButtonFlipVertical), "enablePresetSelectImage" in e3 && o2(10, Ie2 = e3.enablePresetSelectImage), "enablePresetDropImage" in e3 && o2(11, Ae2 = e3.enablePresetDropImage), "enableSelectToolToAddShape" in e3 && o2(88, Ee2 = e3.enableSelectToolToAddShape), "enableAutoSelectMoveTool" in e3 && o2(89, Le2 = e3.enableAutoSelectMoveTool), "enableTapToAddText" in e3 && o2(12, Fe2 = e3.enableTapToAddText), "enableMoveTool" in e3 && o2(90, ze2 = e3.enableMoveTool), "enableViewTool" in e3 && o2(91, Be2 = e3.enableViewTool), "enableToolShareStyles" in e3 && o2(92, Oe2 = e3.enableToolShareStyles), "willRenderPresetToolbar" in e3 && o2(93, De2 = e3.willRenderPresetToolbar), "willStartInteraction" in e3 && o2(94, We2 = e3.willStartInteraction), "shapePresets" in e3 && o2(13, _e2 = e3.shapePresets), "utilKey" in e3 && o2(14, Ve2 = e3.utilKey), "mapScreenPointToImagePoint" in e3 && o2(15, Ne2 = e3.mapScreenPointToImagePoint), "mapImagePointToScreenPoint" in e3 && o2(16, He2 = e3.mapImagePointToScreenPoint), "imageRotation" in e3 && o2(17, je2 = e3.imageRotation), "imageFlipX" in e3 && o2(18, Ue2 = e3.imageFlipX), "imageFlipY" in e3 && o2(19, Ze2 = e3.imageFlipY), "parentRect" in e3 && le2(o2(20, Xe2 = e3.parentRect)), "hooks" in e3 && o2(95, Ge2 = e3.hooks);
  }, e2.$$.update = () => {
    var t3, M2;
    if (16777216 & e2.$$.dirty[2] | 8 & e2.$$.dirty[3] && (Je2 && ve2 === Je2 || o2(96, Je2 = ve2)), 67108864 & e2.$$.dirty[0] && bt2.set(E2), 67108864 & e2.$$.dirty[0] && xt2.set(E2), 67108864 & e2.$$.dirty[0] && vt2.set(E2), 8192 & e2.$$.dirty[0] | 813694976 & e2.$$.dirty[2] | 1 & e2.$$.dirty[3] && o2(25, i2 = ((e3, { willRenderPresetToolbar: t4, shapePresets: o3, enableViewTool: i3, enableMoveTool: n3 }) => {
      let r3 = 0 !== o3.length || t4 ? e3 : e3.filter((e4) => "preset" !== e4[0]);
      return r3 = n3 ? r3 : r3.filter((e4) => "move" !== e4[0]), i3 ? r3 : r3.filter((e4) => "view" !== e4[0]);
    })(xe2, { willRenderPresetToolbar: De2, shapePresets: _e2, enableMoveTool: ze2, enableViewTool: Be2 })), 256 & e2.$$.dirty[0] && o2(108, n2 = Object.keys(Te2).length), 33554432 & e2.$$.dirty[0] && o2(41, r2 = i2.length > 1), 33554432 & e2.$$.dirty[0] && o2(109, a2 = !!i2.length), 33554433 & e2.$$.dirty[0] | 65536 & e2.$$.dirty[3] && a2 && void 0 === we2 && o2(0, we2 = i2[0][0]), 1 & e2.$$.dirty[0] && o2(110, s2 = void 0 !== we2), 229376 & e2.$$.dirty[3] && o2(40, l2 = (!s2 || a2) && n2), 4194304 & e2.$$.dirty[0] && o2(23, C2 = Bt2 && (t3 = Bt2, (e3, o3) => {
      t3.dispatchEvent(hh(e3, o3));
    })), 75497473 & e2.$$.dirty[0] && E2 && C2 && C2("selectcontrol", we2), 67125248 & e2.$$.dirty[0] | 134217728 & e2.$$.dirty[3] && (E2 ? Qn(ut2, J2[Ve2] = { maskMarkupOpacity: 0.85 }, J2) : delete J2[Ve2]), 2097153 & e2.$$.dirty[0] && we2 && Ct2) {
      const e3 = Ct2.getMarkupItemDraft();
      e3 && Pt2(e3);
    }
    1 & e2.$$.dirty[0] && we2 && Ct2 && "move" !== we2 && Ct2.blurShapes(), 67108864 & e2.$$.dirty[0] | 67108864 & e2.$$.dirty[3] && o2(39, c2 = E2 && K2), 1073741824 & e2.$$.dirty[0] | 8388608 & e2.$$.dirty[3] && o2(38, d2 = q2 && ce(D2.x - q2.x, D2.y - q2.y)), 256 & e2.$$.dirty[0] && o2(107, u2 = Object.keys(Te2)), 201326592 & e2.$$.dirty[0] && o2(99, h2 = E2 && F2.filter(Ci)[0]), 201326592 & e2.$$.dirty[0] && o2(102, p2 = E2 && F2.find((e3) => Mi(e3))), 67108865 & e2.$$.dirty[0] | 8 & e2.$$.dirty[3] && o2(105, m2 = E2 && Je2[we2] ? Yi(ci({ ...Je2[we2][0], ...Y2[Ve2] ? Y2[Ve2][we2] : {} })) : {}), 8 & e2.$$.dirty[3] && Je2 && o2(97, Tt2 = {}), 1 & e2.$$.dirty[0] | 1073741824 & e2.$$.dirty[2] | 20496 & e2.$$.dirty[3] && o2(106, g2 = m2 && Object.keys(m2).reduce((e3, t4) => {
      const o3 = "disableStyle" === t4, i3 = u2.find((e4) => e4.split("_").includes(t4));
      if (!o3 && !i3)
        return e3;
      if (void 0 === m2[t4])
        return e3;
      if (true === m2.disableStyle)
        return e3;
      if (m2.disableStyle && m2.disableStyle.includes(t4))
        return e3;
      const n3 = Oe2 ? Tt2 : Tt2[we2] || {};
      return e3[t4] = Mo(n3, t4) ? n3[t4] : m2[t4], e3;
    }, {})), 16385 & e2.$$.dirty[0] | 33554432 & e2.$$.dirty[2] | 8192 & e2.$$.dirty[3] && (ke2 ? ((e3, t4, o3) => {
      const i3 = Y2[e3], n3 = i3 ? i3[t4] : {};
      Ke2.set({ ...Y2, [e3]: { ...i3, [t4]: { ...n3, ...o3 } } });
    })(Ve2, we2, g2) : (M2 = Ve2, Ke2.set({ [M2]: {} }))), 67108864 & e2.$$.dirty[0] | 8256 & e2.$$.dirty[3] && o2(24, $2 = E2 ? h2 || g2 : void 0), 16777216 & e2.$$.dirty[0] | 33554432 & e2.$$.dirty[3] && $2 && $2.lineEnd && !G2 && console.warn("Set shapePreprocessor property to draw lineStart and lineEnd styles.\nhttps://pqina.nl/pintura/docs/v8/api/exports/#createshapepreprocessor"), 12288 & e2.$$.dirty[3] && o2(37, f2 = m2 && ko(m2.eraseRadius) ? (g2 || m2).eraseRadius : void 0), 9217 & e2.$$.dirty[0] | 1 & e2.$$.dirty[3] && o2(36, y2 = "preset" === we2 && (_e2.length > 0 || Ie2 || De2)), 536870912 & e2.$$.dirty[0] && (b2 = !Mo(Z2, "x") && !Mo(Z2, "y")), 67108864 & e2.$$.dirty[0] | 16777216 & e2.$$.dirty[3] && o2(103, x2 = E2 && U2 && 32 === U2[0]), 67108865 & e2.$$.dirty[0] && o2(104, v2 = E2 && "view" === we2), 3072 & e2.$$.dirty[3] && o2(101, w2 = v2 || x2), 512 & e2.$$.dirty[3] && o2(100, S2 = !!p2), 67108864 & e2.$$.dirty[0] | 384 & e2.$$.dirty[3] && nt2.set(!E2 || w2 && !S2), 67108864 & e2.$$.dirty[0] | 128 & e2.$$.dirty[3] && at2.set(!E2 || !S2), 268435457 & e2.$$.dirty[0] | 96 & e2.$$.dirty[3] && o2(35, k2 = ((e3, t4, o3, i3, n3) => {
      if (o3)
        return i3 ? "grabbing" : "grab";
      if (!e3)
        return "move" === n3 ? "default" : "crosshair";
      let r3 = e3 || t4;
      return Ci(r3) ? Mi(r3) ? "modal" === Ce2 ? "default" : "text" : _i(r3) ? "move" : "default" : "default";
    })(It2, h2, H2, false, we2)), 4194304 & e2.$$.dirty[3] && o2(34, T2 = O2 * ct2), 3145729 & e2.$$.dirty[3] && o2(33, P2 = B2 && De2 ? (e3) => Ph(() => De2(e3, Et2, { ...z2 }, () => Ot2.set({}))) : j), 4 & e2.$$.dirty[3] && o2(32, R2 = Object.keys(Ge2).reduce((e3, t4) => ("beforeAddShape" === t4 || void 0 === Ge2[t4] || (e3[t4] = Ge2[t4]), e3), {})), 67108864 & e2.$$.dirty[0] && ((e3) => {
      be2 && be2.set(F2.map((t4) => (t4._prerender = !!e3 && Mi(t4), t4)));
    })(E2), 67108864 & e2.$$.dirty[0] | 524288 & e2.$$.dirty[3] && L2 && Dt2.set(E2 ? 0 : 20), 262144 & e2.$$.dirty[3] && o2(31, I2 = A2 ? `transform: translateY(${A2}px)` : void 0);
  }, [we2, me2, ge2, $e2, ye2, be2, Se2, Ce2, Te2, Re2, Ie2, Ae2, Fe2, _e2, Ve2, Ne2, He2, je2, Ue2, Ze2, Xe2, Ct2, Bt2, C2, $2, i2, E2, F2, H2, Z2, q2, I2, R2, P2, T2, k2, y2, f2, d2, c2, l2, r2, W2, Q2, ee2, te2, oe2, Ye2, qe2, Ke2, Qe2, tt2, ot2, rt2, st2, lt2, dt2, ut2, ht2, pt2, mt2, $t2, ft2, yt2, wt2, ({ value: e3 }, t3) => {
    o2(0, we2 = e3), (Ee2 || /enter/i.test(t3.key)) && St2(e3);
  }, (e3) => {
    if ("eraser" === we2)
      Mt2 = Ct2.eraseShape();
    else if (we2 && Je2[we2]) {
      const [e4, t3] = Je2[we2];
      Mt2 = Ct2.createShape({ ...e4, ...g2 }, t3);
    } else
      Mt2 = void 0;
    return !!Mt2 && (Mt2.start(e3), true);
  }, (e3) => !!Mt2 && (Mt2.update(e3), true), (e3) => !!Mt2 && (Mt2.release(e3), true), (e3) => !!Mt2 && (Mt2.cancel(e3), Mt2 = void 0, true), (e3) => {
    if (!Mt2)
      return false;
    Mt2.end(e3), Mt2 = void 0;
    const t3 = Ct2.getMarkupItemDraft(), i3 = ze2 && (true === Le2 || Array.isArray(Le2) && Le2.includes(we2));
    return t3 && !t3.isEditing || !i3 || o2(0, we2 = "move"), true;
  }, (e3) => {
    const { key: t3 } = e3, o3 = Ct2.getMarkupItemDraft();
    /escape/i.test(t3) && o3 && (e3.preventDefault(), e3.stopPropagation(), Ct2.discardMarkupItemDraft(), Mt2 = void 0), /enter/i.test(t3) && o3 && (e3.preventDefault(), e3.stopPropagation(), Pt2(o3), Mt2 = void 0);
  }, function(e3) {
    Object.keys(e3).forEach((t3) => {
      Oe2 ? o2(97, Tt2[t3] = e3[t3], Tt2) : (Tt2[we2] || o2(97, Tt2[we2] = {}, Tt2), o2(97, Tt2[we2][t3] = e3[t3], Tt2));
    }), C2("selectstyle", e3), h2 && (Ct2.updateMarkupShape(h2, e3), clearTimeout(Rt2), Rt2 = setTimeout(() => {
      zt2();
    }, 200));
  }, (e3) => C2("markuptap", e3), (e3) => o2(98, It2 = e3), () => {
    Ft2 = false;
  }, (e3, t3) => {
    if (Ft2)
      return;
    const { beforeAddShape: o3 = () => true } = Ge2, i3 = kt2(t3), n3 = Ct2.getMarkupItemDraft(), r3 = gt(X2, { x: i3.x + (Z2.x || 0), y: i3.y + (Z2.y || 0) });
    if (n3 && !r3 && Ct2.discardMarkupItemDraft(), r3) {
      if (!n3) {
        const n4 = pi(e3, X2), r4 = At2(n4, i3);
        return o3(r4) ? (Ei(r4), void Ct2.addShape(r4)) : (Ft2 = true, void t3.preventDefault());
      }
      bi(n3) && (i3.x -= 0.5 * n3.width, i3.y -= 0.5 * n3.height), e3.shape && (Mo(e3.shape, "x") && (i3.x = e3.shape.x), Mo(e3.shape, "y") && (i3.y = e3.shape.y)), Ct2.updateMarkupShape(n3, i3);
    }
  }, (e3, t3) => {
    if (Ft2)
      return;
    const o3 = kt2(t3);
    if (!gt(X2, { x: o3.x + (Z2.x || 0), y: o3.y + (Z2.y || 0) }))
      return void Ct2.discardMarkupItemDraft();
    const i3 = Ct2.confirmMarkupItemDraft();
    Ct2.selectShape(i3), C2("addshape", i3), et2.write();
  }, (e3) => Et2(e3), (e3) => {
    return t3 = e3.detail.resources, o3 = kt2(e3.detail.event), t3.forEach((e4) => Et2(e4, o3));
    var t3, o3;
  }, (e3) => {
    if (!We2)
      return true;
    const t3 = rectClone(N2);
    return rectScale(t3, 1 / V2), rectTranslate(t3, _2), rectScale(t3, W2), We2(e3, { ...t3, x: t3.x + D2.x, y: t3.y + D2.y });
  }, zt2, Ot2, Dt2, fe2, xe2, ve2, ke2, Ee2, Le2, ze2, Be2, Oe2, De2, We2, Ge2, Je2, Tt2, It2, h2, S2, w2, p2, x2, v2, m2, g2, u2, n2, a2, s2, A2, L2, z2, B2, O2, D2, U2, G2, K2, J2, function(t3) {
    _r.call(this, e2, t3);
  }, (e3) => e3[0] === we2, (e3) => {
    C2("addshape", e3), zt2();
  }, (e3) => {
    C2("selectshape", e3);
  }, (e3) => {
    C2("tapshape", e3);
  }, (e3) => {
    C2("updateshape", e3), zt2();
  }, (e3) => {
    C2("removeshape", e3), zt2();
  }, function(e3) {
    Nr[e3 ? "unshift" : "push"](() => {
      Ct2 = e3, o2(21, Ct2);
    });
  }, function(e3) {
    F2 = e3, be2.set(F2);
  }, function(e3) {
    ee2 = e3, dt2.set(ee2);
  }, function(e3) {
    Nr[e3 ? "unshift" : "push"](() => {
      Bt2 = e3, o2(22, Bt2);
    });
  }, function(t3) {
    _r.call(this, e2, t3);
  }];
}
var Ny = class extends wa {
  constructor(e2) {
    super(), va(this, e2, Vy, _y, Nn, { isActive: 1, isActiveFraction: 2, isVisible: 3, stores: 84, locale: 4, shapes: 5, toolbar: 85, toolShapes: 86, toolActive: 0, toolSelectRadius: 6, toolRetainStyles: 87, textInputMode: 7, shapeControls: 8, enableButtonFlipVertical: 9, enablePresetSelectImage: 10, enablePresetDropImage: 11, enableSelectToolToAddShape: 88, enableAutoSelectMoveTool: 89, enableTapToAddText: 12, enableMoveTool: 90, enableViewTool: 91, enableToolShareStyles: 92, willRenderPresetToolbar: 93, willStartInteraction: 94, shapePresets: 13, utilKey: 14, mapScreenPointToImagePoint: 15, mapImagePointToScreenPoint: 16, imageRotation: 17, imageFlipX: 18, imageFlipY: 19, parentRect: 20, hooks: 95 }, null, [-1, -1, -1, -1, -1, -1]);
  }
  get isActive() {
    return this.$$.ctx[1];
  }
  set isActive(e2) {
    this.$$set({ isActive: e2 }), ea();
  }
  get isActiveFraction() {
    return this.$$.ctx[2];
  }
  set isActiveFraction(e2) {
    this.$$set({ isActiveFraction: e2 }), ea();
  }
  get isVisible() {
    return this.$$.ctx[3];
  }
  set isVisible(e2) {
    this.$$set({ isVisible: e2 }), ea();
  }
  get stores() {
    return this.$$.ctx[84];
  }
  set stores(e2) {
    this.$$set({ stores: e2 }), ea();
  }
  get locale() {
    return this.$$.ctx[4];
  }
  set locale(e2) {
    this.$$set({ locale: e2 }), ea();
  }
  get shapes() {
    return this.$$.ctx[5];
  }
  set shapes(e2) {
    this.$$set({ shapes: e2 }), ea();
  }
  get toolbar() {
    return this.$$.ctx[85];
  }
  set toolbar(e2) {
    this.$$set({ toolbar: e2 }), ea();
  }
  get toolShapes() {
    return this.$$.ctx[86];
  }
  set toolShapes(e2) {
    this.$$set({ toolShapes: e2 }), ea();
  }
  get toolActive() {
    return this.$$.ctx[0];
  }
  set toolActive(e2) {
    this.$$set({ toolActive: e2 }), ea();
  }
  get toolSelectRadius() {
    return this.$$.ctx[6];
  }
  set toolSelectRadius(e2) {
    this.$$set({ toolSelectRadius: e2 }), ea();
  }
  get toolRetainStyles() {
    return this.$$.ctx[87];
  }
  set toolRetainStyles(e2) {
    this.$$set({ toolRetainStyles: e2 }), ea();
  }
  get textInputMode() {
    return this.$$.ctx[7];
  }
  set textInputMode(e2) {
    this.$$set({ textInputMode: e2 }), ea();
  }
  get shapeControls() {
    return this.$$.ctx[8];
  }
  set shapeControls(e2) {
    this.$$set({ shapeControls: e2 }), ea();
  }
  get enableButtonFlipVertical() {
    return this.$$.ctx[9];
  }
  set enableButtonFlipVertical(e2) {
    this.$$set({ enableButtonFlipVertical: e2 }), ea();
  }
  get enablePresetSelectImage() {
    return this.$$.ctx[10];
  }
  set enablePresetSelectImage(e2) {
    this.$$set({ enablePresetSelectImage: e2 }), ea();
  }
  get enablePresetDropImage() {
    return this.$$.ctx[11];
  }
  set enablePresetDropImage(e2) {
    this.$$set({ enablePresetDropImage: e2 }), ea();
  }
  get enableSelectToolToAddShape() {
    return this.$$.ctx[88];
  }
  set enableSelectToolToAddShape(e2) {
    this.$$set({ enableSelectToolToAddShape: e2 }), ea();
  }
  get enableAutoSelectMoveTool() {
    return this.$$.ctx[89];
  }
  set enableAutoSelectMoveTool(e2) {
    this.$$set({ enableAutoSelectMoveTool: e2 }), ea();
  }
  get enableTapToAddText() {
    return this.$$.ctx[12];
  }
  set enableTapToAddText(e2) {
    this.$$set({ enableTapToAddText: e2 }), ea();
  }
  get enableMoveTool() {
    return this.$$.ctx[90];
  }
  set enableMoveTool(e2) {
    this.$$set({ enableMoveTool: e2 }), ea();
  }
  get enableViewTool() {
    return this.$$.ctx[91];
  }
  set enableViewTool(e2) {
    this.$$set({ enableViewTool: e2 }), ea();
  }
  get enableToolShareStyles() {
    return this.$$.ctx[92];
  }
  set enableToolShareStyles(e2) {
    this.$$set({ enableToolShareStyles: e2 }), ea();
  }
  get willRenderPresetToolbar() {
    return this.$$.ctx[93];
  }
  set willRenderPresetToolbar(e2) {
    this.$$set({ willRenderPresetToolbar: e2 }), ea();
  }
  get willStartInteraction() {
    return this.$$.ctx[94];
  }
  set willStartInteraction(e2) {
    this.$$set({ willStartInteraction: e2 }), ea();
  }
  get shapePresets() {
    return this.$$.ctx[13];
  }
  set shapePresets(e2) {
    this.$$set({ shapePresets: e2 }), ea();
  }
  get utilKey() {
    return this.$$.ctx[14];
  }
  set utilKey(e2) {
    this.$$set({ utilKey: e2 }), ea();
  }
  get mapScreenPointToImagePoint() {
    return this.$$.ctx[15];
  }
  set mapScreenPointToImagePoint(e2) {
    this.$$set({ mapScreenPointToImagePoint: e2 }), ea();
  }
  get mapImagePointToScreenPoint() {
    return this.$$.ctx[16];
  }
  set mapImagePointToScreenPoint(e2) {
    this.$$set({ mapImagePointToScreenPoint: e2 }), ea();
  }
  get imageRotation() {
    return this.$$.ctx[17];
  }
  set imageRotation(e2) {
    this.$$set({ imageRotation: e2 }), ea();
  }
  get imageFlipX() {
    return this.$$.ctx[18];
  }
  set imageFlipX(e2) {
    this.$$set({ imageFlipX: e2 }), ea();
  }
  get imageFlipY() {
    return this.$$.ctx[19];
  }
  set imageFlipY(e2) {
    this.$$set({ imageFlipY: e2 }), ea();
  }
  get parentRect() {
    return this.$$.ctx[20];
  }
  set parentRect(e2) {
    this.$$set({ parentRect: e2 }), ea();
  }
  get hooks() {
    return this.$$.ctx[95];
  }
  set hooks(e2) {
    this.$$set({ hooks: e2 }), ea();
  }
};
var Hy = (e2, t2, o2, i2, n2, r2, a2, s2, l2) => {
  const c2 = ue(e2), d2 = 0.5 * o2.width, u2 = 0.5 * o2.height, h2 = 0.5 * t2.width, p2 = 0.5 * t2.height, m2 = n2.x + i2.x, g2 = n2.y + i2.y;
  s2 && (c2.x = o2.width - c2.x), l2 && (c2.y = o2.height - c2.y);
  const $2 = Math.cos(r2), f2 = Math.sin(r2);
  c2.x -= d2, c2.y -= u2;
  const y2 = c2.x * $2 - c2.y * f2, b2 = c2.x * f2 + c2.y * $2;
  c2.x = d2 + y2, c2.y = u2 + b2, c2.x *= a2, c2.y *= a2, c2.x += h2, c2.y += p2, c2.x += m2, c2.y += g2, c2.x -= d2 * a2, c2.y -= u2 * a2;
  const x2 = (n2.x - m2) * a2, v2 = (n2.y - g2) * a2, w2 = x2 * $2 - v2 * f2, S2 = x2 * f2 + v2 * $2;
  return c2.x += w2, c2.y += S2, c2;
};
var jy = (e2, t2, o2, i2, n2, r2, a2, s2, l2) => {
  const c2 = ue(e2), d2 = _e(o2), u2 = _e(t2), h2 = ce(n2.x + i2.x, n2.y + i2.y), p2 = Math.cos(r2), m2 = Math.sin(r2);
  c2.x -= u2.x, c2.y -= u2.y;
  const g2 = (n2.x - h2.x) * a2, $2 = (n2.y - h2.y) * a2, f2 = g2 * p2 - $2 * m2, y2 = g2 * m2 + $2 * p2;
  c2.x -= f2, c2.y -= y2, c2.x -= h2.x, c2.y -= h2.y, c2.x /= a2, c2.y /= a2;
  const b2 = c2.x * p2 + c2.y * m2, x2 = c2.x * m2 - c2.y * p2;
  return c2.x = b2, c2.y = -x2, c2.x += d2.x, c2.y += d2.y, s2 && (c2.x = o2.width - c2.x), l2 && (c2.y = o2.height - c2.y), c2;
};
function Uy(e2) {
  let t2, o2, i2;
  function n2(t3) {
    e2[53](t3);
  }
  let r2 = { utilKey: "annotate", stores: e2[4], locale: e2[5], isActive: e2[1], isActiveFraction: e2[2], isVisible: e2[3], mapScreenPointToImagePoint: e2[38], mapImagePointToScreenPoint: e2[37], imageRotation: e2[39], imageFlipX: e2[36], imageFlipY: e2[35], shapes: e2[41], toolbar: e2[14] || e2[6], toolShapes: e2[15] || e2[7], toolRetainStyles: e2[8], enableSelectToolToAddShape: e2[24], enableTapToAddText: e2[25], enableViewTool: e2[23], enableMoveTool: e2[27], enableAutoSelectMoveTool: e2[26], enableToolShareStyles: e2[12], shapeControls: e2[16] || e2[9], shapePresets: e2[20], enableButtonFlipVertical: e2[17], parentRect: e2[42], enablePresetDropImage: e2[19], enablePresetSelectImage: e2[18], toolSelectRadius: e2[10], textInputMode: e2[11], willStartInteraction: e2[22], willRenderPresetToolbar: e2[21] || e2[13], hooks: { willRenderShapeControls: e2[28], willRenderShapeTextControls: e2[29], beforeAddShape: e2[30], beforeRemoveShape: e2[31], beforeDeselectShape: e2[32], beforeSelectShape: e2[33], beforeUpdateShape: e2[34] } };
  return void 0 !== e2[0] && (r2.toolActive = e2[0]), t2 = new Ny({ props: r2 }), Nr.push(() => fa(t2, "toolActive", n2)), t2.$on("measure", e2[54]), { c() {
    ya(t2.$$.fragment);
  }, m(e3, o3) {
    ba(t2, e3, o3), i2 = true;
  }, p(e3, i3) {
    const n3 = {};
    16 & i3[0] && (n3.stores = e3[4]), 32 & i3[0] && (n3.locale = e3[5]), 2 & i3[0] && (n3.isActive = e3[1]), 4 & i3[0] && (n3.isActiveFraction = e3[2]), 8 & i3[0] && (n3.isVisible = e3[3]), 128 & i3[1] && (n3.mapScreenPointToImagePoint = e3[38]), 64 & i3[1] && (n3.mapImagePointToScreenPoint = e3[37]), 256 & i3[1] && (n3.imageRotation = e3[39]), 32 & i3[1] && (n3.imageFlipX = e3[36]), 16 & i3[1] && (n3.imageFlipY = e3[35]), 16448 & i3[0] && (n3.toolbar = e3[14] || e3[6]), 32896 & i3[0] && (n3.toolShapes = e3[15] || e3[7]), 256 & i3[0] && (n3.toolRetainStyles = e3[8]), 16777216 & i3[0] && (n3.enableSelectToolToAddShape = e3[24]), 33554432 & i3[0] && (n3.enableTapToAddText = e3[25]), 8388608 & i3[0] && (n3.enableViewTool = e3[23]), 134217728 & i3[0] && (n3.enableMoveTool = e3[27]), 67108864 & i3[0] && (n3.enableAutoSelectMoveTool = e3[26]), 4096 & i3[0] && (n3.enableToolShareStyles = e3[12]), 66048 & i3[0] && (n3.shapeControls = e3[16] || e3[9]), 1048576 & i3[0] && (n3.shapePresets = e3[20]), 131072 & i3[0] && (n3.enableButtonFlipVertical = e3[17]), 524288 & i3[0] && (n3.enablePresetDropImage = e3[19]), 262144 & i3[0] && (n3.enablePresetSelectImage = e3[18]), 1024 & i3[0] && (n3.toolSelectRadius = e3[10]), 2048 & i3[0] && (n3.textInputMode = e3[11]), 4194304 & i3[0] && (n3.willStartInteraction = e3[22]), 2105344 & i3[0] && (n3.willRenderPresetToolbar = e3[21] || e3[13]), 1879048192 & i3[0] | 15 & i3[1] && (n3.hooks = { willRenderShapeControls: e3[28], willRenderShapeTextControls: e3[29], beforeAddShape: e3[30], beforeRemoveShape: e3[31], beforeDeselectShape: e3[32], beforeSelectShape: e3[33], beforeUpdateShape: e3[34] }), !o2 && 1 & i3[0] && (o2 = true, n3.toolActive = e3[0], qr(() => o2 = false)), t2.$set(n3);
  }, i(e3) {
    i2 || (sa(t2.$$.fragment, e3), i2 = true);
  }, o(e3) {
    la(t2.$$.fragment, e3), i2 = false;
  }, d(e3) {
    xa(t2, e3);
  } };
}
function Zy(e2, t2, o2) {
  let i2, n2, r2, a2, s2, l2, c2, d2, u2;
  let { isActive: h2 } = t2, { isActiveFraction: p2 } = t2, { isVisible: m2 } = t2, { stores: g2 } = t2, { locale: $2 = {} } = t2, { markupEditorToolbar: f2 } = t2, { markupEditorToolStyles: y2 } = t2, { markupEditorToolRetainStyles: b2 } = t2, { markupEditorShapeStyleControls: x2 } = t2, { markupEditorToolSelectRadius: v2 } = t2, { markupEditorTextInputMode: w2 } = t2, { markupEditorToolShareStyles: S2 } = t2, { willRenderShapePresetToolbar: k2 } = t2, { annotateTools: C2 } = t2, { annotateToolShapes: M2 } = t2, { annotateShapeControls: T2 } = t2, { annotateActiveTool: P2 } = t2, { annotateEnableButtonFlipVertical: R2 = false } = t2, { annotateEnableSelectImagePreset: I2 = false } = t2, { annotateEnableDropImagePreset: A2 = true } = t2, { annotatePresets: E2 = [] } = t2, { annotateWillRenderShapePresetToolbar: L2 } = t2, { markupEditorWillStartInteraction: F2 } = t2, { enableViewTool: z2 } = t2, { enableSelectToolToAddShape: B2 } = t2, { enableTapToAddText: O2 } = t2, { enableAutoSelectMoveTool: D2 } = t2, { enableMoveTool: W2 } = t2, { willRenderShapeControls: _2 } = t2, { willRenderShapeTextControls: V2 } = t2, { beforeAddShape: N2 } = t2, { beforeRemoveShape: H2 } = t2, { beforeDeselectShape: j2 } = t2, { beforeSelectShape: U2 } = t2, { beforeUpdateShape: Z2 } = t2;
  const { rootRect: X2, imageAnnotation: G2, imageSize: Y2, imageRotation: q2, imageFlipX: K2, imageFlipY: J2, imageTransforms: Q2, imageTransformsInterpolated: ee2 } = g2;
  return Un(e2, X2, (e3) => o2(52, d2 = e3)), Un(e2, Y2, (e3) => o2(51, c2 = e3)), Un(e2, q2, (e3) => o2(39, u2 = e3)), Un(e2, K2, (e3) => o2(36, a2 = e3)), Un(e2, J2, (e3) => o2(35, r2 = e3)), Un(e2, Q2, (e3) => o2(50, l2 = e3)), Un(e2, ee2, (e3) => o2(49, s2 = e3)), e2.$$set = (e3) => {
    "isActive" in e3 && o2(1, h2 = e3.isActive), "isActiveFraction" in e3 && o2(2, p2 = e3.isActiveFraction), "isVisible" in e3 && o2(3, m2 = e3.isVisible), "stores" in e3 && o2(4, g2 = e3.stores), "locale" in e3 && o2(5, $2 = e3.locale), "markupEditorToolbar" in e3 && o2(6, f2 = e3.markupEditorToolbar), "markupEditorToolStyles" in e3 && o2(7, y2 = e3.markupEditorToolStyles), "markupEditorToolRetainStyles" in e3 && o2(8, b2 = e3.markupEditorToolRetainStyles), "markupEditorShapeStyleControls" in e3 && o2(9, x2 = e3.markupEditorShapeStyleControls), "markupEditorToolSelectRadius" in e3 && o2(10, v2 = e3.markupEditorToolSelectRadius), "markupEditorTextInputMode" in e3 && o2(11, w2 = e3.markupEditorTextInputMode), "markupEditorToolShareStyles" in e3 && o2(12, S2 = e3.markupEditorToolShareStyles), "willRenderShapePresetToolbar" in e3 && o2(13, k2 = e3.willRenderShapePresetToolbar), "annotateTools" in e3 && o2(14, C2 = e3.annotateTools), "annotateToolShapes" in e3 && o2(15, M2 = e3.annotateToolShapes), "annotateShapeControls" in e3 && o2(16, T2 = e3.annotateShapeControls), "annotateActiveTool" in e3 && o2(0, P2 = e3.annotateActiveTool), "annotateEnableButtonFlipVertical" in e3 && o2(17, R2 = e3.annotateEnableButtonFlipVertical), "annotateEnableSelectImagePreset" in e3 && o2(18, I2 = e3.annotateEnableSelectImagePreset), "annotateEnableDropImagePreset" in e3 && o2(19, A2 = e3.annotateEnableDropImagePreset), "annotatePresets" in e3 && o2(20, E2 = e3.annotatePresets), "annotateWillRenderShapePresetToolbar" in e3 && o2(21, L2 = e3.annotateWillRenderShapePresetToolbar), "markupEditorWillStartInteraction" in e3 && o2(22, F2 = e3.markupEditorWillStartInteraction), "enableViewTool" in e3 && o2(23, z2 = e3.enableViewTool), "enableSelectToolToAddShape" in e3 && o2(24, B2 = e3.enableSelectToolToAddShape), "enableTapToAddText" in e3 && o2(25, O2 = e3.enableTapToAddText), "enableAutoSelectMoveTool" in e3 && o2(26, D2 = e3.enableAutoSelectMoveTool), "enableMoveTool" in e3 && o2(27, W2 = e3.enableMoveTool), "willRenderShapeControls" in e3 && o2(28, _2 = e3.willRenderShapeControls), "willRenderShapeTextControls" in e3 && o2(29, V2 = e3.willRenderShapeTextControls), "beforeAddShape" in e3 && o2(30, N2 = e3.beforeAddShape), "beforeRemoveShape" in e3 && o2(31, H2 = e3.beforeRemoveShape), "beforeDeselectShape" in e3 && o2(32, j2 = e3.beforeDeselectShape), "beforeSelectShape" in e3 && o2(33, U2 = e3.beforeSelectShape), "beforeUpdateShape" in e3 && o2(34, Z2 = e3.beforeUpdateShape);
  }, e2.$$.update = () => {
    3932208 & e2.$$.dirty[1] && o2(38, i2 = (e3) => jy(e3, d2, c2, s2.origin, s2.translation, l2.rotation.z, s2.scale, a2, r2)), 3932208 & e2.$$.dirty[1] && o2(37, n2 = (e3) => Hy(e3, d2, c2, s2.origin, s2.translation, l2.rotation.z, s2.scale, a2, r2));
  }, [P2, h2, p2, m2, g2, $2, f2, y2, b2, x2, v2, w2, S2, k2, C2, M2, T2, R2, I2, A2, E2, L2, F2, z2, B2, O2, D2, W2, _2, V2, N2, H2, j2, U2, Z2, r2, a2, n2, i2, u2, X2, G2, Y2, q2, K2, J2, Q2, ee2, "annotate", s2, l2, c2, d2, function(e3) {
    P2 = e3, o2(0, P2);
  }, function(t3) {
    _r.call(this, e2, t3);
  }];
}
var Xy = { util: ["annotate", class extends wa {
  constructor(e2) {
    super(), va(this, e2, Zy, Uy, Nn, { name: 48, isActive: 1, isActiveFraction: 2, isVisible: 3, stores: 4, locale: 5, markupEditorToolbar: 6, markupEditorToolStyles: 7, markupEditorToolRetainStyles: 8, markupEditorShapeStyleControls: 9, markupEditorToolSelectRadius: 10, markupEditorTextInputMode: 11, markupEditorToolShareStyles: 12, willRenderShapePresetToolbar: 13, annotateTools: 14, annotateToolShapes: 15, annotateShapeControls: 16, annotateActiveTool: 0, annotateEnableButtonFlipVertical: 17, annotateEnableSelectImagePreset: 18, annotateEnableDropImagePreset: 19, annotatePresets: 20, annotateWillRenderShapePresetToolbar: 21, markupEditorWillStartInteraction: 22, enableViewTool: 23, enableSelectToolToAddShape: 24, enableTapToAddText: 25, enableAutoSelectMoveTool: 26, enableMoveTool: 27, willRenderShapeControls: 28, willRenderShapeTextControls: 29, beforeAddShape: 30, beforeRemoveShape: 31, beforeDeselectShape: 32, beforeSelectShape: 33, beforeUpdateShape: 34 }, null, [-1, -1]);
  }
  get name() {
    return this.$$.ctx[48];
  }
  get isActive() {
    return this.$$.ctx[1];
  }
  set isActive(e2) {
    this.$$set({ isActive: e2 }), ea();
  }
  get isActiveFraction() {
    return this.$$.ctx[2];
  }
  set isActiveFraction(e2) {
    this.$$set({ isActiveFraction: e2 }), ea();
  }
  get isVisible() {
    return this.$$.ctx[3];
  }
  set isVisible(e2) {
    this.$$set({ isVisible: e2 }), ea();
  }
  get stores() {
    return this.$$.ctx[4];
  }
  set stores(e2) {
    this.$$set({ stores: e2 }), ea();
  }
  get locale() {
    return this.$$.ctx[5];
  }
  set locale(e2) {
    this.$$set({ locale: e2 }), ea();
  }
  get markupEditorToolbar() {
    return this.$$.ctx[6];
  }
  set markupEditorToolbar(e2) {
    this.$$set({ markupEditorToolbar: e2 }), ea();
  }
  get markupEditorToolStyles() {
    return this.$$.ctx[7];
  }
  set markupEditorToolStyles(e2) {
    this.$$set({ markupEditorToolStyles: e2 }), ea();
  }
  get markupEditorToolRetainStyles() {
    return this.$$.ctx[8];
  }
  set markupEditorToolRetainStyles(e2) {
    this.$$set({ markupEditorToolRetainStyles: e2 }), ea();
  }
  get markupEditorShapeStyleControls() {
    return this.$$.ctx[9];
  }
  set markupEditorShapeStyleControls(e2) {
    this.$$set({ markupEditorShapeStyleControls: e2 }), ea();
  }
  get markupEditorToolSelectRadius() {
    return this.$$.ctx[10];
  }
  set markupEditorToolSelectRadius(e2) {
    this.$$set({ markupEditorToolSelectRadius: e2 }), ea();
  }
  get markupEditorTextInputMode() {
    return this.$$.ctx[11];
  }
  set markupEditorTextInputMode(e2) {
    this.$$set({ markupEditorTextInputMode: e2 }), ea();
  }
  get markupEditorToolShareStyles() {
    return this.$$.ctx[12];
  }
  set markupEditorToolShareStyles(e2) {
    this.$$set({ markupEditorToolShareStyles: e2 }), ea();
  }
  get willRenderShapePresetToolbar() {
    return this.$$.ctx[13];
  }
  set willRenderShapePresetToolbar(e2) {
    this.$$set({ willRenderShapePresetToolbar: e2 }), ea();
  }
  get annotateTools() {
    return this.$$.ctx[14];
  }
  set annotateTools(e2) {
    this.$$set({ annotateTools: e2 }), ea();
  }
  get annotateToolShapes() {
    return this.$$.ctx[15];
  }
  set annotateToolShapes(e2) {
    this.$$set({ annotateToolShapes: e2 }), ea();
  }
  get annotateShapeControls() {
    return this.$$.ctx[16];
  }
  set annotateShapeControls(e2) {
    this.$$set({ annotateShapeControls: e2 }), ea();
  }
  get annotateActiveTool() {
    return this.$$.ctx[0];
  }
  set annotateActiveTool(e2) {
    this.$$set({ annotateActiveTool: e2 }), ea();
  }
  get annotateEnableButtonFlipVertical() {
    return this.$$.ctx[17];
  }
  set annotateEnableButtonFlipVertical(e2) {
    this.$$set({ annotateEnableButtonFlipVertical: e2 }), ea();
  }
  get annotateEnableSelectImagePreset() {
    return this.$$.ctx[18];
  }
  set annotateEnableSelectImagePreset(e2) {
    this.$$set({ annotateEnableSelectImagePreset: e2 }), ea();
  }
  get annotateEnableDropImagePreset() {
    return this.$$.ctx[19];
  }
  set annotateEnableDropImagePreset(e2) {
    this.$$set({ annotateEnableDropImagePreset: e2 }), ea();
  }
  get annotatePresets() {
    return this.$$.ctx[20];
  }
  set annotatePresets(e2) {
    this.$$set({ annotatePresets: e2 }), ea();
  }
  get annotateWillRenderShapePresetToolbar() {
    return this.$$.ctx[21];
  }
  set annotateWillRenderShapePresetToolbar(e2) {
    this.$$set({ annotateWillRenderShapePresetToolbar: e2 }), ea();
  }
  get markupEditorWillStartInteraction() {
    return this.$$.ctx[22];
  }
  set markupEditorWillStartInteraction(e2) {
    this.$$set({ markupEditorWillStartInteraction: e2 }), ea();
  }
  get enableViewTool() {
    return this.$$.ctx[23];
  }
  set enableViewTool(e2) {
    this.$$set({ enableViewTool: e2 }), ea();
  }
  get enableSelectToolToAddShape() {
    return this.$$.ctx[24];
  }
  set enableSelectToolToAddShape(e2) {
    this.$$set({ enableSelectToolToAddShape: e2 }), ea();
  }
  get enableTapToAddText() {
    return this.$$.ctx[25];
  }
  set enableTapToAddText(e2) {
    this.$$set({ enableTapToAddText: e2 }), ea();
  }
  get enableAutoSelectMoveTool() {
    return this.$$.ctx[26];
  }
  set enableAutoSelectMoveTool(e2) {
    this.$$set({ enableAutoSelectMoveTool: e2 }), ea();
  }
  get enableMoveTool() {
    return this.$$.ctx[27];
  }
  set enableMoveTool(e2) {
    this.$$set({ enableMoveTool: e2 }), ea();
  }
  get willRenderShapeControls() {
    return this.$$.ctx[28];
  }
  set willRenderShapeControls(e2) {
    this.$$set({ willRenderShapeControls: e2 }), ea();
  }
  get willRenderShapeTextControls() {
    return this.$$.ctx[29];
  }
  set willRenderShapeTextControls(e2) {
    this.$$set({ willRenderShapeTextControls: e2 }), ea();
  }
  get beforeAddShape() {
    return this.$$.ctx[30];
  }
  set beforeAddShape(e2) {
    this.$$set({ beforeAddShape: e2 }), ea();
  }
  get beforeRemoveShape() {
    return this.$$.ctx[31];
  }
  set beforeRemoveShape(e2) {
    this.$$set({ beforeRemoveShape: e2 }), ea();
  }
  get beforeDeselectShape() {
    return this.$$.ctx[32];
  }
  set beforeDeselectShape(e2) {
    this.$$set({ beforeDeselectShape: e2 }), ea();
  }
  get beforeSelectShape() {
    return this.$$.ctx[33];
  }
  set beforeSelectShape(e2) {
    this.$$set({ beforeSelectShape: e2 }), ea();
  }
  get beforeUpdateShape() {
    return this.$$.ctx[34];
  }
  set beforeUpdateShape(e2) {
    this.$$set({ beforeUpdateShape: e2 }), ea();
  }
}] };
function Gy(e2) {
  let t2, o2, i2;
  function n2(t3) {
    e2[45](t3);
  }
  let r2 = { stores: e2[4], locale: e2[5], isActive: e2[1], isActiveFraction: e2[2], isVisible: e2[3], mapScreenPointToImagePoint: e2[36], mapImagePointToScreenPoint: e2[35], utilKey: "decorate", shapes: e2[38], toolbar: e2[14] || e2[6], toolShapes: e2[15] || e2[7], toolRetainStyles: e2[8], shapeControls: e2[16] || e2[9], shapePresets: e2[20], enableSelectToolToAddShape: e2[22], enableTapToAddText: e2[23], enableViewTool: e2[24], enableMoveTool: e2[25], enableAutoSelectMoveTool: e2[26], enableToolShareStyles: e2[12], enablePresetSelectImage: e2[18], enablePresetDropImage: e2[19], enableButtonFlipVertical: e2[17], parentRect: e2[37], toolSelectRadius: e2[10], textInputMode: e2[11], willStartInteraction: e2[34], willRenderPresetToolbar: e2[21] || e2[13], hooks: { willRenderShapeControls: e2[27], willRenderShapeTextControls: e2[28], beforeAddShape: e2[29], beforeRemoveShape: e2[30], beforeDeselectShape: e2[31], beforeSelectShape: e2[32], beforeUpdateShape: e2[33] } };
  return void 0 !== e2[0] && (r2.toolActive = e2[0]), t2 = new Ny({ props: r2 }), Nr.push(() => fa(t2, "toolActive", n2)), t2.$on("measure", e2[46]), { c() {
    ya(t2.$$.fragment);
  }, m(e3, o3) {
    ba(t2, e3, o3), i2 = true;
  }, p(e3, i3) {
    const n3 = {};
    16 & i3[0] && (n3.stores = e3[4]), 32 & i3[0] && (n3.locale = e3[5]), 2 & i3[0] && (n3.isActive = e3[1]), 4 & i3[0] && (n3.isActiveFraction = e3[2]), 8 & i3[0] && (n3.isVisible = e3[3]), 32 & i3[1] && (n3.mapScreenPointToImagePoint = e3[36]), 16 & i3[1] && (n3.mapImagePointToScreenPoint = e3[35]), 16448 & i3[0] && (n3.toolbar = e3[14] || e3[6]), 32896 & i3[0] && (n3.toolShapes = e3[15] || e3[7]), 256 & i3[0] && (n3.toolRetainStyles = e3[8]), 66048 & i3[0] && (n3.shapeControls = e3[16] || e3[9]), 1048576 & i3[0] && (n3.shapePresets = e3[20]), 4194304 & i3[0] && (n3.enableSelectToolToAddShape = e3[22]), 8388608 & i3[0] && (n3.enableTapToAddText = e3[23]), 16777216 & i3[0] && (n3.enableViewTool = e3[24]), 33554432 & i3[0] && (n3.enableMoveTool = e3[25]), 67108864 & i3[0] && (n3.enableAutoSelectMoveTool = e3[26]), 4096 & i3[0] && (n3.enableToolShareStyles = e3[12]), 262144 & i3[0] && (n3.enablePresetSelectImage = e3[18]), 524288 & i3[0] && (n3.enablePresetDropImage = e3[19]), 131072 & i3[0] && (n3.enableButtonFlipVertical = e3[17]), 1024 & i3[0] && (n3.toolSelectRadius = e3[10]), 2048 & i3[0] && (n3.textInputMode = e3[11]), 8 & i3[1] && (n3.willStartInteraction = e3[34]), 2105344 & i3[0] && (n3.willRenderPresetToolbar = e3[21] || e3[13]), 2013265920 & i3[0] | 7 & i3[1] && (n3.hooks = { willRenderShapeControls: e3[27], willRenderShapeTextControls: e3[28], beforeAddShape: e3[29], beforeRemoveShape: e3[30], beforeDeselectShape: e3[31], beforeSelectShape: e3[32], beforeUpdateShape: e3[33] }), !o2 && 1 & i3[0] && (o2 = true, n3.toolActive = e3[0], qr(() => o2 = false)), t2.$set(n3);
  }, i(e3) {
    i2 || (sa(t2.$$.fragment, e3), i2 = true);
  }, o(e3) {
    la(t2.$$.fragment, e3), i2 = false;
  }, d(e3) {
    xa(t2, e3);
  } };
}
function Yy(e2, t2, o2) {
  let i2, n2, r2, a2, s2;
  let { isActive: l2 } = t2, { isActiveFraction: c2 } = t2, { isVisible: d2 } = t2, { stores: u2 } = t2, { locale: h2 = {} } = t2, { markupEditorToolbar: p2 } = t2, { markupEditorToolStyles: m2 } = t2, { markupEditorToolRetainStyles: g2 } = t2, { markupEditorShapeStyleControls: $2 } = t2, { markupEditorToolSelectRadius: f2 } = t2, { markupEditorTextInputMode: y2 } = t2, { markupEditorToolShareStyles: b2 } = t2, { willRenderShapePresetToolbar: x2 } = t2, { decorateTools: v2 } = t2, { decorateToolShapes: w2 } = t2, { decorateShapeControls: S2 } = t2, { decorateActiveTool: k2 } = t2, { decorateEnableButtonFlipVertical: C2 = false } = t2, { decorateEnableSelectImagePreset: M2 = false } = t2, { decorateEnableDropImagePreset: T2 = true } = t2, { decoratePresets: P2 = [] } = t2, { decorateWillRenderShapePresetToolbar: R2 } = t2, { enableSelectToolToAddShape: I2 } = t2, { enableTapToAddText: A2 } = t2, { enableViewTool: E2 } = t2, { enableMoveTool: L2 } = t2, { enableAutoSelectMoveTool: F2 } = t2, { willRenderShapeControls: z2 } = t2, { willRenderShapeTextControls: B2 } = t2, { beforeAddShape: O2 } = t2, { beforeRemoveShape: D2 } = t2, { beforeDeselectShape: W2 } = t2, { beforeSelectShape: _2 } = t2, { beforeUpdateShape: V2 } = t2, { markupEditorWillStartInteraction: N2 } = t2;
  const { imageCropRect: H2, imageDecoration: j2, imageSelectionRectPresentation: U2, imageTransformsInterpolated: Z2 } = u2;
  return Un(e2, U2, (e3) => o2(43, a2 = e3)), Un(e2, Z2, (e3) => o2(44, s2 = e3)), e2.$$set = (e3) => {
    "isActive" in e3 && o2(1, l2 = e3.isActive), "isActiveFraction" in e3 && o2(2, c2 = e3.isActiveFraction), "isVisible" in e3 && o2(3, d2 = e3.isVisible), "stores" in e3 && o2(4, u2 = e3.stores), "locale" in e3 && o2(5, h2 = e3.locale), "markupEditorToolbar" in e3 && o2(6, p2 = e3.markupEditorToolbar), "markupEditorToolStyles" in e3 && o2(7, m2 = e3.markupEditorToolStyles), "markupEditorToolRetainStyles" in e3 && o2(8, g2 = e3.markupEditorToolRetainStyles), "markupEditorShapeStyleControls" in e3 && o2(9, $2 = e3.markupEditorShapeStyleControls), "markupEditorToolSelectRadius" in e3 && o2(10, f2 = e3.markupEditorToolSelectRadius), "markupEditorTextInputMode" in e3 && o2(11, y2 = e3.markupEditorTextInputMode), "markupEditorToolShareStyles" in e3 && o2(12, b2 = e3.markupEditorToolShareStyles), "willRenderShapePresetToolbar" in e3 && o2(13, x2 = e3.willRenderShapePresetToolbar), "decorateTools" in e3 && o2(14, v2 = e3.decorateTools), "decorateToolShapes" in e3 && o2(15, w2 = e3.decorateToolShapes), "decorateShapeControls" in e3 && o2(16, S2 = e3.decorateShapeControls), "decorateActiveTool" in e3 && o2(0, k2 = e3.decorateActiveTool), "decorateEnableButtonFlipVertical" in e3 && o2(17, C2 = e3.decorateEnableButtonFlipVertical), "decorateEnableSelectImagePreset" in e3 && o2(18, M2 = e3.decorateEnableSelectImagePreset), "decorateEnableDropImagePreset" in e3 && o2(19, T2 = e3.decorateEnableDropImagePreset), "decoratePresets" in e3 && o2(20, P2 = e3.decoratePresets), "decorateWillRenderShapePresetToolbar" in e3 && o2(21, R2 = e3.decorateWillRenderShapePresetToolbar), "enableSelectToolToAddShape" in e3 && o2(22, I2 = e3.enableSelectToolToAddShape), "enableTapToAddText" in e3 && o2(23, A2 = e3.enableTapToAddText), "enableViewTool" in e3 && o2(24, E2 = e3.enableViewTool), "enableMoveTool" in e3 && o2(25, L2 = e3.enableMoveTool), "enableAutoSelectMoveTool" in e3 && o2(26, F2 = e3.enableAutoSelectMoveTool), "willRenderShapeControls" in e3 && o2(27, z2 = e3.willRenderShapeControls), "willRenderShapeTextControls" in e3 && o2(28, B2 = e3.willRenderShapeTextControls), "beforeAddShape" in e3 && o2(29, O2 = e3.beforeAddShape), "beforeRemoveShape" in e3 && o2(30, D2 = e3.beforeRemoveShape), "beforeDeselectShape" in e3 && o2(31, W2 = e3.beforeDeselectShape), "beforeSelectShape" in e3 && o2(32, _2 = e3.beforeSelectShape), "beforeUpdateShape" in e3 && o2(33, V2 = e3.beforeUpdateShape), "markupEditorWillStartInteraction" in e3 && o2(34, N2 = e3.markupEditorWillStartInteraction);
  }, e2.$$.update = () => {
    8192 & e2.$$.dirty[1] && o2(42, i2 = s2 ? s2.scale : 1), 6144 & e2.$$.dirty[1] && o2(36, n2 = (e3) => {
      const t3 = ue(e3);
      return t3.x -= a2.x, t3.y -= a2.y, t3.x /= i2, t3.y /= i2, t3;
    }), 6144 & e2.$$.dirty[1] && o2(35, r2 = (e3) => {
      const t3 = ue(e3);
      return t3.x *= i2, t3.y *= i2, t3.x += a2.x, t3.y += a2.y, t3;
    });
  }, [k2, l2, c2, d2, u2, h2, p2, m2, g2, $2, f2, y2, b2, x2, v2, w2, S2, C2, M2, T2, P2, R2, I2, A2, E2, L2, F2, z2, B2, O2, D2, W2, _2, V2, N2, r2, n2, H2, j2, U2, Z2, "decorate", i2, a2, s2, function(e3) {
    k2 = e3, o2(0, k2);
  }, function(t3) {
    _r.call(this, e2, t3);
  }];
}
var qy = { util: ["decorate", class extends wa {
  constructor(e2) {
    super(), va(this, e2, Yy, Gy, Nn, { name: 41, isActive: 1, isActiveFraction: 2, isVisible: 3, stores: 4, locale: 5, markupEditorToolbar: 6, markupEditorToolStyles: 7, markupEditorToolRetainStyles: 8, markupEditorShapeStyleControls: 9, markupEditorToolSelectRadius: 10, markupEditorTextInputMode: 11, markupEditorToolShareStyles: 12, willRenderShapePresetToolbar: 13, decorateTools: 14, decorateToolShapes: 15, decorateShapeControls: 16, decorateActiveTool: 0, decorateEnableButtonFlipVertical: 17, decorateEnableSelectImagePreset: 18, decorateEnableDropImagePreset: 19, decoratePresets: 20, decorateWillRenderShapePresetToolbar: 21, enableSelectToolToAddShape: 22, enableTapToAddText: 23, enableViewTool: 24, enableMoveTool: 25, enableAutoSelectMoveTool: 26, willRenderShapeControls: 27, willRenderShapeTextControls: 28, beforeAddShape: 29, beforeRemoveShape: 30, beforeDeselectShape: 31, beforeSelectShape: 32, beforeUpdateShape: 33, markupEditorWillStartInteraction: 34 }, null, [-1, -1]);
  }
  get name() {
    return this.$$.ctx[41];
  }
  get isActive() {
    return this.$$.ctx[1];
  }
  set isActive(e2) {
    this.$$set({ isActive: e2 }), ea();
  }
  get isActiveFraction() {
    return this.$$.ctx[2];
  }
  set isActiveFraction(e2) {
    this.$$set({ isActiveFraction: e2 }), ea();
  }
  get isVisible() {
    return this.$$.ctx[3];
  }
  set isVisible(e2) {
    this.$$set({ isVisible: e2 }), ea();
  }
  get stores() {
    return this.$$.ctx[4];
  }
  set stores(e2) {
    this.$$set({ stores: e2 }), ea();
  }
  get locale() {
    return this.$$.ctx[5];
  }
  set locale(e2) {
    this.$$set({ locale: e2 }), ea();
  }
  get markupEditorToolbar() {
    return this.$$.ctx[6];
  }
  set markupEditorToolbar(e2) {
    this.$$set({ markupEditorToolbar: e2 }), ea();
  }
  get markupEditorToolStyles() {
    return this.$$.ctx[7];
  }
  set markupEditorToolStyles(e2) {
    this.$$set({ markupEditorToolStyles: e2 }), ea();
  }
  get markupEditorToolRetainStyles() {
    return this.$$.ctx[8];
  }
  set markupEditorToolRetainStyles(e2) {
    this.$$set({ markupEditorToolRetainStyles: e2 }), ea();
  }
  get markupEditorShapeStyleControls() {
    return this.$$.ctx[9];
  }
  set markupEditorShapeStyleControls(e2) {
    this.$$set({ markupEditorShapeStyleControls: e2 }), ea();
  }
  get markupEditorToolSelectRadius() {
    return this.$$.ctx[10];
  }
  set markupEditorToolSelectRadius(e2) {
    this.$$set({ markupEditorToolSelectRadius: e2 }), ea();
  }
  get markupEditorTextInputMode() {
    return this.$$.ctx[11];
  }
  set markupEditorTextInputMode(e2) {
    this.$$set({ markupEditorTextInputMode: e2 }), ea();
  }
  get markupEditorToolShareStyles() {
    return this.$$.ctx[12];
  }
  set markupEditorToolShareStyles(e2) {
    this.$$set({ markupEditorToolShareStyles: e2 }), ea();
  }
  get willRenderShapePresetToolbar() {
    return this.$$.ctx[13];
  }
  set willRenderShapePresetToolbar(e2) {
    this.$$set({ willRenderShapePresetToolbar: e2 }), ea();
  }
  get decorateTools() {
    return this.$$.ctx[14];
  }
  set decorateTools(e2) {
    this.$$set({ decorateTools: e2 }), ea();
  }
  get decorateToolShapes() {
    return this.$$.ctx[15];
  }
  set decorateToolShapes(e2) {
    this.$$set({ decorateToolShapes: e2 }), ea();
  }
  get decorateShapeControls() {
    return this.$$.ctx[16];
  }
  set decorateShapeControls(e2) {
    this.$$set({ decorateShapeControls: e2 }), ea();
  }
  get decorateActiveTool() {
    return this.$$.ctx[0];
  }
  set decorateActiveTool(e2) {
    this.$$set({ decorateActiveTool: e2 }), ea();
  }
  get decorateEnableButtonFlipVertical() {
    return this.$$.ctx[17];
  }
  set decorateEnableButtonFlipVertical(e2) {
    this.$$set({ decorateEnableButtonFlipVertical: e2 }), ea();
  }
  get decorateEnableSelectImagePreset() {
    return this.$$.ctx[18];
  }
  set decorateEnableSelectImagePreset(e2) {
    this.$$set({ decorateEnableSelectImagePreset: e2 }), ea();
  }
  get decorateEnableDropImagePreset() {
    return this.$$.ctx[19];
  }
  set decorateEnableDropImagePreset(e2) {
    this.$$set({ decorateEnableDropImagePreset: e2 }), ea();
  }
  get decoratePresets() {
    return this.$$.ctx[20];
  }
  set decoratePresets(e2) {
    this.$$set({ decoratePresets: e2 }), ea();
  }
  get decorateWillRenderShapePresetToolbar() {
    return this.$$.ctx[21];
  }
  set decorateWillRenderShapePresetToolbar(e2) {
    this.$$set({ decorateWillRenderShapePresetToolbar: e2 }), ea();
  }
  get enableSelectToolToAddShape() {
    return this.$$.ctx[22];
  }
  set enableSelectToolToAddShape(e2) {
    this.$$set({ enableSelectToolToAddShape: e2 }), ea();
  }
  get enableTapToAddText() {
    return this.$$.ctx[23];
  }
  set enableTapToAddText(e2) {
    this.$$set({ enableTapToAddText: e2 }), ea();
  }
  get enableViewTool() {
    return this.$$.ctx[24];
  }
  set enableViewTool(e2) {
    this.$$set({ enableViewTool: e2 }), ea();
  }
  get enableMoveTool() {
    return this.$$.ctx[25];
  }
  set enableMoveTool(e2) {
    this.$$set({ enableMoveTool: e2 }), ea();
  }
  get enableAutoSelectMoveTool() {
    return this.$$.ctx[26];
  }
  set enableAutoSelectMoveTool(e2) {
    this.$$set({ enableAutoSelectMoveTool: e2 }), ea();
  }
  get willRenderShapeControls() {
    return this.$$.ctx[27];
  }
  set willRenderShapeControls(e2) {
    this.$$set({ willRenderShapeControls: e2 }), ea();
  }
  get willRenderShapeTextControls() {
    return this.$$.ctx[28];
  }
  set willRenderShapeTextControls(e2) {
    this.$$set({ willRenderShapeTextControls: e2 }), ea();
  }
  get beforeAddShape() {
    return this.$$.ctx[29];
  }
  set beforeAddShape(e2) {
    this.$$set({ beforeAddShape: e2 }), ea();
  }
  get beforeRemoveShape() {
    return this.$$.ctx[30];
  }
  set beforeRemoveShape(e2) {
    this.$$set({ beforeRemoveShape: e2 }), ea();
  }
  get beforeDeselectShape() {
    return this.$$.ctx[31];
  }
  set beforeDeselectShape(e2) {
    this.$$set({ beforeDeselectShape: e2 }), ea();
  }
  get beforeSelectShape() {
    return this.$$.ctx[32];
  }
  set beforeSelectShape(e2) {
    this.$$set({ beforeSelectShape: e2 }), ea();
  }
  get beforeUpdateShape() {
    return this.$$.ctx[33];
  }
  set beforeUpdateShape(e2) {
    this.$$set({ beforeUpdateShape: e2 }), ea();
  }
  get markupEditorWillStartInteraction() {
    return this.$$.ctx[34];
  }
  set markupEditorWillStartInteraction(e2) {
    this.$$set({ markupEditorWillStartInteraction: e2 }), ea();
  }
}] };
function Ky(e2) {
  let t2, o2;
  return t2 = new Ny({ props: { stores: e2[3], locale: e2[4], isActive: e2[0], isActiveFraction: e2[1], isVisible: e2[2], mapScreenPointToImagePoint: e2[25], mapImagePointToScreenPoint: e2[24], utilKey: "sticker", shapePresets: e2[5], shapes: e2[6] ? e2[31] : e2[32], toolActive: "preset", imageFlipX: !!e2[6] && e2[23], imageFlipY: !!e2[6] && e2[22], imageRotation: e2[6] ? e2[27] : 0, parentRect: e2[6] ? e2[33] : e2[29], enablePresetDropImage: e2[7], enablePresetSelectImage: e2[26], enableButtonFlipVertical: e2[10] || e2[8], toolSelectRadius: e2[14], willStartInteraction: e2[21], willRenderPresetToolbar: e2[11] || e2[9] || e2[15], hooks: { willRenderShapeControls: e2[12], willRenderShapeTextControls: e2[13], beforeAddShape: e2[16], beforeRemoveShape: e2[17], beforeDeselectShape: e2[18], beforeSelectShape: e2[19], beforeUpdateShape: e2[20] } } }), t2.$on("measure", e2[48]), { c() {
    ya(t2.$$.fragment);
  }, m(e3, i2) {
    ba(t2, e3, i2), o2 = true;
  }, p(e3, o3) {
    const i2 = {};
    8 & o3[0] && (i2.stores = e3[3]), 16 & o3[0] && (i2.locale = e3[4]), 1 & o3[0] && (i2.isActive = e3[0]), 2 & o3[0] && (i2.isActiveFraction = e3[1]), 4 & o3[0] && (i2.isVisible = e3[2]), 33554432 & o3[0] && (i2.mapScreenPointToImagePoint = e3[25]), 16777216 & o3[0] && (i2.mapImagePointToScreenPoint = e3[24]), 32 & o3[0] && (i2.shapePresets = e3[5]), 64 & o3[0] && (i2.shapes = e3[6] ? e3[31] : e3[32]), 8388672 & o3[0] && (i2.imageFlipX = !!e3[6] && e3[23]), 4194368 & o3[0] && (i2.imageFlipY = !!e3[6] && e3[22]), 134217792 & o3[0] && (i2.imageRotation = e3[6] ? e3[27] : 0), 64 & o3[0] && (i2.parentRect = e3[6] ? e3[33] : e3[29]), 128 & o3[0] && (i2.enablePresetDropImage = e3[7]), 67108864 & o3[0] && (i2.enablePresetSelectImage = e3[26]), 1280 & o3[0] && (i2.enableButtonFlipVertical = e3[10] || e3[8]), 16384 & o3[0] && (i2.toolSelectRadius = e3[14]), 2097152 & o3[0] && (i2.willStartInteraction = e3[21]), 35328 & o3[0] && (i2.willRenderPresetToolbar = e3[11] || e3[9] || e3[15]), 2043904 & o3[0] && (i2.hooks = { willRenderShapeControls: e3[12], willRenderShapeTextControls: e3[13], beforeAddShape: e3[16], beforeRemoveShape: e3[17], beforeDeselectShape: e3[18], beforeSelectShape: e3[19], beforeUpdateShape: e3[20] }), t2.$set(i2);
  }, i(e3) {
    o2 || (sa(t2.$$.fragment, e3), o2 = true);
  }, o(e3) {
    la(t2.$$.fragment, e3), o2 = false;
  }, d(e3) {
    xa(t2, e3);
  } };
}
function Jy(e2, t2, o2) {
  let i2, n2, r2, a2, s2, l2, c2, d2, u2, h2, p2, m2;
  let { isActive: g2 } = t2, { isActiveFraction: $2 } = t2, { isVisible: f2 } = t2, { stores: y2 } = t2, { locale: b2 = {} } = t2, { stickers: x2 = [] } = t2, { stickerStickToImage: v2 = false } = t2, { stickerEnableSelectImagePreset: w2 = true } = t2, { stickerEnableDropImagePreset: S2 = true } = t2, { stickerEnableButtonFlipVertical: k2 = false } = t2, { stickerWillRenderShapePresetToolbar: C2 } = t2, { stickerEnableSelectImage: M2 = true } = t2, { stickersEnableButtonFlipVertical: T2 = false } = t2, { stickersWillRenderShapePresetToolbar: P2 } = t2, { willRenderShapeControls: R2 } = t2, { willRenderShapeTextControls: I2 } = t2, { markupEditorToolSelectRadius: A2 } = t2, { willRenderShapePresetToolbar: E2 } = t2, { beforeAddShape: L2 } = t2, { beforeRemoveShape: F2 } = t2, { beforeDeselectShape: z2 } = t2, { beforeSelectShape: B2 } = t2, { beforeUpdateShape: O2 } = t2, { markupEditorWillStartInteraction: D2 } = t2;
  const { rootRect: W2, imageCropRect: _2, imageSelectionRectPresentation: V2, imageAnnotation: N2, imageDecoration: H2, imageSize: j2, imageTransforms: U2, imageTransformsInterpolated: Z2, imageRotation: X2, imageFlipX: G2, imageFlipY: Y2 } = y2;
  return Un(e2, W2, (e3) => o2(47, p2 = e3)), Un(e2, V2, (e3) => o2(43, s2 = e3)), Un(e2, j2, (e3) => o2(46, h2 = e3)), Un(e2, U2, (e3) => o2(45, u2 = e3)), Un(e2, Z2, (e3) => o2(44, d2 = e3)), Un(e2, X2, (e3) => o2(27, m2 = e3)), Un(e2, G2, (e3) => o2(23, c2 = e3)), Un(e2, Y2, (e3) => o2(22, l2 = e3)), e2.$$set = (e3) => {
    "isActive" in e3 && o2(0, g2 = e3.isActive), "isActiveFraction" in e3 && o2(1, $2 = e3.isActiveFraction), "isVisible" in e3 && o2(2, f2 = e3.isVisible), "stores" in e3 && o2(3, y2 = e3.stores), "locale" in e3 && o2(4, b2 = e3.locale), "stickers" in e3 && o2(5, x2 = e3.stickers), "stickerStickToImage" in e3 && o2(6, v2 = e3.stickerStickToImage), "stickerEnableSelectImagePreset" in e3 && o2(40, w2 = e3.stickerEnableSelectImagePreset), "stickerEnableDropImagePreset" in e3 && o2(7, S2 = e3.stickerEnableDropImagePreset), "stickerEnableButtonFlipVertical" in e3 && o2(8, k2 = e3.stickerEnableButtonFlipVertical), "stickerWillRenderShapePresetToolbar" in e3 && o2(9, C2 = e3.stickerWillRenderShapePresetToolbar), "stickerEnableSelectImage" in e3 && o2(41, M2 = e3.stickerEnableSelectImage), "stickersEnableButtonFlipVertical" in e3 && o2(10, T2 = e3.stickersEnableButtonFlipVertical), "stickersWillRenderShapePresetToolbar" in e3 && o2(11, P2 = e3.stickersWillRenderShapePresetToolbar), "willRenderShapeControls" in e3 && o2(12, R2 = e3.willRenderShapeControls), "willRenderShapeTextControls" in e3 && o2(13, I2 = e3.willRenderShapeTextControls), "markupEditorToolSelectRadius" in e3 && o2(14, A2 = e3.markupEditorToolSelectRadius), "willRenderShapePresetToolbar" in e3 && o2(15, E2 = e3.willRenderShapePresetToolbar), "beforeAddShape" in e3 && o2(16, L2 = e3.beforeAddShape), "beforeRemoveShape" in e3 && o2(17, F2 = e3.beforeRemoveShape), "beforeDeselectShape" in e3 && o2(18, z2 = e3.beforeDeselectShape), "beforeSelectShape" in e3 && o2(19, B2 = e3.beforeSelectShape), "beforeUpdateShape" in e3 && o2(20, O2 = e3.beforeUpdateShape), "markupEditorWillStartInteraction" in e3 && o2(21, D2 = e3.markupEditorWillStartInteraction);
  }, e2.$$.update = () => {
    8192 & e2.$$.dirty[1] && o2(42, i2 = d2 ? d2.scale : 1), 1536 & e2.$$.dirty[1] && o2(26, n2 = false !== w2 && M2), 12582976 & e2.$$.dirty[0] | 129024 & e2.$$.dirty[1] && o2(25, r2 = v2 ? (e3) => jy(e3, p2, h2, d2.origin, d2.translation, u2.rotation.z, d2.scale, c2, l2) : (e3) => {
      const t3 = ue(e3);
      return t3.x -= s2.x, t3.y -= s2.y, t3.x /= i2, t3.y /= i2, t3;
    }), 12582976 & e2.$$.dirty[0] | 129024 & e2.$$.dirty[1] && o2(24, a2 = v2 ? (e3) => Hy(e3, p2, h2, d2.origin, d2.translation, u2.rotation.z, d2.scale, c2, l2) : (e3) => {
      const t3 = ue(e3);
      return t3.x *= i2, t3.y *= i2, t3.x += s2.x, t3.y += s2.y, t3;
    });
  }, [g2, $2, f2, y2, b2, x2, v2, S2, k2, C2, T2, P2, R2, I2, A2, E2, L2, F2, z2, B2, O2, D2, l2, c2, a2, r2, n2, m2, W2, _2, V2, N2, H2, j2, U2, Z2, X2, G2, Y2, "sticker", w2, M2, i2, s2, d2, u2, h2, p2, function(t3) {
    _r.call(this, e2, t3);
  }];
}
var Qy = { util: ["sticker", class extends wa {
  constructor(e2) {
    super(), va(this, e2, Jy, Ky, Nn, { name: 39, isActive: 0, isActiveFraction: 1, isVisible: 2, stores: 3, locale: 4, stickers: 5, stickerStickToImage: 6, stickerEnableSelectImagePreset: 40, stickerEnableDropImagePreset: 7, stickerEnableButtonFlipVertical: 8, stickerWillRenderShapePresetToolbar: 9, stickerEnableSelectImage: 41, stickersEnableButtonFlipVertical: 10, stickersWillRenderShapePresetToolbar: 11, willRenderShapeControls: 12, willRenderShapeTextControls: 13, markupEditorToolSelectRadius: 14, willRenderShapePresetToolbar: 15, beforeAddShape: 16, beforeRemoveShape: 17, beforeDeselectShape: 18, beforeSelectShape: 19, beforeUpdateShape: 20, markupEditorWillStartInteraction: 21 }, null, [-1, -1]);
  }
  get name() {
    return this.$$.ctx[39];
  }
  get isActive() {
    return this.$$.ctx[0];
  }
  set isActive(e2) {
    this.$$set({ isActive: e2 }), ea();
  }
  get isActiveFraction() {
    return this.$$.ctx[1];
  }
  set isActiveFraction(e2) {
    this.$$set({ isActiveFraction: e2 }), ea();
  }
  get isVisible() {
    return this.$$.ctx[2];
  }
  set isVisible(e2) {
    this.$$set({ isVisible: e2 }), ea();
  }
  get stores() {
    return this.$$.ctx[3];
  }
  set stores(e2) {
    this.$$set({ stores: e2 }), ea();
  }
  get locale() {
    return this.$$.ctx[4];
  }
  set locale(e2) {
    this.$$set({ locale: e2 }), ea();
  }
  get stickers() {
    return this.$$.ctx[5];
  }
  set stickers(e2) {
    this.$$set({ stickers: e2 }), ea();
  }
  get stickerStickToImage() {
    return this.$$.ctx[6];
  }
  set stickerStickToImage(e2) {
    this.$$set({ stickerStickToImage: e2 }), ea();
  }
  get stickerEnableSelectImagePreset() {
    return this.$$.ctx[40];
  }
  set stickerEnableSelectImagePreset(e2) {
    this.$$set({ stickerEnableSelectImagePreset: e2 }), ea();
  }
  get stickerEnableDropImagePreset() {
    return this.$$.ctx[7];
  }
  set stickerEnableDropImagePreset(e2) {
    this.$$set({ stickerEnableDropImagePreset: e2 }), ea();
  }
  get stickerEnableButtonFlipVertical() {
    return this.$$.ctx[8];
  }
  set stickerEnableButtonFlipVertical(e2) {
    this.$$set({ stickerEnableButtonFlipVertical: e2 }), ea();
  }
  get stickerWillRenderShapePresetToolbar() {
    return this.$$.ctx[9];
  }
  set stickerWillRenderShapePresetToolbar(e2) {
    this.$$set({ stickerWillRenderShapePresetToolbar: e2 }), ea();
  }
  get stickerEnableSelectImage() {
    return this.$$.ctx[41];
  }
  set stickerEnableSelectImage(e2) {
    this.$$set({ stickerEnableSelectImage: e2 }), ea();
  }
  get stickersEnableButtonFlipVertical() {
    return this.$$.ctx[10];
  }
  set stickersEnableButtonFlipVertical(e2) {
    this.$$set({ stickersEnableButtonFlipVertical: e2 }), ea();
  }
  get stickersWillRenderShapePresetToolbar() {
    return this.$$.ctx[11];
  }
  set stickersWillRenderShapePresetToolbar(e2) {
    this.$$set({ stickersWillRenderShapePresetToolbar: e2 }), ea();
  }
  get willRenderShapeControls() {
    return this.$$.ctx[12];
  }
  set willRenderShapeControls(e2) {
    this.$$set({ willRenderShapeControls: e2 }), ea();
  }
  get willRenderShapeTextControls() {
    return this.$$.ctx[13];
  }
  set willRenderShapeTextControls(e2) {
    this.$$set({ willRenderShapeTextControls: e2 }), ea();
  }
  get markupEditorToolSelectRadius() {
    return this.$$.ctx[14];
  }
  set markupEditorToolSelectRadius(e2) {
    this.$$set({ markupEditorToolSelectRadius: e2 }), ea();
  }
  get willRenderShapePresetToolbar() {
    return this.$$.ctx[15];
  }
  set willRenderShapePresetToolbar(e2) {
    this.$$set({ willRenderShapePresetToolbar: e2 }), ea();
  }
  get beforeAddShape() {
    return this.$$.ctx[16];
  }
  set beforeAddShape(e2) {
    this.$$set({ beforeAddShape: e2 }), ea();
  }
  get beforeRemoveShape() {
    return this.$$.ctx[17];
  }
  set beforeRemoveShape(e2) {
    this.$$set({ beforeRemoveShape: e2 }), ea();
  }
  get beforeDeselectShape() {
    return this.$$.ctx[18];
  }
  set beforeDeselectShape(e2) {
    this.$$set({ beforeDeselectShape: e2 }), ea();
  }
  get beforeSelectShape() {
    return this.$$.ctx[19];
  }
  set beforeSelectShape(e2) {
    this.$$set({ beforeSelectShape: e2 }), ea();
  }
  get beforeUpdateShape() {
    return this.$$.ctx[20];
  }
  set beforeUpdateShape(e2) {
    this.$$set({ beforeUpdateShape: e2 }), ea();
  }
  get markupEditorWillStartInteraction() {
    return this.$$.ctx[21];
  }
  set markupEditorWillStartInteraction(e2) {
    this.$$set({ markupEditorWillStartInteraction: e2 }), ea();
  }
}, ({ stickers: e2, stickerEnableSelectImagePreset: t2, stickerEnableDropImagePreset: o2 }) => e2 && e2.length || t2 || o2] };
function eb(e2) {
  let t2, o2, i2, n2, r2, a2 = (e2[14](e2[33].value) || "") + "", s2 = (T(e2[33].label) ? e2[33].label(e2[1]) : e2[33].label) + "";
  return { c() {
    t2 = hr("div"), o2 = new Cr(false), i2 = gr(), n2 = hr("span"), r2 = mr(s2), o2.a = i2, xr(t2, "slot", "option");
  }, m(e3, s3) {
    dr(e3, t2, s3), o2.m(a2, t2), sr(t2, i2), sr(t2, n2), sr(n2, r2);
  }, p(e3, t3) {
    4 & t3[1] && a2 !== (a2 = (e3[14](e3[33].value) || "") + "") && o2.p(a2), 2 & t3[0] | 4 & t3[1] && s2 !== (s2 = (T(e3[33].label) ? e3[33].label(e3[1]) : e3[33].label) + "") && wr(r2, s2);
  }, d(e3) {
    e3 && ur(t2);
  } };
}
function tb(e2) {
  let t2, o2;
  return t2 = new yu({ props: { locale: e2[1], class: "PinturaControlList", layout: "row", options: e2[2], selectedIndex: e2[6], onchange: e2[12], $$slots: { option: [eb, ({ option: e3 }) => ({ 33: e3 }), ({ option: e3 }) => [0, e3 ? 4 : 0]] }, $$scope: { ctx: e2 } } }), { c() {
    ya(t2.$$.fragment);
  }, m(e3, i2) {
    ba(t2, e3, i2), o2 = true;
  }, p(e3, o3) {
    const i2 = {};
    2 & o3[0] && (i2.locale = e3[1]), 4 & o3[0] && (i2.options = e3[2]), 64 & o3[0] && (i2.selectedIndex = e3[6]), 2 & o3[0] | 12 & o3[1] && (i2.$$scope = { dirty: o3, ctx: e3 }), t2.$set(i2);
  }, i(e3) {
    o2 || (sa(t2.$$.fragment, e3), o2 = true);
  }, o(e3) {
    la(t2.$$.fragment, e3), o2 = false;
  }, d(e3) {
    xa(t2, e3);
  } };
}
function ob(e2) {
  let t2, o2, i2, n2, r2;
  return o2 = new ey({ props: { locale: e2[1], class: "PinturaControlPanels", shape: e2[4], onchange: e2[13], controls: e2[3], scrollElasticity: e2[7] } }), n2 = new ad({ props: { elasticity: e2[10], $$slots: { default: [tb] }, $$scope: { ctx: e2 } } }), { c() {
    t2 = hr("div"), ya(o2.$$.fragment), i2 = gr(), ya(n2.$$.fragment), xr(t2, "slot", "footer"), xr(t2, "style", e2[5]);
  }, m(e3, a2) {
    dr(e3, t2, a2), ba(o2, t2, null), sr(t2, i2), ba(n2, t2, null), r2 = true;
  }, p(e3, i3) {
    const a2 = {};
    2 & i3[0] && (a2.locale = e3[1]), 16 & i3[0] && (a2.shape = e3[4]), 8 & i3[0] && (a2.controls = e3[3]), 128 & i3[0] && (a2.scrollElasticity = e3[7]), o2.$set(a2);
    const s2 = {};
    70 & i3[0] | 8 & i3[1] && (s2.$$scope = { dirty: i3, ctx: e3 }), n2.$set(s2), (!r2 || 32 & i3[0]) && xr(t2, "style", e3[5]);
  }, i(e3) {
    r2 || (sa(o2.$$.fragment, e3), sa(n2.$$.fragment, e3), r2 = true);
  }, o(e3) {
    la(o2.$$.fragment, e3), la(n2.$$.fragment, e3), r2 = false;
  }, d(e3) {
    e3 && ur(t2), xa(o2), xa(n2);
  } };
}
function ib(e2) {
  let t2, o2;
  return t2 = new Yg({ props: { $$slots: { footer: [ob] }, $$scope: { ctx: e2 } } }), t2.$on("measure", e2[23]), { c() {
    ya(t2.$$.fragment);
  }, m(e3, i2) {
    ba(t2, e3, i2), o2 = true;
  }, p(e3, o3) {
    const i2 = {};
    254 & o3[0] | 8 & o3[1] && (i2.$$scope = { dirty: o3, ctx: e3 }), t2.$set(i2);
  }, i(e3) {
    o2 || (sa(t2.$$.fragment, e3), o2 = true);
  }, o(e3) {
    la(t2.$$.fragment, e3), o2 = false;
  }, d(e3) {
    xa(t2, e3);
  } };
}
function nb(e2, t2, o2) {
  let i2, n2, r2, a2, s2, l2, c2, d2, u2 = zn, h2 = () => (u2(), u2 = Hn(p2, (e3) => o2(20, s2 = e3)), p2);
  e2.$$.on_destroy.push(() => u2());
  let { isActive: p2 } = t2;
  h2();
  let { stores: m2 } = t2, { locale: g2 = {} } = t2, { frameStyles: $2 = {} } = t2, { frameOptions: f2 = [] } = t2, { markupEditorShapeStyleControls: y2 } = t2;
  const b2 = Wr("elasticityMultiplier");
  Un(e2, b2, (e3) => o2(22, d2 = e3));
  const { history: x2, animation: v2, scrollElasticity: w2, imageFrame: S2, allowPan: k2, allowZoom: C2, allowZoomControls: M2 } = m2;
  Un(e2, v2, (e3) => o2(21, l2 = e3)), Un(e2, S2, (e3) => o2(4, c2 = e3));
  let T2 = {};
  let P2;
  const R2 = _l(l2 ? 20 : 0);
  return Un(e2, R2, (e3) => o2(19, a2 = e3)), e2.$$set = (e3) => {
    "isActive" in e3 && h2(o2(0, p2 = e3.isActive)), "stores" in e3 && o2(17, m2 = e3.stores), "locale" in e3 && o2(1, g2 = e3.locale), "frameStyles" in e3 && o2(18, $2 = e3.frameStyles), "frameOptions" in e3 && o2(2, f2 = e3.frameOptions), "markupEditorShapeStyleControls" in e3 && o2(3, y2 = e3.markupEditorShapeStyleControls);
  }, e2.$$.update = () => {
    1048576 & e2.$$.dirty[0] && k2.set(s2), 1048576 & e2.$$.dirty[0] && C2.set(s2), 1048576 & e2.$$.dirty[0] && M2.set(s2), 4194304 & e2.$$.dirty[0] && o2(7, i2 = d2 * w2), 20 & e2.$$.dirty[0] && o2(6, n2 = c2 ? f2.findIndex(([e3]) => e3 === c2.id) : 0), 3145728 & e2.$$.dirty[0] && l2 && R2.set(s2 ? 0 : 20), 524288 & e2.$$.dirty[0] && o2(5, r2 = a2 ? `transform: translateY(${a2}px)` : void 0);
  }, [p2, g2, f2, y2, c2, r2, n2, i2, b2, v2, w2, S2, ({ value: e3 }) => {
    const t3 = $2[e3];
    if (!t3 || !t3.shape)
      return S2.set(void 0), void x2.write();
    const { shape: o3 } = t3, i3 = { id: e3, ...ci(o3), ...Object.keys(T2).reduce((e4, t4) => o3[t4] ? (e4[t4] = T2[t4], e4) : e4, {}) };
    S2.set(i3), x2.write();
  }, function(e3) {
    Mo(e3, "frameColor") && (T2.frameColor = e3.frameColor), c2 && (an(c2, e3), S2.set(c2), clearTimeout(P2), P2 = setTimeout(() => {
      x2.write();
    }, 200));
  }, (e3) => {
    const t3 = $2[e3];
    var o3;
    if (t3 && t3.thumb)
      return o3 = t3.thumb, /div/i.test(o3) || dy(o3) ? o3 : /rect|path|circle|line|<g>/i.test(o3) ? `<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" stroke-width="1" stroke="currentColor" fill="none" aria-hidden="true" focusable="false" stroke-linecap="round" stroke-linejoin="round">${o3}</svg>` : `<img src="${o3}" alt=""/>`;
  }, R2, "frame", m2, $2, a2, s2, l2, d2, function(t3) {
    _r.call(this, e2, t3);
  }];
}
var rb = { util: ["frame", class extends wa {
  constructor(e2) {
    super(), va(this, e2, nb, ib, Nn, { name: 16, isActive: 0, stores: 17, locale: 1, frameStyles: 18, frameOptions: 2, markupEditorShapeStyleControls: 3 }, null, [-1, -1]);
  }
  get name() {
    return this.$$.ctx[16];
  }
  get isActive() {
    return this.$$.ctx[0];
  }
  set isActive(e2) {
    this.$$set({ isActive: e2 }), ea();
  }
  get stores() {
    return this.$$.ctx[17];
  }
  set stores(e2) {
    this.$$set({ stores: e2 }), ea();
  }
  get locale() {
    return this.$$.ctx[1];
  }
  set locale(e2) {
    this.$$set({ locale: e2 }), ea();
  }
  get frameStyles() {
    return this.$$.ctx[18];
  }
  set frameStyles(e2) {
    this.$$set({ frameStyles: e2 }), ea();
  }
  get frameOptions() {
    return this.$$.ctx[2];
  }
  set frameOptions(e2) {
    this.$$set({ frameOptions: e2 }), ea();
  }
  get markupEditorShapeStyleControls() {
    return this.$$.ctx[3];
  }
  set markupEditorShapeStyleControls(e2) {
    this.$$set({ markupEditorShapeStyleControls: e2 }), ea();
  }
}, ({ src: e2 }) => e2 && !$h(e2)] };
function ab(e2) {
  let t2, o2, i2, n2, r2, a2, s2, l2;
  return { c() {
    t2 = hr("div"), o2 = hr("input"), n2 = gr(), r2 = hr("label"), a2 = mr(e2[1]), xr(o2, "id", e2[0]), xr(o2, "type", "number"), xr(o2, "min", "1"), xr(o2, "inputmode", "numeric"), xr(o2, "pattern", "[0-9]*"), xr(o2, "data-state", e2[3]), xr(o2, "autocomplete", "off"), xr(o2, "placeholder", e2[4]), o2.value = i2 = void 0 === e2[5] ? "" : e2[7](e2[5] + ""), xr(r2, "for", e2[0]), xr(r2, "title", e2[2]), xr(r2, "aria-label", e2[2]), xr(t2, "class", "PinturaInputDimension");
  }, m(i3, c2) {
    dr(i3, t2, c2), sr(t2, o2), sr(t2, n2), sr(t2, r2), sr(r2, a2), s2 || (l2 = fr(o2, "input", e2[8]), s2 = true);
  }, p(e3, [t3]) {
    1 & t3 && xr(o2, "id", e3[0]), 8 & t3 && xr(o2, "data-state", e3[3]), 16 & t3 && xr(o2, "placeholder", e3[4]), 160 & t3 && i2 !== (i2 = void 0 === e3[5] ? "" : e3[7](e3[5] + "")) && o2.value !== i2 && (o2.value = i2), 2 & t3 && wr(a2, e3[1]), 1 & t3 && xr(r2, "for", e3[0]), 4 & t3 && xr(r2, "title", e3[2]), 4 & t3 && xr(r2, "aria-label", e3[2]);
  }, i: zn, o: zn, d(e3) {
    e3 && ur(t2), s2 = false, l2();
  } };
}
function sb(e2, t2, o2) {
  let { id: i2 } = t2, { label: n2 } = t2, { title: r2 } = t2, { state: a2 } = t2, { placeholder: s2 } = t2, { value: l2 } = t2, { onchange: c2 } = t2, { format: d2 = (e3) => e3.replace(/\D/g, "") } = t2;
  return e2.$$set = (e3) => {
    "id" in e3 && o2(0, i2 = e3.id), "label" in e3 && o2(1, n2 = e3.label), "title" in e3 && o2(2, r2 = e3.title), "state" in e3 && o2(3, a2 = e3.state), "placeholder" in e3 && o2(4, s2 = e3.placeholder), "value" in e3 && o2(5, l2 = e3.value), "onchange" in e3 && o2(6, c2 = e3.onchange), "format" in e3 && o2(7, d2 = e3.format);
  }, [i2, n2, r2, a2, s2, l2, c2, d2, (e3) => c2(d2(e3.currentTarget.value))];
}
var lb = class extends wa {
  constructor(e2) {
    super(), va(this, e2, sb, ab, Nn, { id: 0, label: 1, title: 2, state: 3, placeholder: 4, value: 5, onchange: 6, format: 7 });
  }
};
function cb(e2) {
  let t2;
  return { c() {
    t2 = pr("g");
  }, m(o2, i2) {
    dr(o2, t2, i2), t2.innerHTML = e2[2];
  }, p(e3, o2) {
    4 & o2 && (t2.innerHTML = e3[2]);
  }, d(e3) {
    e3 && ur(t2);
  } };
}
function db(e2) {
  let t2, o2, i2, n2, r2, a2, s2, l2;
  return r2 = new _c({ props: { $$slots: { default: [cb] }, $$scope: { ctx: e2 } } }), { c() {
    t2 = hr("div"), o2 = hr("input"), i2 = gr(), n2 = hr("label"), ya(r2.$$.fragment), xr(o2, "id", e2[0]), xr(o2, "class", "implicit"), xr(o2, "type", "checkbox"), o2.checked = e2[1], xr(n2, "for", e2[0]), xr(n2, "title", e2[3]);
  }, m(c2, d2) {
    dr(c2, t2, d2), sr(t2, o2), sr(t2, i2), sr(t2, n2), ba(r2, n2, null), a2 = true, s2 || (l2 = fr(o2, "change", e2[5]), s2 = true);
  }, p(e3, [t3]) {
    (!a2 || 1 & t3) && xr(o2, "id", e3[0]), (!a2 || 2 & t3) && (o2.checked = e3[1]);
    const i3 = {};
    68 & t3 && (i3.$$scope = { dirty: t3, ctx: e3 }), r2.$set(i3), (!a2 || 1 & t3) && xr(n2, "for", e3[0]), (!a2 || 8 & t3) && xr(n2, "title", e3[3]);
  }, i(e3) {
    a2 || (sa(r2.$$.fragment, e3), a2 = true);
  }, o(e3) {
    la(r2.$$.fragment, e3), a2 = false;
  }, d(e3) {
    e3 && ur(t2), xa(r2), s2 = false, l2();
  } };
}
function ub(e2, t2, o2) {
  let { id: i2 } = t2, { locked: n2 } = t2, { icon: r2 } = t2, { title: a2 } = t2, { onchange: s2 } = t2;
  return e2.$$set = (e3) => {
    "id" in e3 && o2(0, i2 = e3.id), "locked" in e3 && o2(1, n2 = e3.locked), "icon" in e3 && o2(2, r2 = e3.icon), "title" in e3 && o2(3, a2 = e3.title), "onchange" in e3 && o2(4, s2 = e3.onchange);
  }, [i2, n2, r2, a2, s2, (e3) => s2(e3.currentTarget.checked)];
}
var hb = class extends wa {
  constructor(e2) {
    super(), va(this, e2, ub, db, Nn, { id: 0, locked: 1, icon: 2, title: 3, onchange: 4 });
  }
};
function pb(e2) {
  let t2;
  return { c() {
    t2 = mr("Save");
  }, m(e3, o2) {
    dr(e3, t2, o2);
  }, d(e3) {
    e3 && ur(t2);
  } };
}
function mb(e2) {
  let t2, o2, i2, n2, r2, a2, s2, l2, c2, d2, u2, h2, p2, m2 = e2[1].resizeLabelFormCaption + "";
  return l2 = new ch({ props: { items: e2[4] } }), d2 = new Gc({ props: { type: "submit", class: "implicit", $$slots: { default: [pb] }, $$scope: { ctx: e2 } } }), { c() {
    t2 = hr("form"), o2 = hr("div"), i2 = hr("fieldset"), n2 = hr("legend"), r2 = mr(m2), a2 = gr(), s2 = hr("div"), ya(l2.$$.fragment), c2 = gr(), ya(d2.$$.fragment), xr(n2, "class", "implicit"), xr(s2, "class", "PinturaFieldsetInner"), xr(o2, "class", "PinturaFormInner"), xr(t2, "slot", "footer"), xr(t2, "style", e2[3]);
  }, m(m3, g2) {
    dr(m3, t2, g2), sr(t2, o2), sr(o2, i2), sr(i2, n2), sr(n2, r2), sr(i2, a2), sr(i2, s2), ba(l2, s2, null), e2[64](s2), sr(o2, c2), ba(d2, o2, null), u2 = true, h2 || (p2 = [fr(s2, "focusin", e2[15]), fr(s2, "focusout", e2[16]), fr(t2, "submit", yr(e2[17]))], h2 = true);
  }, p(e3, o3) {
    (!u2 || 2 & o3[0]) && m2 !== (m2 = e3[1].resizeLabelFormCaption + "") && wr(r2, m2);
    const i3 = {};
    16 & o3[0] && (i3.items = e3[4]), l2.$set(i3);
    const n3 = {};
    4 & o3[3] && (n3.$$scope = { dirty: o3, ctx: e3 }), d2.$set(n3), (!u2 || 8 & o3[0]) && xr(t2, "style", e3[3]);
  }, i(e3) {
    u2 || (sa(l2.$$.fragment, e3), sa(d2.$$.fragment, e3), u2 = true);
  }, o(e3) {
    la(l2.$$.fragment, e3), la(d2.$$.fragment, e3), u2 = false;
  }, d(o3) {
    o3 && ur(t2), xa(l2), e2[64](null), xa(d2), h2 = false, _n(p2);
  } };
}
function gb(e2) {
  let t2, o2;
  return t2 = new Yg({ props: { $$slots: { footer: [mb] }, $$scope: { ctx: e2 } } }), t2.$on("measure", e2[65]), { c() {
    ya(t2.$$.fragment);
  }, m(e3, i2) {
    ba(t2, e3, i2), o2 = true;
  }, p(e3, o3) {
    const i2 = {};
    30 & o3[0] | 4 & o3[3] && (i2.$$scope = { dirty: o3, ctx: e3 }), t2.$set(i2);
  }, i(e3) {
    o2 || (sa(t2.$$.fragment, e3), o2 = true);
  }, o(e3) {
    la(t2.$$.fragment, e3), o2 = false;
  }, d(e3) {
    xa(t2, e3);
  } };
}
function $b(e2, t2, o2) {
  let i2, n2, r2, a2, s2, l2, c2, d2, u2, h2, p2, m2, g2, $2, f2, y2, b2, x2, v2, w2, S2, k2, C2, T2, P2, R2, I2, E2, L2, F2, z2 = zn, B2 = () => (z2(), z2 = Hn(D2, (e3) => o2(48, p2 = e3)), D2);
  e2.$$.on_destroy.push(() => z2());
  const O2 = (e3, t3 = 0, o3 = 9999) => {
    if (M(e3) && !(e3 = e3.replace(/\D/g, "")).length)
      return;
    const i3 = Math.round(e3);
    return Number.isNaN(i3) ? void 0 : Ua(i3, t3, o3);
  };
  let { isActive: D2 } = t2;
  B2();
  let { stores: W2 } = t2, { locale: _2 = {} } = t2, { resizeMinSize: V2 = Oe(1, 1) } = t2, { resizeMaxSize: N2 = Oe(9999, 9999) } = t2, { resizeSizePresetOptions: U2 } = t2, { resizeWidthPresetOptions: Z2 } = t2, { resizeHeightPresetOptions: X2 } = t2, { resizeWillRenderFooter: G2 = j } = t2;
  const Y2 = _l(0, { stiffness: 0.15, damping: 0.3 });
  Un(e2, Y2, (e3) => o2(53, y2 = e3));
  const { animation: q2, imageSize: K2, imageCropRect: J2, imageCropRectAspectRatio: Q2, imageCropAspectRatio: ee2, imageOutputSize: te2, imageSelectionZoom: oe2, imageSelectionPan: ie2, history: ne2, env: re2, allowPan: ae2, allowZoom: se2, allowZoomControls: ce2 } = W2;
  Un(e2, q2, (e3) => o2(49, m2 = e3)), Un(e2, K2, (e3) => o2(72, E2 = e3)), Un(e2, J2, (e3) => o2(51, $2 = e3)), Un(e2, Q2, (e3) => o2(52, f2 = e3)), Un(e2, ee2, (e3) => o2(71, T2 = e3)), Un(e2, te2, (e3) => o2(60, C2 = e3)), Un(e2, oe2, (e3) => o2(73, L2 = e3)), Un(e2, ie2, (e3) => o2(74, F2 = e3)), Un(e2, re2, (e3) => o2(50, g2 = e3));
  const de2 = A();
  let ue2, he2, pe2, me2, ge2, $e2, fe2 = false, ye2 = le();
  const be2 = (e3, t3, o3, i3, n3) => null != e3 && o3 !== t3 ? e3 >= i3[t3] && e3 <= n3[t3] ? "valid" : "invalid" : "undetermined", xe2 = (e3, t3, o3) => Math.round(null != e3 ? e3 / t3 : o3.height), ve2 = () => {
    fe2 && he2 && pe2 && ("width" === me2 ? o2(38, pe2 = Math.round(he2 / f2)) : "height" === me2 ? o2(37, he2 = Math.round(pe2 * f2)) : ("width" === ge2 ? o2(38, pe2 = Math.round(he2 / f2)) : "height" === ge2 && o2(37, he2 = Math.round(pe2 * f2)), we2()));
  }, we2 = (e3) => {
    let t3 = O2(he2), i3 = O2(pe2), n3 = t3, r3 = i3, a3 = n3 && r3, s3 = e3 || f2;
    if (!n3 && !r3)
      return;
    n3 && !r3 ? r3 = Math.round(n3 / s3) : r3 && !n3 && (n3 = Math.round(r3 * s3)), s3 = e3 || a3 ? H(n3, r3) : f2;
    let l3 = Oe(n3, r3);
    Ne(N2, l3) || (l3 = ft(N2, s3)), Ne(l3, V2) || (l3 = $t(V2, s3)), o2(37, he2 = null != t3 ? Math.round(l3.width) : void 0), o2(38, pe2 = null != i3 ? Math.round(l3.height) : void 0);
  }, Se2 = () => {
    we2();
    const { width: e3, height: t3 } = C2 || {};
    e3 === he2 && t3 === pe2 || (he2 || pe2 ? (he2 && pe2 && Qn(ee2, T2 = he2 / pe2, T2), Qn(te2, C2 = Oe(he2, pe2), C2)) : (Qn(ee2, T2 = E2.width / E2.height, T2), Qn(ee2, T2 = void 0, T2), Qn(te2, C2 = void 0, C2)), ne2.write());
  }, ke2 = te2.subscribe((e3) => {
    if (!e3)
      return o2(37, he2 = void 0), void o2(38, pe2 = void 0);
    o2(37, he2 = e3.width), o2(38, pe2 = e3.height), we2();
  }), Ce2 = ee2.subscribe((e3) => {
    (he2 || pe2) && e3 && (he2 && pe2 && H(he2, pe2) !== e3 ? (o2(38, pe2 = he2 / e3), we2(e3)) : we2());
  }), Me2 = (e3) => M(e3[0]) ? (e3[1] = e3[1].map(Me2), e3) : ko(e3) ? [e3, "" + e3] : e3, Te2 = (e3) => {
    if (M(e3[0]))
      return e3[1] = e3[1].map(Te2), e3;
    let [t3, o3] = e3;
    if (ko(t3) && ko(o3)) {
      const [e4, i3] = [t3, o3];
      o3 = `${e4} &times; ${i3}`, t3 = [e4, i3];
    }
    return [t3, o3];
  }, Pe2 = Ca();
  Un(e2, Pe2, (e3) => o2(59, k2 = e3));
  const Re2 = Ca();
  Un(e2, Re2, (e3) => o2(63, I2 = e3));
  const Ie2 = Ca();
  Un(e2, Ie2, (e3) => o2(57, w2 = e3));
  const Ae2 = Ca();
  Un(e2, Ae2, (e3) => o2(62, R2 = e3));
  const Ee2 = Ca();
  Un(e2, Ee2, (e3) => o2(55, x2 = e3));
  const Le2 = Ca();
  Un(e2, Le2, (e3) => o2(61, P2 = e3));
  const Fe2 = Ma([te2, Re2], ([e3, t3], o3) => {
    if (!t3)
      return o3(-1);
    const i3 = t3.findIndex(([t4]) => {
      if (!t4 && !e3)
        return true;
      if (!t4)
        return false;
      const [o4, i4] = t4;
      return e3.width === o4 && e3.height === i4;
    });
    o3(i3 < 0 ? 0 : i3);
  });
  Un(e2, Fe2, (e3) => o2(58, S2 = e3));
  const Be2 = Ma([te2, Ae2], ([e3, t3], o3) => {
    if (!t3)
      return o3(-1);
    const i3 = t3.findIndex(([t4]) => !t4 && !e3 || !!t4 && e3.width === t4);
    o3(i3 < 0 ? 0 : i3);
  });
  Un(e2, Be2, (e3) => o2(56, v2 = e3));
  const De2 = Ma([te2, Le2], ([e3, t3], o3) => {
    if (!t3)
      return o3(-1);
    const i3 = t3.findIndex(([t4]) => !t4 && !e3 || !!t4 && e3.height === t4);
    o3(i3 < 0 ? 0 : i3);
  });
  Un(e2, De2, (e3) => o2(54, b2 = e3));
  let We2 = void 0, _e2 = void 0;
  const Ve2 = Wr("redrawTrigger"), He2 = _l(m2 ? 20 : 0);
  return Un(e2, He2, (e3) => o2(47, h2 = e3)), Br(() => {
    ke2(), Ce2();
  }), e2.$$set = (e3) => {
    "isActive" in e3 && B2(o2(0, D2 = e3.isActive)), "stores" in e3 && o2(29, W2 = e3.stores), "locale" in e3 && o2(1, _2 = e3.locale), "resizeMinSize" in e3 && o2(30, V2 = e3.resizeMinSize), "resizeMaxSize" in e3 && o2(31, N2 = e3.resizeMaxSize), "resizeSizePresetOptions" in e3 && o2(32, U2 = e3.resizeSizePresetOptions), "resizeWidthPresetOptions" in e3 && o2(33, Z2 = e3.resizeWidthPresetOptions), "resizeHeightPresetOptions" in e3 && o2(34, X2 = e3.resizeHeightPresetOptions), "resizeWillRenderFooter" in e3 && o2(35, G2 = e3.resizeWillRenderFooter);
  }, e2.$$.update = () => {
    var t3;
    131072 & e2.$$.dirty[1] && ae2.set(!p2), 131072 & e2.$$.dirty[1] && se2.set(!p2), 131072 & e2.$$.dirty[1] && ce2.set(!p2), 268435458 & e2.$$.dirty[1] && U2 && (Qn(Pe2, k2 = U2.map(Te2), k2), Qn(Re2, I2 = Nd(k2), I2)), 268435456 & e2.$$.dirty[1] && o2(46, a2 = !!k2), 134217728 & e2.$$.dirty[1] | 2 & e2.$$.dirty[2] && o2(45, i2 = S2 > -1 && I2[S2][1]), 67108868 & e2.$$.dirty[1] && Z2 && (Qn(Ie2, w2 = Z2.map(Me2), w2), Qn(Ae2, R2 = Nd(w2), R2)), 67141632 & e2.$$.dirty[1] && o2(43, s2 = !a2 && w2), 33554432 & e2.$$.dirty[1] | 1 & e2.$$.dirty[2] && o2(44, n2 = v2 > -1 && R2[v2][1]), 16777224 & e2.$$.dirty[1] && X2 && (Qn(Ee2, x2 = X2.map(Me2), x2), Qn(Le2, P2 = Nd(x2), P2)), 16809984 & e2.$$.dirty[1] && o2(42, l2 = !a2 && x2), 1082130432 & e2.$$.dirty[1] && o2(41, r2 = b2 > -1 && P2[b2][1]), 38912 & e2.$$.dirty[1] && o2(40, c2 = !a2 && !s2 && !l2), 1073741826 & e2.$$.dirty[0] | 536412145 & e2.$$.dirty[1] && o2(4, d2 = Ve2 && Ph(() => {
      return G2([a2 && ["Dropdown", "size-presets", { label: i2, options: k2, onchange: (e4) => {
        return (t5 = e4.value) && !We2 && (We2 = { ...$2 }, _e2 = T2), t5 ? (Qn(ee2, T2 = H(t5[0], t5[1]), T2), Qn(te2, C2 = ze(t5), C2)) : (Qn(J2, $2 = We2, $2), Qn(ee2, T2 = _e2, T2), Qn(te2, C2 = void 0, C2), We2 = void 0, _e2 = void 0), void ne2.write();
        var t5;
      }, selectedIndex: S2 }], s2 && ["Dropdown", "width-presets", { label: n2, options: w2, onchange: (e4) => {
        o2(37, he2 = e4.value), Se2();
      }, selectedIndex: v2 }], s2 && l2 && ["span", "times", { class: "PinturaResizeLabel", innerHTML: "&times;" }], l2 && ["Dropdown", "height-presets", { label: r2, options: x2, onchange: (e4) => {
        o2(38, pe2 = e4.value), Se2();
      }, selectedIndex: b2 }], c2 && [lb, "width-input", { id: "width-" + de2, title: _2.resizeTitleInputWidth, label: _2.resizeLabelInputWidth, placeholder: (e3 = O2(pe2), t4 = f2, d3 = $2, Math.round(null != e3 ? e3 * t4 : d3.width)), value: he2, state: be2(O2(he2), "width", me2, V2, N2), onchange: (e4) => {
        o2(37, he2 = e4), ve2();
      } }], c2 && [hb, "aspect-ratio-lock", { id: "aspect-ratio-lock-" + de2, title: _2.resizeTitleButtonMaintainAspectRatio, icon: M(_2.resizeIconButtonMaintainAspectRatio) ? _2.resizeIconButtonMaintainAspectRatio : _2.resizeIconButtonMaintainAspectRatio(fe2, y2), locked: fe2, onchange: (e4) => {
        o2(36, fe2 = e4), ve2();
      } }], c2 && [lb, "height-input", { id: "height-" + de2, title: _2.resizeTitleInputHeight, label: _2.resizeLabelInputHeight, placeholder: xe2(O2(he2), f2, $2), value: pe2, state: be2(O2(pe2), "height", me2, V2, N2), onchange: (e4) => {
        o2(38, pe2 = e4), ve2();
      } }]].filter(Boolean), { ...g2 }, () => Ve2.set({}));
      var e3, t4, d3;
    }).filter(Boolean)), 32 & e2.$$.dirty[1] && Y2.set(fe2 ? 1 : 0), 256 & e2.$$.dirty[1] && me2 && (ge2 = me2), 131072 & e2.$$.dirty[1] && p2 && (ye2 = F2, $e2 = L2), 537001984 & e2.$$.dirty[1] && (p2 ? (t3 = C2, Qn(ie2, F2 = le(), F2), Qn(oe2, L2 = t3 && $2 ? t3.width / $2.width || t3.height / $2.height : 1, L2)) : (Qn(ie2, F2 = ye2, F2), Qn(oe2, L2 = $e2, L2))), 393216 & e2.$$.dirty[1] && m2 && He2.set(p2 ? 0 : 20), 65536 & e2.$$.dirty[1] && o2(3, u2 = h2 ? `transform: translateY(${h2}px)` : void 0);
  }, [D2, _2, ue2, u2, d2, Y2, q2, K2, J2, Q2, ee2, te2, oe2, ie2, re2, (e3) => {
    const t3 = e3.target.id;
    /width/.test(t3) ? o2(39, me2 = "width") : /height/.test(t3) ? o2(39, me2 = "height") : /aspectRatio/i.test(t3) ? o2(39, me2 = "lock") : o2(39, me2 = void 0);
  }, (e3) => {
    ue2.contains(e3.relatedTarget) || Se2(), o2(39, me2 = void 0);
  }, Se2, Pe2, Re2, Ie2, Ae2, Ee2, Le2, Fe2, Be2, De2, He2, "resize", W2, V2, N2, U2, Z2, X2, G2, fe2, he2, pe2, me2, c2, r2, l2, s2, n2, i2, a2, h2, p2, m2, g2, $2, f2, y2, b2, x2, v2, w2, S2, k2, C2, P2, R2, I2, function(e3) {
    Nr[e3 ? "unshift" : "push"](() => {
      ue2 = e3, o2(2, ue2);
    });
  }, function(t3) {
    _r.call(this, e2, t3);
  }];
}
var fb = { util: ["resize", class extends wa {
  constructor(e2) {
    super(), va(this, e2, $b, gb, Nn, { name: 28, isActive: 0, stores: 29, locale: 1, resizeMinSize: 30, resizeMaxSize: 31, resizeSizePresetOptions: 32, resizeWidthPresetOptions: 33, resizeHeightPresetOptions: 34, resizeWillRenderFooter: 35 }, null, [-1, -1, -1, -1]);
  }
  get name() {
    return this.$$.ctx[28];
  }
  get isActive() {
    return this.$$.ctx[0];
  }
  set isActive(e2) {
    this.$$set({ isActive: e2 }), ea();
  }
  get stores() {
    return this.$$.ctx[29];
  }
  set stores(e2) {
    this.$$set({ stores: e2 }), ea();
  }
  get locale() {
    return this.$$.ctx[1];
  }
  set locale(e2) {
    this.$$set({ locale: e2 }), ea();
  }
  get resizeMinSize() {
    return this.$$.ctx[30];
  }
  set resizeMinSize(e2) {
    this.$$set({ resizeMinSize: e2 }), ea();
  }
  get resizeMaxSize() {
    return this.$$.ctx[31];
  }
  set resizeMaxSize(e2) {
    this.$$set({ resizeMaxSize: e2 }), ea();
  }
  get resizeSizePresetOptions() {
    return this.$$.ctx[32];
  }
  set resizeSizePresetOptions(e2) {
    this.$$set({ resizeSizePresetOptions: e2 }), ea();
  }
  get resizeWidthPresetOptions() {
    return this.$$.ctx[33];
  }
  set resizeWidthPresetOptions(e2) {
    this.$$set({ resizeWidthPresetOptions: e2 }), ea();
  }
  get resizeHeightPresetOptions() {
    return this.$$.ctx[34];
  }
  set resizeHeightPresetOptions(e2) {
    this.$$set({ resizeHeightPresetOptions: e2 }), ea();
  }
  get resizeWillRenderFooter() {
    return this.$$.ctx[35];
  }
  set resizeWillRenderFooter(e2) {
    this.$$set({ resizeWillRenderFooter: e2 }), ea();
  }
}, ({ src: e2 }) => e2 && !$h(e2)] };
function yb(e2) {
  let t2, o2;
  return t2 = new Ny({ props: { stores: e2[3], locale: e2[4], isActive: e2[0], isActiveFraction: e2[1], isVisible: e2[2], mapScreenPointToImagePoint: e2[9], mapImagePointToScreenPoint: e2[8], utilKey: "redact", imageRotation: e2[10], imageFlipX: e2[7], imageFlipY: e2[6], shapes: e2[11], toolbar: ["rect"], toolShapes: { rectangle: [{ x: 0, y: 0, width: 0, height: 0 }] }, toolActive: "rectangle", parentRect: e2[13], enablePresetDropImage: false, enablePresetSelectImage: false, willStartInteraction: e2[5], hooks: { willRenderShapeControls: e2[24] } } }), t2.$on("measure", e2[25]), { c() {
    ya(t2.$$.fragment);
  }, m(e3, i2) {
    ba(t2, e3, i2), o2 = true;
  }, p(e3, [o3]) {
    const i2 = {};
    8 & o3 && (i2.stores = e3[3]), 16 & o3 && (i2.locale = e3[4]), 1 & o3 && (i2.isActive = e3[0]), 2 & o3 && (i2.isActiveFraction = e3[1]), 4 & o3 && (i2.isVisible = e3[2]), 512 & o3 && (i2.mapScreenPointToImagePoint = e3[9]), 256 & o3 && (i2.mapImagePointToScreenPoint = e3[8]), 1024 & o3 && (i2.imageRotation = e3[10]), 128 & o3 && (i2.imageFlipX = e3[7]), 64 & o3 && (i2.imageFlipY = e3[6]), 32 & o3 && (i2.willStartInteraction = e3[5]), t2.$set(i2);
  }, i(e3) {
    o2 || (sa(t2.$$.fragment, e3), o2 = true);
  }, o(e3) {
    la(t2.$$.fragment, e3), o2 = false;
  }, d(e3) {
    xa(t2, e3);
  } };
}
function bb(e2, t2, o2) {
  let i2, n2, r2, a2, s2, l2, c2, d2, u2;
  let { isActive: h2 } = t2, { isActiveFraction: p2 } = t2, { isVisible: m2 } = t2, { stores: g2 } = t2, { locale: $2 = {} } = t2, { markupEditorWillStartInteraction: f2 } = t2;
  const { imageRedaction: y2, rootRect: b2, imageSize: x2, imageRotation: v2, imageFlipX: w2, imageFlipY: S2, imageTransforms: k2, imageTransformsInterpolated: C2 } = g2;
  Un(e2, b2, (e3) => o2(23, d2 = e3)), Un(e2, x2, (e3) => o2(22, c2 = e3)), Un(e2, v2, (e3) => o2(10, u2 = e3)), Un(e2, w2, (e3) => o2(7, a2 = e3)), Un(e2, S2, (e3) => o2(6, r2 = e3)), Un(e2, k2, (e3) => o2(21, l2 = e3)), Un(e2, C2, (e3) => o2(20, s2 = e3));
  return e2.$$set = (e3) => {
    "isActive" in e3 && o2(0, h2 = e3.isActive), "isActiveFraction" in e3 && o2(1, p2 = e3.isActiveFraction), "isVisible" in e3 && o2(2, m2 = e3.isVisible), "stores" in e3 && o2(3, g2 = e3.stores), "locale" in e3 && o2(4, $2 = e3.locale), "markupEditorWillStartInteraction" in e3 && o2(5, f2 = e3.markupEditorWillStartInteraction);
  }, e2.$$.update = () => {
    15728832 & e2.$$.dirty && o2(9, i2 = (e3) => jy(e3, d2, c2, s2.origin, s2.translation, l2.rotation.z, s2.scale, a2, r2)), 15728832 & e2.$$.dirty && o2(8, n2 = (e3) => Hy(e3, d2, c2, s2.origin, s2.translation, l2.rotation.z, s2.scale, a2, r2));
  }, [h2, p2, m2, g2, $2, f2, r2, a2, n2, i2, u2, y2, b2, x2, v2, w2, S2, k2, C2, "redact", s2, l2, c2, d2, (e3) => {
    const t3 = Sp(e3[0]);
    return Rp("to-front", t3), e3;
  }, function(t3) {
    _r.call(this, e2, t3);
  }];
}
var xb = { util: ["redact", class extends wa {
  constructor(e2) {
    super(), va(this, e2, bb, yb, Nn, { name: 19, isActive: 0, isActiveFraction: 1, isVisible: 2, stores: 3, locale: 4, markupEditorWillStartInteraction: 5 });
  }
  get name() {
    return this.$$.ctx[19];
  }
  get isActive() {
    return this.$$.ctx[0];
  }
  set isActive(e2) {
    this.$$set({ isActive: e2 }), ea();
  }
  get isActiveFraction() {
    return this.$$.ctx[1];
  }
  set isActiveFraction(e2) {
    this.$$set({ isActiveFraction: e2 }), ea();
  }
  get isVisible() {
    return this.$$.ctx[2];
  }
  set isVisible(e2) {
    this.$$set({ isVisible: e2 }), ea();
  }
  get stores() {
    return this.$$.ctx[3];
  }
  set stores(e2) {
    this.$$set({ stores: e2 }), ea();
  }
  get locale() {
    return this.$$.ctx[4];
  }
  set locale(e2) {
    this.$$set({ locale: e2 }), ea();
  }
  get markupEditorWillStartInteraction() {
    return this.$$.ctx[5];
  }
  set markupEditorWillStartInteraction(e2) {
    this.$$set({ markupEditorWillStartInteraction: e2 }), ea();
  }
}, ({ src: e2 }) => e2 && !$h(e2)] };
function vb(e2) {
  let t2, o2, i2 = (T(e2[31].label) ? e2[31].label(e2[1]) : e2[31].label) + "";
  return { c() {
    t2 = hr("span"), o2 = mr(i2);
  }, m(e3, i3) {
    dr(e3, t2, i3), sr(t2, o2);
  }, p(e3, t3) {
    2 & t3[0] | 1 & t3[1] && i2 !== (i2 = (T(e3[31].label) ? e3[31].label(e3[1]) : e3[31].label) + "") && wr(o2, i2);
  }, d(e3) {
    e3 && ur(t2);
  } };
}
function wb(e2) {
  let t2, o2, i2, n2 = (e2[11](e2[31].value) || "") + "", r2 = e2[31].label && vb(e2);
  return { c() {
    t2 = hr("div"), o2 = new Cr(false), i2 = gr(), r2 && r2.c(), o2.a = i2, xr(t2, "slot", "option");
  }, m(e3, a2) {
    dr(e3, t2, a2), o2.m(n2, t2), sr(t2, i2), r2 && r2.m(t2, null);
  }, p(e3, i3) {
    1 & i3[1] && n2 !== (n2 = (e3[11](e3[31].value) || "") + "") && o2.p(n2), e3[31].label ? r2 ? r2.p(e3, i3) : (r2 = vb(e3), r2.c(), r2.m(t2, null)) : r2 && (r2.d(1), r2 = null);
  }, d(e3) {
    e3 && ur(t2), r2 && r2.d();
  } };
}
function Sb(e2) {
  let t2, o2;
  return t2 = new yu({ props: { locale: e2[1], class: "PinturaControlList", layout: "row", options: e2[2], selectedIndex: e2[4], onchange: e2[10], $$slots: { option: [wb, ({ option: e3 }) => ({ 31: e3 }), ({ option: e3 }) => [0, e3 ? 1 : 0]] }, $$scope: { ctx: e2 } } }), { c() {
    ya(t2.$$.fragment);
  }, m(e3, i2) {
    ba(t2, e3, i2), o2 = true;
  }, p(e3, o3) {
    const i2 = {};
    2 & o3[0] && (i2.locale = e3[1]), 4 & o3[0] && (i2.options = e3[2]), 16 & o3[0] && (i2.selectedIndex = e3[4]), 2 & o3[0] | 3 & o3[1] && (i2.$$scope = { dirty: o3, ctx: e3 }), t2.$set(i2);
  }, i(e3) {
    o2 || (sa(t2.$$.fragment, e3), o2 = true);
  }, o(e3) {
    la(t2.$$.fragment, e3), o2 = false;
  }, d(e3) {
    xa(t2, e3);
  } };
}
function kb(e2) {
  let t2, o2, i2;
  return o2 = new ad({ props: { elasticity: e2[5], $$slots: { default: [Sb] }, $$scope: { ctx: e2 } } }), { c() {
    t2 = hr("div"), ya(o2.$$.fragment), xr(t2, "slot", "footer"), xr(t2, "style", e2[3]);
  }, m(e3, n2) {
    dr(e3, t2, n2), ba(o2, t2, null), i2 = true;
  }, p(e3, n2) {
    const r2 = {};
    32 & n2[0] && (r2.elasticity = e3[5]), 22 & n2[0] | 2 & n2[1] && (r2.$$scope = { dirty: n2, ctx: e3 }), o2.$set(r2), (!i2 || 8 & n2[0]) && xr(t2, "style", e3[3]);
  }, i(e3) {
    i2 || (sa(o2.$$.fragment, e3), i2 = true);
  }, o(e3) {
    la(o2.$$.fragment, e3), i2 = false;
  }, d(e3) {
    e3 && ur(t2), xa(o2);
  } };
}
function Cb(e2) {
  let t2, o2;
  return t2 = new Yg({ props: { $$slots: { footer: [kb] }, $$scope: { ctx: e2 } } }), t2.$on("measure", e2[22]), { c() {
    ya(t2.$$.fragment);
  }, m(e3, i2) {
    ba(t2, e3, i2), o2 = true;
  }, p(e3, o3) {
    const i2 = {};
    62 & o3[0] | 2 & o3[1] && (i2.$$scope = { dirty: o3, ctx: e3 }), t2.$set(i2);
  }, i(e3) {
    o2 || (sa(t2.$$.fragment, e3), o2 = true);
  }, o(e3) {
    la(t2.$$.fragment, e3), o2 = false;
  }, d(e3) {
    xa(t2, e3);
  } };
}
function Mb(e2, t2, o2) {
  let i2, n2, r2, a2, s2, l2, c2, d2, u2, h2, p2 = zn, m2 = () => (p2(), p2 = Hn(g2, (e3) => o2(17, l2 = e3)), g2);
  e2.$$.on_destroy.push(() => p2());
  let { isActive: g2 } = t2;
  m2();
  let { stores: $2 } = t2, { locale: f2 = {} } = t2, { fillOptions: y2 = [] } = t2;
  const b2 = (e3) => e3.map((e4) => ((e5) => To(e5) && M(e5[0]) && To(e5[1]))(e4) ? [e4[0], b2(e4[1]), e4[2]] : ((e5) => [Array.isArray(e5) && 3 === e5.length ? [...e5, 1] : e5, void 0, { disabled: false }])(e4)), x2 = Wr("elasticityMultiplier");
  Un(e2, x2, (e3) => o2(21, h2 = e3));
  const { history: v2, animation: w2, scrollElasticity: S2, imageBackgroundColor: k2, imageBackgroundImage: C2, allowPan: T2, allowZoom: P2, allowZoomControls: R2 } = $2;
  Un(e2, w2, (e3) => o2(18, c2 = e3)), Un(e2, k2, (e3) => o2(20, u2 = e3)), Un(e2, C2, (e3) => o2(19, d2 = e3));
  const I2 = _l(c2 ? 20 : 0);
  return Un(e2, I2, (e3) => o2(16, s2 = e3)), e2.$$set = (e3) => {
    "isActive" in e3 && m2(o2(0, g2 = e3.isActive)), "stores" in e3 && o2(14, $2 = e3.stores), "locale" in e3 && o2(1, f2 = e3.locale), "fillOptions" in e3 && o2(15, y2 = e3.fillOptions);
  }, e2.$$.update = () => {
    32768 & e2.$$.dirty[0] && o2(2, i2 = b2(y2)), 131072 & e2.$$.dirty[0] && T2.set(l2), 131072 & e2.$$.dirty[0] && P2.set(l2), 131072 & e2.$$.dirty[0] && R2.set(l2), 2097152 & e2.$$.dirty[0] && o2(5, n2 = h2 * S2), 1572868 & e2.$$.dirty[0] && o2(4, r2 = i2.findIndex(([e3]) => d2 ? e3 === d2 : Array.isArray(e3) ? qa(e3, u2) : void 0) || 0), 393216 & e2.$$.dirty[0] && c2 && I2.set(l2 ? 0 : 20), 65536 & e2.$$.dirty[0] && o2(3, a2 = s2 ? `transform: translateY(${s2}px)` : void 0);
  }, [g2, f2, i2, a2, r2, n2, x2, w2, k2, C2, ({ value: e3 }) => {
    M(e3) && (Qn(k2, u2 = void 0, u2), Qn(C2, d2 = e3, d2)), To(e3) && (Qn(k2, u2 = e3, u2), Qn(C2, d2 = void 0, d2)), v2.write();
  }, (e3) => {
    if (M(e3))
      return `<div class="PinturaFillTile"><img src="${e3}" alt="" width="48" height="64"/></div>`;
    if (To(e3)) {
      const [t3, o3, i3, n3] = e3.map((e4, t4) => t4 < 3 ? Math.round(255 * e4) : e4);
      return `<div class="PinturaFillTile" data-transparent="${n3 < 1}"><div style="background-color:rgba(${t3},${o3},${i3},${n3})"></div></div>`;
    }
    return "<div></div>";
  }, I2, "fill", $2, y2, s2, l2, c2, d2, u2, h2, function(t3) {
    _r.call(this, e2, t3);
  }];
}
var Tb = { util: ["fill", class extends wa {
  constructor(e2) {
    super(), va(this, e2, Mb, Cb, Nn, { name: 13, isActive: 0, stores: 14, locale: 1, fillOptions: 15 }, null, [-1, -1]);
  }
  get name() {
    return this.$$.ctx[13];
  }
  get isActive() {
    return this.$$.ctx[0];
  }
  set isActive(e2) {
    this.$$set({ isActive: e2 }), ea();
  }
  get stores() {
    return this.$$.ctx[14];
  }
  set stores(e2) {
    this.$$set({ stores: e2 }), ea();
  }
  get locale() {
    return this.$$.ctx[1];
  }
  set locale(e2) {
    this.$$set({ locale: e2 }), ea();
  }
  get fillOptions() {
    return this.$$.ctx[15];
  }
  set fillOptions(e2) {
    this.$$set({ fillOptions: e2 }), ea();
  }
}, ({ src: e2, fillOptions: t2 }) => e2 && !$h(e2) && t2 && t2.length] };
var Pb = '<g fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M18 6L6 18M6 6l12 12"></path></path></g>';
var Rb = '<path fill="none" d="M9 15 L12 9 L15 15 M10 13.5 h3" stroke="currentColor" stroke-width=".125em"/>';
var Ib = { labelReset: "Reset", labelDefault: "Default", labelAuto: "Auto", labelNone: "None", labelEdit: "Edit", labelClose: "Close", labelSupportError: (e2) => e2.join(", ") + " not supported on this browser", labelColor: "Color", labelWidth: "Width", labelSize: "Size", labelOffset: "Offset", labelAmount: "Amount", labelInset: "Inset", labelRadius: "Radius", labelColorPalette: "Color palette", labelSizeExtraSmall: "Extra small", labelSizeSmall: "Small", labelSizeMediumSmall: "Medium small", labelSizeMedium: "Medium", labelSizeMediumLarge: "Medium large", labelSizeLarge: "Large", labelSizeExtraLarge: "Extra large", labelButtonCancel: "Cancel", labelButtonUndo: "Undo", labelButtonRedo: "Redo", labelButtonRevert: "Revert", labelButtonExport: "Done", labelZoomIn: "Zoom in", labelZoomOut: "Zoom out", labelZoomFit: "Fit to view", labelZoomActual: "Actual size", iconZoomIn: '<path stroke="currentColor" stroke-width=".125em" d="M8 12 h8 M12 8 v8" />', iconZoomOut: '<path stroke="currentColor" stroke-width=".125em" d="M9 12 h6" />', iconSupportError: '<g fill="none" stroke="currentColor" stroke-width="2"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/><g><line x1="12" y1="9" x2="12" y2="13"/><line x1="12" y1="17" x2="12.01" y2="17"/></g>', iconButtonClose: Pb, iconButtonRevert: '<g fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M7.388 18.538a8 8 0 10-2.992-9.03"/><path fill="currentColor" d="M2.794 11.696L2.37 6.714l5.088 3.18z"/><path d="M12 8v4M12 12l4 2"/></g>', iconButtonUndo: '<g fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M10 8h4c2.485 0 5 2 5 5s-2.515 5-5 5h-4"/><path fill="currentColor" d="M5 8l4-3v6z"/></g>', iconButtonRedo: '<g fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M14 8h-4c-2.485 0-5 2-5 5s2.515 5 5 5h4"/><path fill="currentColor" d="M19 8l-4-3v6z"/></g>', iconButtonExport: '<polyline points="20 6 9 17 4 12" fill="none" stroke="currentColor" stroke-width=".125em"></polyline>', statusLabelButtonClose: "Close", statusIconButtonClose: Pb, statusLabelLoadImage: (e2) => e2 && e2.task ? e2.error ? "IMAGE_TOO_SMALL" === e2.error.code ? "Minimum image size is {minWidth} &times; {minHeight}" : "Error loading image" : "blob-to-bitmap" === e2.task ? "Preparing image&hellip;" : "Loading image&hellip;" : "Waiting for image", statusLabelProcessImage: (e2) => {
  if (e2 && e2.task)
    return "store" === e2.task ? e2.error ? "Error uploading image" : "Uploading image&hellip;" : e2.error ? "Error processing image" : "Processing image&hellip;";
} };
var Ab = { shapeLabelButtonSelectSticker: "Select image", shapeIconButtonSelectSticker: '<g fill="none" stroke="currentColor" stroke-width="0.0625em"><path d="M8 21 L15 11 L19 15"/><path d="M15 2 v5 h5"/><path d="M8 2 h8 l4 4 v12 q0 4 -4 4 h-8 q-4 0 -4 -4 v-12 q0 -4 4 -4z"/></g><circle fill="currentColor" cx="10" cy="8" r="1.5"/>', shapeIconButtonFlipHorizontal: '<g stroke="currentColor" stroke-width=".125em"><path fill="none" d="M6 6.5h5v11H6z"/><path fill="currentColor" d="M15 6.5h3v11h-3z"/><path d="M11 4v16" fill="currentColor"/></g>', shapeIconButtonFlipVertical: '<g stroke="currentColor" stroke-width=".125em"><rect x="7" y="8" width="11" height="5" fill="none"/><rect x="7" y="17" width="11" height="2" fill="currentColor"/><line x1="5" y1="13" x2="20" y2="13"/></g>', shapeIconButtonRemove: '<g fill="none" fill-rule="evenodd"><path stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="M7.5 7h9z"/><path d="M7.916 9h8.168a1 1 0 01.99 1.14l-.972 6.862a2 2 0 01-1.473 1.653c-.877.23-1.753.345-2.629.345-.876 0-1.752-.115-2.628-.345a2 2 0 01-1.473-1.653l-.973-6.862A1 1 0 017.916 9z" fill="currentColor"/><rect fill="currentColor" x="10" y="5" width="4" height="3" rx="1"/></g>', shapeIconButtonDuplicate: '<g fill="none" fill-rule="evenodd"><path d="M15 13.994V16a2 2 0 01-2 2H8a2 2 0 01-2-2v-5a2 2 0 012-2h2.142" stroke="currentColor" stroke-width=".125em"/><path d="M15 9V8a1 1 0 00-2 0v1h-1a1 1 0 000 2h1v1a1 1 0 002 0v-1h1a1 1 0 000-2h-1zm-4-4h6a2 2 0 012 2v6a2 2 0 01-2 2h-6a2 2 0 01-2-2V7a2 2 0 012-2z" fill="currentColor"/></g>', shapeIconButtonMoveToFront: '<g fill="none" fill-rule="evenodd"><rect fill="currentColor" x="11" y="13" width="8" height="2" rx="1"/><rect fill="currentColor" x="9" y="17" width="10" height="2" rx="1"/><path d="M11.364 8H10a5 5 0 000 10M12 6.5L14.5 8 12 9.5z" stroke="currentColor" stroke-width=".125em" stroke-linecap="round"/></g>', shapeIconButtonTextLayoutAutoWidth: "" + Rb, shapeIconButtonTextLayoutAutoHeight: '<g fill="currentColor"><circle cx="4" cy="12" r="1.5"/><circle cx="20" cy="12" r="1.5"/></g>' + Rb, shapeIconButtonTextLayoutFixedSize: '<g fill="currentColor"><circle cx="5" cy="6" r="1.5"/><circle cx="19" cy="6" r="1.5"/><circle cx="19" cy="19" r="1.5"/><circle cx="5" cy="19" r="1.5"/></g>' + Rb, shapeTitleButtonTextLayoutAutoWidth: "Auto width", shapeTitleButtonTextLayoutAutoHeight: "Auto height", shapeTitleButtonTextLayoutFixedSize: "Fixed size", shapeTitleButtonFlipHorizontal: "Flip Horizontal", shapeTitleButtonFlipVertical: "Flip Vertical", shapeTitleButtonRemove: "Remove", shapeTitleButtonDuplicate: "Duplicate", shapeTitleButtonMoveToFront: "Move to front", shapeLabelInputText: "Edit text", shapeIconInputCancel: '<g fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M18 6L6 18M6 6l12 12"/></g>', shapeIconInputConfirm: '<g fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><polyline points="20 6 9 17 4 12"/></g>', shapeLabelInputCancel: "Cancel", shapeLabelInputConfirm: "Confirm", shapeLabelStrokeNone: "No outline", shapeLabelFontStyleNormal: "Normal", shapeLabelFontStyleBold: "Bold", shapeLabelFontStyleItalic: "Italic", shapeLabelFontStyleItalicBold: "Bold Italic", shapeTitleBackgroundColor: "Fill color", shapeTitleCornerRadius: "Corner radius", shapeTitleFontFamily: "Font", shapeTitleFontSize: "Font size", shapeTitleFontStyle: "Font style", shapeTitleLineHeight: "Line height", shapeTitleLineStart: "Start", shapeTitleLineEnd: "End", shapeTitleStrokeWidth: "Line width", shapeTitleStrokeColor: "Line color", shapeTitleLineDecorationBar: "Bar", shapeTitleLineDecorationCircle: "Circle", shapeTitleLineDecorationSquare: "Square", shapeTitleLineDecorationArrow: "Arrow", shapeTitleLineDecorationCircleSolid: "Circle solid", shapeTitleLineDecorationSquareSolid: "Square solid", shapeTitleLineDecorationArrowSolid: "Arrow solid", shapeIconLineDecorationBar: '<g stroke="currentColor" stroke-linecap="round" stroke-width=".125em"><path d="M5,12 H16"/><path d="M16,8 V16"/></g>', shapeIconLineDecorationCircle: '<g stroke="currentColor" stroke-linecap="round"><path stroke-width=".125em" d="M5,12 H12"/><circle fill="none" stroke-width=".125em" cx="16" cy="12" r="4"/></g>', shapeIconLineDecorationSquare: '<g stroke="currentColor" stroke-linecap="round"><path stroke-width=".125em" d="M5,12 H12"/><rect fill="none" stroke-width=".125em" x="12" y="8" width="8" height="8"/></g>', shapeIconLineDecorationArrow: '<g stroke="currentColor" stroke-linecap="round" stroke-width=".125em"><path d="M5,12 H16 M13,7 l6,5 l-6,5" fill="none"/></g>', shapeIconLineDecorationCircleSolid: '<g stroke="currentColor" stroke-linecap="round"><path stroke-width=".125em" d="M5,12 H12"/><circle fill="currentColor" cx="16" cy="12" r="4"/></g>', shapeIconLineDecorationSquareSolid: '<g stroke="currentColor" stroke-linecap="round"><path stroke-width=".125em" d="M5,12 H12"/><rect fill="currentColor" x="12" y="8" width="8" height="8"/></g>', shapeIconLineDecorationArrowSolid: '<g stroke="currentColor" stroke-linecap="round" stroke-width=".125em"><path d="M5,12 H16"/><path d="M13,7 l6,5 l-6,5z" fill="currentColor"/></g>', shapeTitleColorTransparent: "Transparent", shapeTitleColorWhite: "White", shapeTitleColorSilver: "Silver", shapeTitleColorGray: "Gray", shapeTitleColorBlack: "Black", shapeTitleColorNavy: "Navy", shapeTitleColorBlue: "Blue", shapeTitleColorAqua: "Aqua", shapeTitleColorTeal: "Teal", shapeTitleColorOlive: "Olive", shapeTitleColorGreen: "Green", shapeTitleColorYellow: "Yellow", shapeTitleColorOrange: "Orange", shapeTitleColorRed: "Red", shapeTitleColorMaroon: "Maroon", shapeTitleColorFuchsia: "Fuchsia", shapeTitleColorPurple: "Purple", shapeTitleTextColor: "Font color", shapeTitleTextAlign: "Text align", shapeTitleTextAlignLeft: "Left align text", shapeTitleTextAlignCenter: "Center align text", shapeTitleTextAlignRight: "Right align text", shapeIconTextAlignLeft: '<g stroke-width=".125em" stroke="currentColor"><line x1="5" y1="8" x2="15" y2="8"/><line x1="5" y1="12" x2="19" y2="12"/><line x1="5" y1="16" x2="14" y2="16"/></g>', shapeIconTextAlignCenter: '<g stroke-width=".125em" stroke="currentColor"><line x1="7" y1="8" x2="17" y2="8"/><line x1="5" y1="12" x2="19" y2="12"/><line x1="8" y1="16" x2="16" y2="16"/></g>', shapeIconTextAlignRight: '<g stroke-width=".125em" stroke="currentColor"><line x1="9" y1="8" x2="19" y2="8"/><line x1="5" y1="12" x2="19" y2="12"/><line x1="11" y1="16" x2="19" y2="16"/></g>', shapeLabelToolMove: "Move", shapeLabelToolView: "View", shapeLabelToolSharpie: "Sharpie", shapeLabelToolEraser: "Eraser", shapeLabelToolPath: "Path", shapeLabelToolRectangle: "Rectangle", shapeLabelToolEllipse: "Ellipse", shapeLabelToolArrow: "Arrow", shapeLabelToolLine: "Line", shapeLabelToolText: "Text", shapeLabelToolPreset: "Stickers", shapeIconToolView: '<g stroke-width=".125em" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path d="M10.98 9.703V2.567c0-1.19 1.19-1.785 1.784-1.785.595 0 1.784.595 1.784 1.785v3.568"/><path d="M14.548 9.703V4.35c0-1.19 1.19-1.784 1.784-1.784.595 0 1.784.594 1.784 1.784v2.973"/><path d="M18.116 10.244V7.271c0-1.19 1.19-1.784 1.784-1.784.595 0 1.785.595 1.785 1.784 0 1.19 0 8.92-1.19 12.488-1.19 3.569-10.704 4.758-13.678 0-2.973-4.757-2.973-4.757-4.163-6.541-1.189-1.784-1.153-2.974-.594-3.568.558-.595 1.784-1.19 2.973.594 1.277 1.916 2.07 2.907 2.379 2.974V5.487c0-1.19 1.19-1.784 1.784-1.784.595 0 1.784.595 1.784 1.784V8.46"/></g>', shapeIconToolMove: '<g stroke-width=".125em" stroke="currentColor" fill="none"><path d="M6 2 L6 19 L18 13 Z M13 18 L16 24" stroke="currentColor" stroke-width=".125em" fill="none" fill-rule="evenodd" stroke-linejoin="round"/></g>', shapeIconToolSharpie: '<g stroke-width=".125em" stroke="currentColor" fill="none"><path d="M2.025 5c5.616-2.732 8.833-3.857 9.65-3.374C12.903 2.351.518 12.666 2.026 14 3.534 15.334 16.536.566 17.73 2.566 18.924 4.566 3.98 17.187 4.831 18c.851.813 9.848-6 11.643-6 1.087 0-2.53 5.11-2.92 7-.086.41 3.323-1.498 4.773-1 .494.17.64 2.317 1.319 3 .439.443 1.332.776 2.679 1" stroke="currentColor" stroke-width=".125em" fill="none" fill-rule="evenodd" stroke-linejoin="round"/></g>', shapeIconToolEraser: '<g stroke-width=".125em" stroke="currentColor" stroke-linecap="round" fill="none"><g transform="translate(3, 15) rotate(-45)"><rect x="0" y="0" width="18" height="10" rx="3"/></g><line x1="11" y1="21" x2="18" y2="21"/><line x1="20" y1="21" x2="22" y2="21"/></g>', shapeIconToolPath: '<g stroke-width=".125em" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" fill="none"><circle cx="21" cy="3" r="2"/><circle cx="9" cy="9" r="2"/><circle cx="3" cy="21" r="2"/><path d="M19 4 11 8 M8 11 4 19"/></g>', shapeIconToolRectangle: '<g stroke-width=".125em" stroke="currentColor" fill="none"><rect x="2" y="2" width="20" height="20" rx="3"/></g>', shapeIconToolEllipse: '<g stroke-width=".125em" stroke="currentColor" fill="none"><circle cx="12" cy="12" r="11"/></g>', shapeIconToolArrow: '<g stroke-width=".125em" stroke="currentColor" fill="none"><line x1="20" y1="3" x2="6" y2="21"/><path d="m10 6 L21.5 1 L20 13.5" fill="currentColor" stroke="none"/></g>', shapeIconToolLine: '<g stroke-width=".125em" stroke="currentColor" fill="none"><line x1="20" y1="3" x2="6" y2="21"/></g>', shapeIconToolText: '<g stroke="none" fill="currentColor" transform="translate(6,0)"><path d="M8.14 20.085c.459 0 .901-.034 1.329-.102a8.597 8.597 0 001.015-.21v1.984c-.281.135-.695.247-1.242.336a9.328 9.328 0 01-1.477.133c-3.312 0-4.968-1.745-4.968-5.235V6.804H.344v-1.25l2.453-1.078L3.89.819h1.5v3.97h4.97v2.015H5.39v10.078c0 1.031.245 1.823.735 2.375s1.161.828 2.015.828z"/>', shapeIconToolPreset: '<g fill="none" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M12 22c2.773 0 1.189-5.177 3-7 1.796-1.808 7-.25 7-3 0-5.523-4.477-10-10-10S2 6.477 2 12s4.477 10 10 10z"></path><path d="M20 17c-3 3-5 5-8 5"></path></g>' };
var Eb = { cropLabel: "Crop", cropIcon: '<g stroke-width=".125em" stroke="currentColor" fill="none"><path d="M23 17H9a2 2 0 0 1-2-2v-5m0-3V1 M1 7h14a2 2 0 0 1 2 2v7m0 4v3"/></g>', cropIconButtonRecenter: '<path stroke="currentColor" fill="none" stroke-width="2" stroke-linejoin="bevel" d="M1.5 7.5v-6h6M1.5 16.5v6h6M22.5 16.5v6h-6M22.5 7.5v-6h-6"/><circle cx="12" cy="12" r="3.5" fill="currentColor" stroke="none"/>', cropIconButtonRotateLeft: '<g stroke="none" fill="currentColor"><path fill="none" d="M-1-1h582v402H-1z"/><rect x="3" rx="1" height="12" width="12" y="9"/><path d="M15 5h-1a5 5 0 015 5 1 1 0 002 0 7 7 0 00-7-7h-1.374l.747-.747A1 1 0 0011.958.84L9.603 3.194a1 1 0 000 1.415l2.355 2.355a1 1 0 001.415-1.414l-.55-.55H15z"/></g>', cropIconButtonRotateRight: '<g stroke="none" fill="currentColor"><path fill="none" d="M-1-1h582v402H-1z"/><path d="M11.177 5H10a5 5 0 00-5 5 1 1 0 01-2 0 7 7 0 017-7h1.374l-.747-.747A1 1 0 0112.042.84l2.355 2.355a1 1 0 010 1.415l-2.355 2.354a1 1 0 01-1.415-1.414l.55-.55z"/><rect rx="1" height="12" width="12" y="9" x="9"/></g>', cropIconButtonFlipVertical: '<g stroke="none" fill="currentColor"><path d="M19.993 12.143H7a1 1 0 0 1-1-1V5.994a1 1 0 0 1 1.368-.93l12.993 5.15a1 1 0 0 1-.368 1.93z"/><path d="M19.993 14a1 1 0 0 1 .368 1.93L7.368 21.078A1 1 0 0 1 6 20.148V15a1 1 0 0 1 1-1h12.993z" opacity=".6"/></g>', cropIconButtonFlipHorizontal: '<g stroke="none" fill="currentColor"><path d="M11.93 7.007V20a1 1 0 0 1-1 1H5.78a1 1 0 0 1-.93-1.368l5.15-12.993a1 1 0 0 1 1.929.368z"/><path d="M14 7.007V20a1 1 0 0 0 1 1h5.149a1 1 0 0 0 .93-1.368l-5.15-12.993A1 1 0 0 0 14 7.007z" opacity=".6"/></g>', cropIconSelectPreset: (e2, t2) => {
  const [o2, i2, n2] = t2 ? [t2 < 1 ? 1 : 0.3, 1 === t2 ? 0.85 : 0.5, t2 > 1 ? 1 : 0.3] : [0.2, 0.3, 0.4];
  return `<g fill="currentColor">
            <rect opacity="${o2}" x="2" y="4" width="10" height="18" rx="1"/>
            <rect opacity="${i2}" x="4" y="8" width="14" height="14" rx="1"/>
            <rect opacity="${n2}" x="6" y="12" width="17" height="10" rx="1"/>
        </g>`;
}, cropIconCropBoundary: (e2, t2) => {
  const [o2, i2, n2, r2] = t2 ? [0.3, 1, 0, 0] : [0, 0, 0.3, 1];
  return `<g fill="currentColor">
            <rect opacity="${o2}" x="2" y="3" width="20" height="20" rx="1"/>
            <rect opacity="${i2}" x="7" y="8" width="10" height="10" rx="1"/>
            <rect opacity="${n2}" x="4" y="8" width="14" height="14" rx="1"/>
            <rect opacity="${r2}" x="12" y="4" width="10" height="10" rx="1"/>
        </g>`;
}, cropLabelButtonRecenter: "Recenter", cropLabelButtonRotateLeft: "Rotate left", cropLabelButtonRotateRight: "Rotate right", cropLabelButtonFlipHorizontal: "Flip horizontal", cropLabelButtonFlipVertical: "Flip vertical", cropLabelSelectPreset: "Crop shape", cropLabelCropBoundary: "Crop boundary", cropLabelCropBoundaryEdge: "Edge of image", cropLabelCropBoundaryNone: "None", cropLabelTabRotation: "Rotation", cropLabelTabZoom: "Scale" };
var Lb = { fillLabel: "Fill", fillIcon: '\n    <g fill="none" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em">\n        <g transform="rotate(60, 12, 12)">\n            <rect x="4" y="4" width="14" height="16" rx="3"/>\n        </g>\n        <path d="M21 13 L21 21"></path>\n        <path d="M4.5 12.5 L19 12.5"></path>\n    </g>\n    ' };
var Fb = { frameLabel: "Frame", frameIcon: '<g fill="none" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em">\n            <rect x="2" y="2" width="20" height="20" rx="4"/>\n            <rect x="6" y="6" width="12" height="12" rx="1"/>\n        </g>', frameLabelMatSharp: "Mat", frameLabelMatRound: "Bevel", frameLabelLineSingle: "Line", frameLabelLineMultiple: "Zebra", frameLabelEdgeSeparate: "Inset", frameLabelEdgeOverlap: "Plus", frameLabelEdgeCross: "Lumber", frameLabelCornerHooks: "Hook", frameLabelPolaroid: "Polaroid" };
var zb = { redactLabel: "Redact", redactIcon: '<g fill="none" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M 4 5 l 1 -1"/><path d="M 4 10 l 6 -6"/><path d="M 4 15 l 11 -11"/><path d="M 4 20 l 16 -16"/><path d="M 9 20 l 11 -11"/><path d="M 14 20 l 6 -6"/><path d="M 19 20 l 1 -1"/></g>' };
var Bb = (e2, t2) => {
  const o2 = Object.getOwnPropertyDescriptors(e2);
  Object.keys(o2).forEach((i2) => {
    o2[i2].get ? Object.defineProperty(t2, i2, { get: () => e2[i2], set: (t3) => e2[i2] = t3 }) : t2[i2] = e2[i2];
  });
};
var Ob = (e2) => {
  const t2 = {}, { sub: o2, pub: i2 } = _o();
  c() && null !== document.doctype || console.warn("Browser is in quirks mode, add <!DOCTYPE html> to page to fix render issues");
  const r2 = ls();
  Bb(r2, t2);
  const a2 = ((e3, t3) => {
    const o3 = {}, i3 = new lp({ target: e3, props: { stores: t3, pluginComponents: Array.from(gp) } });
    let n2 = false;
    const r3 = () => {
      n2 || (c() && window.removeEventListener("pagehide", r3), i3 && (n2 = true, i3.$destroy()));
    };
    hp || (hp = new Set(Lc(lp).filter((e4) => !dp.includes(e4)))), hp.forEach((e4) => {
      Object.defineProperty(o3, e4, { get: () => i3[e4], set: up.includes(e4) ? (t4) => {
        i3[e4] = { ...i3[e4], ...t4 };
      } : (t4) => i3[e4] = t4 });
    }), Object.defineProperty(o3, "previewImageData", { get: () => i3.imagePreviewCurrent }), pp.forEach((e4) => {
      const t4 = mp[e4], n3 = t4[0];
      Object.defineProperty(o3, e4, { get: () => i3.pluginInterface[n3][e4], set: (o4) => {
        const n4 = t4.reduce((t5, n5) => (t5[n5] = { ...i3.pluginOptions[n5], [e4]: o4 }, t5), {});
        i3.pluginOptions = { ...i3.pluginOptions, ...n4 };
      } });
    }), Object.defineProperty(o3, "element", { get: () => i3.root, set: () => {
    } });
    const a3 = i3.history;
    return Oa(o3, { on: (e4, t4) => {
      if (n2)
        return () => {
        };
      if (/undo|redo|revert|writehistory/.test(e4))
        return a3.on(e4, t4);
      const o4 = [i3.sub(e4, t4), i3.$on(e4, (e5) => t4(e5 instanceof CustomEvent && !e5.detail ? void 0 : e5))].filter(Boolean);
      return () => o4.forEach((e5) => e5());
    }, updateImagePreview: (e4) => {
      i3.imagePreviewSrc = e4;
    }, close: () => !n2 && i3.pub("close"), destroy: r3 }), Object.defineProperty(o3, "history", { get: () => ({ undo: () => a3.undo(), redo: () => a3.redo(), revert: () => a3.revert(), get: () => a3.get(), getCollapsed: () => a3.get().splice(0, a3.index + 1), set: (e4) => a3.set(e4), write: (e4) => a3.write(e4), get length() {
      return a3.length();
    }, get index() {
      return a3.index;
    }, set index(e4) {
      a3.index = e4;
    } }) }), c() && window.addEventListener("pagehide", r3), o3;
  })(e2, r2.stores);
  Bb(a2, t2);
  const s2 = ["loadImage", "processImage", "abortProcessImage", "abortLoadImage"].map((e3) => a2.on(e3, (t3) => {
    const o3 = r2[e3](t3 && t3.detail);
    o3 instanceof Promise && o3.catch(n);
  })), l2 = (e3, t3) => {
    const i3 = o2(e3, t3), n2 = r2.on(e3, t3), s3 = a2.on(e3, t3);
    return () => {
      i3(), n2(), s3();
    };
  };
  t2.handleEvent = n;
  const d2 = fp.map((e3) => l2(e3, (o3) => t2.handleEvent(e3, o3)));
  return Oa(t2, { on: l2, updateImage: (e3) => new Promise((o3, i3) => {
    const n2 = t2.history.get(), a3 = t2.history.index, s3 = t2.imageState;
    r2.loadImage(e3).then((e4) => {
      t2.history.set(n2), t2.history.index = a3, t2.imageState = s3, o3(e4);
    }).catch(i3);
  }), close: () => {
    i2("close");
  }, destroy: () => {
    [...s2, ...d2].forEach((e3) => e3()), a2.destroy(), r2.destroy(), i2("destroy");
  } }), setTimeout(() => i2("init", t2), 0), t2;
};
var Db = "pintura-editor";
var Wb = () => new Promise((e2) => {
  if (!_b)
    return e2([]);
  var t2;
  t2 = Db, document.createElement(t2).constructor === HTMLElement && customElements.define(Db, _b), customElements.whenDefined(Db).then(() => e2(document.querySelectorAll(Db)));
});
var _b = c() && class extends HTMLElement {
  constructor() {
    super(), this._editor = void 0, this._unsubs = void 0;
  }
  static get observedAttributes() {
    return ["src"];
  }
  attributeChangedCallback(e2, t2, o2) {
    this[e2] = o2;
  }
  connectedCallback() {
    this._editor = Ob(this), Bb(this._editor, this), this._editor.src = this.getAttribute("src"), this._unsubs = yp(this._editor, this);
  }
  disconnectedCallback() {
    this._editor.destroy(), this._unsubs.forEach((e2) => e2());
  }
};
var Vb = (e2, t2 = {}) => {
  const o2 = M(e2) ? document.querySelector(e2) : e2;
  if (!Et(o2))
    return;
  t2.class = t2.class ? "pintura-editor " + t2.class : "pintura-editor";
  const i2 = Ob(o2);
  return Object.assign(i2, t2);
};
var { document: Nb, window: Hb } = ua;
function jb(e2) {
  let t2, o2, i2, n2;
  return Yr(e2[27]), { c() {
    t2 = gr(), o2 = hr("div"), xr(o2, "class", e2[4]), xr(o2, "style", e2[5]);
  }, m(r2, a2) {
    dr(r2, t2, a2), dr(r2, o2, a2), e2[28](o2), i2 || (n2 = [fr(Hb, "keydown", e2[10]), fr(Hb, "orientationchange", e2[11]), fr(Hb, "resize", e2[27]), fr(Nb.body, "focusin", function() {
      Vn(!e2[1] && e2[7]) && (!e2[1] && e2[7]).apply(this, arguments);
    }), fr(Nb.body, "focusout", function() {
      Vn(e2[2] && e2[8]) && (e2[2] && e2[8]).apply(this, arguments);
    }), fr(o2, "wheel", e2[9], { passive: false })], i2 = true);
  }, p(t3, i3) {
    e2 = t3, 16 & i3[0] && xr(o2, "class", e2[4]), 32 & i3[0] && xr(o2, "style", e2[5]);
  }, i: zn, o: zn, d(r2) {
    r2 && ur(t2), r2 && ur(o2), e2[28](null), i2 = false, _n(n2);
  } };
}
function Ub(e2, t2, o2) {
  let i2, n2, r2, a2, s2, l2, d2, u2;
  const h2 = Or();
  let { root: m2 } = t2, { preventZoomViewport: g2 = true } = t2, { preventScrollBodyIfNeeded: $2 = true } = t2, { preventFooterOverlapIfNeeded: f2 = true } = t2, { class: y2 } = t2, b2 = true, x2 = false, v2 = false, w2 = c() && document.documentElement, S2 = c() && document.body, k2 = c() && document.head;
  const C2 = _l(0, { precision: 1e-3, damping: 0.5 });
  Un(e2, C2, (e3) => o2(26, u2 = e3));
  const M2 = C2.subscribe((e3) => {
    v2 && e3 >= 1 ? (o2(19, v2 = false), o2(1, b2 = false), h2("show")) : x2 && e3 <= 0 && (o2(18, x2 = false), o2(1, b2 = true), h2("hide"));
  });
  let T2 = false, P2 = void 0, R2 = void 0, I2 = void 0;
  const A2 = () => document.querySelector("meta[name=viewport]"), E2 = () => Array.from(document.querySelectorAll("meta[name=theme-color]"));
  let L2;
  const F2 = (e3, t3) => {
    const o3 = () => {
      e3() ? t3() : requestAnimationFrame(o3);
    };
    requestAnimationFrame(o3);
  };
  let z2, B2, O2 = 0, D2 = void 0;
  const W2 = () => {
    B2 || (B2 = p("div", { style: "position:fixed;height:100vh;top:0" }), S2.append(B2));
  };
  Fr(() => {
    f2 && lo() && W2();
  }), zr(() => {
    B2 && (o2(21, D2 = B2.offsetHeight), B2.remove(), B2 = void 0);
  });
  let _2 = void 0;
  const V2 = () => w2.style.setProperty("--pintura-document-height", window.innerHeight + "px");
  return Br(() => {
    w2.classList.remove("PinturaModalBodyLock"), M2();
  }), e2.$$set = (e3) => {
    "root" in e3 && o2(0, m2 = e3.root), "preventZoomViewport" in e3 && o2(12, g2 = e3.preventZoomViewport), "preventScrollBodyIfNeeded" in e3 && o2(13, $2 = e3.preventScrollBodyIfNeeded), "preventFooterOverlapIfNeeded" in e3 && o2(14, f2 = e3.preventFooterOverlapIfNeeded), "class" in e3 && o2(15, y2 = e3.class);
  }, e2.$$.update = () => {
    67895298 & e2.$$.dirty[0] && o2(25, i2 = v2 || x2 ? u2 : b2 ? 0 : 1), 4096 & e2.$$.dirty[0] && (n2 = "width=device-width,height=device-height,initial-scale=1" + (g2 ? ",maximum-scale=1,user-scalable=0" : "")), 786434 & e2.$$.dirty[0] && o2(22, r2 = !v2 && !b2 && !x2), 12 & e2.$$.dirty[0] && (T2 || o2(20, z2 = O2)), 2097160 & e2.$$.dirty[0] && o2(24, a2 = ko(D2) ? "--viewport-pad-footer:" + (D2 > O2 ? 0 : 1) : ""), 51380224 & e2.$$.dirty[0] && o2(5, s2 = `opacity:${i2};height:${z2}px;--editor-modal:1;${a2}`), 32768 & e2.$$.dirty[0] && o2(4, l2 = hc(["pintura-editor", "PinturaModal", y2])), 8192 & e2.$$.dirty[0] && o2(23, d2 = $2 && lo() && /15_/.test(navigator.userAgent)), 12582912 & e2.$$.dirty[0] && d2 && ((e3) => {
      e3 ? (_2 = window.scrollY, w2.classList.add("PinturaDocumentLock"), V2(), window.addEventListener("resize", V2)) : (window.removeEventListener("resize", V2), w2.classList.remove("PinturaDocumentLock"), ko(_2) && window.scrollTo(0, _2), _2 = void 0);
    })(r2);
  }, [m2, b2, T2, O2, l2, s2, C2, (e3) => {
    ph(e3.target) && (o2(2, T2 = true), L2 = O2);
  }, (e3) => {
    if (ph(e3.target))
      if (clearTimeout(void 0), L2 === O2)
        o2(2, T2 = false);
      else {
        const e4 = O2;
        F2(() => O2 !== e4, () => o2(2, T2 = false));
      }
  }, (e3) => {
    e3.target && /PinturaStage/.test(e3.target.className) && e3.preventDefault();
  }, (e3) => {
    const { key: t3 } = e3;
    if (!/escape/i.test(t3))
      return;
    const o3 = e3.target;
    if (o3 && /input|textarea/i.test(o3.nodeName))
      return;
    const i3 = document.querySelectorAll(".PinturaModal");
    i3[i3.length - 1] === m2 && h2("close");
  }, W2, g2, $2, f2, y2, () => {
    if (v2 || !b2)
      return;
    o2(19, v2 = true);
    const e3 = A2() || p("meta", { name: "viewport" });
    P2 = !P2 && e3.getAttribute("content"), e3.setAttribute("content", n2 + (/cover/.test(P2) ? ",viewport-fit=cover" : "")), e3.parentNode || k2.append(e3);
    const t3 = getComputedStyle(m2).getPropertyValue("--color-background"), i3 = E2();
    if (i3.length)
      R2 = i3.map((e4) => e4.getAttribute("content"));
    else {
      const e4 = p("meta", { name: "theme-color" });
      k2.append(e4), i3.push(e4);
    }
    i3.forEach((e4) => e4.setAttribute("content", `rgb(${t3})`)), clearTimeout(I2), I2 = setTimeout(() => C2.set(1), 250);
  }, () => {
    if (x2 || b2)
      return;
    clearTimeout(I2), o2(18, x2 = true);
    const e3 = A2();
    P2 ? e3.setAttribute("content", P2) : e3.remove();
    const t3 = E2();
    R2 ? t3.forEach((e4, t4) => {
      e4.setAttribute("content", R2[t4]);
    }) : t3.forEach((e4) => e4.remove()), C2.set(0);
  }, x2, v2, z2, D2, r2, d2, a2, i2, u2, function() {
    o2(3, O2 = Hb.innerHeight);
  }, function(e3) {
    Nr[e3 ? "unshift" : "push"](() => {
      m2 = e3, o2(0, m2);
    });
  }];
}
var Zb = class extends wa {
  constructor(e2) {
    super(), va(this, e2, Ub, jb, Nn, { root: 0, preventZoomViewport: 12, preventScrollBodyIfNeeded: 13, preventFooterOverlapIfNeeded: 14, class: 15, show: 16, hide: 17 }, null, [-1, -1]);
  }
  get root() {
    return this.$$.ctx[0];
  }
  set root(e2) {
    this.$$set({ root: e2 }), ea();
  }
  get preventZoomViewport() {
    return this.$$.ctx[12];
  }
  set preventZoomViewport(e2) {
    this.$$set({ preventZoomViewport: e2 }), ea();
  }
  get preventScrollBodyIfNeeded() {
    return this.$$.ctx[13];
  }
  set preventScrollBodyIfNeeded(e2) {
    this.$$set({ preventScrollBodyIfNeeded: e2 }), ea();
  }
  get preventFooterOverlapIfNeeded() {
    return this.$$.ctx[14];
  }
  set preventFooterOverlapIfNeeded(e2) {
    this.$$set({ preventFooterOverlapIfNeeded: e2 }), ea();
  }
  get class() {
    return this.$$.ctx[15];
  }
  set class(e2) {
    this.$$set({ class: e2 }), ea();
  }
  get show() {
    return this.$$.ctx[16];
  }
  get hide() {
    return this.$$.ctx[17];
  }
};
var Xb = (e2, t2, o2, i2) => {
  const n2 = ce(t2.x - e2.x, t2.y - e2.y), r2 = ge(n2), a2 = 5 * o2;
  let s2;
  s2 = i2 ? 0.5 * a2 : Math.ceil(0.5 * (a2 - 1));
  const l2 = we(ue(r2), s2);
  return { anchor: ue(e2), offset: l2, normal: r2, solid: i2, size: a2, sizeHalf: s2 };
};
var Gb = ({ anchor: e2, solid: t2, normal: o2, offset: i2, size: n2, sizeHalf: r2, strokeWidth: a2, strokeColor: s2 }, l2) => {
  const c2 = e2.x, d2 = e2.y, u2 = we(ue(o2), n2), h2 = ce(c2 + u2.x, d2 + u2.y);
  if (we(u2, 0.55), t2) {
    be(l2, i2);
    const e3 = we(ue(o2), 0.5 * r2);
    return [{ points: [ce(c2 - e3.x, d2 - e3.y), ce(h2.x - u2.y, h2.y + u2.x), ce(h2.x + u2.y, h2.y - u2.x)], pathClose: true, backgroundColor: s2 }];
  }
  {
    const e3 = we(((e4) => {
      const t4 = e4.x;
      return e4.x = -e4.y, e4.y = t4, e4;
    })(ue(o2)), 0.5), t3 = ce(c2 - e3.x, d2 - e3.y), i3 = ce(c2 + e3.x, d2 + e3.y);
    return [{ points: [ce(h2.x + u2.y, h2.y - u2.x), t3, ce(c2, d2), i3, ce(h2.x - u2.y, h2.y + u2.x)], pathClose: false, strokeWidth: a2, strokeColor: s2 }];
  }
};
var Yb = ({ anchor: e2, solid: t2, offset: o2, normal: i2, sizeHalf: n2, strokeWidth: r2, strokeColor: a2 }, s2) => (be(s2, o2), t2 && be(s2, he(ue(i2))), [{ x: e2.x, y: e2.y, rx: n2, ry: n2, backgroundColor: t2 ? a2 : void 0, strokeWidth: t2 ? void 0 : r2, strokeColor: t2 ? void 0 : a2 }]);
var qb = ({ anchor: e2, offset: t2, strokeWidth: o2, strokeColor: i2 }) => [{ points: [ce(e2.x - t2.y, e2.y + t2.x), ce(e2.x + t2.y, e2.y - t2.x)], strokeWidth: o2, strokeColor: i2 }];
var Kb = ({ anchor: e2, solid: t2, offset: o2, normal: i2, sizeHalf: n2, strokeWidth: r2, strokeColor: a2 }, s2) => {
  return be(s2, o2), [{ x: e2.x - n2, y: e2.y - n2, width: 2 * n2, height: 2 * n2, rotation: (l2 = i2, Math.atan2(l2.y, l2.x)), backgroundColor: t2 ? a2 : void 0, strokeWidth: t2 ? void 0 : r2, strokeColor: t2 ? void 0 : a2 }];
  var l2;
};
var Jb = (e2 = {}) => (t2) => {
  if (!Mo(t2, "lineStart") && !Mo(t2, "lineEnd"))
    return;
  const o2 = [], { lineStart: i2, lineEnd: n2, strokeWidth: r2, strokeColor: a2 } = t2, s2 = ce(t2.x1, t2.y1), l2 = ce(t2.x2, t2.y2), c2 = [s2, l2];
  if (i2) {
    const [t3, n3] = i2.split("-"), c3 = e2[t3];
    if (c3) {
      const e3 = Xb(s2, l2, r2, !!n3);
      o2.push(...c3({ ...e3, strokeColor: a2, strokeWidth: r2 }, s2));
    }
  }
  if (n2) {
    const [t3, i3] = n2.split("-"), c3 = e2[t3];
    if (c3) {
      const e3 = Xb(l2, s2, r2, !!i3);
      o2.push(...c3({ ...e3, strokeColor: a2, strokeWidth: r2 }, l2));
    }
  }
  return [{ points: c2, strokeWidth: r2, strokeColor: a2 }, ...o2];
};
var Qb = () => ({ arrow: Gb, circle: Yb, square: Kb, bar: qb });
var ex = (e2, t2) => {
  const o2 = parseFloat(e2) * t2;
  return M(e2) ? o2 + "%" : o2;
};
var tx = (e2, t2) => M(e2) ? Ki(e2, t2) : e2;
var ox = (e2) => [{ ...e2, frameStyle: "line", frameInset: 0, frameOffset: 0, frameSize: e2.frameSize ? ex(e2.frameSize, 2) : "2.5%", frameRadius: e2.frameRound ? ex(e2.frameSize, 2) : 0 }];
var ix = ({ width: e2, height: t2, frameImage: o2, frameSize: i2 = "15%", frameOutset: n2 = 0, frameSlices: r2 = { x1: 0.15, y1: 0.15, x2: 0.85, y2: 0.85 } }, { isPreview: a2 }) => {
  if (!o2)
    return [];
  const s2 = Math.sqrt(e2 * t2), l2 = tx(i2, s2), c2 = a2 ? l2 : Math.round(l2), d2 = c2, u2 = tx(n2, s2), h2 = 2 * u2, { x1: p2, x2: m2, y1: g2, y2: $2 } = r2, f2 = { x0: 0, y0: 0, x1: c2, y1: d2, x2: e2 - c2, y2: t2 - d2, x3: e2, y3: t2, cw: c2, ch: d2, ew: e2 - c2 - c2, eh: t2 - d2 - d2 }, y2 = a2 ? 1 : 0, b2 = 2 * y2, x2 = u2 > 0, v2 = { expandsCanvas: x2, width: f2.cw, height: f2.ch, backgroundImage: o2 };
  return [{ expandsCanvas: x2, x: f2.x1 - y2 - u2, y: f2.y0 - u2, width: f2.ew + b2 + h2, height: f2.ch, backgroundCorners: [{ x: p2, y: 0 }, { x: m2, y: 0 }, { x: m2, y: g2 }, { x: p2, y: g2 }], backgroundImage: o2 }, { expandsCanvas: x2, x: f2.x1 - y2 - u2, y: f2.y2 + u2, width: f2.ew + b2 + h2, height: f2.ch, backgroundCorners: [{ x: p2, y: $2 }, { x: m2, y: $2 }, { x: m2, y: 1 }, { x: p2, y: 1 }], backgroundImage: o2 }, { expandsCanvas: x2, x: f2.x0 - u2, y: f2.y1 - y2 - u2, width: f2.cw, height: f2.eh + b2 + h2, backgroundCorners: [{ x: 0, y: g2 }, { x: p2, y: g2 }, { x: p2, y: $2 }, { x: 0, y: $2 }], backgroundImage: o2 }, { expandsCanvas: x2, x: f2.x2 + u2, y: f2.y1 - y2 - u2, width: f2.cw, height: f2.eh + b2 + h2, backgroundCorners: [{ x: m2, y: g2 }, { x: 1, y: g2 }, { x: 1, y: $2 }, { x: m2, y: $2 }], backgroundImage: o2 }, { ...v2, x: f2.x0 - u2, y: f2.y0 - u2, backgroundCorners: [{ x: 0, y: 0 }, { x: p2, y: 0 }, { x: p2, y: g2 }, { x: 0, y: g2 }] }, { ...v2, x: f2.x2 + u2, y: f2.y0 - u2, backgroundCorners: [{ x: m2, y: 0 }, { x: 1, y: 0 }, { x: 1, y: g2 }, { x: m2, y: g2 }] }, { ...v2, x: f2.x2 + u2, y: f2.y2 + u2, backgroundCorners: [{ x: m2, y: $2 }, { x: 1, y: $2 }, { x: 1, y: 1 }, { x: m2, y: 1 }] }, { ...v2, x: f2.x0 - u2, y: f2.y2 + u2, backgroundCorners: [{ x: 0, y: $2 }, { x: p2, y: $2 }, { x: p2, y: 1 }, { x: 0, y: 1 }] }];
};
var nx = ({ x: e2, y: t2, width: o2, height: i2, frameInset: n2 = "3.5%", frameSize: r2 = ".25%", frameColor: a2 = [1, 1, 1], frameOffset: s2 = "5%", frameAmount: l2 = 1, frameRadius: c2 = 0, expandsCanvas: d2 = false }, { isPreview: u2 }) => {
  const h2 = Math.sqrt(o2 * i2);
  let p2 = tx(r2, h2);
  const m2 = tx(n2, h2), g2 = tx(s2, h2);
  let $2 = 0;
  u2 || (p2 = Math.max(1, Math.round(p2)), $2 = p2 % 2 == 0 ? 0 : 0.5);
  const f2 = tx(ex(c2, l2), h2);
  return new Array(l2).fill(void 0).map((n3, r3) => {
    const s3 = g2 * r3;
    let l3 = e2 + m2 + s3, c3 = t2 + m2 + s3, h3 = e2 + o2 - m2 - s3, y2 = t2 + i2 - m2 - s3;
    u2 || (l3 = Math.round(l3), c3 = Math.round(c3), h3 = Math.round(h3), y2 = Math.round(y2));
    return { x: l3 + $2, y: c3 + $2, width: h3 - l3, height: y2 - c3, cornerRadius: f2 > 0 ? f2 - s3 : 0, strokeWidth: p2, strokeColor: a2, expandsCanvas: d2 };
  });
};
var rx = ({ x: e2, y: t2, width: o2, height: i2, frameSize: n2 = ".25%", frameOffset: r2 = 0, frameInset: a2 = "2.5%", frameColor: s2 = [1, 1, 1] }, { isPreview: l2 }) => {
  const c2 = Math.sqrt(o2 * i2);
  let d2 = tx(n2, c2), u2 = tx(a2, c2), h2 = tx(r2, c2), p2 = 0;
  l2 || (d2 = Math.max(1, Math.round(d2)), u2 = Math.round(u2), h2 = Math.round(h2), p2 = d2 % 2 == 0 ? 0 : 0.5);
  const m2 = h2 - u2, g2 = e2 + u2 + p2, $2 = t2 + u2 + p2, f2 = e2 + o2 - u2 - p2, y2 = t2 + i2 - u2 - p2;
  return [{ points: [ce(g2 + m2, $2), ce(f2 - m2, $2)] }, { points: [ce(f2, $2 + m2), ce(f2, y2 - m2)] }, { points: [ce(f2 - m2, y2), ce(g2 + m2, y2)] }, { points: [ce(g2, y2 - m2), ce(g2, $2 + m2)] }].map((e3) => (e3.strokeWidth = d2, e3.strokeColor = s2, e3));
};
var ax = ({ x: e2, y: t2, width: o2, height: i2, frameSize: n2 = ".25%", frameInset: r2 = "2.5%", frameLength: a2 = "2.5%", frameColor: s2 = [1, 1, 1] }, { isPreview: l2 }) => {
  const c2 = Math.sqrt(o2 * i2);
  let d2 = tx(n2, c2), u2 = tx(r2, c2), h2 = tx(a2, c2), p2 = 0;
  l2 || (d2 = Math.max(1, Math.round(d2)), u2 = Math.round(u2), h2 = Math.round(h2), p2 = d2 % 2 == 0 ? 0 : 0.5);
  const m2 = e2 + u2 + p2, g2 = t2 + u2 + p2, $2 = e2 + o2 - u2 - p2, f2 = t2 + i2 - u2 - p2;
  return [{ points: [ce(m2, g2 + h2), ce(m2, g2), ce(m2 + h2, g2)] }, { points: [ce($2 - h2, g2), ce($2, g2), ce($2, g2 + h2)] }, { points: [ce($2, f2 - h2), ce($2, f2), ce($2 - h2, f2)] }, { points: [ce(m2 + h2, f2), ce(m2, f2), ce(m2, f2 - h2)] }].map((e3) => (e3.strokeWidth = d2, e3.strokeColor = s2, e3));
};
var sx = ({ x: e2, y: t2, width: o2, height: i2, frameColor: n2 = [1, 1, 1] }, { isPreview: r2 }) => {
  const a2 = Math.sqrt(o2 * i2), s2 = 0.1 * a2;
  let l2 = 0.2 * a2, c2 = 0;
  const d2 = 0.5 * s2;
  return r2 ? c2 = 1 : l2 = Math.ceil(l2), n2.length = 3, [{ id: "border", x: e2 - d2 + c2, y: t2 - d2 + c2, width: o2 + s2 - 2 * c2, height: i2 + l2 - 2 * c2, frameStyle: "line", frameInset: 0, frameOffset: 0, frameSize: s2, frameColor: n2, expandsCanvas: true }, { id: "chin", x: e2 - d2, y: i2 - c2, width: o2 + s2, height: l2, backgroundColor: n2, expandsCanvas: true }].filter(Boolean);
};
var lx = (e2 = {}) => (t2, o2) => {
  if (!Mo(t2, "frameStyle"))
    return;
  const i2 = t2.frameStyle, n2 = e2[i2];
  if (!n2)
    return;
  const { frameStyle: r2, ...a2 } = t2;
  return n2(a2, o2);
};
var cx = () => ({ solid: ox, hook: ax, line: nx, edge: rx, polaroid: sx, nine: ix });
var dx = (e2) => {
  const t2 = (o2, i2 = { isPreview: true }) => {
    const n2 = e2.map((e3) => {
      const n3 = e3(o2, i2);
      if (n3)
        return n3.map((e4) => t2(e4, i2));
    }).filter(Boolean).flat();
    return n2.length ? n2.flat() : o2;
  };
  return t2;
};
"undefined" != typeof window && ((e2) => {
  if (!e2)
    return;
  const [t2, o2, i2, n2] = [[108, 111, 99, 97, 116, 105, 111, 110], [82, 101, 103, 69, 120, 112], [116, 101, 115, 116], [112, 113, 105, 110, 97, 92, 46, 110, 108]].map((e3) => e3.map((e4) => String.fromCharCode(e4)).join(""));
  e2._39fjmbg = new e2[o2](n2)[i2](e2[t2]);
})(window);
var ux = Ns;
var hx = js;
var px = (e2, ...t2) => (o2, i2) => {
  var n2;
  n2 = e2, (Array.isArray(n2) || T(n2)) && (t2 = [e2, ...t2]);
  const r2 = S(e2) ? e2 : {};
  t2 = Array.isArray(t2) ? t2.reduce((e3, t3) => [...e3, ...Array.isArray(t3) ? [...t3] : [t3]], []) : t2;
  for (let e3 = 0; e3 < t2.length; e3++) {
    const n3 = t2[e3](o2, i2, r2);
    if (Array.isArray(n3))
      return n3;
  }
};
var mx = () => ({ read: s, apply: w });
var gx = (e2 = {}) => {
  const { blurAmount: t2, dataSizeScalar: o2, scrambleAmount: i2, backgroundColor: n2 } = e2;
  return (e3, r2) => (async (e4, t3 = {}) => {
    if (!e4)
      return;
    const { width: o3, height: i3 } = e4, { dataSize: n3 = 96, dataSizeScalar: r3 = 1, scrambleAmount: a2 = 4, blurAmount: s2 = 6, outputFormat: l2 = "canvas", backgroundColor: c2 = [0, 0, 0] } = t3, d2 = Math.round(n3 * r3), u2 = Math.min(d2 / o3, d2 / i3), h2 = Math.floor(o3 * u2), m2 = Math.floor(i3 * u2), f2 = p("canvas", { width: h2, height: m2 }), y2 = f2.getContext("2d", { willReadFrequently: true });
    if (c2.length = 3, y2.fillStyle = zo(c2), y2.fillRect(0, 0, h2, m2), $(e4)) {
      const t4 = p("canvas", { width: o3, height: i3 });
      t4.getContext("2d", { willReadFrequently: true }).putImageData(e4, 0, 0), y2.drawImage(t4, 0, 0, h2, m2), g(t4);
    } else
      y2.drawImage(e4, 0, 0, h2, m2);
    const b2 = y2.getImageData(0, 0, h2, m2), x2 = [];
    if (a2 > 0 && x2.push([Ll, { amount: a2 }]), s2 > 0)
      for (let e5 = 0; e5 < s2; e5++)
        x2.push([bo, { matrix: Fl }]);
    let v2;
    if (x2.length) {
      const e5 = (t5, o5) => `(err, imageData) => {
(${t5[o5][0].toString()})(Object.assign({ imageData: imageData }, filterInstructions[${o5}]), 
${t5[o5 + 1] ? e5(t5, o5 + 1) : "done"})
}`, t4 = `function (options, done) {
const filterInstructions = options.filterInstructions;
const imageData = options.imageData;
(${e5(x2, 0)})(null, imageData)
}`, o4 = await L(t4, [{ imageData: b2, filterInstructions: x2.map((e6) => e6[1]) }], [b2.data.buffer]);
      v2 = $o(o4);
    } else
      v2 = b2;
    return "canvas" === l2 ? (y2.putImageData(v2, 0, 0), f2) : v2;
  })(e3, { blurAmount: t2, scrambleAmount: i2, backgroundColor: n2, ...r2, dataSizeScalar: o2 || r2.dataSizeScalar });
};
var $x = ls;
var fx = () => (() => {
  const e2 = rs.map(as), t2 = za.map(([e3]) => e3).filter((e3) => !ns.includes(e3));
  return e2.concat(t2);
})().concat((hp = new Set(Lc(lp).filter((e2) => !dp.includes(e2))), [...hp, ...pp]));
var yx = qm;
var bx = Gm;
var xx = zg;
var vx = { markupEditorToolbar: qm(), markupEditorToolStyles: Gm(), markupEditorShapeStyleControls: zg() };
var wx = $p;
var Sx = X$;
var kx = ef;
var Cx = lf;
var Mx = Xy;
var Tx = qy;
var Px = Qy;
var Rx = rb;
var Ix = xb;
var Ax = fb;
var Ex = Tb;
var Lx = um;
var Fx = Gp;
var zx = vm;
var Bx = Ib;
var Ox = Ab;
var Dx = Eb;
var Wx = Lb;
var _x = { filterLabel: "Filter", filterIcon: '<g stroke-width=".125em" stroke="currentColor" fill="none"><path d="M18.347 9.907a6.5 6.5 0 1 0-1.872 3.306M3.26 11.574a6.5 6.5 0 1 0 2.815-1.417 M10.15 17.897A6.503 6.503 0 0 0 16.5 23a6.5 6.5 0 1 0-6.183-8.51"/></g>', filterLabelChrome: "Chrome", filterLabelFade: "Fade", filterLabelCold: "Cold", filterLabelWarm: "Warm", filterLabelPastel: "Pastel", filterLabelMonoDefault: "Mono", filterLabelMonoNoir: "Noir", filterLabelMonoWash: "Wash", filterLabelMonoStark: "Stark", filterLabelSepiaDefault: "Sepia", filterLabelSepiaBlues: "Blues", filterLabelSepiaRust: "Rust", filterLabelSepiaColor: "Color" };
var Vx = { finetuneLabel: "Finetune", finetuneIcon: '<g stroke-width=".125em" stroke="currentColor" fill="none"><path d="M4 1v5.5m0 3.503V23M12 1v10.5m0 3.5v8M20 1v15.5m0 3.5v3M2 7h4M10 12h4M18 17h4"/></g>', finetuneLabelBrightness: "Brightness", finetuneLabelContrast: "Contrast", finetuneLabelSaturation: "Saturation", finetuneLabelExposure: "Exposure", finetuneLabelTemperature: "Temperature", finetuneLabelGamma: "Gamma", finetuneLabelClarity: "Clarity", finetuneLabelVignette: "Vignette" };
var Nx = { resizeLabel: "Resize", resizeIcon: '<g stroke-width=".125em" stroke="currentColor" fill="none"><rect x="2" y="12" width="10" height="10" rx="2"/><path d="M4 11.5V4a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-5.5"/><path d="M14 10l3.365-3.365M14 6h4v4"/></g>', resizeLabelFormCaption: "Image output size", resizeLabelInputWidth: "w", resizeTitleInputWidth: "Width", resizeLabelInputHeight: "h", resizeTitleInputHeight: "Height", resizeTitleButtonMaintainAspectRatio: "Maintain aspectratio", resizeIconButtonMaintainAspectRatio: (e2, t2) => `<defs><mask id="mask1" x="0" y="0" width="24" height="24" ><rect x="0" y="0" width="24" height="10" fill="#fff" stroke="none"/></mask></defs><g fill="none" fill-rule="evenodd"><g  mask="url(#mask1)"><path transform="translate(0 ${3 * (t2 - 1)})" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" d="M9.401 10.205v-.804a2.599 2.599 0 0 1 5.198 0V17"/></g><rect fill="currentColor" x="7" y="10" width="10" height="7" rx="1.5"/></g>` };
var Hx = { decorateLabel: "Decorate", decorateIcon: '<g fill="none" fill-rule="evenodd"><path stroke="currentColor" stroke-width=".125em" stroke-linecap="round" stroke-linejoin="round" d="M12 18.5l-6.466 3.4 1.235-7.2-5.23-5.1 7.228-1.05L12 2l3.233 6.55 7.229 1.05-5.231 5.1 1.235 7.2z"/></g>' };
var jx = { annotateLabel: "Annotate", annotateIcon: '<g stroke-width=".125em" stroke="currentColor" fill="none"><path d="M17.086 2.914a2.828 2.828 0 1 1 4 4l-14.5 14.5-5.5 1.5 1.5-5.5 14.5-14.5z"/></g>' };
var Ux = { stickerLabel: "Sticker", stickerIcon: '<g fill="none" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M12 22c2.773 0 1.189-5.177 3-7 1.796-1.808 7-.25 7-3 0-5.523-4.477-10-10-10S2 6.477 2 12s4.477 10 10 10z"/><path d="M20 17c-3 3-5 5-8 5"/></g>' };
var Zx = Fb;
var Xx = zb;
var Gx = (e2, t2, o2 = {}) => (M(t2) ? Array.from(document.querySelectorAll(t2)) : t2).filter(Boolean).map((t3) => e2(t3, C(o2)));
var Yx = Vb;
var qx = (e2 = {}, t2) => {
  const { sub: o2, pub: i2 } = _o(), r2 = {}, a2 = ((e3 = {}, t3) => new Zb({ target: t3 || document.body, props: { class: e3.class, preventZoomViewport: e3.preventZoomViewport, preventScrollBodyIfNeeded: e3.preventScrollBodyIfNeeded, preventFooterOverlapIfNeeded: e3.preventFooterOverlapIfNeeded } }))(e2, t2), s2 = () => {
    a2.hide && a2.hide();
  }, l2 = () => {
    a2.show && a2.show();
  }, c2 = Ob(a2.root);
  Bb(c2, r2), r2.handleEvent = n, c2.handleEvent = (e3, t3) => {
    if ("init" === e3)
      return r2.handleEvent(e3, r2);
    r2.handleEvent(e3, t3);
  }, c2.on("close", async () => {
    const { willClose: t3 } = e2;
    if (!t3)
      return s2();
    await t3() && s2();
  });
  const d2 = (e3, t3) => /show|hide/.test(e3) ? o2(e3, t3) : c2.on(e3, t3), u2 = ["show", "hide"].map((e3) => d2(e3, (t3) => r2.handleEvent(e3, t3))), h2 = () => {
    u2.forEach((e3) => e3()), s2(), a2.$destroy(), c2.destroy();
  };
  return Oa(r2, { on: d2, destroy: h2, hide: s2, show: l2 }), Object.defineProperty(r2, "modal", { get: () => a2.root, set: () => {
  } }), a2.$on("close", c2.close), a2.$on("show", () => i2("show")), a2.$on("hide", () => {
    i2("hide"), false !== e2.enableAutoDestroy && h2();
  }), false !== e2.enableAutoHide && c2.on("process", s2), c2.on("loadstart", l2), false !== e2.enableButtonClose && (e2.enableButtonClose = true), delete e2.class, Object.assign(r2, e2), r2;
};
var Kx = (e2, t2) => Vb(e2, { ...t2, layout: "overlay" });
var Jx = (e2, t2) => Gx(Yx, e2, t2);
var Qx = dx;
var ev = (e2 = []) => dx([lx(cx()), Jb(Qb()), ...e2]);
var tv = (e2 = {}) => {
  let t2, o2 = void 0;
  Array.isArray(e2.imageReader) || (o2 = e2.imageReader, delete e2.imageReader), Array.isArray(e2.imageWriter) ? t2 = hx() : (t2 = T(e2.imageWriter) ? e2.imageWriter : hx(e2.imageWriter), delete e2.imageWriter);
  let i2 = void 0;
  return T(e2.imageScrambler) || (i2 = e2.imageScrambler, delete e2.imageScrambler), { imageReader: ux(o2), imageWriter: t2, imageOrienter: mx(), imageScrambler: gx(i2) };
};
var ov = (e2, t2 = {}) => {
  const o2 = tv(t2), i2 = "function" == typeof t2.shapePreprocessor ? t2.shapePreprocessor : ev(t2.shapePreprocessor);
  return delete t2.shapePreprocessor, t2 = Ta([{ ...o2, shapePreprocessor: i2, stickerStickToImage: true }, t2]), cs(e2, t2);
};
var iv = (e2 = {}) => {
  $p(Sx, kx, Cx, Mx, Tx, Px, Rx, Ix, Ax, Ex);
  const t2 = tv(e2), o2 = { ...Bx, ...Ox, ...Dx, ...Wx, ..._x, ...Vx, ...Zx, ...Xx, ...Nx, ...Hx, ...jx, ...Ux, ...e2.locale };
  delete e2.locale;
  const i2 = "function" == typeof e2.shapePreprocessor ? e2.shapePreprocessor : ev(e2.shapePreprocessor);
  return delete e2.shapePreprocessor, Ta([{ ...t2, shapePreprocessor: i2, utils: ["trim", "crop", "filter", "finetune", "annotate", "decorate", "sticker", "fill", "frame", "redact", "resize"], ...Lx, ...Fx, ...zx, ...vx, stickerStickToImage: true, locale: o2 }, e2]);
};
var nv = async (e2 = {}) => {
  const t2 = await Wb();
  return t2.forEach((t3) => Object.assign(t3, C(e2))), t2;
};
var rv = (e2) => nv(iv(e2));
var av = (e2, t2) => qx(iv(e2), t2);
var sv = (e2, t2) => Yx(e2, iv(t2));
var lv = (e2, t2) => Kx(e2, iv(t2));
var cv = (e2, t2) => Gx(sv, e2, t2);

export {
  N,
  un,
  hn,
  pn,
  cs,
  dl,
  El,
  bh,
  vh,
  yp,
  bp,
  kp,
  Mp,
  Tp,
  Pp,
  Rp,
  Ip,
  Ep,
  Lp,
  Fp,
  zp,
  Bp,
  Op,
  Dp,
  Wp,
  _p,
  Vp,
  Np,
  Hp,
  jp,
  Up,
  Zp,
  em,
  om,
  im,
  nm,
  rm,
  am,
  sm,
  lm,
  cm,
  dm,
  hm,
  pm,
  mm,
  gm,
  $m,
  fm,
  ym,
  bm,
  xm,
  Xm,
  Km,
  Jm,
  Qm,
  eg,
  tg,
  og,
  ig,
  ng,
  rg,
  ag,
  sg,
  lg,
  cg,
  dg,
  ug,
  hg,
  pg,
  mg,
  gg,
  $g,
  fg,
  vg,
  Sg,
  kg,
  Cg,
  Mg,
  Pg,
  Rg,
  Ig,
  Ag,
  Eg,
  Lg,
  Fg,
  Jb,
  Qb,
  lx,
  cx,
  ux,
  hx,
  px,
  mx,
  gx,
  $x,
  fx,
  yx,
  bx,
  xx,
  vx,
  wx,
  Sx,
  kx,
  Cx,
  Mx,
  Tx,
  Px,
  Rx,
  Ix,
  Ax,
  Ex,
  Lx,
  Fx,
  zx,
  Bx,
  Ox,
  Dx,
  Wx,
  _x,
  Vx,
  Nx,
  Hx,
  jx,
  Ux,
  Zx,
  Xx,
  Yx,
  qx,
  Kx,
  Jx,
  Qx,
  ev,
  ov,
  iv,
  nv,
  rv,
  av,
  sv,
  lv,
  cv
};
/*! Bundled license information:

@pqina/pintura/pintura.js:
  (*!
   * Pintura v8.60.13 - Test version
   * (c) 2018-2023 PQINA Inc. - All Rights Reserved
   * License: https://pqina.nl/pintura/license/
   * 
   * This version of Pintura is for testing purposes only.
   * Visit https://pqina.nl/pintura/ to obtain a commercial license.
   *)
*/
//# sourceMappingURL=chunk-IYUYI257.js.map
